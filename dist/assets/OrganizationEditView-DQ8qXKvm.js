import{d as $,r as w,j as B,y as M,A as j,o as I,c as m,e as f,b as o,f as d,z as v,t as p,k as c,w as x,g as T,p as n,v as i,n as z,q as O,F as q,l as D,h as L,u as R,i as b,x as W}from"./index-DYX0fJsY.js";import{u as H}from"./organizationStore-DdKLZJnm.js";import{r as Y}from"./ExclamationTriangleIcon-D0ASJbQD.js";import{r as G}from"./ArrowPathIcon-FXTFVrlr.js";import{r as S}from"./ChevronRightIcon-DrsVjjEE.js";import{r as J}from"./XMarkIcon-DVCE7Xj_.js";import"./supabaseClient-XVdxyLPD.js";const K={key:0,class:"text-center py-12"},Q={key:1,class:"text-center py-12"},X={class:"text-red-600 mb-4"},Z={class:"text-gray-600 mb-6"},ee={class:"space-x-4"},oe={key:2,class:"max-w-4xl mx-auto space-y-6"},te={class:"flex items-center justify-between"},re={class:"flex items-center space-x-2 text-sm text-gray-500 mb-2"},se={class:"mt-1 text-sm text-gray-500"},le={class:"bg-white shadow-sm rounded-lg border border-gray-200"},ne={class:"px-6 py-6 space-y-6"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie={key:0,class:"mt-1 text-sm text-red-600"},de=["value"],ue={class:"bg-white shadow-sm rounded-lg border border-gray-200"},me={class:"px-6 py-6 space-y-6"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},be={key:0,class:"mt-1 text-sm text-red-600"},ce={key:0,class:"mt-1 text-sm text-red-600"},ge={class:"bg-white shadow-sm rounded-lg border border-gray-200"},ye={class:"px-6 py-6 space-y-6"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ve={class:"md:col-span-2"},xe={class:"md:col-span-2"},we={class:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200"},_e=["disabled"],he={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},Ue=$({__name:"OrganizationEditView",props:{id:{}},setup(E){const _=E,U=W(),h=H(),P=l=>{var u;const e={};return(u=l.name)!=null&&u.trim()||(e.name="Organization name is required"),l.email&&!/^[^@]+@[^@]+\.[^@]+$/.test(l.email)&&(e.email="Please enter a valid email address"),l.website&&!l.website.startsWith("http")&&(e.website="Website must start with http:// or https://"),{isValid:Object.keys(e).length===0,errors:e}},k=w(!1),g=w(null),y=w(!1),a=w({}),s=B(()=>h.currentOrganization),t=M({name:"",industry:"",status:"Prospect",description:"",website:"",email:"",primary_phone:"",employees_count:void 0,address_line_1:"",address_line_2:"",city:"",state_province:"",postal_code:"",country:""}),A=["Technology","Healthcare","Finance","Education","Manufacturing","Retail","Real Estate","Consulting","Non-profit","Government","Media & Entertainment","Transportation","Energy","Agriculture","Construction","Food & Beverage","Telecommunications","Automotive","Aerospace","Other"],V=async()=>{k.value=!0,g.value=null;try{await h.fetchOrganization(_.id),s.value?C():g.value="Organization not found"}catch(l){console.error("Error loading organization:",l),g.value="Failed to load organization. Please try again."}finally{k.value=!1}},C=()=>{s.value&&Object.assign(t,{name:s.value.name||"",industry:s.value.industry||"",status:s.value.status||"Prospect",description:s.value.description||"",website:s.value.website||"",email:s.value.email||"",primary_phone:s.value.primary_phone||"",employees_count:s.value.employees_count,address_line_1:s.value.address_line_1||"",address_line_2:s.value.address_line_2||"",city:s.value.city||"",state_province:s.value.state_province||"",postal_code:s.value.postal_code||"",country:s.value.country||""})},N=()=>{const l=P(t);return a.value=l.errors,l.isValid},F=async()=>{if(!(!N()||!s.value)){y.value=!0;try{await h.updateOrganization(_.id,t),U.push(`/organizations/${_.id}`)}catch(l){if(console.error("Error updating organization:",l),l&&typeof l=="object"&&"details"in l){const e=l.details;a.value={...a.value,...e}}else alert("Failed to update organization. Please try again.")}finally{y.value=!1}}};return j(s,l=>{l&&C()},{immediate:!0}),I(()=>{V()}),(l,e)=>{const u=T("router-link");return k.value?(b(),m("div",K,e[14]||(e[14]=[o("div",{class:"inline-flex items-center"},[o("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),o("span",{class:"text-lg text-gray-600"},"Loading organization...")],-1)]))):g.value?(b(),m("div",Q,[o("div",X,[d(v(Y),{class:"h-16 w-16 mx-auto"})]),e[17]||(e[17]=o("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"Error Loading Organization",-1)),o("p",Z,p(g.value),1),o("div",ee,[o("button",{onClick:V,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200"},[d(v(G),{class:"h-4 w-4 mr-2"}),e[15]||(e[15]=c(" Try Again ",-1))]),d(u,{to:"/organizations",class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:x(()=>e[16]||(e[16]=[c(" Back to Organizations ",-1)])),_:1,__:[16]})])])):s.value?(b(),m("div",oe,[o("div",te,[o("div",null,[o("nav",re,[d(u,{to:"/organizations",class:"hover:text-gray-700"},{default:x(()=>e[18]||(e[18]=[c("Organizations",-1)])),_:1,__:[18]}),d(v(S),{class:"h-4 w-4"}),d(u,{to:`/organizations/${s.value.id}`,class:"hover:text-gray-700"},{default:x(()=>[c(p(s.value.name),1)]),_:1},8,["to"]),d(v(S),{class:"h-4 w-4"}),e[19]||(e[19]=o("span",{class:"text-gray-900"},"Edit",-1))]),e[20]||(e[20]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Edit Organization",-1)),o("p",se," Update information for "+p(s.value.name),1)]),d(u,{to:`/organizations/${s.value.id}`,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:x(()=>[d(v(J),{class:"h-4 w-4 mr-2"}),e[21]||(e[21]=c(" Cancel ",-1))]),_:1,__:[21]},8,["to"])]),o("form",{onSubmit:R(F,["prevent"]),class:"space-y-8"},[o("div",le,[e[29]||(e[29]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Basic Information"),o("p",{class:"mt-1 text-sm text-gray-500"},"Essential details about the organization")],-1)),o("div",ne,[o("div",ae,[o("div",null,[e[22]||(e[22]=o("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Organization Name * ",-1)),n(o("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=r=>t.name=r),type:"text",required:"",class:z(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-500 focus:ring-red-500 focus:border-red-500":a.value.name}]),placeholder:"Enter organization name"},null,2),[[i,t.name]]),a.value.name?(b(),m("p",ie,p(a.value.name),1)):f("",!0)]),o("div",null,[e[24]||(e[24]=o("label",{for:"industry",class:"block text-sm font-medium text-gray-700 mb-2"}," Industry ",-1)),n(o("select",{id:"industry","onUpdate:modelValue":e[1]||(e[1]=r=>t.industry=r),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"},[e[23]||(e[23]=o("option",{value:""},"Select industry",-1)),(b(),m(q,null,D(A,r=>o("option",{key:r,value:r},p(r),9,de)),64))],512),[[O,t.industry]])]),o("div",null,[e[26]||(e[26]=o("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"}," Status * ",-1)),n(o("select",{id:"status","onUpdate:modelValue":e[2]||(e[2]=r=>t.status=r),required:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"},e[25]||(e[25]=[L('<option value="Prospect">Prospect</option><option value="Active">Active</option><option value="Inactive">Inactive</option><option value="Customer">Customer</option><option value="Partner">Partner</option><option value="Vendor">Vendor</option>',6)]),512),[[O,t.status]])]),o("div",null,[e[27]||(e[27]=o("label",{for:"employees_count",class:"block text-sm font-medium text-gray-700 mb-2"}," Employee Count ",-1)),n(o("input",{id:"employees_count","onUpdate:modelValue":e[3]||(e[3]=r=>t.employees_count=r),type:"number",min:"1",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Number of employees"},null,512),[[i,t.employees_count,void 0,{number:!0}]])])]),o("div",null,[e[28]||(e[28]=o("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Description ",-1)),n(o("textarea",{id:"description","onUpdate:modelValue":e[4]||(e[4]=r=>t.description=r),rows:"3",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description of the organization"},null,512),[[i,t.description]])])])]),o("div",ue,[e[33]||(e[33]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Contact Information"),o("p",{class:"mt-1 text-sm text-gray-500"},"How to reach this organization")],-1)),o("div",me,[o("div",pe,[o("div",null,[e[30]||(e[30]=o("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address ",-1)),n(o("input",{id:"email","onUpdate:modelValue":e[5]||(e[5]=r=>t.email=r),type:"email",class:z(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-500 focus:ring-red-500 focus:border-red-500":a.value.email}]),placeholder:"contact@organization.com"},null,2),[[i,t.email]]),a.value.email?(b(),m("p",be,p(a.value.email),1)):f("",!0)]),o("div",null,[e[31]||(e[31]=o("label",{for:"primary_phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Phone Number ",-1)),n(o("input",{id:"primary_phone","onUpdate:modelValue":e[6]||(e[6]=r=>t.primary_phone=r),type:"tel",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"+1 (555) 123-4567"},null,512),[[i,t.primary_phone]])]),o("div",null,[e[32]||(e[32]=o("label",{for:"website",class:"block text-sm font-medium text-gray-700 mb-2"}," Website ",-1)),n(o("input",{id:"website","onUpdate:modelValue":e[7]||(e[7]=r=>t.website=r),type:"url",class:z(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-500 focus:ring-red-500 focus:border-red-500":a.value.website}]),placeholder:"https://www.organization.com"},null,2),[[i,t.website]]),a.value.website?(b(),m("p",ce,p(a.value.website),1)):f("",!0)])])])]),o("div",ge,[e[40]||(e[40]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Address Information"),o("p",{class:"mt-1 text-sm text-gray-500"},"Physical location details")],-1)),o("div",ye,[o("div",fe,[o("div",ve,[e[34]||(e[34]=o("label",{for:"address_line_1",class:"block text-sm font-medium text-gray-700 mb-2"}," Street Address ",-1)),n(o("input",{id:"address_line_1","onUpdate:modelValue":e[8]||(e[8]=r=>t.address_line_1=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"123 Main Street"},null,512),[[i,t.address_line_1]])]),o("div",xe,[e[35]||(e[35]=o("label",{for:"address_line_2",class:"block text-sm font-medium text-gray-700 mb-2"}," Address Line 2 (Optional) ",-1)),n(o("input",{id:"address_line_2","onUpdate:modelValue":e[9]||(e[9]=r=>t.address_line_2=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Suite, unit, building, floor, etc."},null,512),[[i,t.address_line_2]])]),o("div",null,[e[36]||(e[36]=o("label",{for:"city",class:"block text-sm font-medium text-gray-700 mb-2"}," City ",-1)),n(o("input",{id:"city","onUpdate:modelValue":e[10]||(e[10]=r=>t.city=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"New York"},null,512),[[i,t.city]])]),o("div",null,[e[37]||(e[37]=o("label",{for:"state_province",class:"block text-sm font-medium text-gray-700 mb-2"}," State/Province ",-1)),n(o("input",{id:"state_province","onUpdate:modelValue":e[11]||(e[11]=r=>t.state_province=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"NY"},null,512),[[i,t.state_province]])]),o("div",null,[e[38]||(e[38]=o("label",{for:"postal_code",class:"block text-sm font-medium text-gray-700 mb-2"}," Postal Code ",-1)),n(o("input",{id:"postal_code","onUpdate:modelValue":e[12]||(e[12]=r=>t.postal_code=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"10001"},null,512),[[i,t.postal_code]])]),o("div",null,[e[39]||(e[39]=o("label",{for:"country",class:"block text-sm font-medium text-gray-700 mb-2"}," Country ",-1)),n(o("input",{id:"country","onUpdate:modelValue":e[13]||(e[13]=r=>t.country=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"United States"},null,512),[[i,t.country]])])])])]),o("div",we,[d(u,{to:`/organizations/${s.value.id}`,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:x(()=>e[41]||(e[41]=[c(" Cancel ",-1)])),_:1,__:[41]},8,["to"]),o("button",{type:"submit",disabled:y.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[y.value?(b(),m("div",he)):f("",!0),c(" "+p(y.value?"Saving...":"Save Changes"),1)],8,_e)])],32)])):f("",!0)}}});export{Ue as default};
//# sourceMappingURL=OrganizationEditView-DQ8qXKvm.js.map
