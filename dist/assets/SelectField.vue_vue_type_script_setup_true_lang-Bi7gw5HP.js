import{H as X,r as w,c as i,d as G,a as o,b as d,h as b,n as K,e as J,t as C,I as Y,B as R,j as l,F as L,i as H}from"./index-Br7bM97V.js";import{c as D}from"./contactsApi-BCMvmRtV.js";const Ve=X("contact",()=>{const x=w([]),$=w(null),B=w(!1),t=w(!1),m=w(""),v=w(""),g=w(0),h=w(1),V=w(10),E=w("first_name"),f=w("asc"),P=i(()=>x.value.length>0),S=i(()=>Math.ceil(g.value/V.value)),M=i(()=>h.value<S.value),O=i(()=>h.value>1),F=()=>{m.value=""},I=r=>{m.value=r,console.error("Contact Store Error:",r)},k=async(r={})=>{try{B.value=!0,F();const s=r.search||v.value,n=r.offset||(h.value-1)*V.value,A=r.limit||V.value,U=r.sortBy||E.value,W=r.sortOrder||f.value,N=await D.getContacts({search:(s==null?void 0:s.trim())||void 0,offset:n,limit:A,sortBy:U,sortOrder:W});if(N.success&&N.data)x.value=N.data,g.value=N.data.length;else throw new Error(N.error||"Failed to fetch contacts")}catch(s){const n=s instanceof Error?s.message:"Failed to fetch contacts";I(n)}finally{B.value=!1}},a=async r=>{try{B.value=!0,F();const s=await D.getContact(r);if(s.success&&s.data)return $.value=s.data,s.data;throw new Error(s.error||"Failed to fetch contact")}catch(s){const n=s instanceof Error?s.message:"Failed to fetch contact";return I(n),$.value=null,null}finally{B.value=!1}},y=async r=>{try{t.value=!0,F();const s=await D.createContact(r);if(s.success&&s.data)return await k(),s.data;throw new Error(s.error||"Failed to create contact")}catch(s){const n=s instanceof Error?s.message:"Failed to create contact";return I(n),null}finally{t.value=!1}},q=async(r,s)=>{try{t.value=!0,F();const n=await D.updateContact(r,s);if(n.success&&n.data)return $.value=n.data,await k(),n.data;throw new Error(n.error||"Failed to update contact")}catch(n){const A=n instanceof Error?n.message:"Failed to update contact";return I(A),null}finally{t.value=!1}},z=async r=>{var s;try{t.value=!0,F();const n=await D.deleteContact(r);if(n.success)return((s=$.value)==null?void 0:s.id)===r&&($.value=null),await k(),!0;throw new Error(n.error||"Failed to delete contact")}catch(n){const A=n instanceof Error?n.message:"Failed to delete contact";return I(A),!1}finally{t.value=!1}},T=async r=>{v.value=r,h.value=1,await k({search:r})},j=async()=>{v.value="",h.value=1,await k()},e=async r=>{r>=1&&r<=S.value&&(h.value=r,await k())};return{contacts:x,currentContact:$,isLoading:B,isSubmitting:t,errorMessage:m,searchQuery:v,currentPage:h,pageSize:V,totalCount:g,sortBy:E,sortOrder:f,hasContacts:P,totalPages:S,hasNextPage:M,hasPreviousPage:O,fetchContacts:k,fetchContact:a,createContact:y,updateContact:q,deleteContact:z,searchContacts:T,clearSearch:j,setPage:e,nextPage:async()=>{M.value&&await e(h.value+1)},previousPage:async()=>{O.value&&await e(h.value-1)},setSorting:async(r,s)=>{E.value=r,f.value=s,h.value=1,await k()},clearError:F,resetStore:()=>{x.value=[],$.value=null,B.value=!1,t.value=!1,m.value="",v.value="",h.value=1,g.value=0,E.value="first_name",f.value="asc"}}}),Z={class:"space-y-1"},_=["for"],ee={key:0,class:"text-danger ml-1","aria-label":"required"},ae=["id"],te={class:"relative"},se=["id","type","name","placeholder","readonly","disabled","required","min","max","step","maxlength","minlength","pattern","value","aria-describedby","aria-invalid","aria-required"],re={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-4","aria-hidden":"true"},oe={key:1,class:"absolute inset-y-0 right-0 flex items-center pr-4","aria-hidden":"true"},le=["id"],ne=["id"],Ee=G({__name:"BaseInputField",props:{name:{},label:{},type:{default:"text"},modelValue:{},error:{},placeholder:{},description:{},helpText:{},required:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean},showValidIcon:{type:Boolean,default:!0},autocomplete:{default:"off"},min:{},max:{},step:{},maxlength:{},minlength:{},pattern:{},inputClass:{},labelClass:{}},emits:["update:modelValue","blur","focus","input","keydown","validate"],setup(x,{expose:$,emit:B}){const t=x,m=B,v=w(!1),g=i(()=>`field-${t.name}`),h=i(()=>`error-${t.name}`),V=i(()=>`desc-${t.name}`),E=i(()=>`help-${t.name}`),f=i(()=>!!t.error),P=i(()=>{const a=[];return t.description&&a.push(V.value),t.error&&a.push(h.value),t.helpText&&!t.error&&a.push(E.value),a.length>0?a.join(" "):void 0}),S=i(()=>{const a="form-label transition-colors duration-200",y=f.value?"text-danger-700":v.value?"text-primary-600":"text-gray-700",q=t.disabled?"opacity-60":"",z=t.labelClass||"";return`${a} ${y} ${q} ${z}`.trim()}),M=i(()=>{const a="w-full min-h-input px-4 py-3 border rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:border-transparent",y=f.value?"border-danger-300 bg-danger-50 focus:ring-danger-500 focus:bg-white text-gray-900":v.value?"border-primary-500 bg-white focus:ring-primary-500":"border-gray-300 bg-white hover:border-gray-400 focus:ring-primary-500",q=t.disabled?"bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200":"",z=t.readonly?"bg-gray-50 cursor-default border-gray-200":"",T=t.loading||t.showValidIcon&&!f.value&&t.modelValue?"pr-12":"",j=t.inputClass||"";return`${a} ${y} ${q} ${z} ${T} ${j}`.trim()}),O=a=>{const y=a.target,q=t.type==="number"?Number(y.value):y.value;m("update:modelValue",q),m("input",a)},F=async a=>{v.value=!1,m("blur",a),await R(),m("validate",t.modelValue)},I=a=>{v.value=!0,m("focus",a)},k=a=>{m("keydown",a),a.key==="Escape"&&v.value&&a.target.blur()};return $({focus:()=>{const a=document.getElementById(g.value);a==null||a.focus()},blur:()=>{const a=document.getElementById(g.value);a==null||a.blur()},select:()=>{const a=document.getElementById(g.value);a==null||a.select()}}),(a,y)=>(l(),o("div",Z,[d("label",{for:g.value,class:K(S.value)},[J(C(a.label)+" ",1),a.required?(l(),o("span",ee,"*")):b("",!0)],10,_),a.description?(l(),o("p",{key:0,id:V.value,class:"text-sm text-gray-600"},C(a.description),9,ae)):b("",!0),d("div",te,[d("input",Y({id:g.value,type:a.type,name:a.name,placeholder:a.placeholder},a.autocomplete?{autocomplete:a.autocomplete}:{},{readonly:a.readonly||void 0,disabled:a.disabled||void 0,required:a.required,min:a.min,max:a.max,step:a.step,maxlength:a.maxlength,minlength:a.minlength,pattern:a.pattern,value:a.modelValue,"aria-describedby":P.value,"aria-invalid":f.value,"aria-required":a.required,class:M.value,onInput:O,onBlur:F,onFocus:I,onKeydown:k}),null,16,se),a.loading?(l(),o("div",re,y[0]||(y[0]=[d("svg",{class:"h-5 w-5 animate-spin text-gray-400",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):b("",!0),a.showValidIcon&&!f.value&&a.modelValue&&!a.loading?(l(),o("div",oe,y[1]||(y[1]=[d("svg",{class:"h-5 w-5 text-success-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):b("",!0)]),a.error?(l(),o("p",{key:1,id:h.value,role:"alert",class:"form-error"},[y[2]||(y[2]=d("svg",{class:"h-4 w-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),d("span",null,C(a.error),1)],8,le)):b("",!0),a.helpText&&!a.error?(l(),o("p",{key:2,id:E.value,class:"form-help"},C(a.helpText),9,ne)):b("",!0)]))}}),ie={class:"space-y-1"},ue=["for"],de={key:0,class:"text-danger ml-1","aria-label":"required"},ce=["id"],pe={class:"relative"},me=["id","name","disabled","required","multiple","size","value","aria-describedby","aria-invalid","aria-required"],ve=["disabled"],he=["label"],ye=["value","disabled"],ge=["value"],fe={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none","aria-hidden":"true"},be={key:1,class:"absolute inset-y-0 right-8 flex items-center pr-3","aria-hidden":"true"},we=["id"],Ce=["id"],ke={key:3,class:"text-sm text-gray-600"},Fe=G({__name:"SelectField",props:{name:{},label:{},modelValue:{},options:{},error:{},placeholder:{default:"Select an option"},description:{},helpText:{},required:{type:Boolean},disabled:{type:Boolean},multiple:{type:Boolean},size:{},loading:{type:Boolean},selectClass:{},labelClass:{}},emits:["update:modelValue","blur","focus","change","keydown","validate"],setup(x,{expose:$,emit:B}){const t=x,m=B,v=w(!1),g=i(()=>`select-${t.name}`),h=i(()=>`error-${t.name}`),V=i(()=>`desc-${t.name}`),E=i(()=>`help-${t.name}`),f=i(()=>!!t.error),P=i(()=>{const e=[];return t.description&&e.push(V.value),t.error&&e.push(h.value),t.helpText&&!t.error&&e.push(E.value),e.length>0?e.join(" "):void 0}),S=i(()=>t.options.length>0&&typeof t.options[0]=="object"),M=i(()=>{if(!S.value)return[];const e=t.options,u=new Map;return e.forEach(c=>{const p=c.group||"Options";u.has(p)||u.set(p,[]),u.get(p).push(c)}),Array.from(u.entries()).map(([c,p])=>({label:c,options:p}))}),O=e=>e.value,F=e=>e.value,I=e=>e.label,k=e=>e.disabled||!1,a=i(()=>{const e="block text-sm font-medium transition-colors duration-200",u=f.value?"text-red-700":v.value?"text-primary":"text-gray-700",c=t.disabled?"opacity-60":"",p=t.labelClass||"";return`${e} ${u} ${c} ${p}`.trim()}),y=i(()=>{const e="w-full px-3 py-2 border rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:border-transparent",u=f.value?"border-red-500 bg-red-50 focus:ring-red-500 focus:bg-white":v.value?"border-primary bg-white focus:ring-primary":"border-gray-300 bg-white hover:border-gray-400 focus:ring-primary",c=t.disabled?"bg-gray-100 text-gray-500 cursor-not-allowed":"cursor-pointer",p=t.multiple?"py-1":"pr-10",Q=t.loading?"pr-16":"",r=t.selectClass||"";return`${e} ${u} ${c} ${p} ${Q} ${r}`.trim()}),q=e=>{const u=e.target;if(t.multiple){const c=[];for(let p=0;p<u.options.length;p++)u.options[p].selected&&c.push(u.options[p].value);m("update:modelValue",c)}else m("update:modelValue",u.value);m("change",e)},z=async e=>{v.value=!1,m("blur",e),await R(),m("validate",t.modelValue)},T=e=>{v.value=!0,m("focus",e)},j=e=>{m("keydown",e),e.key==="Escape"&&v.value&&e.target.blur(),e.key===" "&&!t.multiple&&(e.preventDefault(),e.target.click())};return $({focus:()=>{const e=document.getElementById(g.value);e==null||e.focus()},blur:()=>{const e=document.getElementById(g.value);e==null||e.blur()}}),(e,u)=>(l(),o("div",ie,[d("label",{for:g.value,class:K(a.value)},[J(C(e.label)+" ",1),e.required?(l(),o("span",de,"*")):b("",!0)],10,ue),e.description?(l(),o("p",{key:0,id:V.value,class:"text-sm text-gray-600"},C(e.description),9,ce)):b("",!0),d("div",pe,[d("select",{id:g.value,name:e.name,disabled:e.disabled,required:e.required,multiple:e.multiple,size:e.multiple?e.size||Math.min(e.options.length,5):void 0,value:e.modelValue,"aria-describedby":P.value,"aria-invalid":f.value,"aria-required":e.required,class:K(y.value),onChange:q,onBlur:z,onFocus:T,onKeydown:j},[!e.multiple&&e.placeholder?(l(),o("option",{key:0,value:"",disabled:e.required},C(e.placeholder),9,ve)):b("",!0),S.value?(l(!0),o(L,{key:1},H(M.value,c=>(l(),o("optgroup",{key:c.label,label:c.label},[(l(!0),o(L,null,H(c.options,p=>(l(),o("option",{key:O(p),value:F(p),disabled:k(p)},C(I(p)),9,ye))),128))],8,he))),128)):(l(!0),o(L,{key:2},H(e.options,c=>(l(),o("option",{key:String(c),value:c},C(c),9,ge))),128))],42,me),e.multiple?b("",!0):(l(),o("div",fe,[(l(),o("svg",{class:K(["h-4 w-4 text-gray-400",{"text-red-500":f.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},u[0]||(u[0]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])),e.loading?(l(),o("div",be,u[1]||(u[1]=[d("svg",{class:"h-4 w-4 animate-spin text-gray-400",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):b("",!0)]),e.error?(l(),o("p",{key:1,id:h.value,role:"alert",class:"text-sm text-danger flex items-center space-x-1"},[u[2]||(u[2]=d("svg",{class:"h-4 w-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),d("span",null,C(e.error),1)],8,we)):b("",!0),e.helpText&&!e.error?(l(),o("p",{key:2,id:E.value,class:"text-sm text-gray-500"},C(e.helpText),9,Ce)):b("",!0),e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0?(l(),o("p",ke,C(e.modelValue.length)+" item"+C(e.modelValue.length===1?"":"s")+" selected ",1)):b("",!0)]))}});export{Ee as _,Fe as a,Ve as u};
//# sourceMappingURL=SelectField.vue_vue_type_script_setup_true_lang-Bi7gw5HP.js.map
