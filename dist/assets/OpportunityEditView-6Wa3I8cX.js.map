{"version":3,"file":"OpportunityEditView-6Wa3I8cX.js","sources":["../../src/views/opportunities/OpportunityEditView.vue"],"sourcesContent":["<template>\n  <div class=\"opportunity-edit-view\">\n      <!-- Loading State -->\n      <div v-if=\"loading\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\">\n        <div class=\"flex justify-center\">\n          <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n        </div>\n        <p class=\"text-center text-gray-500 mt-4\">Loading opportunity details...</p>\n      </div>\n\n      <!-- Error State -->\n      <div v-else-if=\"error\" class=\"bg-white rounded-lg shadow-sm border border-red-200 p-6\">\n        <div class=\"flex items-center mb-4\">\n          <svg class=\"h-5 w-5 text-red-400 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          <span class=\"text-red-700\">{{ error }}</span>\n        </div>\n        <div class=\"flex space-x-3\">\n          <router-link\n            to=\"/opportunities\"\n            class=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\"\n          >\n            Back to Opportunities\n          </router-link>\n          <button\n            @click=\"loadOpportunity\"\n            class=\"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n\n      <!-- Edit Form -->\n      <div v-else-if=\"opportunity\">\n        <!-- Breadcrumb Navigation -->\n        <nav class=\"flex mb-4\" aria-label=\"Breadcrumb\">\n          <ol class=\"inline-flex items-center space-x-1 md:space-x-3\">\n            <li class=\"inline-flex items-center\">\n              <router-link\n                to=\"/\"\n                class=\"inline-flex items-center text-sm font-medium text-gray-700 hover:text-primary-600\"\n              >\n                <svg class=\"w-3 h-3 mr-2.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path d=\"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z\"/>\n                </svg>\n                Dashboard\n              </router-link>\n            </li>\n            <li>\n              <div class=\"flex items-center\">\n                <svg class=\"w-3 h-3 text-gray-400 mx-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m9 5 7 7-7 7\"></path>\n                </svg>\n                <router-link\n                  to=\"/opportunities\"\n                  class=\"ml-1 text-sm font-medium text-gray-700 hover:text-primary-600 md:ml-2\"\n                >\n                  Opportunities\n                </router-link>\n              </div>\n            </li>\n            <li>\n              <div class=\"flex items-center\">\n                <svg class=\"w-3 h-3 text-gray-400 mx-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m9 5 7 7-7 7\"></path>\n                </svg>\n                <router-link\n                  :to=\"`/opportunities/${opportunity.id}`\"\n                  class=\"ml-1 text-sm font-medium text-gray-700 hover:text-primary-600 md:ml-2\"\n                >\n                  {{ opportunity.name }}\n                </router-link>\n              </div>\n            </li>\n            <li aria-current=\"page\">\n              <div class=\"flex items-center\">\n                <svg class=\"w-3 h-3 text-gray-400 mx-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m9 5 7 7-7 7\"></path>\n                </svg>\n                <span class=\"ml-1 text-sm font-medium text-gray-500 md:ml-2\">Edit</span>\n              </div>\n            </li>\n          </ol>\n        </nav>\n\n        <!-- Page Header -->\n        <div class=\"mb-8\">\n          <!-- Header Content -->\n          <div class=\"flex items-center space-x-3 mb-4\">\n            <router-link\n              :to=\"`/opportunities/${opportunity.id}`\"\n              class=\"inline-flex items-center text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-md p-1\"\n              :aria-label=\"'Back to opportunity details'\"\n            >\n              <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </router-link>\n            <div>\n              <h1 class=\"text-3xl font-bold text-gray-900\">Edit Opportunity</h1>\n              <p class=\"mt-2 text-gray-600\">\n                Update opportunity details, stage, and associated information.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <!-- Opportunity Form -->\n        <div class=\"max-w-4xl\">\n          <OpportunityFormWrapper\n            :is-editing=\"true\"\n            :existing-opportunity=\"opportunity\"\n            @success=\"handleSuccess\"\n            @cancel=\"handleCancel\"\n            @error=\"handleError\"\n          />\n        </div>\n        \n        <!-- Error Display -->\n        <div v-if=\"submitError\" class=\"mt-6 max-w-4xl\">\n          <div class=\"p-4 border border-red-300 rounded-md bg-red-50\">\n            <div class=\"flex\">\n              <svg class=\"h-5 w-5 text-red-400 mr-2 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <div>\n                <h3 class=\"text-sm font-medium text-red-800\">Error updating opportunity</h3>\n                <p class=\"mt-1 text-sm text-red-700\">{{ submitError }}</p>\n                <div class=\"mt-3\">\n                  <button\n                    @click=\"clearError\"\n                    class=\"text-sm font-medium text-red-800 hover:text-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 rounded-md px-2 py-1\"\n                  >\n                    Dismiss\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Success Message (shown briefly before navigation) -->\n        <div v-if=\"successMessage\" class=\"mt-6 max-w-4xl\">\n          <div class=\"p-4 border border-green-300 rounded-md bg-green-50\">\n            <div class=\"flex\">\n              <svg class=\"h-5 w-5 text-green-400 mr-2 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\n              </svg>\n              <div>\n                <h3 class=\"text-sm font-medium text-green-800\">Success!</h3>\n                <p class=\"mt-1 text-sm text-green-700\">{{ successMessage }}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useOpportunityStore } from '@/stores/opportunityStore'\nimport OpportunityFormWrapper from '@/components/opportunities/OpportunityFormWrapper.vue'\nimport type { OpportunityDetailView } from '@/types/opportunities'\n\n// Dependencies\nconst route = useRoute()\nconst router = useRouter()\nconst opportunityStore = useOpportunityStore()\n\n// Get opportunity ID from route params\nconst opportunityId = route.params.id as string\n\n// ===============================\n// REACTIVE STATE\n// ===============================\n\nconst opportunity = ref<OpportunityDetailView | null>(null)\nconst loading = ref(true)\nconst error = ref<string | null>(null)\nconst submitError = ref<string | null>(null)\nconst successMessage = ref<string | null>(null)\n\n// ===============================\n// DATA LOADING\n// ===============================\n\n/**\n * Load opportunity details for editing\n */\nconst loadOpportunity = async () => {\n  try {\n    loading.value = true\n    error.value = null\n    \n    await opportunityStore.fetchOpportunityById(opportunityId)\n    \n    if (opportunityStore.selectedOpportunity) {\n      opportunity.value = opportunityStore.selectedOpportunity\n    } else {\n      error.value = opportunityStore.error || 'Opportunity not found'\n    }\n  } catch (err) {\n    console.error('Error loading opportunity:', err)\n    error.value = 'An unexpected error occurred while loading the opportunity'\n  } finally {\n    loading.value = false\n  }\n}\n\n// ===============================\n// EVENT HANDLERS\n// ===============================\n\n/**\n * Handle successful opportunity update\n * Navigate back to the opportunity detail page\n */\nconst handleSuccess = (data: { opportunityId?: string; opportunityIds?: string[]; count?: number }) => {\n  console.log('Opportunity updated successfully:', data)\n  \n  // Clear any previous errors\n  submitError.value = null\n  \n  // Show success message\n  successMessage.value = 'Opportunity updated successfully! Redirecting to details...'\n  \n  // Brief delay to show success message before navigation\n  setTimeout(() => {\n    router.push(`/opportunities/${data.opportunityId}`)\n  }, 1500)\n}\n\n/**\n * Handle form cancellation\n * Navigate back to opportunity detail page\n */\nconst handleCancel = () => {\n  // Clear any messages\n  submitError.value = null\n  successMessage.value = null\n  \n  // Navigate back to opportunity detail page\n  if (opportunity.value) {\n    router.push(`/opportunities/${opportunity.value.id}`)\n  } else {\n    router.push('/opportunities')\n  }\n}\n\n/**\n * Handle form submission error\n */\nconst handleError = (error: string | Error) => {\n  console.error('Opportunity update error:', error)\n  \n  // Clear success message if any\n  successMessage.value = null\n  \n  // Set error message\n  submitError.value = typeof error === 'string' ? error : error.message || 'An unexpected error occurred'\n}\n\n/**\n * Clear error message\n */\nconst clearError = () => {\n  submitError.value = null\n}\n\n// ===============================\n// LIFECYCLE\n// ===============================\n\nonMounted(() => {\n  loadOpportunity()\n})\n</script>\n\n<style scoped>\n.opportunity-edit-view {\n  @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6;\n}\n\n/* Breadcrumb enhancements */\n.opportunity-edit-view nav ol li a:hover {\n  @apply text-primary-600;\n}\n\n.opportunity-edit-view nav ol li[aria-current=\"page\"] span {\n  color: rgb(107 114 128); /* text-gray-500 */\n}\n\n/* Back button enhancements */\n.opportunity-edit-view a[aria-label]:hover {\n  @apply bg-gray-50;\n}\n\n/* Responsive design */\n@media (max-width: 1024px) {\n  .opportunity-edit-view {\n    @apply px-4;\n  }\n}\n\n@media (max-width: 768px) {\n  .opportunity-edit-view {\n    @apply px-2 py-4;\n  }\n  \n  /* Stack header elements on mobile */\n  .opportunity-edit-view .flex.items-center.space-x-3 {\n    @apply flex-col items-start space-x-0 space-y-3;\n  }\n  \n  .opportunity-edit-view .flex.items-center.space-x-3 > a {\n    @apply self-start;\n  }\n}\n\n/* Accessibility enhancements */\n@media (prefers-reduced-motion: reduce) {\n  * {\n    transition: none !important;\n  }\n}\n\n/* High contrast mode */\n@media (prefers-contrast: high) {\n  .opportunity-edit-view .border-red-300 {\n    @apply border-red-600;\n  }\n  \n  .opportunity-edit-view .border-green-300 {\n    @apply border-green-600;\n  }\n  \n  .opportunity-edit-view .text-gray-500 {\n    color: rgb(31 41 55); /* gray-800 */\n  }\n  \n  .opportunity-edit-view .text-gray-600 {\n    color: rgb(17 24 39); /* gray-900 */\n  }\n}\n\n/* Print styles */\n@media print {\n  .opportunity-edit-view nav,\n  .opportunity-edit-view button {\n    @apply hidden;\n  }\n  \n  .opportunity-edit-view {\n    @apply shadow-none;\n  }\n}\n</style>"],"names":["route","useRoute","router","useRouter","opportunityStore","useOpportunityStore","opportunityId","opportunity","ref","loading","error","submitError","successMessage","loadOpportunity","err","handleSuccess","data","handleCancel","handleError","clearError","onMounted","_openBlock","_createElementBlock","_hoisted_1","_hoisted_2","_cache","_createElementVNode","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","_createVNode","_component_router_link","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_createTextVNode","_hoisted_13","_hoisted_14","_hoisted_15","OpportunityFormWrapper","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23"],"mappings":"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"}