import{d as ne,c as S,r as w,a as i,b as e,A as B,n as h,s as D,t as u,j as l,h as x,F as te,i as se,e as V,p as K,J as ie,l as L,K as ue,o as ve,y as de,f as oe,w as ce,g as pe,v as ge,m as ae,q as me,k as be}from"./index-CtjJHjR0.js";import{u as re}from"./productStore-9Dx38iZU.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as fe}from"./products-D6Cb96df.js";import"./supabaseClient-Dum322BS.js";import"./index.esm-Do0MT1Iq.js";const ye={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 lg:gap-6",role:"region","aria-label":"Product Key Performance Indicators"},he={class:"kpi-card-content"},ke={class:"kpi-details"},xe={key:0,class:"loading-placeholder"},we={key:1},_e={class:"kpi-card-content"},Ce={class:"kpi-details"},$e={key:0,class:"loading-placeholder"},Me={key:1},Se={class:"kpi-card-content"},Pe={class:"kpi-details"},Be={key:0,class:"loading-placeholder"},De={key:1},je={class:"kpi-subtitle"},Ae={class:"kpi-card-content"},Ie={class:"kpi-details"},Fe={key:0,class:"loading-placeholder"},Ve={key:1},Te=ne({__name:"ProductKPICards",props:{loading:{type:Boolean,default:!1},customStats:{default:null}},emits:["cardClick"],setup(R,{emit:P}){const g=R,k=P,v=re(),r=S(()=>g.customStats||v.stats),m=S(()=>g.loading||v.isLoading),b=w(null),f=d=>{b.value=d,setTimeout(()=>{b.value=null},300),k("cardClick",d)},j=d=>d>=1e9?(d/1e9).toFixed(1)+"B":d>=1e6?(d/1e6).toFixed(1)+"M":d>=1e3?(d/1e3).toFixed(1)+"K":d.toString(),$=d=>Math.round(d)+"%",M=()=>{var d;return(d=r.value)!=null&&d.products_by_category?Object.values(r.value.products_by_category).filter(s=>s>0).length:0},p=()=>{var d;return(d=r.value)!=null&&d.most_common_category?`Most: ${r.value.most_common_category}`:"No category"},A=()=>{var _;const d=((_=r.value)==null?void 0:_.active_products)||0;return d===0?0:Math.floor(d*.85)/d*100};return(d,s)=>{var _,I;return l(),i("div",ye,[e("div",{class:h(["kpi-card",{"kpi-card-clicked":b.value==="total"}]),onClick:s[0]||(s[0]=y=>f("total")),tabindex:"0",role:"button","aria-label":"View all products",onKeydown:[s[1]||(s[1]=B(y=>f("total"),["enter"])),s[2]||(s[2]=B(D(y=>f("total"),["prevent"]),["space"]))]},[e("div",he,[s[14]||(s[14]=e("div",{class:"kpi-icon kpi-icon-blue"},[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),e("div",ke,[s[12]||(s[12]=e("div",{class:"kpi-label"},"Total Products",-1)),e("div",{class:h(["kpi-value",{"kpi-loading":m.value}])},[m.value?(l(),i("span",xe,"--")):(l(),i("span",we,u(j(((_=r.value)==null?void 0:_.total_products)||0)),1))],2),s[13]||(s[13]=e("div",{class:"kpi-subtitle"},"In catalog",-1))])])],34),e("div",{class:h(["kpi-card",{"kpi-card-clicked":b.value==="active"}]),onClick:s[3]||(s[3]=y=>f("active")),tabindex:"0",role:"button","aria-label":"View active products",onKeydown:[s[4]||(s[4]=B(y=>f("active"),["enter"])),s[5]||(s[5]=B(D(y=>f("active"),["prevent"]),["space"]))]},[e("div",_e,[s[17]||(s[17]=e("div",{class:"kpi-icon kpi-icon-green"},[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Ce,[s[15]||(s[15]=e("div",{class:"kpi-label"},"Active Products",-1)),e("div",{class:h(["kpi-value",{"kpi-loading":m.value}])},[m.value?(l(),i("span",$e,"--")):(l(),i("span",Me,u(j(((I=r.value)==null?void 0:I.active_products)||0)),1))],2),s[16]||(s[16]=e("div",{class:"kpi-subtitle"},"Available for sale",-1))])])],34),e("div",{class:h(["kpi-card",{"kpi-card-clicked":b.value==="categories"}]),onClick:s[6]||(s[6]=y=>f("categories")),tabindex:"0",role:"button","aria-label":"View categories breakdown",onKeydown:[s[7]||(s[7]=B(y=>f("categories"),["enter"])),s[8]||(s[8]=B(D(y=>f("categories"),["prevent"]),["space"]))]},[e("div",Se,[s[19]||(s[19]=e("div",{class:"kpi-icon kpi-icon-purple"},[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1)),e("div",Pe,[s[18]||(s[18]=e("div",{class:"kpi-label"},"Categories",-1)),e("div",{class:h(["kpi-value",{"kpi-loading":m.value}])},[m.value?(l(),i("span",Be,"--")):(l(),i("span",De,u(M()),1))],2),e("div",je,u(p()),1)])])],34),e("div",{class:h(["kpi-card",{"kpi-card-clicked":b.value==="principals"}]),onClick:s[9]||(s[9]=y=>f("principals")),tabindex:"0",role:"button","aria-label":"View principal assignments",onKeydown:[s[10]||(s[10]=B(y=>f("principals"),["enter"])),s[11]||(s[11]=B(D(y=>f("principals"),["prevent"]),["space"]))]},[e("div",Ae,[s[22]||(s[22]=e("div",{class:"kpi-icon kpi-icon-emerald"},[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",Ie,[s[20]||(s[20]=e("div",{class:"kpi-label"},"Principal Coverage",-1)),e("div",{class:h(["kpi-value",{"kpi-loading":m.value}])},[m.value?(l(),i("span",Fe,"--%")):(l(),i("span",Ve,u($(A())),1))],2),s[21]||(s[21]=e("div",{class:"kpi-subtitle"},"With assignments",-1))])])],34)])}}}),ze=le(Te,[["__scopeId","data-v-b7324940"]]),Ne={class:"product-table-container"},Le={key:0,class:"celebration-confetti absolute inset-0 pointer-events-none z-50","aria-hidden":"true"},He={key:1,class:"bg-blue-50 border border-blue-200 rounded-t-lg p-4 bulk-actions-bar"},Ke={class:"flex items-center justify-between"},Re={class:"flex items-center space-x-3"},Oe={class:"text-sm font-medium text-blue-900 selection-count"},Ee={class:"selection-icon"},Ue={class:"selection-encouragement"},Ye={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Ge={class:"overflow-x-auto"},We={class:"min-w-full divide-y divide-gray-200"},qe={class:"bg-gray-50"},Je={scope:"col",class:"px-4 py-3 text-left"},Qe=["checked",".indeterminate"],Xe={class:"flex items-center space-x-1"},Ze={class:"flex items-center space-x-1"},et={class:"flex items-center space-x-1"},tt={class:"flex items-center space-x-1"},st={class:"bg-white divide-y divide-gray-200"},ot={key:1,class:"empty-state-row"},at={colspan:"8",class:"px-6 py-16 text-center"},nt={class:"empty-state-container"},rt={class:"empty-state-content"},lt={class:"empty-state-title"},it={class:"empty-state-message"},dt=["onClick","onMouseenter","onMouseleave"],ct=["value","aria-label"],ut={class:"px-6 py-4 whitespace-nowrap"},vt={class:"flex items-center"},pt={class:"flex-shrink-0 h-10 w-10"},gt={class:"product-icon-container h-10 w-10 rounded-lg bg-gray-100 flex items-center justify-center transition-all duration-300"},mt={class:"product-icon text-lg transition-transform duration-200"},bt={class:"ml-4"},ft={class:"text-sm font-medium text-gray-900"},yt={key:0,class:"text-sm text-gray-500"},ht={class:"px-6 py-4 whitespace-nowrap"},kt={key:1,class:"text-gray-400 text-sm"},xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},wt={key:0},_t={key:1,class:"text-gray-400"},Ct={class:"px-6 py-4 whitespace-nowrap"},$t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Mt={class:"flex items-center"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Pt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Bt={class:"flex items-center space-x-2"},Dt=["onClick","aria-label"],jt=["onClick","aria-label"],At=["onClick","aria-label"],It={key:2,class:"pagination-footer bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Ft={class:"flex items-center justify-between"},Vt={class:"flex items-center space-x-2 text-sm text-gray-700"},Tt={key:0,class:"selected-indicator"},zt={key:0,class:"text-sm text-gray-500"},Nt=ne({__name:"ProductTable",props:{loading:{type:Boolean,default:!1}},emits:["rowClick","edit","delete","duplicate","bulkDelete","createNew","sortChange"],setup(R,{emit:P}){const g=P,k=re(),v=S(()=>k.products),r=w([]),m=w("created_at"),b=w("desc"),f=w(!1),j=w(null),$=w(""),M=S(()=>v.value.length>0&&r.value.length===v.value.length),p=S(()=>r.value.length>0&&r.value.length<v.value.length),A=()=>{M.value?r.value=[]:r.value=v.value.map(o=>o.id)},d=()=>{r.value=[]},s=async()=>{if(r.value.length===0)return;const o={operation:"activate",product_ids:r.value,parameters:{is_active:!0}};if(await k.performBulkOperation(o)){const n=r.value.length;N(`üéâ Successfully activated ${n} product${n===1?"":"s"}!`),d()}},_=async()=>{if(r.value.length===0)return;const o={operation:"deactivate",product_ids:r.value,parameters:{is_active:!1}};if(await k.performBulkOperation(o)){const n=r.value.length;N(`‚è∏Ô∏è Paused ${n} product${n===1?"":"s"} successfully!`),d()}},I=()=>{if(r.value.length===0)return;const o=r.value.length;g("bulkDelete",[...r.value]),setTimeout(()=>{N(`üóÑÔ∏è Archived ${o} product${o===1?"":"s"} safely!`)},500),d()},y=o=>{m.value===o?b.value=b.value==="asc"?"desc":"asc":(m.value=o,b.value="asc"),g("sortChange",o,b.value)},C=o=>{g("rowClick",o)},T=o=>{g("edit",o)},O=o=>{g("delete",o)},E=o=>{g("duplicate",o)},U=()=>{g("createNew")},H=(o,t)=>{j.value=t?o.id:null},z=o=>o&&fe[o]||"üì¶",Y=o=>({Protein:"bg-red-100 text-red-800",Sauce:"bg-orange-100 text-orange-800",Seasoning:"bg-green-100 text-green-800",Beverage:"bg-blue-100 text-blue-800",Snack:"bg-yellow-100 text-yellow-800",Frozen:"bg-cyan-100 text-cyan-800",Dairy:"bg-purple-100 text-purple-800",Bakery:"bg-pink-100 text-pink-800",Other:"bg-gray-100 text-gray-800"})[o]||"bg-gray-100 text-gray-800",G=o=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o),W=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown",N=o=>{$.value=o,f.value=!0,setTimeout(()=>{f.value=!1,$.value=""},3e3)},q=o=>o===1?"üéØ":o<=5?"üì¶":o<=10?"üìã":"üöÄ",J=o=>o===1?" - Ready for action!":o<=3?" - Great choice!":o<=10?" - Looking good!":" - Impressive selection!",Q=o=>{const t=["üéâ","‚ú®","üéä","‚≠ê","üí´","üåü","üéà"];return t[o%t.length]},X=o=>{const t=Math.random()*2+o*.1,n=Math.random()*100,ee=2+Math.random()*3;return{left:`${n}%`,animationDelay:`${t}s`,animationDuration:`${ee}s`}},Z=()=>"Your product catalog awaits!",c=()=>"Time to stock up! Add your first products and start building relationships with your principals. Every successful business begins with great products.",a=()=>"Add your first product";return(o,t)=>(l(),i("div",Ne,[f.value?(l(),i("div",Le,[(l(),i(te,null,se(20,n=>e("div",{class:"confetti-piece",key:n,style:ie(X(n))},u(Q(n)),5)),64))])):x("",!0),r.value.length>0?(l(),i("div",He,[e("div",Ke,[e("div",Re,[e("span",Oe,[e("span",Ee,u(q(r.value.length)),1),V(" "+u(r.value.length)+" product"+u(r.value.length===1?"":"s")+" selected ",1),e("span",Ue,u(J(r.value.length)),1)]),e("button",{onClick:d,class:"text-blue-600 hover:text-blue-800 text-sm font-medium transition-all duration-150 hover:scale-105"}," Clear selection ")]),e("div",{class:"flex items-center space-x-2"},[e("button",{onClick:s,class:"bulk-action-btn activate-btn px-3 py-1 text-sm font-medium text-green-700 bg-green-100 border border-green-200 rounded-md hover:bg-green-200 transition-all duration-200"},t[6]||(t[6]=[e("span",{class:"action-icon"},"‚ú®",-1),V(" Activate ",-1)])),e("button",{onClick:_,class:"bulk-action-btn deactivate-btn px-3 py-1 text-sm font-medium text-yellow-700 bg-yellow-100 border border-yellow-200 rounded-md hover:bg-yellow-200 transition-all duration-200"},t[7]||(t[7]=[e("span",{class:"action-icon"},"‚è∏Ô∏è",-1),V(" Pause ",-1)])),e("button",{onClick:I,class:"bulk-action-btn delete-btn px-3 py-1 text-sm font-medium text-red-700 bg-red-100 border border-red-200 rounded-md hover:bg-red-200 transition-all duration-200"},t[8]||(t[8]=[e("span",{class:"action-icon"},"üóëÔ∏è",-1),V(" Archive ",-1)]))])])])):x("",!0),e("div",Ye,[e("div",Ge,[e("table",We,[e("thead",qe,[e("tr",null,[e("th",Je,[e("input",{type:"checkbox",checked:M.value,".indeterminate":p.value,onChange:A,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded","aria-label":"Select all products"},null,40,Qe)]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:t[0]||(t[0]=n=>y("name"))},[e("div",Xe,[t[10]||(t[10]=e("span",null,"Product",-1)),m.value==="name"?(l(),i("svg",{key:0,class:h(["h-4 w-4",b.value==="asc"?"transform rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[9]||(t[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2)):x("",!0)])]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:t[1]||(t[1]=n=>y("category"))},[e("div",Ze,[t[12]||(t[12]=e("span",null,"Category",-1)),m.value==="category"?(l(),i("svg",{key:0,class:h(["h-4 w-4",b.value==="asc"?"transform rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2)):x("",!0)])]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:t[2]||(t[2]=n=>y("unit_price"))},[e("div",et,[t[14]||(t[14]=e("span",null,"Price",-1)),m.value==="unit_price"?(l(),i("svg",{key:0,class:h(["h-4 w-4",b.value==="asc"?"transform rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[13]||(t[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2)):x("",!0)])]),t[17]||(t[17]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[18]||(t[18]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Principals ",-1)),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:t[3]||(t[3]=n=>y("created_at"))},[e("div",tt,[t[16]||(t[16]=e("span",null,"Created",-1)),m.value==="created_at"?(l(),i("svg",{key:0,class:h(["h-4 w-4",b.value==="asc"?"transform rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[15]||(t[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2)):x("",!0)])]),t[19]||(t[19]=e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")],-1))])]),e("tbody",st,[o.loading&&v.value.length===0?(l(),i(te,{key:0},se(3,n=>e("tr",{key:`skeleton-${n}`,class:"skeleton-row"},t[20]||(t[20]=[e("td",{class:"px-4 py-4"},[e("div",{class:"skeleton-checkbox"})],-1),e("td",{class:"px-6 py-4"},[e("div",{class:"flex items-center"},[e("div",{class:"skeleton-icon"}),e("div",{class:"ml-4 space-y-2"},[e("div",{class:"skeleton-text skeleton-product-name"}),e("div",{class:"skeleton-text skeleton-sku"})])])],-1),e("td",{class:"px-6 py-4"},[e("div",{class:"skeleton-badge"})],-1),e("td",{class:"px-6 py-4"},[e("div",{class:"skeleton-text skeleton-price"})],-1),e("td",{class:"px-6 py-4"},[e("div",{class:"skeleton-status-badge"})],-1),e("td",{class:"px-6 py-4"},[e("div",{class:"skeleton-text skeleton-principals"})],-1),e("td",{class:"px-6 py-4"},[e("div",{class:"skeleton-text skeleton-date"})],-1),e("td",{class:"px-6 py-4"},[e("div",{class:"flex space-x-2"},[e("div",{class:"skeleton-action-btn"}),e("div",{class:"skeleton-action-btn"}),e("div",{class:"skeleton-action-btn"})])],-1)]))),64)):x("",!0),!o.loading&&v.value.length===0?(l(),i("tr",ot,[e("td",at,[e("div",nt,[t[23]||(t[23]=K('<div class="empty-state-illustration" data-v-0fbbfc93><div class="empty-box" data-v-0fbbfc93><div class="empty-box-lid" data-v-0fbbfc93></div><div class="empty-box-body" data-v-0fbbfc93><span class="empty-search-icon" data-v-0fbbfc93>üîç</span></div></div></div>',1)),e("div",rt,[e("h3",lt,u(Z()),1),e("p",it,u(c()),1),e("button",{onClick:U,class:"empty-state-cta"},[t[21]||(t[21]=e("span",{class:"cta-icon"},"‚ú®",-1)),V(" "+u(a())+" ",1),t[22]||(t[22]=e("span",{class:"cta-arrow"},"‚Üí",-1))])])])])])):x("",!0),(l(!0),i(te,null,se(v.value,(n,ee)=>(l(),i("tr",{key:n.id,class:h(["product-row hover:bg-gray-50 cursor-pointer transition-all duration-200 ease-out",{"row-selected":r.value.includes(n.id),"row-staggered":!0}]),style:ie({animationDelay:`${ee*50}ms`}),onClick:F=>C(n),onMouseenter:F=>H(n,!0),onMouseleave:F=>H(n,!1)},[e("td",{class:"px-4 py-4",onClick:t[5]||(t[5]=D(()=>{},["stop"]))},[L(e("input",{type:"checkbox",value:n.id,"onUpdate:modelValue":t[4]||(t[4]=F=>r.value=F),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded","aria-label":`Select ${n.name}`},null,8,ct),[[ue,r.value]])]),e("td",ut,[e("div",vt,[e("div",pt,[e("div",gt,[e("span",mt,u(z(n.category)),1)])]),e("div",bt,[e("div",ft,u(n.name),1),n.sku?(l(),i("div",yt," SKU: "+u(n.sku),1)):x("",!0)])])]),e("td",ht,[n.category?(l(),i("span",{key:0,class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",Y(n.category)])},u(n.category),3)):(l(),i("span",kt,"No category"))]),e("td",xt,[n.unit_price?(l(),i("span",wt," $"+u(G(n.unit_price)),1)):(l(),i("span",_t,"Not set"))]),e("td",Ct,[e("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",n.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},u(n.is_active?"Active":"Inactive"),3)]),e("td",$t,[e("div",Mt,[t[24]||(t[24]=e("svg",{class:"h-4 w-4 text-gray-400 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("span",null,u(n.principal_count||0),1)])]),e("td",St,u(W(n.created_at)),1),e("td",Pt,[e("div",Bt,[e("button",{onClick:D(F=>T(n),["stop"]),class:"text-blue-600 hover:text-blue-900 p-1 rounded-md hover:bg-blue-50","aria-label":`Edit ${n.name}`},t[25]||(t[25]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Dt),e("button",{onClick:D(F=>E(n),["stop"]),class:"text-gray-600 hover:text-gray-900 p-1 rounded-md hover:bg-gray-50","aria-label":`Duplicate ${n.name}`},t[26]||(t[26]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,jt),e("button",{onClick:D(F=>O(n),["stop"]),class:"text-red-600 hover:text-red-900 p-1 rounded-md hover:bg-red-50","aria-label":`Delete ${n.name}`},t[27]||(t[27]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,At)])])],46,dt))),128))])])])]),v.value.length>0?(l(),i("div",It,[e("div",Ft,[e("div",Vt,[t[28]||(t[28]=e("span",{class:"product-count-icon"},"üìä",-1)),e("span",null,"Showing "+u(v.value.length)+" products",1),r.value.length>0?(l(),i("span",Tt," ("+u(r.value.length)+" selected) ",1)):x("",!0)]),v.value.length>=25?(l(),i("div",zt,t[29]||(t[29]=[e("span",{class:"pagination-hint"},"üí° Tip: Use search to find specific products faster!",-1)]))):x("",!0)])])):x("",!0)]))}}),Lt=le(Nt,[["__scopeId","data-v-0fbbfc93"]]),Ht={class:"products-list-view","data-testid":"products-list-view"},Kt={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8","data-testid":"products-header"},Rt={class:"flex items-center space-x-3"},Ot=["disabled","aria-label"],Et={class:"ml-2 hidden sm:inline"},Ut={class:"mb-8","data-testid":"kpi-cards-section"},Yt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},Gt={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},Wt={class:"flex-1 max-w-md"},qt={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},Jt={class:"flex items-center space-x-3"},Qt=["aria-label"],Xt={class:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Zt=["d"],es={class:"space-y-6"},ts={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 loading-container","data-testid":"loading-spinner"},ss={class:"text-center text-gray-500 loading-text"},os={class:"loading-message"},as={key:1,class:"bg-white rounded-lg shadow-sm border border-red-200 p-6","data-testid":"error-message"},ns={class:"flex items-center"},rs={class:"text-red-700"},ls={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center empty-state"},is={class:"text-lg font-medium text-gray-900 mb-2"},ds={class:"text-gray-500 mb-6"},cs={class:"flex justify-center space-x-3"},us={key:3,"data-testid":"product-table-section"},vs=ne({__name:"ProductsListView",setup(R){const P=be(),g=re(),k=w(""),v=w("created_at"),r=w("desc"),m=w(!1),b=w(!1),f=w(),j=["Loading your amazing products...","Gathering product information...","Building your catalog view...","Almost ready to show your inventory...","Preparing product showcase..."],$=w(0);let M=null;const p=w({search:"",category:[],is_active:void 0,price_min:void 0,price_max:void 0}),A=S(()=>g.products),d=S(()=>g.isLoading),s=S(()=>g.error),_=S(()=>{var c;return!!(k.value||(c=p.value.category)!=null&&c.length||p.value.is_active!==void 0||p.value.price_min!==void 0||p.value.price_max!==void 0||p.value.principal_id||p.value.created_after||p.value.created_before)});let I;const y=()=>{clearTimeout(I),I=setTimeout(()=>{C()},300)},C=async()=>{const c={...p.value};k.value.trim()&&(c.search=k.value.trim());const a={page:1,limit:20,sort_by:v.value,sort_order:r.value};await g.fetchProducts({...c,...a})},T=()=>{k.value="",p.value={search:"",category:[],is_active:void 0,price_min:void 0,price_max:void 0},v.value="created_at",r.value="desc",C()},O=()=>{k.value="",setTimeout(()=>{var c;(c=f.value)==null||c.focus()},150),C()},E=()=>{C()},U=()=>{r.value=r.value==="asc"?"desc":"asc",C()},H=(c,a)=>{v.value=c,r.value=a,C()},z=async()=>{await Promise.all([Y(),G()])},Y=async()=>{const c={...p.value};k.value.trim()&&(c.search=k.value.trim());const a={page:1,limit:20,sort_by:v.value,sort_order:r.value};await g.fetchProducts({...c,...a})},G=async()=>{m.value=!0;try{await g.fetchStats()}finally{m.value=!1}},W=c=>{switch(console.log("KPI card clicked:",c),c){case"total":T();break;case"active":p.value.is_active=!0,C();break;case"inactive":p.value.is_active=!1,C();break}},N=c=>{P.push(`/products/${c.id}`)},q=c=>{P.push(`/products/${c.id}/edit`)},J=async c=>{confirm(`Are you sure you want to delete "${c.name}"? This will deactivate the product but preserve the data.`)&&await g.deleteProduct(c.id)},Q=c=>{console.log("Duplicate product:",c.id)},X=async c=>{if(confirm(`Are you sure you want to deactivate ${c.length} products? This action can be reversed later.`)){const a={operation:"deactivate",product_ids:c};await g.performBulkOperation(a)}},Z=()=>{P.push("/products/new")};return ve(async()=>{await z()}),de(()=>P.currentRoute.value.fullPath,c=>{c==="/products"&&z()}),de(d,c=>{c&&A.value.length===0?($.value=0,M=setInterval(()=>{$.value=($.value+1)%j.length},2e3)):M&&(clearInterval(M),M=null)}),(c,a)=>{const o=pe("router-link");return l(),i("div",Ht,[e("div",Kt,[a[8]||(a[8]=e("div",{class:"mb-4 lg:mb-0"},[e("h1",{class:"text-3xl font-bold text-gray-900","data-testid":"page-title"},"Products"),e("p",{class:"mt-2 text-gray-600"}," Manage your product catalog and principal assignments ")],-1)),e("div",Rt,[e("button",{onClick:z,disabled:d.value,class:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-all duration-200 hover:scale-105 refresh-btn","aria-label":d.value?"Refreshing...":"Refresh data"},[(l(),i("svg",{class:h(["h-4 w-4 transition-transform duration-200",{"animate-spin":d.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a[6]||(a[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2)),e("span",Et,u(d.value?"üîÑ Refreshing...":"Refresh"),1)],8,Ot),oe(o,{to:"/products/new",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 hover:scale-105 new-product-btn"},{default:ce(()=>a[7]||(a[7]=[e("svg",{class:"-ml-1 mr-2 h-5 w-5 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),V(" New Product ",-1)])),_:1,__:[7]})])]),e("div",Ut,[oe(ze,{loading:m.value,onCardClick:W,"data-testid":"kpi-cards"},null,8,["loading"])]),e("div",Yt,[e("div",Gt,[e("div",Wt,[a[11]||(a[11]=e("label",{for:"search",class:"sr-only"},"Search products",-1)),e("div",{class:h(["relative search-container",{"search-focused":b.value,"search-has-value":k.value.length>0}])},[a[10]||(a[10]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none search-icon"},[e("svg",{class:"h-5 w-5 text-gray-400 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),L(e("input",{id:"search",ref_key:"searchInputRef",ref:f,"onUpdate:modelValue":a[0]||(a[0]=t=>k.value=t),type:"text",placeholder:"Search products...",class:"search-input block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",onInput:y,onFocus:a[1]||(a[1]=t=>b.value=!0),onBlur:a[2]||(a[2]=t=>b.value=!1)},null,544),[[ge,k.value]]),k.value.length>0?(l(),i("div",qt,[e("button",{onClick:O,class:"text-gray-400 hover:text-gray-600 transition-colors duration-150 clear-search-btn","aria-label":"Clear search"},a[9]||(a[9]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):x("",!0)],2)]),e("div",Jt,[L(e("select",{"onUpdate:modelValue":a[3]||(a[3]=t=>p.value.category=t),class:"block w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:C},a[12]||(a[12]=[K('<option value="" data-v-6bf00b9d>All Categories</option><option value="Protein" data-v-6bf00b9d>Protein</option><option value="Sauce" data-v-6bf00b9d>Sauce</option><option value="Seasoning" data-v-6bf00b9d>Seasoning</option><option value="Beverage" data-v-6bf00b9d>Beverage</option><option value="Snack" data-v-6bf00b9d>Snack</option><option value="Frozen" data-v-6bf00b9d>Frozen</option><option value="Dairy" data-v-6bf00b9d>Dairy</option><option value="Bakery" data-v-6bf00b9d>Bakery</option><option value="Other" data-v-6bf00b9d>Other</option>',10)]),544),[[ae,p.value.category]]),L(e("select",{"onUpdate:modelValue":a[4]||(a[4]=t=>p.value.is_active=t),class:"block w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:C},a[13]||(a[13]=[e("option",{value:""},"All Products",-1),e("option",{value:!0},"Active Only",-1),e("option",{value:!1},"Inactive Only",-1)]),544),[[ae,p.value.is_active]]),L(e("select",{"onUpdate:modelValue":a[5]||(a[5]=t=>v.value=t),class:"block w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:E},a[14]||(a[14]=[K('<option value="created_at" data-v-6bf00b9d>Sort by Created Date</option><option value="name" data-v-6bf00b9d>Sort by Name</option><option value="category" data-v-6bf00b9d>Sort by Category</option><option value="unit_price" data-v-6bf00b9d>Sort by Price</option><option value="updated_at" data-v-6bf00b9d>Sort by Updated Date</option>',5)]),544),[[ae,v.value]]),e("button",{onClick:U,class:h(["p-2 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500",{"bg-gray-50":r.value==="desc"}]),"aria-label":`Sort ${r.value==="asc"?"descending":"ascending"}`},[(l(),i("svg",Xt,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:r.value==="asc"?"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12":"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"},null,8,Zt)]))],10,Qt),_.value?(l(),i("button",{key:0,onClick:T,class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 focus:outline-none focus:ring-1 focus:ring-blue-500 rounded-md"}," Clear Filters ")):x("",!0)])])]),e("div",es,[d.value&&A.value.length===0?(l(),i("div",ts,[a[15]||(a[15]=K('<div class="flex justify-center mb-4" data-v-6bf00b9d><div class="relative" data-v-6bf00b9d><div class="loading-spinner animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600" data-v-6bf00b9d></div><div class="loading-dots" data-v-6bf00b9d><div class="loading-dot" data-v-6bf00b9d></div><div class="loading-dot" data-v-6bf00b9d></div><div class="loading-dot" data-v-6bf00b9d></div></div></div></div>',1)),e("p",ss,[e("span",os,u(j[$.value]),1)])])):s.value?(l(),i("div",as,[e("div",ns,[a[16]||(a[16]=e("svg",{class:"h-5 w-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",rs,u(s.value),1)]),e("div",{class:"mt-4 flex space-x-3"},[e("button",{onClick:z,class:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700","data-testid":"retry-button"}," Try Again "),e("button",{onClick:T,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"}," Clear Filters ")])])):A.value.length===0&&!d.value?(l(),i("div",ls,[a[18]||(a[18]=e("div",{class:"empty-icon-container"},[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4 empty-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),e("h3",is,u(_.value?"üîç No products match your search":"üì¶ Ready to build your catalog?"),1),e("p",ds,u(_.value?"Don't worry! Try adjusting your search terms or filters to find what you're looking for.":"Your product catalog is waiting to be filled with amazing products. Let's get started!"),1),e("div",cs,[_.value?x("",!0):(l(),me(o,{key:0,to:"/products/new",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-all duration-200 hover:scale-105 empty-cta-btn"},{default:ce(()=>a[17]||(a[17]=[e("svg",{class:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),V(" Add Your First Product ",-1)])),_:1,__:[17]})),_.value?(l(),i("button",{key:1,onClick:T,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-all duration-200 hover:scale-105"}," üîÑ Clear All Filters ")):x("",!0)])])):(l(),i("div",us,[oe(Lt,{loading:d.value,onRowClick:N,onEdit:q,onDelete:J,onDuplicate:Q,onBulkDelete:X,onCreateNew:Z,onSortChange:H,"data-testid":"product-table"},null,8,["loading"])]))])])}}}),hs=le(vs,[["__scopeId","data-v-6bf00b9d"]]);export{hs as default};
//# sourceMappingURL=ProductsListView-BGEJey41.js.map
