import{d as D,r as B,c as y,o as O,a as i,b as e,e as w,n as x,t as d,f as c,u as S,w as m,g as R,h as k,F as L,i as N,j as n,k as z}from"./index-CtjJHjR0.js";import{u as I}from"./dashboardStore-BEBNMsxJ.js";import{u as T}from"./opportunityStore-B1hLuFtx.js";import{u as $}from"./interactionStore-BcF9J0uD.js";import{O as F}from"./OpportunityKPICards-DXXlokUh.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./productStore-9Dx38iZU.js";import"./supabaseClient-Dum322BS.js";import"./organizationStore-nVvH6PxL.js";import"./index.esm-Do0MT1Iq.js";import"./principalStore-DHqEcCuF.js";import"./organizationsApi-DotikQjO.js";/* empty css                                                                            */const V={class:"dashboard-view"},A={class:"mb-6"},q={class:"flex items-center justify-between"},H={class:"flex items-center space-x-3"},K=["disabled"],Y={class:"mb-8"},E={class:"mb-6"},U={class:"mb-8"},Q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},W={class:"mt-8"},G={class:"bg-white rounded-lg shadow-sm border border-gray-200"},J={class:"border-b border-gray-200"},X={class:"-mb-px flex space-x-8 px-6","aria-label":"Recent activity tabs"},Z={class:"p-6"},ee={key:0,class:"recent-opportunities"},te={key:0,class:"text-center py-8"},oe={class:"mt-6"},se={key:1,class:"space-y-3"},re=["onClick"],ie={class:"ml-4 flex-1"},ne={class:"text-sm font-medium text-gray-900"},ae={class:"text-sm text-gray-500"},le={class:"text-xs text-gray-400 mt-1"},de={class:"text-right"},ce={class:"text-sm font-medium text-gray-900"},ue={key:1},me=D({__name:"DashboardView",setup(pe){const _=z(),p=I(),u=T(),b=$(),l=B("opportunities"),g=y(()=>p.loading||p.refreshing||u.isLoading||b.isLoading),v=y(()=>u.opportunities.slice(0,5)),f=async()=>{try{await Promise.all([p.refreshDashboard(),u.fetchKPIs(),u.fetchOpportunities({search:"",stage:[],probability_min:0,probability_max:100,created_after:"",created_before:"",context:[],principal_id:""},{page:1,limit:5,sort_by:"created_at",sort_order:"desc"}),b.fetchKPIs()])}catch(s){console.error("Failed to refresh dashboard:",s)}},C=s=>{_.push(`/opportunities/${s}`)},j=s=>s.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "),M=s=>{const t=new Date(s),r=new Date,o=r.getTime()-t.getTime(),a=Math.floor(o/(1e3*60*60*24));if(a===0)return"Today";if(a===1)return"Yesterday";if(a<7)return`${a} days ago`;if(a<30){const h=Math.floor(a/7);return`${h} week${h>1?"s":""} ago`}else return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==r.getFullYear()?"numeric":void 0})};return O(async()=>{p.initializeDashboard(),await f()}),(s,t)=>{const r=R("router-link");return n(),i("div",V,[e("div",A,[e("div",q,[t[3]||(t[3]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Dashboard"),e("p",{class:"text-gray-600 mt-1"},"Welcome to your CRM dashboard")],-1)),e("div",H,[e("button",{onClick:f,disabled:g.value,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[(n(),i("svg",{class:x(["w-4 h-4 mr-2",{"animate-spin":g.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[2]||(t[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2)),w(" "+d(g.value?"Refreshing...":"Refresh"),1)],8,K)])])]),e("div",Y,[t[5]||(t[5]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Performance Overview",-1)),e("div",E,[t[4]||(t[4]=e("h3",{class:"text-lg font-medium text-gray-800 mb-3"},"Sales Pipeline",-1)),c(F,{loading:S(u).isLoading},null,8,["loading"])]),t[6]||(t[6]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-800 mb-3"},"Customer Engagement")],-1))]),e("div",U,[t[11]||(t[11]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),e("div",Q,[c(r,{to:"/opportunities/new",class:"quick-action-card group bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 border-blue-200"},{default:m(()=>t[7]||(t[7]=[e("div",{class:"flex items-center"},[e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center group-hover:bg-blue-600 transition-colors shadow-lg"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])])]),e("div",{class:"ml-4"},[e("p",{class:"text-sm font-semibold text-gray-900 group-hover:text-blue-700"},"New Opportunity"),e("p",{class:"text-xs text-gray-600"},"Create sales opportunity")])],-1)])),_:1,__:[7]}),c(r,{to:"/interactions/new",class:"quick-action-card group bg-gradient-to-br from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 border-green-200"},{default:m(()=>t[8]||(t[8]=[e("div",{class:"flex items-center"},[e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center group-hover:bg-green-600 transition-colors shadow-lg"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])])]),e("div",{class:"ml-4"},[e("p",{class:"text-sm font-semibold text-gray-900 group-hover:text-green-700"},"New Interaction"),e("p",{class:"text-xs text-gray-600"},"Log customer interaction")])],-1)])),_:1,__:[8]}),c(r,{to:"/contacts/new",class:"quick-action-card group bg-gradient-to-br from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 border-purple-200"},{default:m(()=>t[9]||(t[9]=[e("div",{class:"flex items-center"},[e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center group-hover:bg-purple-600 transition-colors shadow-lg"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})])])]),e("div",{class:"ml-4"},[e("p",{class:"text-sm font-semibold text-gray-900 group-hover:text-purple-700"},"Add Contact"),e("p",{class:"text-xs text-gray-600"},"Create new contact")])],-1)])),_:1,__:[9]}),c(r,{to:"/interactions?filter=follow_up_overdue",class:"quick-action-card group bg-gradient-to-br from-amber-50 to-amber-100 hover:from-amber-100 hover:to-amber-200 border-amber-200"},{default:m(()=>t[10]||(t[10]=[e("div",{class:"flex items-center"},[e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-amber-500 rounded-xl flex items-center justify-center group-hover:bg-amber-600 transition-colors shadow-lg"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])]),e("div",{class:"ml-4"},[e("p",{class:"text-sm font-semibold text-gray-900 group-hover:text-amber-700"},"Follow-ups"),e("p",{class:"text-xs text-gray-600"},"Review overdue items")])],-1)])),_:1,__:[10]})])]),e("div",W,[t[18]||(t[18]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Recent Activity",-1)),e("div",G,[e("div",J,[e("nav",X,[e("button",{onClick:t[0]||(t[0]=o=>l.value="opportunities"),class:x([l.value==="opportunities"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200"])}," Recent Opportunities ",2),e("button",{onClick:t[1]||(t[1]=o=>l.value="interactions"),class:x([l.value==="interactions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200"])}," Recent Interactions ",2)])]),e("div",Z,[l.value==="opportunities"?(n(),i("div",ee,[v.value.length===0?(n(),i("div",te,[t[13]||(t[13]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})],-1)),t[14]||(t[14]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No recent opportunities",-1)),t[15]||(t[15]=e("p",{class:"mt-1 text-sm text-gray-500"},"Create your first sales opportunity to get started.",-1)),e("div",oe,[c(r,{to:"/opportunities/new",class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:m(()=>t[12]||(t[12]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),w(" New Opportunity ",-1)])),_:1,__:[12]})])])):(n(),i("div",se,[(n(!0),i(L,null,N(v.value,o=>(n(),i("div",{key:o.id,class:"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors duration-200",onClick:a=>C(o.id)},[t[17]||(t[17]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])])],-1)),e("div",ie,[e("p",ne,d(o.name),1),e("p",ae,d(o.organization_name)+" â€¢ "+d(j(o.stage)),1),e("p",le,d(M(o.created_at)),1)]),e("div",de,[e("p",ce,d(o.probability_percent)+"%",1),t[16]||(t[16]=e("p",{class:"text-xs text-gray-500"},"probability",-1))])],8,re))),128))]))])):k("",!0),l.value==="interactions"?(n(),i("div",ue)):k("",!0)])])])])}}}),De=P(me,[["__scopeId","data-v-aa345494"]]);export{De as default};
//# sourceMappingURL=DashboardView-DjdeINMi.js.map
