import{a,j as n,b as t,d as xt,r as g,c as p,y as yt,o as _t,C as wt,q as F,w as kt,h as M,f as c,e as Dt,u,n as x,t as l,l as A,v as St,m as q,F as b,i as f,J as H,z as Ct}from"./index-Br7bM97V.js";import{_ as $t}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CFth6NZ3.js";import{P as Mt}from"./PrincipalSelector-BnLK-7If.js";import{D as Pt}from"./DistributorRelationshipTable-D5OL9Gck.js";import{u as Rt}from"./principalStore-JxlbTJes.js";import{r as j}from"./BuildingOfficeIcon-CE9ZCi7A.js";import{r as Tt,a as Nt}from"./EyeIcon-BUT9orjO.js";import{r as It}from"./UserGroupIcon-Bll1C4SH.js";import{r as At}from"./GlobeAltIcon-DEWq-ghJ.js";import{r as jt}from"./CalendarDaysIcon-2Pq_q92p.js";import{r as Vt}from"./MagnifyingGlassIcon-BepCswCi.js";import{r as Lt}from"./XMarkIcon-Bq58FYA6.js";import{r as Bt}from"./UserIcon-Dn00Earc.js";import{r as zt}from"./ExclamationTriangleIcon-3AUMR-W2.js";import{r as Y}from"./CalendarIcon-CBoVSP04.js";import{a as Ot,r as Et}from"./PhoneIcon-CrBznpFF.js";import{_ as Ut}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dashboardStore-y_XTLZ37.js";import"./opportunityStore-MF-7Z0oO.js";import"./supabaseClient-CwaY5m9F.js";import"./index.esm-DHR-h0Sg.js";import"./productStore-tgpLBWvz.js";import"./organizationStore-C4EDmZw3.js";import"./EngagementScoreRing-DT1wV0O8.js";import"./CheckIcon-0UoNe-IG.js";import"./ChevronUpIcon-DaM_MkII.js";import"./ArrowDownTrayIcon-CCm-ihbv.js";import"./CheckCircleIcon-Ct_Yhl-Z.js";/* empty css                                                                                     */import"./organizationsApi-ByKMXw3t.js";function X(V,P){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}function Zt(V,P){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})])}const Ft={class:"principal-distributors-view"},qt={class:"mb-6"},Ht={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Yt={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3"},Xt=["disabled"],Gt={class:"flex rounded-md shadow-sm"},Jt={class:"mb-6"},Qt={key:0,class:"flex items-center justify-center py-12"},Wt={key:1,class:"text-center py-12"},Kt={key:2,class:"space-y-6"},te={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},ee={class:"bg-white rounded-lg border border-gray-200 p-4"},se={class:"flex items-center"},re={class:"flex-shrink-0"},oe={class:"ml-3"},ie={class:"text-2xl font-bold text-gray-900"},ne={class:"bg-white rounded-lg border border-gray-200 p-4"},le={class:"flex items-center"},ae={class:"flex-shrink-0"},de={class:"ml-3"},ce={class:"text-2xl font-bold text-gray-900"},ue={class:"bg-white rounded-lg border border-gray-200 p-4"},pe={class:"flex items-center"},me={class:"flex-shrink-0"},ge={class:"ml-3"},he={class:"text-2xl font-bold text-gray-900"},ve={class:"bg-white rounded-lg border border-gray-200 p-4"},be={class:"flex items-center"},fe={class:"flex-shrink-0"},xe={class:"ml-3"},ye={class:"text-2xl font-bold text-gray-900"},_e={class:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4"},we={class:"flex-1"},ke={class:"relative"},De=["value"],Se={key:0,class:"bg-white rounded-lg border border-gray-200 p-6"},Ce={class:"relative h-96 bg-gray-50 rounded-lg overflow-hidden"},$e=["width","height"],Me={class:"connections"},Pe=["x1","y1","x2","y2"],Re={class:"nodes"},Te=["transform","onClick"],Ne=["r","fill","stroke"],Ie={"text-anchor":"middle","dominant-baseline":"middle",class:"text-xs fill-white font-medium pointer-events-none"},Ae=["y"],je={key:0,class:"mt-4 p-4 bg-blue-50 rounded-lg"},Ve={class:"flex items-start justify-between"},Le={class:"text-sm font-medium text-blue-900"},Be={class:"text-sm text-blue-700 mt-1"},ze={class:"text-xs text-blue-600 mt-2"},Oe={key:1,class:"bg-white rounded-lg border border-gray-200 p-6"},Ee={class:"space-y-4"},Ue={class:"flex items-center p-4 bg-blue-50 rounded-lg"},Ze={class:"flex-shrink-0"},Fe={class:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center"},qe={class:"ml-4"},He={class:"text-sm font-medium text-gray-900"},Ye={class:"ml-6 space-y-3"},Xe={class:"flex-shrink-0"},Ge={class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},Je={class:"ml-3 flex-1 min-w-0"},Qe={class:"flex items-center justify-between"},We={class:"text-sm font-medium text-gray-900 truncate"},Ke={class:"text-sm text-gray-500"},ts={class:"flex items-center space-x-2 ml-4"},es=["onClick"],ss={key:2,class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},rs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},os={class:"bg-white rounded-lg border border-gray-200 p-6"},is={class:"space-y-4"},ns={class:"space-y-2"},ls={class:"flex items-center"},as={class:"text-sm text-gray-700"},ds={class:"flex items-center space-x-2"},cs={class:"text-sm font-medium text-gray-900"},us={class:"text-xs text-gray-500"},ps={class:"space-y-2"},ms={class:"text-sm text-gray-700"},gs={class:"flex items-center space-x-2"},hs={class:"text-sm font-medium text-gray-900"},vs={class:"w-16 bg-gray-200 rounded-full h-2"},bs={class:"bg-white rounded-lg border border-gray-200 p-6"},fs={class:"space-y-4"},xs={class:"flex-shrink-0"},ys={class:"flex-1 min-w-0"},_s={class:"text-sm text-gray-900"},ws={class:"text-xs text-gray-500 mt-1"},ks={key:0,class:"text-center py-4"},Ds={key:3,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Ss={class:"flex"},Cs={class:"text-sm text-red-700 mt-1"},$s=xt({__name:"PrincipalDistributorsView",setup(V){const P=wt(),y=Rt(),d=g(null),v=g("hierarchy"),w=g(""),k=g(""),D=g(""),S=g(!1),C=g(null),m=g([]),h=g(null),G=g(),R=g(800),T=g(400),J=p(()=>y.loading),Q=p(()=>y.error),W=p(()=>m.value.filter(s=>s.relationship_type==="HAS_DISTRIBUTOR").length),K=p(()=>new Set(m.value.map(e=>`${e.distributor_city}, ${e.distributor_state}`)).size),tt=p(()=>{if(!m.value.length)return 0;const s=m.value.map(i=>new Date(i.distributor_last_contact||Date.now())).filter(i=>!isNaN(i.getTime()));if(!s.length)return 0;const e=Math.max(...s.map(i=>i.getTime()));return Math.floor((Date.now()-e)/(1e3*60*60*24))}),et=p(()=>{const s=new Set(m.value.map(e=>`${e.distributor_city}, ${e.distributor_state}`));return Array.from(s).sort()}),$=p(()=>{let s=[...m.value];if(w.value){const e=w.value.toLowerCase();s=s.filter(o=>{var i;return((i=o.distributor_name)==null?void 0:i.toLowerCase().includes(e))||`${o.distributor_city}, ${o.distributor_state}`.toLowerCase().includes(e)})}return k.value&&(s=s.filter(e=>`${e.distributor_city}, ${e.distributor_state}`===k.value)),D.value&&(s=s.filter(e=>e.relationship_type===D.value)),s}),L=p(()=>m.value.length),st=p(()=>{const s=m.value.reduce((e,o)=>{const i=o.relationship_type;return e[i]=(e[i]||0)+1,e},{});return Object.entries(s).map(([e,o])=>({type:e,count:o}))}),rt=p(()=>{const s=m.value.reduce((e,o)=>{const i=`${o.distributor_city}, ${o.distributor_state}`;return e[i]=(e[i]||0)+1,e},{});return Object.entries(s).map(([e,o])=>({name:e,count:o})).sort((e,o)=>o.count-e.count)}),N=p(()=>{var e;const s=[];return d.value&&s.push({id:`principal_${d.value.id}`,name:d.value.name,type:"principal",x:R.value/2,y:T.value/2,size:25,selected:((e=h.value)==null?void 0:e.id)===`principal_${d.value.id}`,territory:"All",lastContact:new Date().toISOString()}),$.value.forEach((o,i)=>{var Z;const r=i/$.value.length*2*Math.PI,_=120,U=R.value/2+Math.cos(r)*_,ft=T.value/2+Math.sin(r)*_;s.push({id:o.distributor_id,name:o.distributor_name||"Unknown",type:o.relationship_type,x:U,y:ft,size:18,selected:((Z=h.value)==null?void 0:Z.id)===o.distributor_id,territory:`${o.distributor_city}, ${o.distributor_state}`,lastContact:o.distributor_last_contact})}),s}),ot=p(()=>{const s=[],e=N.value.find(o=>o.type==="principal");return e&&N.value.forEach(o=>{o.type!=="principal"&&s.push({from:e.id,to:o.id,type:o.type,x1:e.x,y1:e.y,x2:o.x,y2:o.y})}),s}),B=p(()=>[{id:1,type:"contact",description:"Phone call with ABC Distribution regarding new product line",date:new Date(Date.now()-2*24*60*60*1e3).toISOString(),distributor:"ABC Distribution"},{id:2,type:"email",description:"Sent quarterly performance report to XYZ Partners",date:new Date(Date.now()-5*24*60*60*1e3).toISOString(),distributor:"XYZ Partners"},{id:3,type:"meeting",description:"Scheduled strategy meeting with Regional Sales Inc",date:new Date(Date.now()-7*24*60*60*1e3).toISOString(),distributor:"Regional Sales Inc"}]),z=async()=>{if(d.value){S.value=!0,C.value=null;try{await new Promise(o=>setTimeout(o,1e3));const s=["ABC Distribution Network","XYZ Sales Partners","Regional Market Solutions","Global Supply Chain Co","Premium Distribution LLC","Strategic Partners Inc","Market Leaders Group","Nationwide Distributors","Elite Sales Network","Professional Partners Corp","Industry Leaders Alliance","Prime Distribution Hub"],e=["direct","indirect","strategic","partner"];m.value=s.map((o,i)=>{var r;return{principal_id:((r=d.value)==null?void 0:r.id)||`principal_${i+1}`,principal_name:`Principal ${i+1}`,principal_status:"Active",distributor_id:`dist_${i+1}`,distributor_name:o,distributor_status:"Active",relationship_type:e[Math.floor(Math.random()*e.length)],principal_city:"Sample City",principal_state:"Sample State",principal_country:"Sample Country",distributor_city:"Distributor City",distributor_state:"Distributor State",distributor_country:"Distributor Country",principal_lead_score:Math.floor(Math.random()*100),distributor_lead_score:Math.floor(Math.random()*100),principal_created_at:new Date(Date.now()-Math.random()*365*24*60*60*1e3).toISOString(),principal_last_contact:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString(),distributor_last_contact:new Date(Date.now()-Math.random()*90*24*60*60*1e3).toISOString()}})}catch(s){C.value=s instanceof Error?s.message:"Failed to load distributor data",console.error("Error loading distributors data:",s)}finally{S.value=!1}}},O=s=>{const e=new Date(s),i=Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60*24));return i===0?"Today":i===1?"Yesterday":i<7?`${i} days ago`:i<30?`${Math.floor(i/7)} weeks ago`:`${Math.floor(i/30)} months ago`},I=s=>s.charAt(0).toUpperCase()+s.slice(1),it=s=>({principal:"Principal",direct:"Direct Distributor",indirect:"Indirect Distributor",strategic:"Strategic Partner",partner:"Business Partner"})[s]||s,nt=s=>({active:"bg-green-100 text-green-800",strong:"bg-blue-100 text-blue-800",developing:"bg-yellow-100 text-yellow-800",inactive:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",lt=s=>({direct:"#10b981",indirect:"#3b82f6",strategic:"#8b5cf6",partner:"#f59e0b"})[s]||"#6b7280",at=s=>({principal:"#3b82f6",direct:"#10b981",indirect:"#06b6d4",strategic:"#8b5cf6",partner:"#f59e0b"})[s]||"#6b7280",dt=s=>({principal:"ðŸ‘¤",direct:"ðŸ¢",indirect:"ðŸ”—",strategic:"â­",partner:"ðŸ¤"})[s]||"ðŸ¢",ct=s=>({direct:"stroke-green-400",indirect:"stroke-blue-400",strategic:"stroke-purple-400",partner:"stroke-yellow-400"})[s]||"stroke-gray-400",ut=s=>({contact:"bg-blue-100 text-blue-600",email:"bg-green-100 text-green-600",meeting:"bg-purple-100 text-purple-600"})[s]||"bg-gray-100 text-gray-600",pt=s=>({contact:Et,email:Ot,meeting:Y})[s]||Y,mt=(s,e)=>s.length<=e?s:s.substring(0,e-3)+"...",gt=s=>{var e;h.value=((e=h.value)==null?void 0:e.id)===s.id?null:s},E=s=>{console.log("Viewing distributor details:",s)},ht=s=>{console.log("Editing relationship:",s)},vt=s=>{console.log("Removing relationship:",s)},bt=()=>{console.log("Opening add relationship modal for principal:",d.value)};return yt(d,()=>{d.value?z():m.value=[]},{immediate:!1}),_t(async()=>{y.principals.length===0&&await y.fetchPrincipals();const s=P.params.principalId;if(s){const e=y.principals.find(o=>o.id===s);e&&(d.value=e)}}),(s,e)=>(n(),F($t,null,{default:kt(()=>{var o,i;return[t("div",Ft,[t("div",qt,[t("div",Ht,[e[9]||(e[9]=t("div",{class:"mb-4 sm:mb-0"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Distributor Network"),t("p",{class:"mt-1 text-sm text-gray-500"}," Manage relationships and visualize distributor connections ")],-1)),t("div",Yt,[t("button",{onClick:bt,disabled:!d.value,class:"inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]"},[c(u(Zt),{class:"h-4 w-4 mr-2"}),e[8]||(e[8]=Dt(" Add Relationship ",-1))],8,Xt),t("div",Gt,[t("button",{onClick:e[0]||(e[0]=r=>v.value="network"),class:x(["px-4 py-2 text-sm font-medium rounded-l-md border min-h-[44px]",v.value==="network"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},[c(u(X),{class:"h-4 w-4"})],2),t("button",{onClick:e[1]||(e[1]=r=>v.value="hierarchy"),class:x(["px-4 py-2 text-sm font-medium border-t border-b min-h-[44px]",v.value==="hierarchy"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},[c(u(j),{class:"h-4 w-4"})],2),t("button",{onClick:e[2]||(e[2]=r=>v.value="table"),class:x(["px-4 py-2 text-sm font-medium rounded-r-md border-t border-r border-b min-h-[44px]",v.value==="table"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},[c(u(Tt),{class:"h-4 w-4"})],2)])])])]),t("div",Jt,[c(Mt,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=r=>d.value=r),loading:J.value,error:Q.value,placeholder:"Select a principal to view their distributor network...",class:"w-full"},null,8,["modelValue","loading","error"])]),S.value&&d.value?(n(),a("div",Qt,e[10]||(e[10]=[t("div",{class:"text-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t("p",{class:"mt-4 text-sm text-gray-500"},"Loading distributor network...")],-1)]))):d.value?d.value?(n(),a("div",Kt,[t("div",te,[t("div",ee,[t("div",se,[t("div",re,[c(u(j),{class:"h-6 w-6 text-blue-500"})]),t("div",oe,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-500"},"Distributors",-1)),t("p",ie,l(((o=m.value)==null?void 0:o.length)||0),1)])])]),t("div",ne,[t("div",le,[t("div",ae,[c(u(It),{class:"h-6 w-6 text-green-500"})]),t("div",de,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-500"},"Active Contacts",-1)),t("p",ce,l(W.value),1)])])]),t("div",ue,[t("div",pe,[t("div",me,[c(u(At),{class:"h-6 w-6 text-purple-500"})]),t("div",ge,[e[15]||(e[15]=t("p",{class:"text-sm font-medium text-gray-500"},"Territories",-1)),t("p",he,l(K.value),1)])])]),t("div",ve,[t("div",be,[t("div",fe,[c(u(jt),{class:"h-6 w-6 text-yellow-500"})]),t("div",xe,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-500"},"Last Contact",-1)),t("p",ye,l(tt.value)+"d ",1)])])])]),t("div",_e,[t("div",we,[t("div",ke,[c(u(Vt),{class:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),A(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>w.value=r),type:"text",placeholder:"Search distributors...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 min-h-[44px]"},null,512),[[St,w.value]])])]),A(t("select",{"onUpdate:modelValue":e[5]||(e[5]=r=>k.value=r),class:"block w-full sm:w-48 px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[44px]"},[e[17]||(e[17]=t("option",{value:""},"All Territories",-1)),(n(!0),a(b,null,f(et.value,r=>(n(),a("option",{key:r,value:r},l(r),9,De))),128))],512),[[q,k.value]]),A(t("select",{"onUpdate:modelValue":e[6]||(e[6]=r=>D.value=r),class:"block w-full sm:w-48 px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[44px]"},e[18]||(e[18]=[t("option",{value:""},"All Relationships",-1),t("option",{value:"direct"},"Direct",-1),t("option",{value:"indirect"},"Indirect",-1),t("option",{value:"strategic"},"Strategic",-1),t("option",{value:"partner"},"Partner",-1)]),512),[[q,D.value]])]),v.value==="network"?(n(),a("div",Se,[e[20]||(e[20]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Network Visualization",-1)),t("div",Ce,[(n(),a("svg",{ref_key:"networkSvg",ref:G,width:R.value,height:T.value,class:"w-full h-full"},[t("g",Me,[(n(!0),a(b,null,f(ot.value,r=>(n(),a("line",{key:`${r.from}-${r.to}`,x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,stroke:"#e5e7eb","stroke-width":"2",class:x(ct(r.type))},null,10,Pe))),128))]),t("g",Re,[(n(!0),a(b,null,f(N.value,r=>(n(),a("g",{key:r.id,transform:`translate(${r.x}, ${r.y})`,class:"network-node cursor-pointer",onClick:_=>gt(r)},[t("circle",{r:r.size,fill:at(r.type),stroke:r.selected?"#3b82f6":"#ffffff","stroke-width":"2",class:"hover:opacity-80 transition-opacity duration-200"},null,8,Ne),t("text",Ie,l(dt(r.type)),1),t("text",{y:r.size+15,"text-anchor":"middle",class:"text-xs fill-gray-700 font-medium pointer-events-none"},l(mt(r.name,12)),9,Ae)],8,Te))),128))])],8,$e)),e[19]||(e[19]=t("div",{class:"absolute top-4 right-4 bg-white rounded-lg p-3 shadow-sm border border-gray-200"},[t("h4",{class:"text-xs font-medium text-gray-700 mb-2"},"Network Legend"),t("div",{class:"space-y-1"},[t("div",{class:"flex items-center text-xs"},[t("div",{class:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),t("span",{class:"text-gray-600"},"Principal")]),t("div",{class:"flex items-center text-xs"},[t("div",{class:"w-3 h-3 rounded-full bg-green-500 mr-2"}),t("span",{class:"text-gray-600"},"Distributor")]),t("div",{class:"flex items-center text-xs"},[t("div",{class:"w-3 h-3 rounded-full bg-purple-500 mr-2"}),t("span",{class:"text-gray-600"},"Partner")])])],-1))]),h.value?(n(),a("div",je,[t("div",Ve,[t("div",null,[t("h4",Le,l(h.value.name),1),t("p",Be,l(it(h.value.type)),1),t("p",ze," Territory: "+l(h.value.territory)+" â€¢ Last Contact: "+l(O(h.value.lastContact)),1)]),t("button",{onClick:e[7]||(e[7]=r=>h.value=null),class:"text-blue-400 hover:text-blue-600"},[c(u(Lt),{class:"h-5 w-5"})])])])):M("",!0)])):v.value==="hierarchy"?(n(),a("div",Oe,[e[22]||(e[22]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Relationship Hierarchy",-1)),t("div",Ee,[t("div",Ue,[t("div",Ze,[t("div",Fe,[c(u(Bt),{class:"h-5 w-5 text-white"})])]),t("div",qe,[t("h4",He,l(d.value.name),1),e[21]||(e[21]=t("p",{class:"text-sm text-gray-500"},"Principal",-1))])]),t("div",Ye,[(n(!0),a(b,null,f($.value,(r,_)=>(n(),a("div",{key:r.distributor_id||`dist_${_}`,class:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200"},[t("div",Xe,[t("div",Ge,[c(u(j),{class:"h-4 w-4 text-white"})])]),t("div",Je,[t("div",Qe,[t("div",null,[t("h5",We,l(r.distributor_name),1),t("p",Ke,l(I(r.relationship_type))+" â€¢ "+l(r.distributor_city)+", "+l(r.distributor_state),1)]),t("div",ts,[t("span",{class:x(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",nt(r.relationship_type)])},l(I(r.relationship_type)),3),t("button",{onClick:U=>E(r),class:"text-blue-600 hover:text-blue-800"},[c(u(Nt),{class:"h-4 w-4"})],8,es)])])])]))),128))])])])):(n(),a("div",ss,[c(Pt,{relationships:$.value,loading:S.value,"principal-name":(i=d.value)==null?void 0:i.name,onViewDetails:E,onEditRelationship:ht,onRemoveRelationship:vt},null,8,["relationships","loading","principal-name"])])),t("div",rs,[t("div",os,[e[25]||(e[25]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Relationship Statistics",-1)),t("div",is,[t("div",null,[e[23]||(e[23]=t("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"By Relationship Type",-1)),t("div",ns,[(n(!0),a(b,null,f(st.value,r=>(n(),a("div",{key:r.type,class:"flex items-center justify-between"},[t("div",ls,[t("div",{class:"w-3 h-3 rounded-full mr-3",style:H({backgroundColor:lt(r.type)})},null,4),t("span",as,l(I(r.type)),1)]),t("div",ds,[t("span",cs,l(r.count),1),t("span",us,"("+l(Math.round(r.count/L.value*100))+"%)",1)])]))),128))])]),t("div",null,[e[24]||(e[24]=t("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"By Territory",-1)),t("div",ps,[(n(!0),a(b,null,f(rt.value,r=>(n(),a("div",{key:r.name,class:"flex items-center justify-between"},[t("span",ms,l(r.name),1),t("div",gs,[t("span",hs,l(r.count),1),t("div",vs,[t("div",{class:"bg-blue-500 h-2 rounded-full",style:H({width:`${r.count/L.value*100}%`})},null,4)])])]))),128))])])])]),t("div",bs,[e[27]||(e[27]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Recent Activity",-1)),t("div",fs,[(n(!0),a(b,null,f(B.value,r=>(n(),a("div",{key:r.id,class:"flex items-start space-x-3"},[t("div",xs,[t("div",{class:x(["w-8 h-8 rounded-full flex items-center justify-center",ut(r.type)])},[(n(),F(Ct(pt(r.type)),{class:"h-4 w-4"}))],2)]),t("div",ys,[t("p",_s,l(r.description),1),t("p",ws,l(O(r.date))+" â€¢ "+l(r.distributor),1)])]))),128)),B.value.length===0?(n(),a("div",ks,e[26]||(e[26]=[t("p",{class:"text-sm text-gray-500"},"No recent activity",-1)]))):M("",!0)])])])])):M("",!0):(n(),a("div",Wt,[c(u(X),{class:"mx-auto h-16 w-16 text-gray-400"}),e[11]||(e[11]=t("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"Distributor Network",-1)),e[12]||(e[12]=t("p",{class:"mt-2 text-sm text-gray-500"}," Select a principal above to view and manage their distributor relationships and network connections. ",-1))])),C.value?(n(),a("div",Ds,[t("div",Ss,[c(u(zt),{class:"h-5 w-5 text-red-400 mr-3 flex-shrink-0"}),t("div",null,[e[28]||(e[28]=t("h3",{class:"text-sm font-medium text-red-800"},"Error Loading Distributor Network",-1)),t("p",Cs,l(C.value),1),t("button",{onClick:z,class:"mt-2 text-sm font-medium text-red-800 hover:text-red-900"}," Try again ")])])])):M("",!0)])]}),_:1}))}}),or=Ut($s,[["__scopeId","data-v-d06cfae0"]]);export{or as default};
//# sourceMappingURL=PrincipalDistributorsView-CDn8UErV.js.map
