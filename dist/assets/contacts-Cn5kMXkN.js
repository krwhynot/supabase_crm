import{c,V as r,a as u,b as s,d as b,e as d}from"./index.esm-DUXcyDU6.js";const m=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,h=/^[+]?[1-9][\d]{0,15}$|^[+]?[()]?[\d\s\-()]{10,20}$/,z=["Executive Chef","Manager","Buyer","Owner","F&B Director","Kitchen Manager","Assistant Manager","Head Chef","Sous Chef","Food Service Director"],p=["High","Medium","Low","Unknown"],f=["Decision Maker","Influencer","End User","Gatekeeper"],n=c({first_name:s().required("First name is required").min(1,"First name cannot be empty").max(100,"First name must be less than 100 characters").trim(),last_name:s().required("Last name is required").min(1,"Last name cannot be empty").max(100,"Last name must be less than 100 characters").trim(),organization_id:s().required("Organization is required").uuid("Organization ID must be valid"),position:s().required("Position is required").min(1,"Position cannot be empty").max(100,"Position must be less than 100 characters").trim(),purchase_influence:s().required("Purchase influence is required").oneOf(p,"Invalid purchase influence level"),decision_authority:s().required("Decision authority is required").oneOf(f,"Invalid decision authority role"),preferred_principals:b().of(s().uuid("Principal ID must be valid")).nullable().default([]),phone:s().nullable().max(20,"Phone number must be less than 20 characters").matches(h,"Please enter a valid phone number").trim().transform(a=>a===""?null:a),email:s().nullable().matches(m,"Please enter a valid email address").max(255,"Email must be less than 255 characters").trim().lowercase().transform(a=>a===""?null:a),address:s().nullable().max(255,"Address must be less than 255 characters").trim().transform(a=>a===""?null:a),city:s().nullable().max(100,"City must be less than 100 characters").trim().transform(a=>a===""?null:a),state:s().nullable().max(50,"State must be less than 50 characters").trim().transform(a=>a===""?null:a),zip_code:s().nullable().max(20,"ZIP code must be less than 20 characters").trim().transform(a=>a===""?null:a),website:s().nullable().matches(/^https?:\/\/[^\s]+$/,"Website must be a valid URL starting with http:// or https://").max(255,"Website must be less than 255 characters").trim().transform(a=>a===""?null:a),account_manager:s().nullable().max(100,"Account manager must be less than 100 characters").trim().transform(a=>a===""?null:a),notes:s().nullable().max(5e3,"Notes must be less than 5000 characters").trim().transform(a=>a===""?null:a),is_primary:u().nullable().default(!1)}),_=c({first_name:s().min(1,"First name cannot be empty").max(100,"First name must be less than 100 characters").trim(),last_name:s().min(1,"Last name cannot be empty").max(100,"Last name must be less than 100 characters").trim(),organization_id:s().uuid("Organization ID must be valid"),position:s().max(100,"Position must be less than 100 characters").trim(),purchase_influence:s().oneOf(p,"Invalid purchase influence level"),decision_authority:s().oneOf(f,"Invalid decision authority role"),email:s().nullable().matches(m,"Please enter a valid email address").max(255,"Email must be less than 255 characters").trim().lowercase().transform(a=>a===""?null:a),phone:s().nullable().max(20,"Phone number must be less than 20 characters").matches(h,"Please enter a valid phone number").trim().transform(a=>a===""?null:a),address:s().nullable().max(255,"Address must be less than 255 characters").trim().transform(a=>a===""?null:a),city:s().nullable().max(100,"City must be less than 100 characters").trim().transform(a=>a===""?null:a),state:s().nullable().max(50,"State must be less than 50 characters").trim().transform(a=>a===""?null:a),zip_code:s().nullable().max(20,"ZIP code must be less than 20 characters").trim().transform(a=>a===""?null:a),website:s().nullable().matches(/^https?:\/\/[^\s]+$/,"Website must be a valid URL starting with http:// or https://").max(255,"Website must be less than 255 characters").trim().transform(a=>a===""?null:a),account_manager:s().nullable().max(100,"Account manager must be less than 100 characters").trim().transform(a=>a===""?null:a),notes:s().nullable().max(5e3,"Notes must be less than 5000 characters").trim().transform(a=>a===""?null:a),is_primary:u().nullable().default(!1)}),g=c({search:s().max(255,"Search term must be less than 255 characters").trim(),limit:d().positive("Limit must be positive").max(100,"Limit cannot exceed 100").integer("Limit must be an integer"),offset:d().min(0,"Offset cannot be negative").integer("Offset must be an integer"),sortBy:s().oneOf(["first_name","last_name","organization","email","created_at"],"Invalid sort field"),sortOrder:s().oneOf(["asc","desc"],"Sort order must be asc or desc")}),y=n.pick(["first_name","last_name","organization_id","position","email","phone"]),v=n.pick(["purchase_influence","decision_authority","preferred_principals"]),w=n.pick(["address","city","state","zip_code","website","account_manager","notes","is_primary"]);class D{static async validateCreate(e){try{return{isValid:!0,data:await n.validate(e,{abortEarly:!1}),errors:[]}}catch(t){return t instanceof r?{isValid:!1,errors:t.inner.map(i=>({field:i.path||"unknown",message:i.message}))}:{isValid:!1,errors:[{field:"general",message:"Validation failed"}]}}}static async validateUpdate(e){try{return{isValid:!0,data:await _.validate(e,{abortEarly:!1}),errors:[]}}catch(t){return t instanceof r?{isValid:!1,errors:t.inner.map(i=>({field:i.path||"unknown",message:i.message}))}:{isValid:!1,errors:[{field:"general",message:"Validation failed"}]}}}static async validateSearch(e){try{return{isValid:!0,data:await g.validate(e,{abortEarly:!1}),errors:[]}}catch(t){return t instanceof r?{isValid:!1,errors:t.inner.map(i=>({field:i.path||"unknown",message:i.message}))}:{isValid:!1,errors:[{field:"general",message:"Validation failed"}]}}}static async validateStepOne(e){try{return{isValid:!0,data:await y.validate(e,{abortEarly:!1}),errors:[]}}catch(t){return t instanceof r?{isValid:!1,errors:t.inner.map(i=>({field:i.path||"unknown",message:i.message}))}:{isValid:!1,errors:[{field:"general",message:"Step 1 validation failed"}]}}}static async validateStepTwo(e){try{return{isValid:!0,data:await v.validate(e,{abortEarly:!1}),errors:[]}}catch(t){return t instanceof r?{isValid:!1,errors:t.inner.map(i=>({field:i.path||"unknown",message:i.message}))}:{isValid:!1,errors:[{field:"general",message:"Step 2 validation failed"}]}}}static async validateStepThree(e){try{return{isValid:!0,data:await w.validate(e,{abortEarly:!1}),errors:[]}}catch(t){return t instanceof r?{isValid:!1,errors:t.inner.map(i=>({field:i.path||"unknown",message:i.message}))}:{isValid:!1,errors:[{field:"general",message:"Step 3 validation failed"}]}}}static cleanFormData(e){const t={};return Object.entries(e).forEach(([i,l])=>{if(typeof l=="string"){const o=l.trim();t[i]=o===""?null:o}else t[i]=l}),t}static formToInsert(e){return{first_name:e.first_name,last_name:e.last_name,organization_id:e.organization_id,position:e.position,purchase_influence:e.purchase_influence,decision_authority:e.decision_authority,phone:e.phone,email:e.email,address:e.address,city:e.city,state:e.state,zip_code:e.zip_code,website:e.website,account_manager:e.account_manager,notes:e.notes,is_primary:e.is_primary||!1}}static formToUpdate(e){const t={};return e.first_name!==void 0&&(t.first_name=e.first_name),e.last_name!==void 0&&(t.last_name=e.last_name),e.organization_id!==void 0&&(t.organization_id=e.organization_id),e.position!==void 0&&(t.position=e.position),e.purchase_influence!==void 0&&(t.purchase_influence=e.purchase_influence),e.decision_authority!==void 0&&(t.decision_authority=e.decision_authority),e.phone!==void 0&&(t.phone=e.phone),e.email!==void 0&&(t.email=e.email),e.address!==void 0&&(t.address=e.address),e.city!==void 0&&(t.city=e.city),e.state!==void 0&&(t.state=e.state),e.zip_code!==void 0&&(t.zip_code=e.zip_code),e.website!==void 0&&(t.website=e.website),e.account_manager!==void 0&&(t.account_manager=e.account_manager),e.notes!==void 0&&(t.notes=e.notes),e.is_primary!==void 0&&(t.is_primary=e.is_primary),t}static contactToForm(e){return{first_name:e.first_name,last_name:e.last_name,organization_id:e.organization_id,position:e.position,purchase_influence:e.purchase_influence,decision_authority:e.decision_authority,preferred_principals:[],phone:e.phone,email:e.email,address:e.address,city:e.city,state:e.state,zip_code:e.zip_code,website:e.website,account_manager:e.account_manager,notes:e.notes,is_primary:e.is_primary}}}const x={getFullName:a=>`${a.first_name} ${a.last_name}`.trim(),getDisplayName:(a,e)=>{const t=x.getFullName(a);return e?`${t} (${e})`:t},getPositionLabel:a=>a||"No position specified",getPurchaseInfluenceClass:a=>{switch(a){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-blue-100 text-blue-800";case"Unknown":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},getDecisionAuthorityClass:a=>{switch(a){case"Decision Maker":return"bg-green-100 text-green-800";case"Influencer":return"bg-purple-100 text-purple-800";case"End User":return"bg-blue-100 text-blue-800";case"Gatekeeper":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},formatPhone:a=>{if(!a)return"No phone";const e=a.replace(/\D/g,"");return e.length===10?`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`:e.length===11&&e[0]==="1"?`+1 (${e.slice(1,4)}) ${e.slice(4,7)}-${e.slice(7)}`:a},getInitials:a=>{const e=a.first_name.charAt(0).toUpperCase(),t=a.last_name.charAt(0).toUpperCase();return`${e}${t}`},formatCreatedDate:a=>a.created_at?new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown"};export{D as C,f as D,z as P,y as a,p as b,x as c,v as d,w as e};
//# sourceMappingURL=contacts-Cn5kMXkN.js.map
