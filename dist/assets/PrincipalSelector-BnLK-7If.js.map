{"version":3,"file":"PrincipalSelector-BnLK-7If.js","sources":["../../src/components/principal/PrincipalSelector.vue"],"sourcesContent":["<!--\n  Principal Selector - Advanced dropdown with search and filtering\n  Features: Real-time search, activity status filtering, performance indicators\n-->\n<template>\n  <div class=\"principal-selector\">\n    <div class=\"relative\">\n      <!-- Search Input -->\n      <div class=\"relative\">\n        <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n          <MagnifyingGlassIcon class=\"h-5 w-5 text-gray-400\" />\n        </div>\n        <input\n          ref=\"searchInput\"\n          v-model=\"searchTerm\"\n          type=\"text\"\n          class=\"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n          :class=\"[\n            error ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : '',\n            loading ? 'bg-gray-50' : 'bg-white'\n          ]\"\n          placeholder=\"Search principals by name or organization...\"\n          :disabled=\"loading\"\n          @focus=\"showDropdown = true\"\n          @input=\"handleSearch\"\n          @keydown=\"handleKeyNavigation\"\n        />\n        \n        <!-- Loading Spinner -->\n        <div v-if=\"loading\" class=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n          <div class=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"></div>\n        </div>\n        \n        <!-- Clear Button -->\n        <button\n          v-else-if=\"searchTerm || selectedPrincipal\"\n          @click=\"clearSelection\"\n          class=\"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-gray-700\"\n        >\n          <XMarkIcon class=\"h-4 w-4 text-gray-400\" />\n        </button>\n      </div>\n\n      <!-- Error Message -->\n      <div v-if=\"error\" class=\"mt-2 text-sm text-red-600 flex items-center\">\n        <ExclamationTriangleIcon class=\"h-4 w-4 mr-1\" />\n        {{ error }}\n      </div>\n\n      <!-- Dropdown Menu -->\n      <Transition\n        enter-active-class=\"transition ease-out duration-100\"\n        enter-from-class=\"transform opacity-0 scale-95\"\n        enter-to-class=\"transform opacity-100 scale-100\"\n        leave-active-class=\"transition ease-in duration-75\"\n        leave-from-class=\"transform opacity-100 scale-100\"\n        leave-to-class=\"transform opacity-0 scale-95\"\n      >\n        <div\n          v-show=\"showDropdown && (filteredPrincipals.length > 0 || searchTerm)\"\n          class=\"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-96 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm\"\n        >\n          <!-- Filters -->\n          <div class=\"px-3 py-2 border-b border-gray-100\">\n            <div class=\"flex items-center space-x-4\">\n              <label class=\"text-xs font-medium text-gray-700\">Filter:</label>\n              <div class=\"flex space-x-2\">\n                <button\n                  v-for=\"filter in activityFilters\"\n                  :key=\"filter.value\"\n                  @click=\"toggleActivityFilter(filter.value)\"\n                  class=\"inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors\"\n                  :class=\"[\n                    activeFilters.includes(filter.value)\n                      ? 'bg-blue-100 text-blue-800 border border-blue-200'\n                      : 'bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200'\n                  ]\"\n                >\n                  <span\n                    class=\"w-2 h-2 rounded-full mr-1\"\n                    :class=\"filter.colorClass\"\n                  ></span>\n                  {{ filter.label }}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <!-- Principal Options -->\n          <div class=\"max-h-72 overflow-y-auto\">\n            <!-- No Results -->\n            <div\n              v-if=\"filteredPrincipals.length === 0 && searchTerm\"\n              class=\"px-3 py-4 text-sm text-gray-500 text-center\"\n            >\n              <UserGroupIcon class=\"mx-auto h-8 w-8 text-gray-300 mb-2\" />\n              No principals found matching \"{{ searchTerm }}\"\n            </div>\n\n            <!-- Principal List -->\n            <div\n              v-for=\"(principal, index) in filteredPrincipals\"\n              :key=\"principal.principal_id\"\n              @click=\"selectPrincipal(principal)\"\n              @mouseenter=\"highlightedIndex = index\"\n              class=\"relative cursor-pointer select-none py-3 px-3 hover:bg-gray-50 transition-colors\"\n              :class=\"[\n                highlightedIndex === index ? 'bg-blue-50' : '',\n                selectedPrincipal?.principal_id === principal.principal_id ? 'bg-blue-100' : ''\n              ]\"\n            >\n              <div class=\"flex items-center justify-between\">\n                <div class=\"flex-1 min-w-0\">\n                  <!-- Principal Name -->\n                  <div class=\"flex items-center space-x-2\">\n                    <span class=\"font-medium text-gray-900 truncate\">\n                      {{ principal.principal_name }}\n                    </span>\n                    <ActivityStatusBadge :status=\"(principal.activity_status === 'STALE' ? 'LOW' : principal.activity_status) as 'NO_ACTIVITY' | 'MODERATE' | 'ACTIVE' | 'LOW'\" />\n                  </div>\n                  \n                  <!-- Organization Info -->\n                  <div class=\"text-sm text-gray-500 truncate\">\n                    {{ principal.organization_type }}\n                  </div>\n                  \n                  <!-- Metrics Row -->\n                  <div class=\"flex items-center space-x-4 mt-1 text-xs text-gray-600\">\n                    <span class=\"flex items-center\">\n                      <ChartBarIcon class=\"h-3 w-3 mr-1\" />\n                      Score: {{ principal.engagement_score || 0 }}\n                    </span>\n                    <span class=\"flex items-center\">\n                      <CalendarIcon class=\"h-3 w-3 mr-1\" />\n                      {{ formatLastActivity(principal.last_activity_date) }}\n                    </span>\n                    <span class=\"flex items-center\">\n                      <BuildingOfficeIcon class=\"h-3 w-3 mr-1\" />\n                      {{ principal.total_opportunities || 0 }} ops\n                    </span>\n                  </div>\n                </div>\n\n                <!-- Engagement Score Visual -->\n                <div class=\"ml-3 flex-shrink-0\">\n                  <EngagementScoreRing \n                    :score=\"principal.engagement_score || 0\"\n                    :size=\"'sm'\"\n                  />\n                </div>\n              </div>\n              \n              <!-- Selected Indicator -->\n              <div\n                v-if=\"selectedPrincipal?.principal_id === principal.principal_id\"\n                class=\"absolute inset-y-0 right-0 flex items-center pr-4\"\n              >\n                <CheckIcon class=\"h-4 w-4 text-blue-600\" />\n              </div>\n            </div>\n          </div>\n\n          <!-- Quick Actions -->\n          <div v-if=\"selectedPrincipal\" class=\"border-t border-gray-100 px-3 py-2\">\n            <div class=\"flex items-center justify-between text-xs text-gray-600\">\n              <span>Quick Actions:</span>\n              <div class=\"flex space-x-2\">\n                <button\n                  @click.stop=\"createOpportunity\"\n                  class=\"text-blue-600 hover:text-blue-800 font-medium\"\n                >\n                  Create Opportunity\n                </button>\n                <span class=\"text-gray-300\">•</span>\n                <button\n                  @click.stop=\"logInteraction\"\n                  class=\"text-green-600 hover:text-green-800 font-medium\"\n                >\n                  Log Interaction\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Transition>\n    </div>\n\n    <!-- Selected Principal Display -->\n    <div\n      v-if=\"selectedPrincipal && !showDropdown\"\n      class=\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\"\n    >\n      <div class=\"flex items-center justify-between\">\n        <div class=\"flex items-center space-x-3\">\n          <div class=\"flex-shrink-0\">\n            <EngagementScoreRing \n              :score=\"selectedPrincipal.engagement_score || 0\"\n              :size=\"'md'\"\n            />\n          </div>\n          <div>\n            <h3 class=\"text-sm font-medium text-gray-900\">\n              {{ selectedPrincipal.principal_name }}\n            </h3>\n            <p class=\"text-sm text-gray-600\">\n              {{ selectedPrincipal.organization_type }}\n            </p>\n            <div class=\"flex items-center space-x-3 mt-1\">\n              <ActivityStatusBadge :status=\"(selectedPrincipal.activity_status === 'STALE' ? 'LOW' : selectedPrincipal.activity_status) as 'NO_ACTIVITY' | 'MODERATE' | 'ACTIVE' | 'LOW'\" />\n              <span class=\"text-xs text-gray-500\">\n                {{ selectedPrincipal.total_opportunities || 0 }} opportunities •\n                {{ selectedPrincipal.total_interactions || 0 }} interactions\n              </span>\n            </div>\n          </div>\n        </div>\n        <button\n          @click=\"clearSelection\"\n          class=\"text-gray-400 hover:text-gray-600\"\n        >\n          <XMarkIcon class=\"h-5 w-5\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, nextTick, onMounted, onUnmounted } from 'vue'\nimport {\n  MagnifyingGlassIcon,\n  XMarkIcon,\n  ExclamationTriangleIcon,\n  UserGroupIcon,\n  CheckIcon,\n  ChartBarIcon,\n  CalendarIcon,\n  BuildingOfficeIcon\n} from '@heroicons/vue/24/outline'\n// import { usePrincipalStore } from '@/stores/principalStore' // Removed unused import\nimport PrincipalActivityApi from '@/services/principalActivityApi'\nimport type { PrincipalActivitySummary } from '@/services/principalActivityApi'\n\n// Component imports (these would be created as separate components)\nimport ActivityStatusBadge from './ActivityStatusBadge.vue'\nimport EngagementScoreRing from './EngagementScoreRing.vue'\n\n// ===============================\n// COMPONENT INTERFACE\n// ===============================\n\ninterface Props {\n  modelValue?: string\n  loading?: boolean\n  error?: string | null\n  placeholder?: string\n  disabled?: boolean\n}\n\ninterface Emits {\n  (e: 'update:modelValue', value: string): void\n  (e: 'change', principal: PrincipalActivitySummary | null): void\n  (e: 'search', searchTerm: string): void\n  (e: 'create-opportunity', principal: PrincipalActivitySummary): void\n  (e: 'log-interaction', principal: PrincipalActivitySummary): void\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  modelValue: '',\n  loading: false,\n  error: null,\n  placeholder: 'Search principals...',\n  disabled: false\n})\n\nconst emit = defineEmits<Emits>()\n\n// ===============================\n// COMPOSABLES & STORES\n// ===============================\n\n// const principalStore = usePrincipalStore() // Removed unused variable\n\n// ===============================\n// REACTIVE STATE\n// ===============================\n\nconst searchInput = ref<HTMLInputElement>()\nconst searchTerm = ref('')\nconst showDropdown = ref(false)\nconst highlightedIndex = ref(-1)\nconst principals = ref<PrincipalActivitySummary[]>([])\nconst isSearching = ref(false)\n\n// Filter states\nconst activeFilters = ref<string[]>(['ACTIVE', 'MODERATE'])\nconst activityFilters = [\n  { value: 'ACTIVE', label: 'Active', colorClass: 'bg-green-400' },\n  { value: 'MODERATE', label: 'Moderate', colorClass: 'bg-yellow-400' },\n  { value: 'LOW', label: 'Low', colorClass: 'bg-orange-400' },\n  { value: 'NO_ACTIVITY', label: 'Inactive', colorClass: 'bg-gray-400' }\n]\n\n// ===============================\n// COMPUTED PROPERTIES\n// ===============================\n\nconst selectedPrincipal = computed(() => {\n  if (!props.modelValue) return null\n  return principals.value.find(p => p.principal_id === props.modelValue) || null\n})\n\nconst filteredPrincipals = computed(() => {\n  let filtered = principals.value\n\n  // Apply activity status filters\n  if (activeFilters.value.length > 0) {\n    filtered = filtered.filter(p => activeFilters.value.includes(p.activity_status))\n  }\n\n  // Apply search filter\n  if (searchTerm.value) {\n    const search = searchTerm.value.toLowerCase()\n    filtered = filtered.filter(p =>\n      p.principal_name.toLowerCase().includes(search) ||\n      (p.organization_type || '').toLowerCase().includes(search)\n    )\n  }\n\n  // Sort by engagement score and activity\n  return filtered.sort((a, b) => {\n    // First, sort by engagement score (descending)\n    const scoreA = a.engagement_score || 0\n    const scoreB = b.engagement_score || 0\n    if (scoreA !== scoreB) {\n      return scoreB - scoreA\n    }\n    \n    // Then by name (ascending)\n    return a.principal_name.localeCompare(b.principal_name)\n  })\n})\n\n// const isLoading = computed(() => props.loading || isSearching.value) // Removed unused variable\n\n// ===============================\n// EVENT HANDLERS\n// ===============================\n\nconst handleSearch = async (event: Event) => {\n  const target = event.target as HTMLInputElement\n  searchTerm.value = target.value\n  \n  emit('search', searchTerm.value)\n  \n  if (searchTerm.value.length >= 2) {\n    await searchPrincipals(searchTerm.value)\n  } else if (searchTerm.value.length === 0) {\n    await loadPrincipals()\n  }\n}\n\nconst handleKeyNavigation = (event: KeyboardEvent) => {\n  if (!showDropdown.value || filteredPrincipals.value.length === 0) return\n\n  switch (event.key) {\n    case 'ArrowDown':\n      event.preventDefault()\n      highlightedIndex.value = Math.min(\n        highlightedIndex.value + 1,\n        filteredPrincipals.value.length - 1\n      )\n      break\n    case 'ArrowUp':\n      event.preventDefault()\n      highlightedIndex.value = Math.max(highlightedIndex.value - 1, -1)\n      break\n    case 'Enter':\n      event.preventDefault()\n      if (highlightedIndex.value >= 0) {\n        selectPrincipal(filteredPrincipals.value[highlightedIndex.value])\n      }\n      break\n    case 'Escape':\n      event.preventDefault()\n      showDropdown.value = false\n      highlightedIndex.value = -1\n      break\n  }\n}\n\nconst selectPrincipal = (principal: PrincipalActivitySummary) => {\n  emit('update:modelValue', principal.principal_id)\n  emit('change', principal)\n  \n  searchTerm.value = principal.principal_name\n  showDropdown.value = false\n  highlightedIndex.value = -1\n}\n\nconst clearSelection = () => {\n  emit('update:modelValue', '')\n  emit('change', null)\n  \n  searchTerm.value = ''\n  showDropdown.value = false\n  highlightedIndex.value = -1\n  \n  nextTick(() => {\n    searchInput.value?.focus()\n  })\n}\n\nconst toggleActivityFilter = (filterValue: string) => {\n  const index = activeFilters.value.indexOf(filterValue)\n  if (index >= 0) {\n    activeFilters.value.splice(index, 1)\n  } else {\n    activeFilters.value.push(filterValue)\n  }\n}\n\nconst createOpportunity = (event: Event) => {\n  event.stopPropagation()\n  if (selectedPrincipal.value) {\n    emit('create-opportunity', selectedPrincipal.value)\n  }\n  showDropdown.value = false\n}\n\nconst logInteraction = (event: Event) => {\n  event.stopPropagation()\n  if (selectedPrincipal.value) {\n    emit('log-interaction', selectedPrincipal.value)\n  }\n  showDropdown.value = false\n}\n\n// ===============================\n// DATA LOADING FUNCTIONS\n// ===============================\n\nconst loadPrincipals = async () => {\n  isSearching.value = true\n  \n  try {\n    const response = await PrincipalActivityApi.getPrincipalActivitySummary()\n    if (response.success) {\n      principals.value = response.data || []\n    }\n  } catch (error) {\n    console.error('Failed to load principals:', error)\n  } finally {\n    isSearching.value = false\n  }\n}\n\nconst searchPrincipals = async (searchTerm: string) => {\n  isSearching.value = true\n  \n  try {\n    const response = await PrincipalActivityApi.searchPrincipalsWithActivity(searchTerm, false)\n    if (response.success) {\n      principals.value = response.data || []\n    }\n  } catch (error) {\n    console.error('Failed to search principals:', error)\n  } finally {\n    isSearching.value = false\n  }\n}\n\n// ===============================\n// UTILITY FUNCTIONS\n// ===============================\n\nconst formatLastActivity = (dateString: string | null): string => {\n  if (!dateString) return 'No activity'\n  \n  const date = new Date(dateString)\n  const now = new Date()\n  const diffInDays = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60 * 24))\n  \n  if (diffInDays === 0) return 'Today'\n  if (diffInDays === 1) return 'Yesterday'\n  if (diffInDays < 7) return `${diffInDays} days ago`\n  if (diffInDays < 30) return `${Math.floor(diffInDays / 7)} weeks ago`\n  if (diffInDays < 365) return `${Math.floor(diffInDays / 30)} months ago`\n  return `${Math.floor(diffInDays / 365)} years ago`\n}\n\n// ===============================\n// CLICK OUTSIDE HANDLER\n// ===============================\n\nconst handleClickOutside = (event: Event) => {\n  const target = event.target as Element\n  if (!target.closest('.principal-selector')) {\n    showDropdown.value = false\n    highlightedIndex.value = -1\n  }\n}\n\n// ===============================\n// LIFECYCLE HOOKS\n// ===============================\n\nonMounted(async () => {\n  document.addEventListener('click', handleClickOutside)\n  await loadPrincipals()\n  \n  // Set initial value if provided\n  if (props.modelValue) {\n    const principal = principals.value.find(p => p.principal_id === props.modelValue)\n    if (principal) {\n      searchTerm.value = principal.principal_name\n    }\n  }\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', handleClickOutside)\n})\n\n// Watch for external model value changes\nwatch(\n  () => props.modelValue,\n  (newValue) => {\n    if (newValue) {\n      const principal = principals.value.find(p => p.principal_id === newValue)\n      if (principal) {\n        searchTerm.value = principal.principal_name\n      }\n    } else {\n      searchTerm.value = ''\n    }\n  }\n)\n</script>\n\n<style scoped>\n.principal-selector {\n  /* Custom styles for the selector component */\n}\n\n/* Smooth dropdown animation */\n.dropdown-enter-active,\n.dropdown-leave-active {\n  transition: all 0.2s ease;\n}\n\n.dropdown-enter-from,\n.dropdown-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n/* Highlight animation for keyboard navigation */\n.principal-option:focus {\n  outline: none;\n  box-shadow: inset 0 0 0 2px rgba(59, 130, 246, 0.5);\n}\n\n/* Custom scrollbar for dropdown */\n.principal-selector ::-webkit-scrollbar {\n  width: 6px;\n}\n\n.principal-selector ::-webkit-scrollbar-track {\n  background: #f1f5f9;\n}\n\n.principal-selector ::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.principal-selector ::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n</style>"],"names":["props","__props","emit","__emit","searchInput","ref","searchTerm","showDropdown","highlightedIndex","principals","isSearching","activeFilters","activityFilters","selectedPrincipal","computed","p","filteredPrincipals","filtered","search","a","b","scoreA","scoreB","handleSearch","event","target","searchPrincipals","loadPrincipals","handleKeyNavigation","selectPrincipal","principal","clearSelection","nextTick","_a","toggleActivityFilter","filterValue","index","createOpportunity","logInteraction","response","PrincipalActivityApi","error","formatLastActivity","dateString","date","diffInDays","handleClickOutside","onMounted","onUnmounted","watch","newValue","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_unref","MagnifyingGlassIcon","$event","loading","_hoisted_6","_cache","XMarkIcon","_hoisted_7","ExclamationTriangleIcon","_createTextVNode","_Transition","_withDirectives","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_Fragment","_renderList","filter","_normalizeClass","_toDisplayString","_hoisted_13","_hoisted_14","UserGroupIcon","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","ActivityStatusBadge","_hoisted_20","_hoisted_21","_hoisted_22","ChartBarIcon","_hoisted_23","CalendarIcon","_hoisted_24","BuildingOfficeIcon","_hoisted_25","EngagementScoreRing","_b","_hoisted_26","CheckIcon","_hoisted_27","_hoisted_28","_hoisted_29","_vShow","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37"],"mappings":"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"}