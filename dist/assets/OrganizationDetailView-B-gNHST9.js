import{a as r,b as e,j as n,d as te,r as k,x as de,o as se,h as x,f as u,e as f,u as g,s as R,l as E,m as Y,p as ue,v as Q,t as l,F as B,i as U,n as H,q as xe,z as ve,c as Z,J as ie,w as K,g as fe,k as he}from"./index-CtjJHjR0.js";import{u as _e}from"./organizationStore-nVvH6PxL.js";import{r as X}from"./PlusIcon-BeWH-K1A.js";import{r as oe}from"./ExclamationTriangleIcon-BvwA24I5.js";import{r as ne}from"./ArrowPathIcon-CnFwnm_X.js";import{r as ee}from"./PencilIcon-CubW_jF-.js";import{r as re}from"./TrashIcon-Jq4SZZzt.js";import{r as we}from"./PresentationChartLineIcon-BSZNkLfx.js";import{r as ke}from"./CheckCircleIcon-BMlci5ia.js";import{r as le}from"./DocumentTextIcon-BGnHhZUG.js";import{r as be}from"./CalendarDaysIcon-DqOrfd2h.js";import{r as ye,a as ae}from"./PhoneIcon--NXciUgs.js";import{r as $e}from"./XMarkIcon-D9bsmxiL.js";import{r as ce}from"./DocumentIcon-BsH_BoVe.js";import{r as me}from"./ArrowDownTrayIcon-CO3_VHAU.js";import{r as Ce}from"./EllipsisVerticalIcon-2yCn1ZGi.js";import{r as Me}from"./CurrencyDollarIcon-DIE48oxp.js";import{_ as je}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Se}from"./ChevronRightIcon-BkJhkfUA.js";import{r as ze}from"./BuildingOfficeIcon-DckFZ7iO.js";import{r as ge}from"./GlobeAltIcon-GpEjRPnI.js";import"./supabaseClient-Dum322BS.js";import"./index.esm-Do0MT1Iq.js";function Oe(j,M){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})])}function De(j,M){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function pe(j,M){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}function Ee(j,M){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0 1 18 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0 1 18 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 0 1 6 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})])}function Ie(j,M){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"})])}function Ae(j,M){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 1 1-.99-3.467l2.31-.66a2.25 2.25 0 0 0 1.632-2.163Zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 0 1-.99-3.467l2.31-.66A2.25 2.25 0 0 0 9 15.553Z"})])}function Ve(j,M){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function Le(j,M){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}function Pe(j,M){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"})])}const Fe={class:"bg-white shadow-sm rounded-lg border border-gray-200"},Be={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},Ue={key:0,class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},Ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Te={class:"flex items-center justify-end space-x-3"},We=["disabled"],Re={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},Ze={class:"px-6 py-6"},He={key:0,class:"text-center py-8"},qe={key:1,class:"text-center py-8"},Qe={class:"text-red-600 mb-4"},Ke={class:"text-gray-600 mb-4"},Ge={key:2,class:"text-center py-8"},Je={key:3,class:"flow-root"},Ye={class:"-mb-8"},Xe={key:0,class:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"},et={class:"relative flex items-start space-x-3"},tt={class:"relative"},st={class:"min-w-0 flex-1"},ot={class:"flex items-center justify-between"},nt={class:"text-sm"},rt={class:"font-medium text-gray-900"},it={class:"mt-1 flex items-center space-x-2 text-sm text-gray-500"},lt={class:"capitalize"},at={key:0,class:"capitalize"},dt={class:"flex items-center space-x-2"},ut=["onClick","aria-label"],ct=["onClick","aria-label"],mt={key:0,class:"mt-2 text-sm text-gray-700"},gt={class:"whitespace-pre-wrap"},pt=te({__name:"InteractionTimeline",props:{organizationId:{}},setup(j){const M=j,O=k(!1),$=k(null),_=k(!1),h=k(!1),s=k([]),p=de({type:"",channel:"",subject:"",notes:""}),b=async()=>{O.value=!0,$.value=null;try{s.value=[]}catch(m){console.error("Error loading interactions:",m),$.value="Failed to load interactions. Please try again."}finally{O.value=!1}},C=async()=>{_.value=!0;try{const m={id:`interaction_${Date.now()}`,organization_id:M.organizationId,type:p.type,channel:p.channel||null,subject:p.subject,notes:p.notes||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};s.value.unshift(m),Object.assign(p,{type:"",channel:"",subject:"",notes:""}),h.value=!1}catch(m){console.error("Error adding interaction:",m),alert("Failed to add interaction. Please try again.")}finally{_.value=!1}},L=()=>{Object.assign(p,{type:"",channel:"",subject:"",notes:""}),h.value=!1},A=m=>{console.log("Edit interaction:",m),alert("Edit functionality would be implemented here")},V=async m=>{const t=s.value.find(c=>c.id===m);if(t&&confirm(`Are you sure you want to delete this interaction: "${t.subject}"?`))try{s.value=s.value.filter(c=>c.id!==m)}catch(c){console.error("Error deleting interaction:",c),alert("Failed to delete interaction. Please try again.")}},I=m=>{const t={email:"bg-blue-500",phone:"bg-green-500",meeting:"bg-purple-500",note:"bg-gray-500",task:"bg-orange-500",demo:"bg-indigo-500",proposal:"bg-red-500"};return t[m]||t.note},P=m=>({email:ae,phone:ye,meeting:be,note:le,task:ke,demo:Le,proposal:we})[m]||le,F=m=>{const t=new Date(m),N=new Date().getTime()-t.getTime(),D=Math.floor(N/(1e3*60*60*24));return D===0?"Today":D===1?"Yesterday":D<7?`${D} days ago`:t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})};return se(()=>{b()}),(m,t)=>(n(),r("div",Fe,[e("div",Be,[t[7]||(t[7]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Interaction Timeline"),e("p",{class:"mt-1 text-sm text-gray-500"},"Communication history and engagement tracking")],-1)),e("button",{onClick:t[0]||(t[0]=c=>h.value=!h.value),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[u(g(X),{class:"h-4 w-4 mr-2"}),t[6]||(t[6]=f(" Add Interaction ",-1))])]),h.value?(n(),r("div",Ue,[e("form",{onSubmit:R(C,["prevent"]),class:"space-y-4"},[e("div",Ne,[e("div",null,[t[9]||(t[9]=e("label",{for:"interaction-type",class:"block text-sm font-medium text-gray-700 mb-1"}," Type * ",-1)),E(e("select",{id:"interaction-type","onUpdate:modelValue":t[1]||(t[1]=c=>p.type=c),required:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"},t[8]||(t[8]=[ue('<option value="">Select type</option><option value="email">Email</option><option value="phone">Phone Call</option><option value="meeting">Meeting</option><option value="note">Note</option><option value="task">Task</option><option value="demo">Demo</option><option value="proposal">Proposal</option>',8)]),512),[[Y,p.type]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"channel",class:"block text-sm font-medium text-gray-700 mb-1"}," Channel ",-1)),E(e("select",{id:"channel","onUpdate:modelValue":t[2]||(t[2]=c=>p.channel=c),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"},t[10]||(t[10]=[ue('<option value="">Select channel</option><option value="direct">Direct</option><option value="linkedin">LinkedIn</option><option value="website">Website</option><option value="referral">Referral</option><option value="cold_outreach">Cold Outreach</option><option value="event">Event</option><option value="social_media">Social Media</option>',8)]),512),[[Y,p.channel]])])]),e("div",null,[t[12]||(t[12]=e("label",{for:"subject",class:"block text-sm font-medium text-gray-700 mb-1"}," Subject * ",-1)),E(e("input",{id:"subject","onUpdate:modelValue":t[3]||(t[3]=c=>p.subject=c),type:"text",required:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter interaction subject"},null,512),[[Q,p.subject]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700 mb-1"}," Notes ",-1)),E(e("textarea",{id:"notes","onUpdate:modelValue":t[4]||(t[4]=c=>p.notes=c),rows:"3",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Add detailed notes about this interaction"},null,512),[[Q,p.notes]])]),e("div",Te,[e("button",{type:"button",onClick:L,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),e("button",{type:"submit",disabled:_.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[_.value?(n(),r("div",Re)):x("",!0),f(" "+l(_.value?"Adding...":"Add Interaction"),1)],8,We)])],32)])):x("",!0),e("div",Ze,[O.value?(n(),r("div",He,t[14]||(t[14]=[e("div",{class:"inline-flex items-center"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),e("span",{class:"text-gray-600"},"Loading interactions...")],-1)]))):$.value?(n(),r("div",qe,[e("div",Qe,[u(g(oe),{class:"h-8 w-8 mx-auto"})]),t[16]||(t[16]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Error Loading Interactions",-1)),e("p",Ke,l($.value),1),e("button",{onClick:b,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200"},[u(g(ne),{class:"h-4 w-4 mr-2"}),t[15]||(t[15]=f(" Try Again ",-1))])])):s.value.length===0?(n(),r("div",Ge,[u(g(De),{class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t[18]||(t[18]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"No interactions yet",-1)),t[19]||(t[19]=e("p",{class:"text-gray-600 mb-4"},"Start tracking communication with this organization.",-1)),e("button",{onClick:t[5]||(t[5]=c=>h.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"},[u(g(X),{class:"h-4 w-4 mr-2"}),t[17]||(t[17]=f(" Add First Interaction ",-1))])])):(n(),r("div",Je,[e("ul",Ye,[(n(!0),r(B,null,U(s.value,(c,N)=>(n(),r("li",{key:c.id,class:"relative pb-8"},[N!==s.value.length-1?(n(),r("div",Xe)):x("",!0),e("div",et,[e("div",tt,[e("div",{class:H(["h-10 w-10 rounded-full flex items-center justify-center ring-8 ring-white",I(c.type)])},[(n(),xe(ve(P(c.type)),{class:"h-5 w-5 text-white"}))],2)]),e("div",st,[e("div",ot,[e("div",null,[e("div",nt,[e("span",rt,l(c.subject),1)]),e("div",it,[e("span",lt,l(c.type),1),c.channel?(n(),r("span",at,"• "+l(c.channel),1)):x("",!0),e("span",null,"• "+l(F(c.created_at)),1)])]),e("div",dt,[e("button",{onClick:D=>A(c),class:"p-1 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100","aria-label":`Edit interaction: ${c.subject}`},[u(g(ee),{class:"h-4 w-4"})],8,ut),e("button",{onClick:D=>V(c.id),class:"p-1 text-red-400 hover:text-red-600 rounded-md hover:bg-red-50","aria-label":`Delete interaction: ${c.subject}`},[u(g(re),{class:"h-4 w-4"})],8,ct)])]),c.notes?(n(),r("div",mt,[e("p",gt,l(c.notes),1)])):x("",!0)])])]))),128))])]))])]))}}),xt={class:"bg-white shadow-sm rounded-lg border border-gray-200"},vt={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},bt={class:"flex items-center space-x-3"},yt=["value"],ft={class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500 cursor-pointer"},ht={key:0,class:"px-6 py-4 border-b border-gray-200 bg-blue-50"},_t={class:"space-y-2"},wt={class:"flex items-center space-x-3 min-w-0 flex-1"},kt={class:"flex-shrink-0"},$t={class:"min-w-0 flex-1"},Ct={class:"text-sm font-medium text-gray-900 truncate"},Mt={class:"w-full bg-gray-200 rounded-full h-2 mt-1"},jt={class:"flex-shrink-0 ml-4"},St={class:"text-sm text-gray-500"},zt={class:"px-6 py-6"},Ot={key:0,class:"text-center py-8"},Dt={key:1,class:"text-center py-8"},Et={class:"text-red-600 mb-4"},It={class:"text-gray-600 mb-4"},At={key:2,class:"text-center py-8"},Vt={class:"text-lg font-medium text-gray-900 mb-2"},Lt={class:"text-gray-600 mb-4"},Pt={class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 cursor-pointer"},Ft={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Bt=["onClick"],Ut={class:"text-center"},Nt=["title"],Tt={class:"text-xs text-gray-500 mt-1"},Wt={class:"text-xs text-gray-400 mt-1"},Rt={class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},Zt={class:"relative inline-block text-left"},Ht=["onClick"],qt={key:0,class:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10"},Qt={class:"py-1"},Kt=["onClick"],Gt=["onClick"],Jt=["onClick"],Yt={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:p-0"},Xt={class:"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},es={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},ts={class:"text-lg font-medium text-gray-900"},ss={class:"text-sm text-gray-500"},os={class:"px-6 py-6"},ns={class:"text-center py-12"},rs={class:"space-x-4"},is=te({__name:"DocumentRepository",props:{organizationId:{}},setup(j){const M=j,O=k(!1),$=k(null),_=k([]),h=k(""),s=k(null),p=k(),b=k([]),C=de({show:!1,document:null}),L=["Contract","Proposal","Invoice","Presentation","Legal","Marketing","Technical","Other"],A=Z(()=>h.value?_.value.filter(i=>i.category===h.value):_.value),V=async()=>{O.value=!0,$.value=null;try{_.value=[]}catch(i){console.error("Error loading documents:",i),$.value="Failed to load documents. Please try again."}finally{O.value=!1}},I=async i=>{const w=i.target.files;if(!(!w||w.length===0)){for(const z of Array.from(w))await P(z);p.value&&(p.value.value="")}},P=async i=>{const a={fileName:i.name,progress:0};b.value.push(a);try{const w=setInterval(()=>{if(a.progress+=Math.random()*30,a.progress>=100){a.progress=100,clearInterval(w);const z={id:`doc_${Date.now()}_${Math.random()}`,organization_id:M.organizationId,name:i.name,file_type:i.type||F(i.name),file_url:URL.createObjectURL(i),category:"Other",size:i.size,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};_.value.unshift(z),setTimeout(()=>{const W=b.value.findIndex(y=>y.fileName===i.name);W>-1&&b.value.splice(W,1)},1e3)}},200);console.log("Uploading file:",i.name)}catch(w){console.error("Error uploading file:",w),alert(`Failed to upload ${i.name}. Please try again.`);const z=b.value.findIndex(W=>W.fileName===i.name);z>-1&&b.value.splice(z,1)}},F=i=>{var z;const a=(z=i.split(".").pop())==null?void 0:z.toLowerCase();return{pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",txt:"text/plain",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",csv:"text/csv",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xls:"application/vnd.ms-excel"}[a||""]||"application/octet-stream"},m=i=>{C.document=i,C.show=!0},t=()=>{C.show=!1,C.document=null},c=i=>{const a=window.document.createElement("a");a.href=i.file_url,a.download=i.name,a.click()},N=i=>{const a=prompt("Enter new document name:",i.name);a&&a.trim()&&(i.name=a.trim(),i.updated_at=new Date().toISOString())},D=async i=>{const a=_.value.find(w=>w.id===i);if(a&&confirm(`Are you sure you want to delete "${a.name}"? This action cannot be undone.`))try{_.value=_.value.filter(w=>w.id!==i),s.value=null}catch(w){console.error("Error deleting document:",w),alert("Failed to delete document. Please try again.")}},G=i=>{s.value=s.value===i?null:i},v=i=>i.startsWith("image/")?Ve:i.includes("spreadsheet")||i.includes("excel")||i==="text/csv"?Pe:i.startsWith("video/")?Ee:i.startsWith("audio/")?Ae:le,o=i=>i.startsWith("image/")?"bg-green-500":i.includes("spreadsheet")||i.includes("excel")||i==="text/csv"?"bg-emerald-500":i.startsWith("video/")?"bg-purple-500":i.startsWith("audio/")?"bg-pink-500":i==="application/pdf"?"bg-red-500":"bg-blue-500",d=i=>{const a={Contract:"bg-blue-100 text-blue-800",Proposal:"bg-purple-100 text-purple-800",Invoice:"bg-green-100 text-green-800",Presentation:"bg-orange-100 text-orange-800",Legal:"bg-red-100 text-red-800",Marketing:"bg-pink-100 text-pink-800",Technical:"bg-gray-100 text-gray-800",Other:"bg-gray-100 text-gray-800"};return a[i]||a.Other},S=i=>{if(i===0)return"0 Bytes";const a=1024,w=["Bytes","KB","MB","GB"],z=Math.floor(Math.log(i)/Math.log(a));return parseFloat((i/Math.pow(a,z)).toFixed(2))+" "+w[z]},T=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),q={beforeMount:(i,a)=>{i.clickOutsideEvent=w=>{i===w.target||i.contains(w.target)||a.value()},window.document.addEventListener("click",i.clickOutsideEvent)},unmounted:i=>{i.clickOutsideEvent&&window.document.removeEventListener("click",i.clickOutsideEvent)}};return se(()=>{V()}),(i,a)=>{var w,z,W;return n(),r("div",xt,[e("div",vt,[a[4]||(a[4]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Document Repository"),e("p",{class:"mt-1 text-sm text-gray-500"},"Manage files and documents for this organization")],-1)),e("div",bt,[E(e("select",{"onUpdate:modelValue":a[0]||(a[0]=y=>h.value=y),class:"block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"},[a[2]||(a[2]=e("option",{value:""},"All Categories",-1)),(n(),r(B,null,U(L,y=>e("option",{key:y,value:y},l(y),9,yt)),64))],512),[[Y,h.value]]),e("label",ft,[u(g(pe),{class:"h-4 w-4 mr-2"}),a[3]||(a[3]=f(" Upload Document ",-1)),e("input",{ref_key:"fileInput",ref:p,type:"file",multiple:"",accept:".pdf,.doc,.docx,.txt,.png,.jpg,.jpeg,.gif,.csv,.xlsx,.xls",onChange:I,class:"sr-only"},null,544)])])]),b.value.length>0?(n(),r("div",ht,[a[5]||(a[5]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Uploading Files",-1)),e("div",_t,[(n(!0),r(B,null,U(b.value,y=>(n(),r("div",{key:y.fileName,class:"flex items-center justify-between"},[e("div",wt,[e("div",kt,[u(g(ce),{class:"h-5 w-5 text-gray-400"})]),e("div",$t,[e("p",Ct,l(y.fileName),1),e("div",Mt,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:ie({width:`${y.progress}%`})},null,4)])])]),e("div",jt,[e("span",St,l(y.progress)+"%",1)])]))),128))])])):x("",!0),e("div",zt,[O.value?(n(),r("div",Ot,a[6]||(a[6]=[e("div",{class:"inline-flex items-center"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),e("span",{class:"text-gray-600"},"Loading documents...")],-1)]))):$.value?(n(),r("div",Dt,[e("div",Et,[u(g(oe),{class:"h-8 w-8 mx-auto"})]),a[8]||(a[8]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Error Loading Documents",-1)),e("p",It,l($.value),1),e("button",{onClick:V,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200"},[u(g(ne),{class:"h-4 w-4 mr-2"}),a[7]||(a[7]=f(" Try Again ",-1))])])):A.value.length===0?(n(),r("div",At,[u(g(Ie),{class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e("h4",Vt,l(h.value?"No documents in this category":"No documents yet"),1),e("p",Lt,l(h.value?"Try selecting a different category or upload documents.":"Upload documents to get started."),1),e("label",Pt,[u(g(pe),{class:"h-4 w-4 mr-2"}),a[9]||(a[9]=f(" Upload Documents ",-1)),e("input",{type:"file",multiple:"",accept:".pdf,.doc,.docx,.txt,.png,.jpg,.jpeg,.gif,.csv,.xlsx,.xls",onChange:I,class:"sr-only"},null,32)])])):(n(),r("div",Ft,[(n(!0),r(B,null,U(A.value,y=>(n(),r("div",{key:y.id,class:"relative group border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:J=>m(y)},[e("div",{class:H(["flex items-center justify-center w-12 h-12 mx-auto mb-3 rounded-lg",o(y.file_type)])},[(n(),xe(ve(v(y.file_type)),{class:"h-6 w-6 text-white"}))],2),e("div",Ut,[e("h4",{class:"text-sm font-medium text-gray-900 truncate",title:y.name},l(y.name),9,Nt),e("p",Tt,l(y.category)+" • "+l(S(y.size)),1),e("p",Wt,l(T(y.created_at)),1)]),e("span",{class:H(["absolute top-2 left-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",d(y.category)])},l(y.category),3),e("div",Rt,[e("div",Zt,[e("button",{onClick:R(J=>G(y.id),["stop"]),class:"p-1 rounded-full bg-white shadow-sm border border-gray-200 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},[u(g(Ce),{class:"h-4 w-4 text-gray-600"})],8,Ht),s.value===y.id?E((n(),r("div",qt,[e("div",Qt,[e("button",{onClick:R(J=>c(y),["stop"]),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[u(g(me),{class:"h-4 w-4 inline mr-2"}),a[10]||(a[10]=f(" Download ",-1))],8,Kt),e("button",{onClick:R(J=>N(y),["stop"]),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[u(g(ee),{class:"h-4 w-4 inline mr-2"}),a[11]||(a[11]=f(" Edit Details ",-1))],8,Gt),e("button",{onClick:R(J=>D(y.id),["stop"]),class:"block w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-50"},[u(g(re),{class:"h-4 w-4 inline mr-2"}),a[12]||(a[12]=f(" Delete ",-1))],8,Jt)])])),[[q,()=>s.value=null]]):x("",!0)])])],8,Bt))),128))]))]),C.show?(n(),r("div",{key:1,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t},[e("div",Yt,[a[16]||(a[16]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",Xt,[e("div",es,[e("div",null,[e("h3",ts,l((w=C.document)==null?void 0:w.name),1),e("p",ss,l((z=C.document)==null?void 0:z.category)+" • "+l(S(((W=C.document)==null?void 0:W.size)||0)),1)]),e("button",{onClick:t,class:"rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"},[u(g($e),{class:"h-6 w-6"})])]),e("div",os,[e("div",ns,[u(g(ce),{class:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a[14]||(a[14]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Document Preview",-1)),a[15]||(a[15]=e("p",{class:"text-gray-600 mb-6"}," Document preview functionality would be implemented here based on file type. ",-1)),e("div",rs,[e("button",{onClick:a[1]||(a[1]=y=>c(C.document)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"},[u(g(me),{class:"h-4 w-4 mr-2"}),a[13]||(a[13]=f(" Download ",-1))]),e("button",{onClick:t,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Close ")])])])])])])):x("",!0)])}}}),ls={class:"bg-white shadow-sm rounded-lg border border-gray-200"},as={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},ds={class:"flex items-center space-x-3"},us={class:"flex items-center border border-gray-300 rounded-md"},cs={key:0,class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},ms={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gs=["value"],ps={class:"flex items-center justify-end space-x-3"},xs=["disabled"],vs={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},bs={class:"px-6 py-6"},ys={key:0,class:"text-center py-8"},fs={key:1,class:"text-center py-8"},hs={class:"text-red-600 mb-4"},_s={class:"text-gray-600 mb-4"},ws={key:2,class:"text-center py-8"},ks={key:3,class:"space-y-6"},$s={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Cs={class:"bg-gray-50 rounded-lg p-4"},Ms={class:"text-2xl font-bold text-gray-900"},js={class:"bg-blue-50 rounded-lg p-4"},Ss={class:"text-2xl font-bold text-blue-600"},zs={class:"bg-green-50 rounded-lg p-4"},Os={class:"text-2xl font-bold text-green-600"},Ds={class:"bg-yellow-50 rounded-lg p-4"},Es={class:"text-2xl font-bold text-yellow-600"},Is={class:"flex space-x-6 overflow-x-auto pb-4"},As={class:"flex items-center justify-between mb-4"},Vs={class:"flex items-center space-x-2"},Ls={class:"font-medium text-gray-900"},Ps={class:"text-sm text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full"},Fs={class:"text-sm text-gray-500"},Bs={class:"space-y-3"},Us=["onClick"],Ns={class:"flex items-start justify-between mb-2"},Ts={class:"font-medium text-gray-900 text-sm"},Ws=["onClick"],Rs={class:"text-lg font-bold text-gray-900 mb-2"},Zs={key:0,class:"text-sm text-gray-500 mb-2"},Hs={key:1,class:"text-sm text-gray-600 line-clamp-2"},qs={key:4,class:"space-y-4"},Qs={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Ks={class:"bg-gray-50 rounded-lg p-4"},Gs={class:"text-2xl font-bold text-gray-900"},Js={class:"bg-blue-50 rounded-lg p-4"},Ys={class:"text-2xl font-bold text-blue-600"},Xs={class:"bg-green-50 rounded-lg p-4"},eo={class:"text-2xl font-bold text-green-600"},to={class:"bg-yellow-50 rounded-lg p-4"},so={class:"text-2xl font-bold text-yellow-600"},oo={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},no={class:"min-w-full divide-y divide-gray-300"},ro={class:"bg-white divide-y divide-gray-200"},io={class:"px-6 py-4 whitespace-nowrap"},lo={class:"text-sm font-medium text-gray-900"},ao={key:0,class:"text-sm text-gray-500 truncate max-w-xs"},uo={class:"px-6 py-4 whitespace-nowrap"},co={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},mo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},go={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 space-x-2"},po=["onClick"],xo=["onClick"],vo=te({__name:"OpportunityPipeline",props:{organizationId:{}},setup(j){const M=j,O=k(!1),$=k(null),_=k(!1),h=k(!1),s=k("kanban"),p=k([]),b=de({name:"",stage:"",value:void 0,close_date:"",description:""}),C=[{id:"lead",name:"Lead",color:"#6B7280",order:1},{id:"qualified",name:"Qualified",color:"#3B82F6",order:2},{id:"proposal",name:"Proposal",color:"#F59E0B",order:3},{id:"negotiation",name:"Negotiation",color:"#EF4444",order:4},{id:"won",name:"Won",color:"#10B981",order:5},{id:"lost",name:"Lost",color:"#6B7280",order:6}],L=Z(()=>p.value.filter(v=>v.stage!=="lost").reduce((v,o)=>v+(o.value||0),0)),A=Z(()=>p.value.filter(v=>v.stage==="won").reduce((v,o)=>v+(o.value||0),0)),V=Z(()=>{const v=p.value.filter(d=>d.stage==="won"||d.stage==="lost");return v.length===0?0:v.filter(d=>d.stage==="won").length/v.length*100}),I=async()=>{O.value=!0,$.value=null;try{p.value=[]}catch(v){console.error("Error loading opportunities:",v),$.value="Failed to load opportunities. Please try again."}finally{O.value=!1}},P=async()=>{_.value=!0;try{const v={id:`opp_${Date.now()}`,organization_id:M.organizationId,name:b.name,description:b.description||null,value:b.value||null,stage:b.stage,close_date:b.close_date||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};p.value.push(v),Object.assign(b,{name:"",stage:"",value:void 0,close_date:"",description:""}),h.value=!1}catch(v){console.error("Error adding opportunity:",v),alert("Failed to add opportunity. Please try again.")}finally{_.value=!1}},F=()=>{Object.assign(b,{name:"",stage:"",value:void 0,close_date:"",description:""}),h.value=!1},m=v=>{console.log("Edit opportunity:",v),alert("Edit functionality would be implemented here")},t=async v=>{const o=p.value.find(d=>d.id===v);if(o&&confirm(`Are you sure you want to delete the opportunity "${o.name}"?`))try{p.value=p.value.filter(d=>d.id!==v)}catch(d){console.error("Error deleting opportunity:",d),alert("Failed to delete opportunity. Please try again.")}},c=v=>p.value.filter(o=>o.stage===v),N=v=>c(v).reduce((o,d)=>o+(d.value||0),0),D=v=>C.find(o=>o.id===v),G=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return se(()=>{I()}),(v,o)=>(n(),r("div",ls,[e("div",as,[o[10]||(o[10]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Opportunity Pipeline"),e("p",{class:"mt-1 text-sm text-gray-500"},"Track deals and sales opportunities for this organization")],-1)),e("div",ds,[e("div",us,[e("button",{onClick:o[0]||(o[0]=d=>s.value="kanban"),class:H(["px-3 py-2 text-sm font-medium rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500",s.value==="kanban"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"])}," Kanban ",2),e("button",{onClick:o[1]||(o[1]=d=>s.value="list"),class:H(["px-3 py-2 text-sm font-medium rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500",s.value==="list"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"])}," List ",2)]),e("button",{onClick:o[2]||(o[2]=d=>h.value=!h.value),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[u(g(X),{class:"h-4 w-4 mr-2"}),o[9]||(o[9]=f(" Add Opportunity ",-1))])])]),h.value?(n(),r("div",cs,[e("form",{onSubmit:R(P,["prevent"]),class:"space-y-4"},[e("div",ms,[e("div",null,[o[11]||(o[11]=e("label",{for:"opportunity-name",class:"block text-sm font-medium text-gray-700 mb-1"}," Opportunity Name * ",-1)),E(e("input",{id:"opportunity-name","onUpdate:modelValue":o[3]||(o[3]=d=>b.name=d),type:"text",required:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter opportunity name"},null,512),[[Q,b.name]])]),e("div",null,[o[13]||(o[13]=e("label",{for:"stage",class:"block text-sm font-medium text-gray-700 mb-1"}," Stage * ",-1)),E(e("select",{id:"stage","onUpdate:modelValue":o[4]||(o[4]=d=>b.stage=d),required:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"},[o[12]||(o[12]=e("option",{value:""},"Select stage",-1)),(n(),r(B,null,U(C,d=>e("option",{key:d.id,value:d.id},l(d.name),9,gs)),64))],512),[[Y,b.stage]])]),e("div",null,[o[14]||(o[14]=e("label",{for:"value",class:"block text-sm font-medium text-gray-700 mb-1"}," Value ($) ",-1)),E(e("input",{id:"value","onUpdate:modelValue":o[5]||(o[5]=d=>b.value=d),type:"number",min:"0",step:"0.01",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"0.00"},null,512),[[Q,b.value,void 0,{number:!0}]])]),e("div",null,[o[15]||(o[15]=e("label",{for:"close-date",class:"block text-sm font-medium text-gray-700 mb-1"}," Expected Close Date ",-1)),E(e("input",{id:"close-date","onUpdate:modelValue":o[6]||(o[6]=d=>b.close_date=d),type:"date",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[Q,b.close_date]])])]),e("div",null,[o[16]||(o[16]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"}," Description ",-1)),E(e("textarea",{id:"description","onUpdate:modelValue":o[7]||(o[7]=d=>b.description=d),rows:"2",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Brief description of the opportunity"},null,512),[[Q,b.description]])]),e("div",ps,[e("button",{type:"button",onClick:F,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),e("button",{type:"submit",disabled:_.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[_.value?(n(),r("div",vs)):x("",!0),f(" "+l(_.value?"Adding...":"Add Opportunity"),1)],8,xs)])],32)])):x("",!0),e("div",bs,[O.value?(n(),r("div",ys,o[17]||(o[17]=[e("div",{class:"inline-flex items-center"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),e("span",{class:"text-gray-600"},"Loading opportunities...")],-1)]))):$.value?(n(),r("div",fs,[e("div",hs,[u(g(oe),{class:"h-8 w-8 mx-auto"})]),o[19]||(o[19]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Error Loading Opportunities",-1)),e("p",_s,l($.value),1),e("button",{onClick:I,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200"},[u(g(ne),{class:"h-4 w-4 mr-2"}),o[18]||(o[18]=f(" Try Again ",-1))])])):p.value.length===0?(n(),r("div",ws,[u(g(Me),{class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o[21]||(o[21]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"No opportunities yet",-1)),o[22]||(o[22]=e("p",{class:"text-gray-600 mb-4"},"Create your first sales opportunity for this organization.",-1)),e("button",{onClick:o[8]||(o[8]=d=>h.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"},[u(g(X),{class:"h-4 w-4 mr-2"}),o[20]||(o[20]=f(" Create First Opportunity ",-1))])])):s.value==="kanban"?(n(),r("div",ks,[e("div",$s,[e("div",Cs,[e("div",Ms,l(p.value.length),1),o[23]||(o[23]=e("div",{class:"text-sm text-gray-600"},"Total Opportunities",-1))]),e("div",js,[e("div",Ss,"$"+l(L.value.toLocaleString()),1),o[24]||(o[24]=e("div",{class:"text-sm text-gray-600"},"Pipeline Value",-1))]),e("div",zs,[e("div",Os,"$"+l(A.value.toLocaleString()),1),o[25]||(o[25]=e("div",{class:"text-sm text-gray-600"},"Won Value",-1))]),e("div",Ds,[e("div",Es,l(Math.round(V.value))+"%",1),o[26]||(o[26]=e("div",{class:"text-sm text-gray-600"},"Win Rate",-1))])]),e("div",Is,[(n(),r(B,null,U(C,d=>e("div",{key:d.id,class:"flex-shrink-0 w-80"},[e("div",As,[e("div",Vs,[e("div",{class:"w-3 h-3 rounded-full",style:ie({backgroundColor:d.color})},null,4),e("h4",Ls,l(d.name),1),e("span",Ps,l(c(d.id).length),1)]),e("div",Fs," $"+l(N(d.id).toLocaleString()),1)]),e("div",Bs,[(n(!0),r(B,null,U(c(d.id),S=>{var T;return n(),r("div",{key:S.id,class:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:q=>m(S)},[e("div",Ns,[e("h5",Ts,l(S.name),1),e("button",{onClick:R(q=>t(S.id),["stop"]),class:"p-1 text-gray-400 hover:text-red-600 rounded-md hover:bg-red-50"},[u(g(re),{class:"h-4 w-4"})],8,Ws)]),e("div",Rs," $"+l(((T=S.value)==null?void 0:T.toLocaleString())||"0"),1),S.close_date?(n(),r("div",Zs,[u(g(be),{class:"h-4 w-4 inline mr-1"}),f(" "+l(G(S.close_date)),1)])):x("",!0),S.description?(n(),r("div",Hs,l(S.description),1)):x("",!0)],8,Us)}),128))])])),64))])])):(n(),r("div",qs,[e("div",Qs,[e("div",Ks,[e("div",Gs,l(p.value.length),1),o[27]||(o[27]=e("div",{class:"text-sm text-gray-600"},"Total Opportunities",-1))]),e("div",Js,[e("div",Ys,"$"+l(L.value.toLocaleString()),1),o[28]||(o[28]=e("div",{class:"text-sm text-gray-600"},"Pipeline Value",-1))]),e("div",Xs,[e("div",eo,"$"+l(A.value.toLocaleString()),1),o[29]||(o[29]=e("div",{class:"text-sm text-gray-600"},"Won Value",-1))]),e("div",to,[e("div",so,l(Math.round(V.value))+"%",1),o[30]||(o[30]=e("div",{class:"text-sm text-gray-600"},"Win Rate",-1))])]),e("div",oo,[e("table",no,[o[31]||(o[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide"}," Opportunity "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide"}," Stage "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide"}," Value "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide"}," Close Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide"}," Actions ")])],-1)),e("tbody",ro,[(n(!0),r(B,null,U(p.value,d=>{var S,T,q,i;return n(),r("tr",{key:d.id,class:"hover:bg-gray-50"},[e("td",io,[e("div",null,[e("div",lo,l(d.name),1),d.description?(n(),r("div",ao,l(d.description),1)):x("",!0)])]),e("td",uo,[e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:ie({backgroundColor:((S=D(d.stage))==null?void 0:S.color)+"20",color:(T=D(d.stage))==null?void 0:T.color})},l((q=D(d.stage))==null?void 0:q.name),5)]),e("td",co," $"+l(((i=d.value)==null?void 0:i.toLocaleString())||"0"),1),e("td",mo,l(d.close_date?G(d.close_date):"-"),1),e("td",go,[e("button",{onClick:a=>m(d),class:"text-blue-600 hover:text-blue-900"}," Edit ",8,po),e("button",{onClick:a=>t(d.id),class:"text-red-600 hover:text-red-900"}," Delete ",8,xo)])])}),128))])])])]))])]))}}),bo=je(vo,[["__scopeId","data-v-14bb637c"]]),yo={key:0,class:"text-center py-12"},fo={key:1,class:"text-center py-12"},ho={class:"text-red-600 mb-4"},_o={class:"text-gray-600 mb-6"},wo={class:"space-x-4"},ko={key:2,class:"space-y-6"},$o={class:"flex items-start justify-between"},Co={class:"min-w-0 flex-1"},Mo={class:"flex items-center space-x-2 text-sm text-gray-500 mb-2"},jo={class:"text-gray-900 truncate"},So={class:"flex items-center space-x-4"},zo={class:"w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center"},Oo={class:"min-w-0 flex-1"},Do={class:"text-2xl font-bold text-gray-900 truncate"},Eo={class:"flex items-center space-x-4 mt-1"},Io={key:0,class:"text-sm text-gray-500"},Ao={class:"flex items-center space-x-3 ml-4"},Vo={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Lo={class:"lg:col-span-2 space-y-6"},Po={class:"bg-white shadow-sm rounded-lg border border-gray-200"},Fo={class:"px-6 py-6 space-y-6"},Bo={key:0,class:"prose max-w-none"},Uo={class:"text-gray-700"},No={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},To={key:0},Wo={class:"mt-1 text-sm text-gray-900"},Ro={key:1},Zo={class:"mt-1 text-sm text-gray-900"},Ho={key:2},qo={class:"mt-1 text-sm text-gray-900"},Qo={class:"bg-white shadow-sm rounded-lg border border-gray-200"},Ko={class:"px-6 py-6"},Go={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Jo={key:0},Yo={class:"text-sm font-medium text-gray-500 flex items-center"},Xo={class:"mt-1"},en=["href"],tn={key:1},sn={class:"text-sm font-medium text-gray-500 flex items-center"},on={class:"mt-1"},nn=["href"],rn={key:2},ln={class:"text-sm font-medium text-gray-500 flex items-center"},an={class:"mt-1"},dn=["href"],un={key:0,class:"bg-white shadow-sm rounded-lg border border-gray-200"},cn={class:"px-6 py-6"},mn={class:"text-sm text-gray-900 not-italic"},gn={key:0},pn={key:1},xn={class:"flex items-center space-x-2"},vn={key:0},bn={key:1},yn={key:2},fn={key:3},hn={key:2},_n={class:"space-y-6"},wn={class:"bg-white shadow-sm rounded-lg border border-gray-200"},kn={class:"px-6 py-6 space-y-4"},$n={class:"flex items-center justify-between"},Cn={key:0,class:"flex items-center justify-between"},Mn={class:"text-sm font-medium text-gray-900"},jn={key:1,class:"flex items-center justify-between"},Sn={class:"text-sm font-medium text-gray-900"},zn={class:"bg-white shadow-sm rounded-lg border border-gray-200"},On={class:"px-6 py-6 space-y-3"},Dn={class:"space-y-6"},tr=te({__name:"OrganizationDetailView",props:{id:{}},setup(j){const M=j,O=he(),$=_e(),_=k(!1),h=k(null),s=Z(()=>$.currentOrganization),p=Z(()=>s.value?!!(s.value.address_line_1||s.value.city||s.value.state_province||s.value.postal_code||s.value.country):!1),b=Z(()=>s.value?`/opportunities/new?${new URLSearchParams({contextType:"organization",organizationId:s.value.id,organizationName:s.value.name||""}).toString()}`:"/opportunities/new"),C=async()=>{_.value=!0,h.value=null;try{await $.fetchOrganization(M.id),s.value||(h.value="Organization not found")}catch(m){console.error("Error loading organization:",m),h.value="Failed to load organization. Please try again."}finally{_.value=!1}},L=async()=>{if(!s.value)return;if(confirm(`Are you sure you want to delete "${s.value.name}"? This action cannot be undone.`))try{await $.deleteOrganization(M.id),O.push("/organizations")}catch(t){console.error("Error deleting organization:",t),alert("Failed to delete organization. Please try again.")}},A=()=>{var m;(m=s.value)!=null&&m.website&&window.open(s.value.website,"_blank","noopener,noreferrer")},V=()=>{var m;(m=s.value)!=null&&m.email&&(window.location.href=`mailto:${s.value.email}`)},I=m=>{if(!m)return"bg-gray-100 text-gray-800";const t={Active:"bg-green-100 text-green-800",Inactive:"bg-gray-100 text-gray-800",Prospect:"bg-blue-100 text-blue-800",Customer:"bg-purple-100 text-purple-800",Partner:"bg-yellow-100 text-yellow-800",Vendor:"bg-indigo-100 text-indigo-800"};return t[m]||t.Inactive},P=m=>m||"Unknown",F=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return se(()=>{C()}),(m,t)=>{const c=fe("router-link");return _.value?(n(),r("div",yo,t[0]||(t[0]=[e("div",{class:"inline-flex items-center"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),e("span",{class:"text-lg text-gray-600"},"Loading organization...")],-1)]))):h.value?(n(),r("div",fo,[e("div",ho,[u(g(oe),{class:"h-16 w-16 mx-auto"})]),t[3]||(t[3]=e("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"Error Loading Organization",-1)),e("p",_o,l(h.value),1),e("div",wo,[e("button",{onClick:C,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200"},[u(g(ne),{class:"h-4 w-4 mr-2"}),t[1]||(t[1]=f(" Try Again ",-1))]),u(c,{to:"/organizations",class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:K(()=>t[2]||(t[2]=[f(" Back to Organizations ",-1)])),_:1,__:[2]})])])):s.value?(n(),r("div",ko,[e("div",$o,[e("div",Co,[e("nav",Mo,[u(c,{to:"/organizations",class:"hover:text-gray-700"},{default:K(()=>t[4]||(t[4]=[f("Organizations",-1)])),_:1,__:[4]}),u(g(Se),{class:"h-4 w-4"}),e("span",jo,l(s.value.name),1)]),e("div",So,[e("div",zo,[u(g(ze),{class:"h-8 w-8 text-blue-600"})]),e("div",Oo,[e("h1",Do,l(s.value.name),1),e("div",Eo,[s.value.industry?(n(),r("span",Io,l(s.value.industry),1)):x("",!0),e("span",{class:H(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",I(s.value.status)])},l(P(s.value.status)),3)])])])]),e("div",Ao,[u(c,{to:`/organizations/${s.value.id}/edit`,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:K(()=>[u(g(ee),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=f(" Edit ",-1))]),_:1,__:[5]},8,["to"]),e("button",{onClick:L,class:"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[u(g(re),{class:"h-4 w-4 mr-2"}),t[6]||(t[6]=f(" Delete ",-1))])])]),e("div",Vo,[e("div",Lo,[e("div",Po,[t[10]||(t[10]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Organization Details")],-1)),e("div",Fo,[s.value.description?(n(),r("div",Bo,[e("p",Uo,l(s.value.description),1)])):x("",!0),e("div",No,[s.value.employees_count?(n(),r("div",To,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500"},"Employee Count",-1)),e("dd",Wo,l(s.value.employees_count.toLocaleString())+" employees ",1)])):x("",!0),s.value.created_at?(n(),r("div",Ro,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500"},"Created",-1)),e("dd",Zo,l(F(s.value.created_at)),1)])):x("",!0),s.value.updated_at?(n(),r("div",Ho,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500"},"Last Updated",-1)),e("dd",qo,l(F(s.value.updated_at)),1)])):x("",!0)])])]),e("div",Qo,[t[14]||(t[14]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Contact Information")],-1)),e("div",Ko,[e("dl",Go,[s.value.email?(n(),r("div",Jo,[e("dt",Yo,[u(g(ae),{class:"h-4 w-4 mr-2"}),t[11]||(t[11]=f(" Email ",-1))]),e("dd",Xo,[e("a",{href:`mailto:${s.value.email}`,class:"text-sm text-blue-600 hover:text-blue-800"},l(s.value.email),9,en)])])):x("",!0),s.value.primary_phone?(n(),r("div",tn,[e("dt",sn,[u(g(ye),{class:"h-4 w-4 mr-2"}),t[12]||(t[12]=f(" Phone ",-1))]),e("dd",on,[e("a",{href:`tel:${s.value.primary_phone}`,class:"text-sm text-blue-600 hover:text-blue-800"},l(s.value.primary_phone),9,nn)])])):x("",!0),s.value.website?(n(),r("div",rn,[e("dt",ln,[u(g(ge),{class:"h-4 w-4 mr-2"}),t[13]||(t[13]=f(" Website ",-1))]),e("dd",an,[e("a",{href:s.value.website,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 hover:text-blue-800 flex items-center"},[f(l(s.value.website)+" ",1),u(g(Oe),{class:"h-3 w-3 ml-1"})],8,dn)])])):x("",!0)])])]),p.value?(n(),r("div",un,[t[15]||(t[15]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Address")],-1)),e("div",cn,[e("address",mn,[s.value.address_line_1?(n(),r("div",gn,l(s.value.address_line_1),1)):x("",!0),s.value.address_line_2?(n(),r("div",pn,l(s.value.address_line_2),1)):x("",!0),e("div",xn,[s.value.city?(n(),r("span",vn,l(s.value.city),1)):x("",!0),s.value.city&&s.value.state_province?(n(),r("span",bn,",")):x("",!0),s.value.state_province?(n(),r("span",yn,l(s.value.state_province),1)):x("",!0),s.value.postal_code?(n(),r("span",fn,l(s.value.postal_code),1)):x("",!0)]),s.value.country?(n(),r("div",hn,l(s.value.country),1)):x("",!0)])])])):x("",!0)]),e("div",_n,[e("div",wn,[t[19]||(t[19]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Quick Stats")],-1)),e("div",kn,[e("div",$n,[t[16]||(t[16]=e("span",{class:"text-sm text-gray-500"},"Status",-1)),e("span",{class:H(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",I(s.value.status)])},l(P(s.value.status)),3)]),s.value.employees_count?(n(),r("div",Cn,[t[17]||(t[17]=e("span",{class:"text-sm text-gray-500"},"Employees",-1)),e("span",Mn,l(s.value.employees_count.toLocaleString()),1)])):x("",!0),s.value.industry?(n(),r("div",jn,[t[18]||(t[18]=e("span",{class:"text-sm text-gray-500"},"Industry",-1)),e("span",Sn,l(s.value.industry),1)])):x("",!0)])]),e("div",zn,[t[24]||(t[24]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Quick Actions")],-1)),e("div",On,[u(c,{to:b.value,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700"},{default:K(()=>t[20]||(t[20]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),f(" Create Opportunity ",-1)])),_:1,__:[20]},8,["to"]),u(c,{to:`/organizations/${s.value.id}/edit`,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:K(()=>[u(g(ee),{class:"h-4 w-4 mr-2"}),t[21]||(t[21]=f(" Edit Organization ",-1))]),_:1,__:[21]},8,["to"]),s.value.website?(n(),r("button",{key:0,onClick:A,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},[u(g(ge),{class:"h-4 w-4 mr-2"}),t[22]||(t[22]=f(" Visit Website ",-1))])):x("",!0),s.value.email?(n(),r("button",{key:1,onClick:V,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},[u(g(ae),{class:"h-4 w-4 mr-2"}),t[23]||(t[23]=f(" Send Email ",-1))])):x("",!0)])])])]),e("div",Dn,[u(pt,{"organization-id":s.value.id},null,8,["organization-id"]),u(is,{"organization-id":s.value.id},null,8,["organization-id"]),u(bo,{"organization-id":s.value.id},null,8,["organization-id"])])])):x("",!0)}}});export{tr as default};
//# sourceMappingURL=OrganizationDetailView-B-gNHST9.js.map
