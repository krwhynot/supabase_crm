import{A as Qt,E as Xt}from"./EngagementScoreRing-BkhISJFZ.js";import{r as ft}from"./ClockIcon-DFcbB-sH.js";import{r as Jt}from"./DocumentIcon-BsH_BoVe.js";import{r as nt}from"./CalendarIcon-DPP_Fow2.js";import{r as _e}from"./TrendIndicator-CMQUPBAk.js";import{r as wt}from"./TrophyIcon-BzssDnry.js";import{r as en}from"./UserGroupIcon-CL3csMZ9.js";import{a as tn,r as nn}from"./PhoneIcon--NXciUgs.js";import{r as _t,P as on,a as rn}from"./ManagePrincipalProductsButton.vue_vue_type_style_index_0_scoped_f75a9cbf_lang-CgdDeQZV.js";import{a as h,j as g,b as o,d as z,r as k,c as P,y as ue,h as N,F as ae,i as fe,f as T,u as L,e as W,t as D,p as an,n as ee,q as Ne,z as Ye,o as q,l as G,m as Pe,J as ln,E as te,T as sn,w as X,G as Et,M as un,N as ne,O as le,P as dn,L as K,Q as de,R as cn,S as pn,x as Ge,U as fn,B as mn,s as vn,v as we,K as mt}from"./index-CtjJHjR0.js";import{_ as Te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as gn,A as yn,O as hn}from"./OpportunityPipelineChart-BwfMBvfP.js";import{r as ot}from"./ChartBarIcon-DnppHkPB.js";import{r as $t}from"./ArrowPathIcon-CnFwnm_X.js";import{r as rt}from"./ExclamationTriangleIcon-BvwA24I5.js";import{r as at}from"./PlusIcon-BeWH-K1A.js";import{r as bn}from"./ArrowDownTrayIcon-CO3_VHAU.js";import{u as kt}from"./productStore-9Dx38iZU.js";import{u as xn}from"./opportunityStore-B1hLuFtx.js";import{r as St}from"./XMarkIcon-D9bsmxiL.js";import{u as wn}from"./principalStore-DHqEcCuF.js";import{r as _n}from"./MagnifyingGlassIcon-C7DlFZAR.js";import{r as En}from"./ChevronUpIcon-OFNtXdQa.js";function $n(e,t){return g(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"})])}function Pt(e,t){return g(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function kn(e,t){return g(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Sn(e,t){return g(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})])}function Ct(e,t){return g(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})])}const Pn={class:"principal-activity-timeline"},Cn={key:0,class:"space-y-4"},Tn={key:1,class:"text-center py-8"},An={key:2,class:"flow-root"},On={class:"-mb-8"},Dn={key:0,class:"absolute top-5 left-4 -ml-px h-full w-0.5 bg-gray-200"},Ln={class:"relative flex items-start space-x-3"},Mn={class:"relative"},Fn={key:0,class:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-blue-600 text-xs font-bold text-white"},In={class:"min-w-0 flex-1"},Rn={class:"flex items-center justify-between"},Nn={class:"flex items-center space-x-2"},jn={class:"text-sm font-medium text-gray-900"},Un=["datetime"],Bn={class:"mt-1"},Hn={class:"text-sm text-gray-600"},Vn={key:0,class:"mt-2"},Wn={class:"flex items-center space-x-2"},qn={class:"flex items-center"},zn={key:0},Yn={class:"mt-3 p-3 bg-gray-50 rounded-lg text-sm text-gray-600"},Gn={class:"mt-3 flex items-center space-x-3"},Kn=["onClick"],Zn=["onClick"],Qn=["onClick"],Xn={key:3,class:"mt-6 text-center"},Jn=["disabled"],eo={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-blue-600 rounded-full border-t-transparent"},to=z({__name:"PrincipalActivityTimeline",props:{principalId:{},timelineData:{default:()=>[]},loading:{type:Boolean,default:!1},limit:{default:20}},emits:["create-follow-up","view-related","load-more"],setup(e,{emit:t}){const n=e,r=t,a=k([]),l=k(!1),s=k(!0),i=P(()=>{if(!n.timelineData)return[];const d=new Map;return n.timelineData.forEach(v=>{const C=`${v.activity_date}-${v.activity_type}`,R=d.get(C);R?R.activity_count=(R.activity_count||1)+1:d.set(C,{...v,activity_count:1})}),Array.from(d.values()).sort((v,C)=>new Date(C.activity_date).getTime()-new Date(v.activity_date).getTime())}),c=d=>{const v={interaction:Pt,phone_call:nn,email:tn,meeting:en,opportunity:wt,product_association:_e,follow_up:nt,document:Jt,default:ft};return v[d]||v.default},u=d=>{const v={interaction:"bg-blue-100",phone_call:"bg-green-100",email:"bg-purple-100",meeting:"bg-orange-100",opportunity:"bg-yellow-100",product_association:"bg-indigo-100",follow_up:"bg-red-100",document:"bg-gray-100",default:"bg-gray-100"};return v[d]||v.default},p=d=>{const v={interaction:"text-blue-600",phone_call:"text-green-600",email:"text-purple-600",meeting:"text-orange-600",opportunity:"text-yellow-600",product_association:"text-indigo-600",follow_up:"text-red-600",document:"text-gray-600",default:"text-gray-600"};return v[d]||v.default},A=d=>{const C={interaction:"Interaction Logged",phone_call:"Phone Call",email:"Email Exchange",meeting:"Meeting Scheduled",opportunity:"Opportunity Created",product_association:"Product Associated",follow_up:"Follow-up Scheduled",document:"Document Shared"}[d.activity_type]||"Activity";return d.activity_count&&d.activity_count>1?`${C} (${d.activity_count})`:C},$=d=>({interaction:`Interaction recorded with ${d.principal_name}`,phone_call:`Phone call with ${d.principal_name}`,email:`Email correspondence with ${d.principal_name}`,meeting:`Meeting scheduled with ${d.principal_name}`,opportunity:`New opportunity created for ${d.principal_name}`,product_association:`Product associated with ${d.principal_name}`,follow_up:`Follow-up scheduled with ${d.principal_name}`,document:`Document shared with ${d.principal_name}`})[d.activity_type]||`Activity with ${d.principal_name}`,E=d=>{const v=typeof d=="string"?parseFloat(d):d;return v>=75?"ACTIVE":v>=50?"MODERATE":v>=25?"LOW":"NO_ACTIVITY"},m=d=>{const v=typeof d=="string"?parseFloat(d):d;return v>0?_t:v<0?$n:Ct},b=d=>{const v=typeof d=="string"?parseFloat(d):d;return v>0?"text-green-500":v<0?"text-red-500":"text-gray-400"},w=d=>{const v=typeof d=="string"?parseFloat(d):d;return v>0?"text-green-600":v<0?"text-red-600":"text-gray-500"},O=d=>{const v=typeof d=="string"?parseFloat(d):d;return v>0?`+${v.toFixed(1)} points`:v<0?`${v.toFixed(1)} points`:"No impact"},F=d=>["interaction","phone_call","meeting"].includes(d.activity_type),B=d=>["OPPORTUNITY_CREATED","PRODUCT_ASSOCIATION"].includes(d.activity_type),H=d=>d.activity_type==="OPPORTUNITY_CREATED"?"Opportunity":d.activity_type==="PRODUCT_ASSOCIATION"?"Product":"Related Item",M=d=>{const v=new Date(d),C=new Date,R=(C.getTime()-v.getTime())/(1e3*60*60);return R<1?"Just now":R<24?`${Math.floor(R)}h ago`:R<168?`${Math.floor(R/24)}d ago`:v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:v.getFullYear()!==C.getFullYear()?"numeric":void 0})},x=d=>{const v=a.value.indexOf(d);v>=0?a.value.splice(v,1):a.value.push(d)},Z=d=>{r("create-follow-up",d)},Q=d=>{const v=H(d);r("view-related",d,v)},S=async()=>{l.value=!0,r("load-more"),setTimeout(()=>{l.value=!1},1e3)};return ue(()=>n.timelineData,d=>{s.value=d&&d.length>=n.limit}),(d,v)=>(g(),h("div",Pn,[d.loading?(g(),h("div",Cn,[(g(),h(ae,null,fe(5,C=>o("div",{key:C,class:"animate-pulse"},v[0]||(v[0]=[an('<div class="flex space-x-3" data-v-751f85f1><div class="w-8 h-8 bg-gray-200 rounded-full" data-v-751f85f1></div><div class="flex-1 space-y-2" data-v-751f85f1><div class="h-4 bg-gray-200 rounded w-3/4" data-v-751f85f1></div><div class="h-3 bg-gray-200 rounded w-1/2" data-v-751f85f1></div></div></div>',1)]))),64))])):!d.timelineData||d.timelineData.length===0?(g(),h("div",Tn,[T(L(ft),{class:"mx-auto h-12 w-12 text-gray-400"}),v[1]||(v[1]=o("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No Activity Found",-1)),v[2]||(v[2]=o("p",{class:"mt-2 text-gray-600"}," No recent activities have been recorded for this principal. ",-1))])):(g(),h("div",An,[o("ul",On,[(g(!0),h(ae,null,fe(i.value,(C,R)=>(g(),h("li",{key:`${C.activity_date}-${R}`,class:"relative"},[R<i.value.length-1?(g(),h("div",Dn)):N("",!0),o("div",Ln,[o("div",Mn,[o("div",{class:ee(["flex h-8 w-8 items-center justify-center rounded-full ring-8 ring-white",u(C.activity_type)])},[(g(),Ne(Ye(c(C.activity_type)),{class:ee(["h-4 w-4",p(C.activity_type)])},null,8,["class"]))],2),C.activity_count&&C.activity_count>1?(g(),h("div",Fn,D(C.activity_count),1)):N("",!0)]),o("div",In,[o("div",Rn,[o("div",Nn,[o("h4",jn,D(A(C)),1),C.timeline_rank?(g(),Ne(Qt,{key:0,status:E(C.timeline_rank),size:"xs"},null,8,["status"])):N("",!0)]),o("time",{class:"text-sm text-gray-500",datetime:C.activity_date},D(M(C.activity_date)),9,Un)]),o("div",Bn,[o("p",Hn,D($(C)),1),C.timeline_rank?(g(),h("div",Vn,[o("div",Wn,[v[3]||(v[3]=o("span",{class:"text-xs font-medium text-gray-700"},"Timeline Rank:",-1)),o("div",qn,[(g(),Ne(Ye(m(C.timeline_rank)),{class:ee(["h-3 w-3 mr-1",b(C.timeline_rank)])},null,8,["class"])),o("span",{class:ee(["text-xs font-medium",w(C.timeline_rank)])},D(O(C.timeline_rank)),3)])])])):N("",!0)]),C.activity_details&&a.value.includes(C.activity_date)?(g(),h("div",zn,[o("div",Yn,D(C.activity_details),1)])):N("",!0),o("div",Gn,[C.activity_details?(g(),h("button",{key:0,onClick:se=>x(C.activity_date),class:"text-xs text-blue-600 hover:text-blue-800 font-medium"},D(a.value.includes(C.activity_date)?"Show Less":"Show Details"),9,Kn)):N("",!0),F(C)?(g(),h("button",{key:1,onClick:se=>Z(C),class:"text-xs text-green-600 hover:text-green-800 font-medium"}," Create Follow-up ",8,Zn)):N("",!0),B(C)?(g(),h("button",{key:2,onClick:se=>Q(C),class:"text-xs text-purple-600 hover:text-purple-800 font-medium"}," View "+D(H(C)),9,Qn)):N("",!0)])])])]))),128))])])),s.value?(g(),h("div",Xn,[o("button",{onClick:S,disabled:l.value,class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[l.value?(g(),h("div",eo)):N("",!0),W(" "+D(l.value?"Loading...":"Load More Activities"),1)],8,Jn)])):N("",!0)]))}}),Dl=Te(to,[["__scopeId","data-v-751f85f1"]]),no={class:"principal-analytics-chart"},oo={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},ro={class:"flex items-center space-x-4 mb-4 sm:mb-0"},ao={class:"flex items-center space-x-2"},lo=["onClick"],so={class:"flex items-center space-x-4"},io=["disabled"],uo={key:0,class:"flex items-center justify-center h-64 bg-gray-50 rounded-lg"},co={key:1,class:"flex items-center justify-center h-64 bg-red-50 rounded-lg border border-red-200"},po={class:"text-center"},fo={class:"mt-2 text-sm text-red-600"},mo={key:2,class:"bg-white"},vo={key:0,class:"h-64"},go={key:1,class:"h-64"},yo={key:2,class:"h-64"},ho={key:3,class:"h-64"},bo={class:"mt-4 flex flex-wrap items-center justify-center space-x-6 text-sm"},xo={class:"text-gray-600"},wo={class:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},_o={class:"flex items-center"},Eo={class:"text-sm font-medium text-gray-700"},$o={class:"mt-1 text-2xl font-semibold text-gray-900"},ko={class:"text-sm text-gray-600"},So=z({__name:"PrincipalAnalyticsChart",props:{principalId:{},activityData:{default:()=>[]},productPerformanceData:{default:()=>[]},loading:{type:Boolean,default:!1},principalName:{default:"Principal"}},emits:["refresh","time-range-change","chart-type-change"],setup(e,{emit:t}){const n=e,r=t,a=k("engagement"),l=k("30d"),s=k(null),i=[{value:"engagement",label:"Engagement"},{value:"activity",label:"Activity"},{value:"products",label:"Products"},{value:"opportunities",label:"Opportunities"}],c=P(()=>!n.activityData||n.activityData.length===0?[]:n.activityData.map(m=>({date:m.activity_date,engagement_score:m.timeline_rank||Math.random()*100,activity_type:m.activity_type,principal_name:m.principal_name}))),u=P(()=>{if(!n.activityData||n.activityData.length===0)return[];const m=new Map;return n.activityData.forEach(b=>{const w=b.activity_date.split("T")[0],O=m.get(w);O?(O.count++,O.types.includes(b.activity_type)||O.types.push(b.activity_type)):m.set(w,{date:w,count:1,types:[b.activity_type]})}),Array.from(m.values()).sort((b,w)=>new Date(b.date).getTime()-new Date(w.date).getTime())}),p=P(()=>[{stage:"NEW_LEAD",count:2,value:5e4},{stage:"INITIAL_OUTREACH",count:1,value:25e3},{stage:"SAMPLE_VISIT_OFFERED",count:3,value:75e3},{stage:"AWAITING_RESPONSE",count:1,value:3e4},{stage:"DEMO_SCHEDULED",count:1,value:4e4}]),A=P(()=>{var B;const m=[],b=c.value.reduce((H,M)=>H+M.engagement_score,0)/(c.value.length||1);m.push({label:"Avg Engagement",value:b.toFixed(1),description:"Average engagement score",icon:_t,iconColor:b>=70?"text-green-500":b>=40?"text-yellow-500":"text-red-500"});const O=u.value.reduce((H,M)=>H+M.count,0)/(u.value.length||1);m.push({label:"Daily Activity",value:O.toFixed(1),description:"Average activities per day",icon:nt,iconColor:"text-blue-500"});const F=((B=n.productPerformanceData)==null?void 0:B.length)||0;return m.push({label:"Products",value:F.toString(),description:"Associated products",icon:ot,iconColor:"text-purple-500"}),m}),$=()=>({engagement:[{label:"Engagement Score",color:"#3b82f6"},{label:"Trend Line",color:"#10b981"}],activity:[{label:"Interactions",color:"#3b82f6"},{label:"Meetings",color:"#f59e0b"},{label:"Opportunities",color:"#ef4444"}],products:[{label:"High Performance",color:"#10b981"},{label:"Medium Performance",color:"#f59e0b"},{label:"Low Performance",color:"#ef4444"}],opportunities:[{label:"Pipeline Value",color:"#3b82f6"},{label:"Count",color:"#8b5cf6"}]})[a.value]||[],E=()=>{s.value=null,r("refresh")};return ue(l,m=>{r("time-range-change",m)}),ue(a,m=>{r("chart-type-change",m)}),q(()=>{E()}),(m,b)=>(g(),h("div",no,[o("div",oo,[o("div",ro,[b[1]||(b[1]=o("h3",{class:"text-lg font-medium text-gray-900"},"Performance Analytics",-1)),o("div",ao,[(g(),h(ae,null,fe(i,w=>o("button",{key:w.value,onClick:O=>a.value=w.value,class:ee(["px-3 py-1.5 text-sm font-medium rounded-md transition-colors",[a.value===w.value?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"]])},D(w.label),11,lo)),64))])]),o("div",so,[G(o("select",{"onUpdate:modelValue":b[0]||(b[0]=w=>l.value=w),class:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"},b[2]||(b[2]=[o("option",{value:"7d"},"Last 7 days",-1),o("option",{value:"30d"},"Last 30 days",-1),o("option",{value:"90d"},"Last 90 days",-1),o("option",{value:"1y"},"Last year",-1)]),512),[[Pe,l.value]]),o("button",{onClick:E,disabled:m.loading,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[T(L($t),{class:ee(["h-4 w-4",{"animate-spin":m.loading}])},null,8,["class"])],8,io)])]),m.loading?(g(),h("div",uo,b[3]||(b[3]=[o("div",{class:"text-center"},[o("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),o("p",{class:"mt-2 text-sm text-gray-600"},"Loading analytics...")],-1)]))):s.value?(g(),h("div",co,[o("div",po,[T(L(rt),{class:"h-8 w-8 text-red-400 mx-auto"}),o("p",fo,D(s.value),1),o("button",{onClick:E,class:"mt-2 text-sm text-red-600 hover:text-red-800 underline"}," Try again ")])])):(g(),h("div",mo,[a.value==="engagement"?(g(),h("div",vo,[T(gn,{data:c.value,"time-range":l.value,"principal-name":m.principalName},null,8,["data","time-range","principal-name"])])):a.value==="activity"?(g(),h("div",go,[T(yn,{data:u.value,"time-range":l.value,"principal-name":m.principalName},null,8,["data","time-range","principal-name"])])):a.value==="products"?(g(),h("div",yo,[T(on,{data:m.productPerformanceData,"principal-name":m.principalName},null,8,["data","principal-name"])])):a.value==="opportunities"?(g(),h("div",ho,[T(hn,{data:p.value,"principal-name":m.principalName},null,8,["data","principal-name"])])):N("",!0)])),o("div",bo,[(g(!0),h(ae,null,fe($(),w=>(g(),h("div",{key:w.label,class:"flex items-center space-x-2"},[o("div",{class:"w-3 h-3 rounded-full",style:ln({backgroundColor:w.color})},null,4),o("span",xo,D(w.label),1)]))),128))]),o("div",wo,[(g(!0),h(ae,null,fe(A.value,w=>(g(),h("div",{key:w.label,class:"bg-gray-50 rounded-lg p-4"},[o("div",_o,[(g(),Ne(Ye(w.icon),{class:ee(["h-5 w-5 mr-2",w.iconColor])},null,8,["class"])),o("span",Eo,D(w.label),1)]),o("p",$o,D(w.value),1),o("p",ko,D(w.description),1)]))),128))])]))}}),Ll=Te(So,[["__scopeId","data-v-f1916a3a"]]),Po={class:"principal-action-bar flex items-center space-x-3"},Co={class:"flex items-center space-x-2"},To=["disabled"],Ao=["disabled"],Oo=["disabled"],Do={class:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},Lo={class:"py-1"},Mo=["disabled"],Fo={key:0,class:"flex items-center space-x-2 text-sm text-gray-600"},Io={class:"flex items-center"},Ro=z({__name:"PrincipalActionBar",props:{selectedPrincipal:{default:null},permissions:{default:()=>({canCreateOpportunity:!0,canLogInteraction:!0,canManageProducts:!0,canScheduleFollowUp:!0,canExportData:!0,canManageSettings:!1})},loading:{type:Boolean,default:!1}},emits:["create-opportunity","log-interaction","manage-products","schedule-follow-up","view-analytics","export-data","refresh","principal-settings"],setup(e,{emit:t}){const n=e,r=t,a=k(!1),l=k(),s=k(!1),i=P(()=>{var S;return((S=n.permissions)==null?void 0:S.canCreateOpportunity)!==!1}),c=P(()=>{var S;return((S=n.permissions)==null?void 0:S.canLogInteraction)!==!1}),u=P(()=>{var S;return((S=n.permissions)==null?void 0:S.canManageProducts)!==!1}),p=P(()=>{var S;return((S=n.permissions)==null?void 0:S.canScheduleFollowUp)!==!1}),A=P(()=>{var S;return((S=n.permissions)==null?void 0:S.canExportData)!==!1}),$=P(()=>{var S;return((S=n.permissions)==null?void 0:S.canManageSettings)===!0}),E=()=>{if(!n.selectedPrincipal)return"bg-gray-400";const S=n.selectedPrincipal.activity_status;return{ACTIVE:"bg-green-400",MODERATE:"bg-yellow-400",LOW:"bg-orange-400",NO_ACTIVITY:"bg-gray-400"}[S]||"bg-gray-400"},m=()=>{if(!n.selectedPrincipal)return"No principal selected";const S=n.selectedPrincipal.engagement_score||0,d=n.selectedPrincipal.total_interactions||0;return`${S} engagement • ${d} interactions`},b=()=>{n.selectedPrincipal&&(r("create-opportunity"),a.value=!1)},w=()=>{n.selectedPrincipal&&(r("log-interaction"),a.value=!1)},O=()=>{n.selectedPrincipal&&(r("manage-products"),a.value=!1)},F=()=>{n.selectedPrincipal&&(r("schedule-follow-up"),a.value=!1)},B=()=>{n.selectedPrincipal&&(r("view-analytics"),a.value=!1)},H=()=>{n.selectedPrincipal&&(r("export-data"),a.value=!1)},M=async()=>{s.value=!0,r("refresh"),setTimeout(()=>{s.value=!1,a.value=!1},1e3)},x=()=>{n.selectedPrincipal&&(r("principal-settings"),a.value=!1)},Z=S=>{if(n.selectedPrincipal&&!(S.target instanceof HTMLInputElement||S.target instanceof HTMLTextAreaElement||S.target instanceof HTMLSelectElement)){if(S.ctrlKey||S.metaKey)switch(S.key){case"o":S.preventDefault(),i.value&&b();break;case"i":S.preventDefault(),c.value&&w();break;case"r":S.preventDefault(),M();break;case"p":S.preventDefault(),u.value&&O();break}S.key==="Escape"&&(a.value=!1)}},Q=S=>{const d=S.target;l.value&&!l.value.contains(d)&&(a.value=!1)};return q(()=>{document.addEventListener("keydown",Z),document.addEventListener("click",Q)}),te(()=>{document.removeEventListener("keydown",Z),document.removeEventListener("click",Q)}),(S,d)=>(g(),h("div",Po,[o("div",Co,[i.value?(g(),h("button",{key:0,onClick:b,disabled:!S.selectedPrincipal,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[T(L(at),{class:"h-4 w-4 mr-2"}),d[1]||(d[1]=W(" Create Opportunity ",-1))],8,To)):N("",!0),c.value?(g(),h("button",{key:1,onClick:w,disabled:!S.selectedPrincipal,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[T(L(Pt),{class:"h-4 w-4 mr-2"}),d[2]||(d[2]=W(" Log Interaction ",-1))],8,Ao)):N("",!0)]),o("div",{class:"relative",ref_key:"dropdownRef",ref:l},[o("button",{onClick:d[0]||(d[0]=v=>a.value=!a.value),disabled:!S.selectedPrincipal,class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[T(L(Sn),{class:"h-4 w-4"}),d[3]||(d[3]=o("span",{class:"sr-only"},"More actions",-1))],8,Oo),T(sn,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:X(()=>[G(o("div",Do,[o("div",Lo,[u.value?(g(),h("button",{key:0,onClick:O,class:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-colors duration-150"},[T(L(_e),{class:"h-4 w-4 mr-3"}),d[4]||(d[4]=W(" Manage Products ",-1))])):N("",!0),p.value?(g(),h("button",{key:1,onClick:F,class:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-colors duration-150"},[T(L(nt),{class:"h-4 w-4 mr-3"}),d[5]||(d[5]=W(" Schedule Follow-up ",-1))])):N("",!0),o("button",{onClick:B,class:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-colors duration-150"},[T(L(ot),{class:"h-4 w-4 mr-3"}),d[6]||(d[6]=W(" View Analytics ",-1))]),A.value?(g(),h("button",{key:2,onClick:H,class:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-colors duration-150"},[T(L(bn),{class:"h-4 w-4 mr-3"}),d[7]||(d[7]=W(" Export Data ",-1))])):N("",!0),d[9]||(d[9]=o("div",{class:"border-t border-gray-100 my-1"},null,-1)),o("button",{onClick:M,disabled:s.value,class:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-150"},[T(L($t),{class:ee(["h-4 w-4 mr-3",{"animate-spin":s.value}])},null,8,["class"]),W(" "+D(s.value?"Refreshing...":"Refresh Data"),1)],8,Mo),$.value?(g(),h("button",{key:3,onClick:x,class:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-colors duration-150"},[T(L(kn),{class:"h-4 w-4 mr-3"}),d[8]||(d[8]=W(" Principal Settings ",-1))])):N("",!0)])],512),[[Et,a.value]])]),_:1})],512),S.selectedPrincipal?(g(),h("div",Fo,[o("div",Io,[o("div",{class:ee(["w-2 h-2 rounded-full mr-1",E()])},null,2),o("span",null,D(m()),1)])])):N("",!0)]))}}),Ml=Te(Ro,[["__scopeId","data-v-d95a192f"]]);function lt(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ae(){let e=[],t={addEventListener(n,r,a,l){return n.addEventListener(r,a,l),t.add(()=>n.removeEventListener(r,a,l))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let r=setTimeout(...n);t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return lt(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,a){let l=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:a}),this.add(()=>{Object.assign(n.style,{[r]:l})})},group(n){let r=Ae();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let a of e.splice(r,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}var vt;let No=Symbol("headlessui.useid"),jo=0;const He=(vt=un)!=null?vt:function(){return ne(No,()=>`${++jo}`)()};function U(e){var t;if(e==null||e.value==null)return null;let n=(t=e.value.$el)!=null?t:e.value;return n instanceof Node?n:null}function ce(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ce),r}var Uo=Object.defineProperty,Bo=(e,t,n)=>t in e?Uo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gt=(e,t,n)=>(Bo(e,typeof t!="symbol"?t+"":t,n),n);let Ho=class{constructor(){gt(this,"current",this.detect()),gt(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Oe=new Ho;function Ee(e){if(Oe.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=U(e);if(t)return t.ownerDocument}return document}let Ke=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ve=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(ve||{}),Tt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Tt||{}),Vo=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Vo||{});function Wo(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ke)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var At=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(At||{});function qo(e,t=0){var n;return e===((n=Ee(e))==null?void 0:n.body)?!1:ce(t,{0(){return e.matches(Ke)},1(){let r=e;for(;r!==null;){if(r.matches(Ke))return!0;r=r.parentElement}return!1}})}var zo=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(zo||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function xe(e){e==null||e.focus({preventScroll:!0})}let Yo=["textarea","input"].join(",");function Go(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Yo))!=null?n:!1}function Ko(e,t=n=>n){return e.slice().sort((n,r)=>{let a=t(n),l=t(r);if(a===null||l===null)return 0;let s=a.compareDocumentPosition(l);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function je(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:a=[]}={}){var l;let s=(l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?l:document,i=Array.isArray(e)?n?Ko(e):e:Wo(e);a.length>0&&i.length>1&&(i=i.filter(m=>!a.includes(m))),r=r??s.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,i.indexOf(r))-1;if(t&4)return Math.max(0,i.indexOf(r))+1;if(t&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),p=t&32?{preventScroll:!0}:{},A=0,$=i.length,E;do{if(A>=$||A+$<=0)return 0;let m=u+A;if(t&16)m=(m+$)%$;else{if(m<0)return 3;if(m>=$)return 1}E=i[m],E==null||E.focus(p),A+=c}while(E!==s.activeElement);return t&6&&Go(E)&&E.select(),2}function Ot(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Zo(){return/Android/gi.test(window.navigator.userAgent)}function Qo(){return Ot()||Zo()}function Fe(e,t,n){Oe.isServer||le(r=>{document.addEventListener(e,t,n),r(()=>document.removeEventListener(e,t,n))})}function Dt(e,t,n){Oe.isServer||le(r=>{window.addEventListener(e,t,n),r(()=>window.removeEventListener(e,t,n))})}function Xo(e,t,n=P(()=>!0)){function r(l,s){if(!n.value||l.defaultPrevented)return;let i=s(l);if(i===null||!i.getRootNode().contains(i))return;let c=function u(p){return typeof p=="function"?u(p()):Array.isArray(p)||p instanceof Set?p:[p]}(e);for(let u of c){if(u===null)continue;let p=u instanceof HTMLElement?u:U(u);if(p!=null&&p.contains(i)||l.composed&&l.composedPath().includes(p))return}return!qo(i,At.Loose)&&i.tabIndex!==-1&&l.preventDefault(),t(l,i)}let a=k(null);Fe("pointerdown",l=>{var s,i;n.value&&(a.value=((i=(s=l.composedPath)==null?void 0:s.call(l))==null?void 0:i[0])||l.target)},!0),Fe("mousedown",l=>{var s,i;n.value&&(a.value=((i=(s=l.composedPath)==null?void 0:s.call(l))==null?void 0:i[0])||l.target)},!0),Fe("click",l=>{Qo()||a.value&&(r(l,()=>a.value),a.value=null)},!0),Fe("touchend",l=>r(l,()=>l.target instanceof HTMLElement?l.target:null),!0),Dt("blur",l=>r(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var Ue=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Ue||{}),ge=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ge||{});function pe({visible:e=!0,features:t=0,ourProps:n,theirProps:r,...a}){var l;let s=Mt(r,n),i=Object.assign(a,{props:s});if(e||t&2&&s.static)return We(i);if(t&1){let c=(l=s.unmount)==null||l?0:1;return ce(c,{0(){return null},1(){return We({...a,props:{...s,hidden:!0,style:{display:"none"}}})}})}return We(i)}function We({props:e,attrs:t,slots:n,slot:r,name:a}){var l,s;let{as:i,...c}=Ft(e,["unmount","static"]),u=(l=n.default)==null?void 0:l.call(n,r),p={};if(r){let A=!1,$=[];for(let[E,m]of Object.entries(r))typeof m=="boolean"&&(A=!0),m===!0&&$.push(E);A&&(p["data-headlessui-state"]=$.join(" "))}if(i==="template"){if(u=Lt(u??[]),Object.keys(c).length>0||Object.keys(t).length>0){let[A,...$]=u??[];if(!Jo(A)||$.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${a} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(c).concat(Object.keys(t)).map(b=>b.trim()).filter((b,w,O)=>O.indexOf(b)===w).sort((b,w)=>b.localeCompare(w)).map(b=>`  - ${b}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(b=>`  - ${b}`).join(`
`)].join(`
`));let E=Mt((s=A.props)!=null?s:{},c,p),m=dn(A,E,!0);for(let b in E)b.startsWith("on")&&(m.props||(m.props={}),m.props[b]=E[b]);return m}return Array.isArray(u)&&u.length===1?u[0]:u}return K(i,Object.assign({},c,p),{default:()=>u})}function Lt(e){return e.flatMap(t=>t.type===ae?Lt(t.children):[t])}function Mt(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(r[a])):t[a]=r[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](a,...l){let s=n[r];for(let i of s){if(a instanceof Event&&a.defaultPrevented)return;i(a,...l)}}});return t}function Ft(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function Jo(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var Be=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Be||{});let Ze=z({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:n}){return()=>{var r;let{features:a,...l}=e,s={"aria-hidden":(a&2)===2?!0:(r=l["aria-hidden"])!=null?r:void 0,hidden:(a&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(a&4)===4&&(a&2)!==2&&{display:"none"}}};return pe({ourProps:s,theirProps:l,slot:{},attrs:n,slots:t,name:"Hidden"})}}}),It=Symbol("Context");var J=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(J||{});function er(){return st()!==null}function st(){return ne(It,null)}function tr(e){de(It,e)}var Rt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Rt||{});function nr(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let he=[];nr(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&he[0]!==t.target&&(he.unshift(t.target),he=he.filter(n=>n!=null&&n.isConnected),he.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Nt(e,t,n,r){Oe.isServer||le(a=>{e=e??window,e.addEventListener(t,n,r),a(()=>e.removeEventListener(t,n,r))})}var Se=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Se||{});function or(){let e=k(0);return Dt("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function jt(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let r=U(n);r instanceof HTMLElement&&t.add(r)}return t}var Ut=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Ut||{});let $e=Object.assign(z({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:k(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:r}){let a=k(null);r({el:a,$el:a});let l=P(()=>Ee(a)),s=k(!1);q(()=>s.value=!0),te(()=>s.value=!1),ar({ownerDocument:l},P(()=>s.value&&!!(e.features&16)));let i=lr({ownerDocument:l,container:a,initialFocus:P(()=>e.initialFocus)},P(()=>s.value&&!!(e.features&2)));sr({ownerDocument:l,container:a,containers:e.containers,previousActiveElement:i},P(()=>s.value&&!!(e.features&8)));let c=or();function u(E){let m=U(a);m&&(b=>b())(()=>{ce(c.value,{[Se.Forwards]:()=>{je(m,ve.First,{skipElements:[E.relatedTarget]})},[Se.Backwards]:()=>{je(m,ve.Last,{skipElements:[E.relatedTarget]})}})})}let p=k(!1);function A(E){E.key==="Tab"&&(p.value=!0,requestAnimationFrame(()=>{p.value=!1}))}function $(E){if(!s.value)return;let m=jt(e.containers);U(a)instanceof HTMLElement&&m.add(U(a));let b=E.relatedTarget;b instanceof HTMLElement&&b.dataset.headlessuiFocusGuard!=="true"&&(Bt(m,b)||(p.value?je(U(a),ce(c.value,{[Se.Forwards]:()=>ve.Next,[Se.Backwards]:()=>ve.Previous})|ve.WrapAround,{relativeTo:E.target}):E.target instanceof HTMLElement&&xe(E.target)))}return()=>{let E={},m={ref:a,onKeydown:A,onFocusout:$},{features:b,initialFocus:w,containers:O,...F}=e;return K(ae,[!!(b&4)&&K(Ze,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Be.Focusable}),pe({ourProps:m,theirProps:{...t,...F},slot:E,attrs:t,slots:n,name:"FocusTrap"}),!!(b&4)&&K(Ze,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Be.Focusable})])}}}),{features:Ut});function rr(e){let t=k(he.slice());return ue([e],([n],[r])=>{r===!0&&n===!1?lt(()=>{t.value.splice(0)}):r===!1&&n===!0&&(t.value=he.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(r=>r!=null&&r.isConnected))!=null?n:null}}function ar({ownerDocument:e},t){let n=rr(t);q(()=>{le(()=>{var r,a;t.value||((r=e.value)==null?void 0:r.activeElement)===((a=e.value)==null?void 0:a.body)&&xe(n())},{flush:"post"})}),te(()=>{t.value&&xe(n())})}function lr({ownerDocument:e,container:t,initialFocus:n},r){let a=k(null),l=k(!1);return q(()=>l.value=!0),te(()=>l.value=!1),q(()=>{ue([t,n,r],(s,i)=>{if(s.every((u,p)=>(i==null?void 0:i[p])===u)||!r.value)return;let c=U(t);c&&lt(()=>{var u,p;if(!l.value)return;let A=U(n),$=(u=e.value)==null?void 0:u.activeElement;if(A){if(A===$){a.value=$;return}}else if(c.contains($)){a.value=$;return}A?xe(A):je(c,ve.First|ve.NoScroll)===Tt.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.value=(p=e.value)==null?void 0:p.activeElement})},{immediate:!0,flush:"post"})}),a}function sr({ownerDocument:e,container:t,containers:n,previousActiveElement:r},a){var l;Nt((l=e.value)==null?void 0:l.defaultView,"focus",s=>{if(!a.value)return;let i=jt(n);U(t)instanceof HTMLElement&&i.add(U(t));let c=r.value;if(!c)return;let u=s.target;u&&u instanceof HTMLElement?Bt(i,u)?(r.value=u,xe(u)):(s.preventDefault(),s.stopPropagation(),xe(c)):xe(r.value)},!0)}function Bt(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function ir(e){let t=cn(e.getSnapshot());return te(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function ur(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(a){return r.add(a),()=>r.delete(a)},dispatch(a,...l){let s=t[a].call(n,...l);s&&(n=s,r.forEach(i=>i()))}}}function dr(){let e;return{before({doc:t}){var n;let r=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:t,d:n}){let r=t.documentElement,a=r.clientWidth-r.offsetWidth,l=e-a;n.style(r,"paddingRight",`${l}px`)}}}function cr(){return Ot()?{before({doc:e,d:t,meta:n}){function r(a){return n.containers.flatMap(l=>l()).some(l=>l.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let i=Ae();i.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>i.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,s=null;t.addEventListener(e,"click",i=>{if(i.target instanceof HTMLElement)try{let c=i.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),p=e.querySelector(u);p&&!r(p)&&(s=p)}catch{}},!0),t.addEventListener(e,"touchstart",i=>{if(i.target instanceof HTMLElement)if(r(i.target)){let c=i.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(i.target,"touchAction","none")}),t.addEventListener(e,"touchmove",i=>{if(i.target instanceof HTMLElement){if(i.target.tagName==="INPUT")return;if(r(i.target)){let c=i.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&i.preventDefault()}else i.preventDefault()}},{passive:!1}),t.add(()=>{var i;let c=(i=window.scrollY)!=null?i:window.pageYOffset;l!==c&&window.scrollTo(0,l),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function pr(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function fr(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let be=ur(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Ae(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:fr(n)},a=[cr(),dr(),pr()];a.forEach(({before:l})=>l==null?void 0:l(r)),a.forEach(({after:l})=>l==null?void 0:l(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});be.subscribe(()=>{let e=be.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!r||!a&&r)&&be.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&be.dispatch("TEARDOWN",n)}});function mr(e,t,n){let r=ir(be),a=P(()=>{let l=e.value?r.value.get(e.value):void 0;return l?l.count>0:!1});return ue([e,t],([l,s],[i],c)=>{if(!l||!s)return;be.dispatch("PUSH",l,n);let u=!1;c(()=>{u||(be.dispatch("POP",i??l,n),u=!0)})},{immediate:!0}),a}let qe=new Map,ke=new Map;function yt(e,t=k(!0)){le(n=>{var r;if(!t.value)return;let a=U(e);if(!a)return;n(function(){var s;if(!a)return;let i=(s=ke.get(a))!=null?s:1;if(i===1?ke.delete(a):ke.set(a,i-1),i!==1)return;let c=qe.get(a);c&&(c["aria-hidden"]===null?a.removeAttribute("aria-hidden"):a.setAttribute("aria-hidden",c["aria-hidden"]),a.inert=c.inert,qe.delete(a))});let l=(r=ke.get(a))!=null?r:0;ke.set(a,l+1),l===0&&(qe.set(a,{"aria-hidden":a.getAttribute("aria-hidden"),inert:a.inert}),a.setAttribute("aria-hidden","true"),a.inert=!0)})}function vr({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){let r=k(null),a=Ee(r);function l(){var s,i,c;let u=[];for(let p of e)p!==null&&(p instanceof HTMLElement?u.push(p):"value"in p&&p.value instanceof HTMLElement&&u.push(p.value));if(t!=null&&t.value)for(let p of t.value)u.push(p);for(let p of(s=a==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?s:[])p!==document.body&&p!==document.head&&p instanceof HTMLElement&&p.id!=="headlessui-portal-root"&&(p.contains(U(r))||p.contains((c=(i=U(r))==null?void 0:i.getRootNode())==null?void 0:c.host)||u.some(A=>p.contains(A))||u.push(p));return u}return{resolveContainers:l,contains(s){return l().some(i=>i.contains(s))},mainTreeNodeRef:r,MainTreeNode(){return n!=null?null:K(Ze,{features:Be.Hidden,ref:r})}}}let Ht=Symbol("ForcePortalRootContext");function gr(){return ne(Ht,!1)}let ht=z({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n}){return de(Ht,e.force),()=>{let{force:r,...a}=e;return pe({theirProps:a,ourProps:{},slot:{},slots:t,attrs:n,name:"ForcePortalRoot"})}}}),Vt=Symbol("StackContext");var Qe=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Qe||{});function yr(){return ne(Vt,()=>{})}function hr({type:e,enabled:t,element:n,onUpdate:r}){let a=yr();function l(...s){r==null||r(...s),a(...s)}q(()=>{ue(t,(s,i)=>{s?l(0,e,n):i===!0&&l(1,e,n)},{immediate:!0,flush:"sync"})}),te(()=>{t.value&&l(1,e,n)}),de(Vt,l)}let br=Symbol("DescriptionContext");function xr({slot:e=k({}),name:t="Description",props:n={}}={}){let r=k([]);function a(l){return r.value.push(l),()=>{let s=r.value.indexOf(l);s!==-1&&r.value.splice(s,1)}}return de(br,{register:a,slot:e,name:t,props:n}),P(()=>r.value.length>0?r.value.join(" "):void 0)}function wr(e){let t=Ee(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let r=t.createElement("div");return r.setAttribute("id","headlessui-portal-root"),t.body.appendChild(r)}const Xe=new WeakMap;function _r(e){var t;return(t=Xe.get(e))!=null?t:0}function bt(e,t){let n=t(_r(e));return n<=0?Xe.delete(e):Xe.set(e,n),n}let Er=z({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let r=k(null),a=P(()=>Ee(r)),l=gr(),s=ne(Wt,null),i=k(l===!0||s==null?wr(r.value):s.resolveTarget());i.value&&bt(i.value,$=>$+1);let c=k(!1);q(()=>{c.value=!0}),le(()=>{l||s!=null&&(i.value=s.resolveTarget())});let u=ne(Je,null),p=!1,A=fn();return ue(r,()=>{if(p||!u)return;let $=U(r);$&&(te(u.register($),A),p=!0)}),te(()=>{var $,E;let m=($=a.value)==null?void 0:$.getElementById("headlessui-portal-root");!m||i.value!==m||bt(i.value,b=>b-1)||i.value.children.length>0||(E=i.value.parentElement)==null||E.removeChild(i.value)}),()=>{if(!c.value||i.value===null)return null;let $={ref:r,"data-headlessui-portal":""};return K(pn,{to:i.value},pe({ourProps:$,theirProps:e,slot:{},attrs:n,slots:t,name:"Portal"}))}}}),Je=Symbol("PortalParentContext");function $r(){let e=ne(Je,null),t=k([]);function n(l){return t.value.push(l),e&&e.register(l),()=>r(l)}function r(l){let s=t.value.indexOf(l);s!==-1&&t.value.splice(s,1),e&&e.unregister(l)}let a={register:n,unregister:r,portals:t};return[t,z({name:"PortalWrapper",setup(l,{slots:s}){return de(Je,a),()=>{var i;return(i=s.default)==null?void 0:i.call(s)}}})]}let Wt=Symbol("PortalGroupContext"),kr=z({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:n}){let r=Ge({resolveTarget(){return e.target}});return de(Wt,r),()=>{let{target:a,...l}=e;return pe({theirProps:l,ourProps:{},slot:{},attrs:t,slots:n,name:"PortalGroup"})}}});var Sr=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Sr||{});let et=Symbol("DialogContext");function it(e){let t=ne(et,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,it),n}return t}let Ie="DC8F892D-2EBD-447C-A4C8-A03058436FF4",qt=z({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:Ie},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:r,expose:a}){var l,s;let i=(l=e.id)!=null?l:`headlessui-dialog-${He()}`,c=k(!1);q(()=>{c.value=!0});let u=!1,p=P(()=>e.role==="dialog"||e.role==="alertdialog"?e.role:(u||(u=!0,console.warn(`Invalid role [${p}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),A=k(0),$=st(),E=P(()=>e.open===Ie&&$!==null?($.value&J.Open)===J.Open:e.open),m=k(null),b=P(()=>Ee(m));if(a({el:m,$el:m}),!(e.open!==Ie||$!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof E.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${E.value===Ie?void 0:e.open}`);let w=P(()=>c.value&&E.value?0:1),O=P(()=>w.value===0),F=P(()=>A.value>1),B=ne(et,null)!==null,[H,M]=$r(),{resolveContainers:x,mainTreeNodeRef:Z,MainTreeNode:Q}=vr({portals:H,defaultContainers:[P(()=>{var I;return(I=me.panelRef.value)!=null?I:m.value})]}),S=P(()=>F.value?"parent":"leaf"),d=P(()=>$!==null?($.value&J.Closing)===J.Closing:!1),v=P(()=>B||d.value?!1:O.value),C=P(()=>{var I,j,Y;return(Y=Array.from((j=(I=b.value)==null?void 0:I.querySelectorAll("body > *"))!=null?j:[]).find(y=>y.id==="headlessui-portal-root"?!1:y.contains(U(Z))&&y instanceof HTMLElement))!=null?Y:null});yt(C,v);let R=P(()=>F.value?!0:O.value),se=P(()=>{var I,j,Y;return(Y=Array.from((j=(I=b.value)==null?void 0:I.querySelectorAll("[data-headlessui-portal]"))!=null?j:[]).find(y=>y.contains(U(Z))&&y instanceof HTMLElement))!=null?Y:null});yt(se,R),hr({type:"Dialog",enabled:P(()=>w.value===0),element:m,onUpdate:(I,j)=>{if(j==="Dialog")return ce(I,{[Qe.Add]:()=>A.value+=1,[Qe.Remove]:()=>A.value-=1})}});let oe=xr({name:"DialogDescription",slot:P(()=>({open:E.value}))}),re=k(null),me={titleId:re,panelRef:k(null),dialogState:w,setTitleId(I){re.value!==I&&(re.value=I)},close(){t("close",!1)}};de(et,me);let De=P(()=>!(!O.value||F.value));Xo(x,(I,j)=>{I.preventDefault(),me.close(),mn(()=>j==null?void 0:j.focus())},De);let Le=P(()=>!(F.value||w.value!==0));Nt((s=b.value)==null?void 0:s.defaultView,"keydown",I=>{Le.value&&(I.defaultPrevented||I.key===Rt.Escape&&(I.preventDefault(),I.stopPropagation(),me.close()))});let Me=P(()=>!(d.value||w.value!==0||B));return mr(b,Me,I=>{var j;return{containers:[...(j=I.containers)!=null?j:[],x]}}),le(I=>{if(w.value!==0)return;let j=U(m);if(!j)return;let Y=new ResizeObserver(y=>{for(let f of y){let _=f.target.getBoundingClientRect();_.x===0&&_.y===0&&_.width===0&&_.height===0&&me.close()}});Y.observe(j),I(()=>Y.disconnect())}),()=>{let{open:I,initialFocus:j,...Y}=e,y={...n,ref:m,id:i,role:p.value,"aria-modal":w.value===0?!0:void 0,"aria-labelledby":re.value,"aria-describedby":oe.value},f={open:w.value===0};return K(ht,{force:!0},()=>[K(Er,()=>K(kr,{target:m.value},()=>K(ht,{force:!1},()=>K($e,{initialFocus:j,containers:x,features:O.value?ce(S.value,{parent:$e.features.RestoreFocus,leaf:$e.features.All&~$e.features.FocusLock}):$e.features.None},()=>K(M,{},()=>pe({ourProps:y,theirProps:{...Y,...n},slot:f,attrs:n,slots:r,visible:w.value===0,features:Ue.RenderStrategy|Ue.Static,name:"Dialog"})))))),K(Q)])}}}),zt=z({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:r}){var a;let l=(a=e.id)!=null?a:`headlessui-dialog-panel-${He()}`,s=it("DialogPanel");r({el:s.panelRef,$el:s.panelRef});function i(c){c.stopPropagation()}return()=>{let{...c}=e,u={id:l,ref:s.panelRef,onClick:i};return pe({ourProps:u,theirProps:c,slot:{open:s.dialogState.value===0},attrs:t,slots:n,name:"DialogPanel"})}}}),Yt=z({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n}){var r;let a=(r=e.id)!=null?r:`headlessui-dialog-title-${He()}`,l=it("DialogTitle");return q(()=>{l.setTitleId(a),te(()=>l.setTitleId(null))}),()=>{let{...s}=e;return pe({ourProps:{id:a},theirProps:s,slot:{open:l.dialogState.value===0},attrs:t,slots:n,name:"DialogTitle"})}}});function Pr(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function ze(e,...t){e&&t.length>0&&e.classList.add(...t)}function Re(e,...t){e&&t.length>0&&e.classList.remove(...t)}var tt=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(tt||{});function Cr(e,t){let n=Ae();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:a}=getComputedStyle(e),[l,s]=[r,a].map(i=>{let[c=0]=i.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,p)=>p-u);return c});return l!==0?n.setTimeout(()=>t("finished"),l+s):t("finished"),n.add(()=>t("cancelled")),n.dispose}function xt(e,t,n,r,a,l){let s=Ae(),i=l!==void 0?Pr(l):()=>{};return Re(e,...a),ze(e,...t,...n),s.nextFrame(()=>{Re(e,...n),ze(e,...r),s.add(Cr(e,c=>(Re(e,...r,...t),ze(e,...a),i(c))))}),s.add(()=>Re(e,...t,...n,...r,...a)),s.add(()=>i("cancelled")),s.dispose}function ye(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let ut=Symbol("TransitionContext");var Tr=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Tr||{});function Ar(){return ne(ut,null)!==null}function Or(){let e=ne(ut,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Dr(){let e=ne(dt,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let dt=Symbol("NestingContext");function Ve(e){return"children"in e?Ve(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Gt(e){let t=k([]),n=k(!1);q(()=>n.value=!0),te(()=>n.value=!1);function r(l,s=ge.Hidden){let i=t.value.findIndex(({id:c})=>c===l);i!==-1&&(ce(s,{[ge.Unmount](){t.value.splice(i,1)},[ge.Hidden](){t.value[i].state="hidden"}}),!Ve(t)&&n.value&&(e==null||e()))}function a(l){let s=t.value.find(({id:i})=>i===l);return s?s.state!=="visible"&&(s.state="visible"):t.value.push({id:l,state:"visible"}),()=>r(l,ge.Unmount)}return{children:t,register:a,unregister:r}}let Kt=Ue.RenderStrategy,Ce=z({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:r,expose:a}){let l=k(0);function s(){l.value|=J.Opening,t("beforeEnter")}function i(){l.value&=~J.Opening,t("afterEnter")}function c(){l.value|=J.Closing,t("beforeLeave")}function u(){l.value&=~J.Closing,t("afterLeave")}if(!Ar()&&er())return()=>K(ct,{...e,onBeforeEnter:s,onAfterEnter:i,onBeforeLeave:c,onAfterLeave:u},r);let p=k(null),A=P(()=>e.unmount?ge.Unmount:ge.Hidden);a({el:p,$el:p});let{show:$,appear:E}=Or(),{register:m,unregister:b}=Dr(),w=k($.value?"visible":"hidden"),O={value:!0},F=He(),B={value:!1},H=Gt(()=>{!B.value&&w.value!=="hidden"&&(w.value="hidden",b(F),u())});q(()=>{let R=m(F);te(R)}),le(()=>{if(A.value===ge.Hidden&&F){if($.value&&w.value!=="visible"){w.value="visible";return}ce(w.value,{hidden:()=>b(F),visible:()=>m(F)})}});let M=ye(e.enter),x=ye(e.enterFrom),Z=ye(e.enterTo),Q=ye(e.entered),S=ye(e.leave),d=ye(e.leaveFrom),v=ye(e.leaveTo);q(()=>{le(()=>{if(w.value==="visible"){let R=U(p);if(R instanceof Comment&&R.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function C(R){let se=O.value&&!E.value,oe=U(p);!oe||!(oe instanceof HTMLElement)||se||(B.value=!0,$.value&&s(),$.value||c(),R($.value?xt(oe,M,x,Z,Q,re=>{B.value=!1,re===tt.Finished&&i()}):xt(oe,S,d,v,Q,re=>{B.value=!1,re===tt.Finished&&(Ve(H)||(w.value="hidden",b(F),u()))})))}return q(()=>{ue([$],(R,se,oe)=>{C(oe),O.value=!1},{immediate:!0})}),de(dt,H),tr(P(()=>ce(w.value,{visible:J.Open,hidden:J.Closed})|l.value)),()=>{let{appear:R,show:se,enter:oe,enterFrom:re,enterTo:me,entered:De,leave:Le,leaveFrom:Me,leaveTo:I,...j}=e,Y={ref:p},y={...j,...E.value&&$.value&&Oe.isServer?{class:ee([n.class,j.class,...M,...x])}:{}};return pe({theirProps:y,ourProps:Y,slot:{},slots:r,attrs:n,features:Kt,visible:w.value==="visible",name:"TransitionChild"})}}}),Lr=Ce,ct=z({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:r}){let a=st(),l=P(()=>e.show===null&&a!==null?(a.value&J.Open)===J.Open:e.show);le(()=>{if(![!0,!1].includes(l.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let s=k(l.value?"visible":"hidden"),i=Gt(()=>{s.value="hidden"}),c=k(!0),u={show:l,appear:P(()=>e.appear||!c.value)};return q(()=>{le(()=>{c.value=!1,l.value?s.value="visible":Ve(i)||(s.value="hidden")})}),de(dt,i),de(ut,u),()=>{let p=Ft(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),A={unmount:e.unmount};return pe({ourProps:{...A,as:"template"},theirProps:{},slot:{},slots:{...r,default:()=>[K(Lr,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...A,...p},r.default)]},attrs:{},features:Kt,visible:s.value==="visible",name:"Transition"})}}});const Mr={class:"create-principal-opportunity-button"},Fr=["disabled"],Ir={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Rr={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Nr={class:"flex items-center justify-between mb-4"},jr={class:"mt-1 text-sm text-gray-600"},Ur={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},Br={class:"flex"},Hr={class:"ml-3"},Vr={class:"text-sm text-red-700"},Wr={class:"space-y-4"},qr={class:"mt-1 p-3 bg-gray-50 border border-gray-200 rounded-md"},zr={class:"flex items-center justify-between"},Yr={class:"text-sm font-medium text-gray-900"},Gr={class:"text-xs text-gray-500"},Kr={key:0,class:"mt-1 text-sm text-red-600"},Zr={key:0,class:"mt-1 text-sm text-red-600"},Qr={key:0},Xr=["value"],Jr=["min"],ea={class:"mt-1 flex items-center space-x-3"},ta={class:"text-sm font-medium text-gray-700 w-12 text-right"},na={class:"mt-6 flex items-center justify-end space-x-3"},oa=["disabled"],ra={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white rounded-full border-t-transparent"},aa=z({__name:"CreatePrincipalOpportunityButton",props:{principal:{default:null}},emits:["created"],setup(e,{emit:t}){const n=e,r=t,a=kt(),l=xn(),s=k(!1),i=k(!1),c=k(null),u=Ge({name:"",context:"",customContext:"",productId:"",stage:"NEW_LEAD",expectedCloseDate:"",probability:25,notes:""}),p=Ge({name:"",context:""}),A=P(()=>a.products.filter(M=>M.is_active)),$=P(()=>u.name.trim()!==""&&u.context!==""&&(u.context!=="OTHER"||u.customContext.trim()!=="")),E=()=>{n.principal&&(w(),B(),s.value=!0)},m=()=>{s.value=!1,w(),c.value=null},b=async()=>{if(!(!$.value||!n.principal)&&(O(),!!F())){i.value=!0,c.value=null;try{const M={name:u.name,organization_id:n.principal.principal_id,principal_id:n.principal.principal_id,product_id:u.productId||null,stage:u.stage,context:u.context,custom_context:u.context==="OTHER"?u.customContext:null,expected_close_date:u.expectedCloseDate||null,probability_percent:u.probability,notes:u.notes||null,deal_owner:"Current User"},x=await l.createOpportunity(M);x?(r("created",x),m(),console.log("Opportunity created successfully:",x)):c.value="Failed to create opportunity. Please try again."}catch(M){c.value=M instanceof Error?M.message:"An unexpected error occurred"}finally{i.value=!1}}},w=()=>{u.name="",u.context="",u.customContext="",u.productId="",u.stage="NEW_LEAD",u.expectedCloseDate="",u.probability=25,u.notes="",O()},O=()=>{p.name="",p.context=""},F=()=>{let M=!0;return u.name.trim()||(p.name="Opportunity name is required",M=!1),u.context||(p.context="Context is required",M=!1),M},B=()=>{if(!n.principal)return;const x=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"});u.name=`${n.principal.organization_type||"Organization"} - ${n.principal.principal_name} - ${x}`},H=()=>new Date().toISOString().split("T")[0];return ue(()=>u.context,M=>{M!=="OTHER"&&(u.customContext="")}),q(async()=>{a.products.length===0&&await a.fetchProducts()}),(M,x)=>(g(),h("div",Mr,[o("button",{onClick:E,disabled:!M.principal||i.value,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[T(L(at),{class:"h-4 w-4 mr-1"}),W(" "+D(i.value?"Creating...":"New Opportunity"),1)],8,Fr),T(L(ct),{as:"template",show:s.value},{default:X(()=>[T(L(qt),{as:"div",class:"relative z-50",onClose:m},{default:X(()=>[T(L(Ce),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:X(()=>x[8]||(x[8]=[o("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1,__:[8]}),o("div",Ir,[o("div",Rr,[T(L(Ce),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:X(()=>[T(L(zt),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},{default:X(()=>{var Z,Q,S,d;return[o("div",Nr,[o("div",null,[T(L(Yt),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:X(()=>x[9]||(x[9]=[W(" Create Opportunity ",-1)])),_:1,__:[9]}),o("p",jr," Create a new opportunity for "+D((Z=M.principal)==null?void 0:Z.principal_name),1)]),o("button",{onClick:m,class:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"},[T(L(St),{class:"h-6 w-6"})])]),c.value?(g(),h("div",Ur,[o("div",Br,[T(L(rt),{class:"h-5 w-5 text-red-400"}),o("div",Hr,[o("p",Vr,D(c.value),1)])])])):N("",!0),o("form",{onSubmit:vn(b,["prevent"])},[o("div",Wr,[o("div",null,[x[10]||(x[10]=o("label",{class:"block text-sm font-medium text-gray-700"},"Principal",-1)),o("div",qr,[o("div",zr,[o("div",null,[o("p",Yr,D((Q=M.principal)==null?void 0:Q.principal_name),1),o("p",Gr,D(((S=M.principal)==null?void 0:S.organization_type)||"No organization type"),1)]),T(Xt,{score:((d=M.principal)==null?void 0:d.engagement_score)||0,size:"sm"},null,8,["score"])])])]),o("div",null,[x[11]||(x[11]=o("label",{for:"opportunity-name",class:"block text-sm font-medium text-gray-700"}," Opportunity Name * ",-1)),G(o("input",{id:"opportunity-name","onUpdate:modelValue":x[0]||(x[0]=v=>u.name=v),type:"text",required:"",class:ee(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-300":p.name}]),placeholder:"Enter opportunity name..."},null,2),[[we,u.name]]),p.name?(g(),h("p",Kr,D(p.name),1)):N("",!0)]),o("div",null,[x[13]||(x[13]=o("label",{for:"context",class:"block text-sm font-medium text-gray-700"}," Context * ",-1)),G(o("select",{id:"context","onUpdate:modelValue":x[1]||(x[1]=v=>u.context=v),required:"",class:ee(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-300":p.context}])},x[12]||(x[12]=[o("option",{value:""},"Select context...",-1),o("option",{value:"SAMPLE_REQUEST"},"Sample Request",-1),o("option",{value:"PRICE_INQUIRY"},"Price Inquiry",-1),o("option",{value:"PRODUCT_INTEREST"},"Product Interest",-1),o("option",{value:"REFERRAL"},"Referral",-1),o("option",{value:"COLD_OUTREACH"},"Cold Outreach",-1),o("option",{value:"OTHER"},"Other",-1)]),2),[[Pe,u.context]]),p.context?(g(),h("p",Zr,D(p.context),1)):N("",!0)]),u.context==="OTHER"?(g(),h("div",Qr,[x[14]||(x[14]=o("label",{for:"custom-context",class:"block text-sm font-medium text-gray-700"}," Custom Context * ",-1)),G(o("input",{id:"custom-context","onUpdate:modelValue":x[2]||(x[2]=v=>u.customContext=v),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Describe the context..."},null,512),[[we,u.customContext]])])):N("",!0),o("div",null,[x[16]||(x[16]=o("label",{for:"product",class:"block text-sm font-medium text-gray-700"}," Product ",-1)),G(o("select",{id:"product","onUpdate:modelValue":x[3]||(x[3]=v=>u.productId=v),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[x[15]||(x[15]=o("option",{value:""},"Select product...",-1)),(g(!0),h(ae,null,fe(A.value,v=>(g(),h("option",{key:v.id,value:v.id},D(v.name),9,Xr))),128))],512),[[Pe,u.productId]])]),o("div",null,[x[18]||(x[18]=o("label",{for:"stage",class:"block text-sm font-medium text-gray-700"}," Initial Stage ",-1)),G(o("select",{id:"stage","onUpdate:modelValue":x[4]||(x[4]=v=>u.stage=v),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},x[17]||(x[17]=[o("option",{value:"NEW_LEAD"},"New Lead",-1),o("option",{value:"INITIAL_OUTREACH"},"Initial Outreach",-1),o("option",{value:"SAMPLE_VISIT_OFFERED"},"Sample Visit Offered",-1)]),512),[[Pe,u.stage]])]),o("div",null,[x[19]||(x[19]=o("label",{for:"close-date",class:"block text-sm font-medium text-gray-700"}," Expected Close Date ",-1)),G(o("input",{id:"close-date","onUpdate:modelValue":x[5]||(x[5]=v=>u.expectedCloseDate=v),type:"date",min:H(),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,8,Jr),[[we,u.expectedCloseDate]])]),o("div",null,[x[20]||(x[20]=o("label",{for:"probability",class:"block text-sm font-medium text-gray-700"}," Probability (%) ",-1)),o("div",ea,[G(o("input",{id:"probability","onUpdate:modelValue":x[6]||(x[6]=v=>u.probability=v),type:"range",min:"0",max:"100",step:"5",class:"flex-1"},null,512),[[we,u.probability,void 0,{number:!0}]]),o("span",ta,D(u.probability)+"% ",1)])]),o("div",null,[x[21]||(x[21]=o("label",{for:"notes",class:"block text-sm font-medium text-gray-700"}," Notes ",-1)),G(o("textarea",{id:"notes","onUpdate:modelValue":x[7]||(x[7]=v=>u.notes=v),rows:"3",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Additional details about this opportunity..."},null,512),[[we,u.notes]])])]),o("div",na,[o("button",{type:"button",onClick:m,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),o("button",{type:"submit",disabled:i.value||!$.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[i.value?(g(),h("div",ra)):N("",!0),W(" "+D(i.value?"Creating...":"Create Opportunity"),1)],8,oa)])],32)]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}}),Il=Te(aa,[["__scopeId","data-v-125f87e0"]]),la={class:"manage-principal-products-button"},sa=["disabled"],ia={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},ua={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},da={class:"flex items-center justify-between mb-6"},ca={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},pa={class:"flex"},fa={class:"ml-3"},ma={class:"text-sm text-red-700"},va={key:1,class:"flex items-center justify-center py-8"},ga={key:2,class:"space-y-6"},ya={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0"},ha={class:"flex-1 max-w-lg"},ba={class:"relative"},xa={class:"flex items-center space-x-3"},wa=["value"],_a=["disabled"],Ea={class:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5"},$a={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},ka={class:"bg-blue-50 p-4 rounded-lg"},Sa={class:"flex items-center"},Pa={class:"text-2xl font-bold text-blue-600 mt-1"},Ca={class:"bg-green-50 p-4 rounded-lg"},Ta={class:"flex items-center"},Aa={class:"text-2xl font-bold text-green-600 mt-1"},Oa={class:"bg-yellow-50 p-4 rounded-lg"},Da={class:"flex items-center"},La={class:"text-2xl font-bold text-yellow-600 mt-1"},Ma={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Fa={class:"border border-gray-200 rounded-lg max-h-96 overflow-y-auto"},Ia={class:"p-3"},Ra={key:0,class:"text-center py-6 text-gray-500"},Na={key:1,class:"space-y-2"},ja={class:"flex items-center space-x-3"},Ua=["value"],Ba={class:"text-sm font-medium text-gray-900"},Ha={class:"text-xs text-gray-500"},Va=["onClick","disabled"],Wa={class:"border border-gray-200 rounded-lg max-h-96 overflow-y-auto"},qa={class:"p-3"},za={key:0,class:"text-center py-6 text-gray-500"},Ya={key:1,class:"space-y-2"},Ga={class:"flex items-center space-x-3"},Ka=["value"],Za={class:"flex-1"},Qa={class:"flex items-center justify-between"},Xa={class:"text-sm font-medium text-gray-900"},Ja={class:"text-xs text-gray-500"},el={class:"text-right"},tl={class:"mt-2 flex items-center space-x-4 text-xs text-gray-600"},nl=["onClick","disabled"],ol={class:"mt-6 flex items-center justify-between"},rl={class:"text-sm text-gray-600"},al={class:"flex items-center space-x-3"},ll=["disabled"],sl={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white rounded-full border-t-transparent"},il=z({__name:"ManagePrincipalProductsButton",props:{principal:{default:null}},emits:["updated"],setup(e,{emit:t}){const n=e,r=t,a=kt(),l=wn(),s=k(!1),i=k(!1),c=k(!1),u=k(!1),p=k(null),A=k(""),$=k(""),E=k([]),m=k(!1),b=k(),w=k([]),O=k([]),F=k([]),B=P(()=>{const y=new Set(a.products.map(f=>f.category).filter(f=>!!f&&f!==null));return Array.from(y).sort()}),H=P(()=>{let y=a.products.filter(f=>f.is_active&&!O.value.includes(f.id));if(A.value){const f=A.value.toLowerCase();y=y.filter(_=>{var V,ie;return _.name.toLowerCase().includes(f)||((V=_.description)==null?void 0:V.toLowerCase().includes(f))||((ie=_.category)==null?void 0:ie.toLowerCase().includes(f))})}return $.value&&(y=y.filter(f=>f.category===$.value)),y}),M=P(()=>a.products.filter(y=>O.value.includes(y.id))),x=P(()=>{const y=new Set(w.value),f=new Set(O.value);return y.size!==f.size||[...y].some(_=>!f.has(_))||[...f].some(_=>!y.has(_))}),Z=P(()=>F.value.filter(y=>(y.product_performance_score||0)>=80).length),Q=P(()=>F.value.length===0?0:F.value.reduce((f,_)=>f+(_.product_performance_score||0),0)/F.value.length),S=async()=>{n.principal&&(s.value=!0,await re())},d=()=>{s.value=!1,j()},v=y=>{O.value.includes(y.id)||O.value.push(y.id)},C=y=>{const f=O.value.indexOf(y.id);f>=0&&O.value.splice(f,1)},R=()=>{E.value.forEach(y=>{O.value.includes(y)||O.value.push(y)}),E.value=[],m.value=!1},se=()=>{E.value.forEach(y=>{const f=O.value.indexOf(y);f>=0&&O.value.splice(f,1)}),E.value=[],m.value=!1},oe=async()=>{if(!(!n.principal||!x.value)){u.value=!0,p.value=null;try{const y=new Set(w.value),f=new Set(O.value),_=[...f].filter(ie=>!y.has(ie)),V=[...y].filter(ie=>!f.has(ie));_.length>0&&await l.associateProductsWithPrincipals(_,[n.principal.principal_id]),V.length>0&&console.log("Remove products:",V),w.value=[...O.value],r("updated"),d()}catch(y){p.value=y instanceof Error?y.message:"Failed to save changes"}finally{u.value=!1}}},re=async()=>{if(n.principal){c.value=!0,p.value=null;try{a.products.length===0&&await a.fetchProducts();const y=await me(n.principal.principal_id);w.value=y,O.value=[...y],await De(n.principal.principal_id)}catch(y){p.value=y instanceof Error?y.message:"Failed to load product data"}finally{c.value=!1}}},me=async y=>["product-1","product-2"],De=async y=>{F.value=O.value.map(f=>{var pt;const _=a.products.find(Zt=>Zt.id===f),V=Math.floor(Math.random()*10),ie=Math.floor(Math.random()*Math.max(1,V));return{principal_id:y,principal_name:((pt=n.principal)==null?void 0:pt.principal_name)||"Unknown Principal",product_id:f,product_name:(_==null?void 0:_.name)||"Unknown Product",product_category:(_==null?void 0:_.category)||null,product_sku:(_==null?void 0:_.sku)||null,is_primary_principal:Math.random()>.5,exclusive_rights:Math.random()>.7,wholesale_price:Math.floor(Math.random()*1e3)+100,minimum_order_quantity:Math.floor(Math.random()*100)+10,lead_time_days:Math.floor(Math.random()*30)+5,contract_start_date:new Date(Date.now()-Math.random()*365*24*60*60*1e3).toISOString(),contract_end_date:new Date(Date.now()+Math.random()*365*24*60*60*1e3).toISOString(),territory_restrictions:null,opportunities_for_product:V,won_opportunities_for_product:ie,active_opportunities_for_product:Math.floor(Math.random()*(V-ie)),latest_opportunity_date:new Date().toISOString(),avg_opportunity_probability:Math.floor(Math.random()*100),total_opportunities:V,win_rate:V>0?Math.floor(ie/V*100):0,total_value:Math.floor(Math.random()*1e5),interactions_for_product:Math.floor(Math.random()*20),recent_interactions_for_product:Math.floor(Math.random()*5),last_interaction_date:new Date().toISOString(),product_is_active:(_==null?void 0:_.is_active)||!0,launch_date:new Date(Date.now()-Math.random()*730*24*60*60*1e3).toISOString(),discontinue_date:null,unit_cost:Math.floor(Math.random()*500)+50,suggested_retail_price:Math.floor(Math.random()*1500)+200,contract_status:Math.random()>.8?"EXPIRED":Math.random()>.6?"EXPIRING_SOON":"ACTIVE",product_performance_score:Math.floor(Math.random()*100),relationship_created_at:new Date(Date.now()-Math.random()*365*24*60*60*1e3).toISOString(),relationship_updated_at:new Date().toISOString()}})},Le=y=>{const f=F.value.find(_=>_.product_id===y);return(f==null?void 0:f.product_performance_score)||0},Me=y=>{const f=F.value.find(_=>_.product_id===y);return(f==null?void 0:f.total_opportunities)||0},I=y=>{const f=F.value.find(_=>_.product_id===y);return Math.round((f==null?void 0:f.win_rate)||0)},j=()=>{A.value="",$.value="",E.value=[],m.value=!1,p.value=null,w.value=[],O.value=[],F.value=[]},Y=y=>{const f=y.target;b.value&&!b.value.contains(f)&&(m.value=!1)};return q(()=>{document.addEventListener("click",Y)}),te(()=>{document.removeEventListener("click",Y)}),(y,f)=>(g(),h("div",la,[o("button",{onClick:S,disabled:!y.principal||i.value,class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[T(L(_e),{class:"h-4 w-4 mr-1"}),W(" "+D(i.value?"Loading...":"Manage Products"),1)],8,sa),T(L(ct),{as:"template",show:s.value},{default:X(()=>[T(L(qt),{as:"div",class:"relative z-50",onClose:d},{default:X(()=>[T(L(Ce),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:X(()=>f[5]||(f[5]=[o("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1,__:[5]}),o("div",ia,[o("div",ua,[T(L(Ce),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:X(()=>[T(L(zt),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:p-6"},{default:X(()=>[o("div",da,[o("div",null,[T(L(Yt),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:X(()=>{var _;return[W(" Manage Products for "+D((_=y.principal)==null?void 0:_.principal_name),1)]}),_:1}),f[6]||(f[6]=o("p",{class:"mt-1 text-sm text-gray-600"}," Associate and manage products for this principal ",-1))]),o("button",{onClick:d,class:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"},[T(L(St),{class:"h-6 w-6"})])]),p.value?(g(),h("div",ca,[o("div",pa,[T(L(rt),{class:"h-5 w-5 text-red-400"}),o("div",fa,[o("p",ma,D(p.value),1)])])])):N("",!0),c.value?(g(),h("div",va,f[7]||(f[7]=[o("div",{class:"text-center"},[o("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),o("p",{class:"mt-2 text-sm text-gray-600"},"Loading product data...")],-1)]))):(g(),h("div",ga,[o("div",ya,[o("div",ha,[o("div",ba,[T(L(_n),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),G(o("input",{"onUpdate:modelValue":f[0]||(f[0]=_=>A.value=_),type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search products..."},null,512),[[we,A.value]])])]),o("div",xa,[G(o("select",{"onUpdate:modelValue":f[1]||(f[1]=_=>$.value=_),class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[f[8]||(f[8]=o("option",{value:""},"All Categories",-1)),(g(!0),h(ae,null,fe(B.value,_=>(g(),h("option",{key:_||"null",value:_||""},D(_||"Uncategorized"),9,wa))),128))],512),[[Pe,$.value]]),o("div",{class:"relative",ref_key:"bulkActionsRef",ref:b},[o("button",{onClick:f[2]||(f[2]=_=>m.value=!m.value),disabled:E.value.length===0,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[f[9]||(f[9]=W(" Bulk Actions ",-1)),T(L(En),{class:"ml-1 h-4 w-4"})],8,_a),G(o("div",Ea,[o("div",{class:"py-1"},[o("button",{onClick:R,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Associate Selected "),o("button",{onClick:se,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Remove Selected ")])],512),[[Et,m.value]])],512)])]),o("div",$a,[o("div",ka,[o("div",Sa,[T(L(_e),{class:"h-5 w-5 text-blue-500 mr-2"}),f[10]||(f[10]=o("span",{class:"text-sm font-medium text-blue-900"},"Associated Products",-1))]),o("p",Pa,D(M.value.length),1)]),o("div",Ca,[o("div",Ta,[T(L(wt),{class:"h-5 w-5 text-green-500 mr-2"}),f[11]||(f[11]=o("span",{class:"text-sm font-medium text-green-900"},"High Performance",-1))]),o("p",Aa,D(Z.value),1)]),o("div",Oa,[o("div",Da,[T(L(ot),{class:"h-5 w-5 text-yellow-500 mr-2"}),f[12]||(f[12]=o("span",{class:"text-sm font-medium text-yellow-900"},"Avg Performance",-1))]),o("p",La,D(Q.value.toFixed(1)),1)])]),o("div",Ma,[o("div",null,[f[15]||(f[15]=o("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Available Products",-1)),o("div",Fa,[o("div",Ia,[H.value.length===0?(g(),h("div",Ra,[T(L(_e),{class:"h-8 w-8 mx-auto mb-2 text-gray-300"}),f[13]||(f[13]=o("p",{class:"text-sm"},"No available products found",-1))])):(g(),h("div",Na,[(g(!0),h(ae,null,fe(H.value,_=>(g(),h("div",{key:_.id,class:"flex items-center justify-between p-3 rounded-md border border-gray-100 hover:bg-gray-50 transition-colors"},[o("div",ja,[G(o("input",{"onUpdate:modelValue":f[3]||(f[3]=V=>E.value=V),type:"checkbox",value:_.id,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,Ua),[[mt,E.value]]),o("div",null,[o("p",Ba,D(_.name),1),o("p",Ha,D(_.category),1)])]),o("button",{onClick:V=>v(_),disabled:u.value,class:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-blue-600 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[T(L(at),{class:"h-3 w-3 mr-1"}),f[14]||(f[14]=W(" Add ",-1))],8,Va)]))),128))]))])])]),o("div",null,[f[18]||(f[18]=o("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Associated Products",-1)),o("div",Wa,[o("div",qa,[M.value.length===0?(g(),h("div",za,[T(L(_e),{class:"h-8 w-8 mx-auto mb-2 text-gray-300"}),f[16]||(f[16]=o("p",{class:"text-sm"},"No associated products",-1))])):(g(),h("div",Ya,[(g(!0),h(ae,null,fe(M.value,_=>(g(),h("div",{key:_.id,class:"flex items-center justify-between p-3 rounded-md border border-gray-100 bg-blue-50 transition-colors"},[o("div",Ga,[G(o("input",{"onUpdate:modelValue":f[4]||(f[4]=V=>E.value=V),type:"checkbox",value:_.id,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,Ka),[[mt,E.value]]),o("div",Za,[o("div",Qa,[o("div",null,[o("p",Xa,D(_.name),1),o("p",Ja,D(_.category),1)]),o("div",el,[T(rn,{score:Le(_.id),size:"sm"},null,8,["score"])])]),o("div",tl,[o("span",null,"Opportunities: "+D(Me(_.id)),1),o("span",null,"Win Rate: "+D(I(_.id))+"%",1)])])]),o("button",{onClick:V=>C(_),disabled:u.value,class:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-red-600 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50"},[T(L(Ct),{class:"h-3 w-3 mr-1"}),f[17]||(f[17]=W(" Remove ",-1))],8,nl)]))),128))]))])])])])])),o("div",ol,[o("div",rl,D(E.value.length)+" products selected ",1),o("div",al,[o("button",{type:"button",onClick:d,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Close "),o("button",{onClick:oe,disabled:u.value||!x.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(g(),h("div",sl)):N("",!0),W(" "+D(u.value?"Saving...":"Save Changes"),1)],8,ll)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}}),Rl=Te(il,[["__scopeId","data-v-f75a9cbf"]]);export{Il as C,zt as G,Rl as M,Ml as P,ct as S,Yt as V,qt as Y,Ll as a,Dl as b,Ce as h,Pt as r};
//# sourceMappingURL=ManagePrincipalProductsButton-Ck4OGV8a.js.map
