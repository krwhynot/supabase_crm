import{a as j,r as H}from"./ChevronUpIcon-DaM_MkII.js";import{r as P}from"./ArrowDownTrayIcon-CCm-ihbv.js";import{r as f}from"./BuildingOfficeIcon-CE9ZCi7A.js";import{r as z}from"./CheckCircleIcon-Ct_Yhl-Z.js";import{r as S}from"./ExclamationTriangleIcon-3AUMR-W2.js";import{r as F}from"./EngagementScoreRing-DT1wV0O8.js";import{a as d,j as r,b as t,d as I,r as U,c as m,h as V,t as o,q,e as N,z as Z,u as a,f as c,F as b,i as p,p as G,n as T}from"./index-Br7bM97V.js";/* empty css                                                                                     */import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";function K(y,w){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"})])}const O={class:"distributor-relationship-table"},Q={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},W={class:"mt-1 text-sm text-gray-600"},X={class:"flex items-center space-x-3 mt-4 sm:mt-0"},Y={key:0,class:"bg-white shadow rounded-lg overflow-hidden"},tt={class:"animate-pulse p-6"},st={class:"space-y-4"},et={class:"ml-8 space-y-2"},it={key:1,class:"bg-white shadow rounded-lg overflow-hidden"},ot={class:"p-6"},rt={key:0,class:"text-center py-12"},dt={key:1,class:"space-y-4"},nt={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},at={class:"flex items-center space-x-4"},lt={class:"flex items-center space-x-3"},ct={class:"flex-shrink-0"},ut={class:"text-sm font-medium text-gray-900"},mt={class:"flex items-center space-x-2 text-xs text-gray-500"},_t={class:"flex items-center space-x-4"},xt={class:"flex items-center"},vt={class:"text-sm text-gray-600 capitalize"},gt={class:"text-sm text-gray-500"},ht={class:"flex items-center space-x-2"},ft=["onClick","disabled"],bt=["onClick","disabled"],pt={key:0,class:"ml-8 mt-2 space-y-2"},yt={class:"flex items-center justify-between p-3 border border-gray-100 rounded-md bg-gray-50 hover:bg-gray-100 transition-colors"},wt={class:"flex items-center space-x-3"},kt={class:"flex items-center space-x-3"},Ct={class:"flex-shrink-0"},Dt={class:"text-sm font-medium text-gray-800"},$t={class:"flex items-center space-x-2 text-xs text-gray-500"},Vt={class:"flex items-center space-x-4"},Nt={class:"flex items-center"},Tt={class:"text-xs text-gray-600 capitalize"},At={class:"text-xs text-gray-500"},Rt={class:"flex items-center space-x-2"},Mt=["onClick","disabled"],Bt=["onClick","disabled"],Et={key:2,class:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4"},Lt={class:"bg-white overflow-hidden shadow rounded-lg"},jt={class:"p-5"},Ht={class:"flex items-center"},Pt={class:"flex-shrink-0"},zt={class:"ml-5 w-0 flex-1"},St={class:"text-lg font-medium text-gray-900"},Ft={class:"bg-white overflow-hidden shadow rounded-lg"},It={class:"p-5"},Ut={class:"flex items-center"},qt={class:"flex-shrink-0"},Zt={class:"ml-5 w-0 flex-1"},Gt={class:"text-lg font-medium text-gray-900"},Jt={class:"bg-white overflow-hidden shadow rounded-lg"},Kt={class:"p-5"},Ot={class:"flex items-center"},Qt={class:"flex-shrink-0"},Wt={class:"ml-5 w-0 flex-1"},Xt={class:"text-lg font-medium text-gray-900"},Yt={class:"bg-white overflow-hidden shadow rounded-lg"},ts={class:"p-5"},ss={class:"flex items-center"},es={class:"flex-shrink-0"},is={class:"ml-5 w-0 flex-1"},os={class:"text-lg font-medium text-gray-900"},rs=I({__name:"DistributorRelationshipTable",props:{relationships:{},loading:{type:Boolean,default:!1},principalName:{default:"Principal"}},emits:["distributor-selected","contact-distributor","export-data"],setup(y,{emit:w}){const l=y,v=w,x=U(new Set),_=m(()=>!l.relationships||l.relationships.length===0?[]:l.relationships),g=m(()=>_.value.every(i=>!i.distributor_name||x.value.has(i.distributor_id||i.principal_id))),A=m(()=>{var i;return((i=l.relationships)==null?void 0:i.length)||0}),R=m(()=>{var i;return((i=l.relationships)==null?void 0:i.filter(s=>s.principal_status==="Active").length)||0}),M=m(()=>{var i;return((i=l.relationships)==null?void 0:i.filter(s=>s.principal_status==="Prospect").length)||0}),B=m(()=>!l.relationships||l.relationships.length===0?0:l.relationships.filter(i=>i.distributor_name).length>0?2:1),E=()=>{g.value?x.value.clear():_.value.forEach(i=>{i.distributor_name&&x.value.add(i.distributor_id||i.principal_id)})},k=i=>{v("distributor-selected",i)},C=(i,s)=>{v("contact-distributor",i,s)},L=()=>{v("export-data")},D=i=>({Active:"bg-green-400",Prospect:"bg-yellow-400",Inactive:"bg-gray-400",Customer:"bg-blue-400",Partner:"bg-purple-400",Vendor:"bg-orange-400"})[i||""]||"bg-gray-400",$=i=>{if(!i)return"Never";const s=new Date(i),u=Math.abs(new Date().getTime()-s.getTime()),n=Math.ceil(u/(1e3*60*60*24));return n<=1?"Today":n<=7?`${n} days ago`:n<=30?`${Math.ceil(n/7)} weeks ago`:n<=365?`${Math.ceil(n/30)} months ago`:s.toLocaleDateString()};return(i,s)=>(r(),d("div",O,[t("div",Q,[t("div",null,[s[0]||(s[0]=t("h3",{class:"text-lg font-medium text-gray-900"},"Distributor Relationships",-1)),t("p",W," Distributor hierarchy and relationships for "+o(i.principalName),1)]),t("div",X,[t("button",{onClick:E,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[(r(),q(Z(g.value?a(j):a(H)),{class:"h-4 w-4 mr-1"})),N(" "+o(g.value?"Collapse All":"Expand All"),1)]),t("button",{onClick:L,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[c(a(P),{class:"h-4 w-4 mr-1"}),s[1]||(s[1]=N(" Export ",-1))])])]),i.loading?(r(),d("div",Y,[t("div",tt,[t("div",st,[(r(),d(b,null,p(3,e=>t("div",{key:e},[s[3]||(s[3]=G('<div class="flex items-center space-x-4 mb-2" data-v-2c6b1608><div class="h-4 bg-gray-200 rounded w-4" data-v-2c6b1608></div><div class="h-4 bg-gray-200 rounded w-1/3" data-v-2c6b1608></div><div class="flex-1" data-v-2c6b1608></div><div class="h-4 bg-gray-200 rounded w-1/6" data-v-2c6b1608></div></div>',1)),t("div",et,[(r(),d(b,null,p(2,u=>t("div",{key:u,class:"flex items-center space-x-4"},s[2]||(s[2]=[t("div",{class:"h-3 bg-gray-100 rounded w-1/4"},null,-1),t("div",{class:"h-3 bg-gray-100 rounded w-1/6"},null,-1),t("div",{class:"flex-1"},null,-1),t("div",{class:"h-3 bg-gray-100 rounded w-16"},null,-1)]))),64))])])),64))])])])):(r(),d("div",it,[t("div",ot,[_.value.length===0?(r(),d("div",rt,[c(a(f),{class:"mx-auto h-12 w-12 text-gray-400"}),s[4]||(s[4]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No relationships found",-1)),s[5]||(s[5]=t("p",{class:"mt-1 text-sm text-gray-500"}," This principal has no distributor relationships configured. ",-1))])):(r(),d("div",dt,[(r(!0),d(b,null,p(_.value,e=>{var u,n;return r(),d("div",{key:e.distributor_id||e.principal_id,class:"relationship-node"},[t("div",nt,[t("div",at,[s[8]||(s[8]=t("div",{class:"w-6"},null,-1)),t("div",lt,[t("div",ct,[c(a(f),{class:"h-8 w-8 text-blue-500"})]),t("div",null,[t("h4",ut,o(e.distributor_name),1),t("div",mt,[t("span",null,o(e.relationship_type),1),s[6]||(s[6]=t("span",null,"•",-1)),s[7]||(s[7]=t("span",null,"Direct Relationship",-1))])])])]),t("div",_t,[t("div",xt,[t("div",{class:T(["w-2 h-2 rounded-full mr-2",D(e.principal_status)])},null,2),t("span",vt,o(((u=e.principal_status)==null?void 0:u.toLowerCase().replace("_"," "))||"Unknown"),1)]),t("div",gt,o($(e.principal_last_contact)),1),t("div",ht,[t("button",{onClick:h=>k(e.distributor_id),disabled:!e.distributor_id,class:"text-blue-600 hover:text-blue-900 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," View ",8,ft),t("button",{onClick:h=>C(e.distributor_id,e.distributor_name),disabled:!e.distributor_id||!e.distributor_name,class:"text-green-600 hover:text-green-900 text-sm font-medium transition-colors"}," Contact ",8,bt)])])]),e.distributor_name&&x.value.has(e.distributor_id||e.principal_id)?(r(),d("div",pt,[t("div",yt,[t("div",wt,[s[10]||(s[10]=t("div",{class:"flex items-center"},[t("div",{class:"w-4 h-px bg-gray-300"}),t("div",{class:"w-2 h-2 rounded-full bg-gray-300"})],-1)),t("div",kt,[t("div",Ct,[c(a(K),{class:"h-6 w-6 text-gray-400"})]),t("div",null,[t("h5",Dt,o(e.distributor_name),1),t("div",$t,[t("span",null,o(e.relationship_type),1),s[9]||(s[9]=t("span",null,"•",-1)),t("span",null,o(e.distributor_city)+", "+o(e.distributor_state),1)])])])]),t("div",Vt,[t("div",Nt,[t("div",{class:T(["w-1.5 h-1.5 rounded-full mr-2",D(e.distributor_status)])},null,2),t("span",Tt,o(((n=e.distributor_status)==null?void 0:n.toLowerCase().replace("_"," "))||"Unknown"),1)]),t("div",At,o($(e.distributor_last_contact)),1),t("div",Rt,[t("button",{onClick:h=>k(e.distributor_id),disabled:!e.distributor_id,class:"text-blue-600 hover:text-blue-900 text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," View ",8,Mt),t("button",{onClick:h=>C(e.distributor_id,e.distributor_name),disabled:!e.distributor_id||!e.distributor_name,class:"text-green-600 hover:text-green-900 text-xs font-medium transition-colors"}," Contact ",8,Bt)])])])])):V("",!0)])}),128))]))])])),!i.loading&&_.value.length>0?(r(),d("div",Et,[t("div",Lt,[t("div",jt,[t("div",Ht,[t("div",Pt,[c(a(f),{class:"h-6 w-6 text-blue-500"})]),t("div",zt,[t("dl",null,[s[11]||(s[11]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Total Distributors ",-1)),t("dd",St,o(A.value),1)])])])])]),t("div",Ft,[t("div",It,[t("div",Ut,[t("div",qt,[c(a(z),{class:"h-6 w-6 text-green-500"})]),t("div",Zt,[t("dl",null,[s[12]||(s[12]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Active Relationships ",-1)),t("dd",Gt,o(R.value),1)])])])])]),t("div",Jt,[t("div",Kt,[t("div",Ot,[t("div",Qt,[c(a(S),{class:"h-6 w-6 text-yellow-500"})]),t("div",Wt,[t("dl",null,[s[13]||(s[13]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Pending Relationships ",-1)),t("dd",Xt,o(M.value),1)])])])])]),t("div",Yt,[t("div",ts,[t("div",ss,[t("div",es,[c(a(F),{class:"h-6 w-6 text-purple-500"})]),t("div",is,[t("dl",null,[s[14]||(s[14]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Hierarchy Levels ",-1)),t("dd",os,o(B.value),1)])])])])])])):V("",!0)]))}}),vs=J(rs,[["__scopeId","data-v-2c6b1608"]]);export{vs as D};
//# sourceMappingURL=DistributorRelationshipTable-D5OL9Gck.js.map
