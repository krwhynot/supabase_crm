import{c as w,i as v,b as o,d as B,r as $,y as U,j as O,f as a,z as _,u as A,k as S,o as Y,A as Z,s as D,e as I,t as P,w as W,g as J,x as Q}from"./index-Dvtn0bXD.js";import{_ as y,a as C,O as X,b as N,c as ee}from"./organizations-C2qDcIsx.js";import{u as M}from"./organizationStore-3FIIkymA.js";import{r as T}from"./XMarkIcon-BEfYgbSr.js";import{C as k,P as te,a as oe,D as re,f as V}from"./contacts-BMobG5cv.js";import{r as F}from"./PlusIcon-BITn72BE.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as se}from"./contactStore-BtwyZi1T.js";import{r as ie}from"./ExclamationTriangleIcon-DKMpP4NG.js";import"./index.esm-DD28t5m0.js";import"./supabaseClient-CM-h1Htk.js";import"./contactsApi-DOcQFNMP.js";function ae(z,h){return v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}const le={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},de={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ue={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},me={class:"flex items-center justify-between mb-4"},ce={class:"flex justify-end space-x-3 pt-4"},pe=["disabled"],ge={key:0,class:"flex items-center"},fe={key:1},be=B({__name:"OrganizationCreateModal",emits:["close","created"],setup(z,{emit:h}){const f=h,g=M(),c=$(!1),d=U({name:"",industry:"",type:""}),u=U({}),m=O(()=>d.name.trim()&&!Object.keys(u).some(l=>u[l])),n=X.map(l=>({value:l,label:l})),s=l=>{const i=d[l];l==="name"?!i||typeof i!="string"||!i.trim()?u[l]="Organization name is required":i.length>255?u[l]="Organization name must be less than 255 characters":u[l]="":l==="industry"&&(i&&typeof i=="string"&&i.length>255?u[l]="Industry must be less than 255 characters":u[l]="")},x=async()=>{if(!(c.value||!m.value))try{c.value=!0;const l={name:d.name.trim(),industry:d.industry.trim()||null,type:d.type||null,status:"Prospect"},i=await g.createOrganization(l);i?f("created",i):console.error("Failed to create organization")}catch(l){console.error("Error creating organization:",l)}finally{c.value=!1}};return(l,i)=>(v(),w("div",le,[o("div",de,[o("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:i[0]||(i[0]=b=>l.$emit("close"))}),o("div",ue,[o("div",null,[o("div",me,[i[9]||(i[9]=o("h3",{class:"text-lg font-medium text-gray-900",id:"modal-title"}," Create New Organization ",-1)),o("button",{onClick:i[1]||(i[1]=b=>l.$emit("close")),class:"text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600"},[a(_(T),{class:"h-6 w-6"})])]),o("form",{onSubmit:A(x,["prevent"]),class:"space-y-4"},[a(y,{modelValue:d.name,"onUpdate:modelValue":i[2]||(i[2]=b=>d.name=b),name:"name",label:"Organization Name",required:"",error:u.name,placeholder:"Enter organization name",onBlur:i[3]||(i[3]=b=>s("name"))},null,8,["modelValue","error"]),a(y,{modelValue:d.industry,"onUpdate:modelValue":i[4]||(i[4]=b=>d.industry=b),name:"industry",label:"Industry",error:u.industry,placeholder:"e.g., Restaurant, Healthcare, Education",onBlur:i[5]||(i[5]=b=>s("industry"))},null,8,["modelValue","error"]),a(C,{modelValue:d.type,"onUpdate:modelValue":i[6]||(i[6]=b=>d.type=b),name:"type",label:"Organization Type",options:_(n),error:u.type,placeholder:"Select type...",onBlur:i[7]||(i[7]=b=>s("type"))},null,8,["modelValue","options","error"]),o("div",ce,[o("button",{type:"button",onClick:i[8]||(i[8]=b=>l.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),o("button",{type:"submit",disabled:c.value||!m.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[c.value?(v(),w("span",ge,i[10]||(i[10]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Creating... ",-1)]))):(v(),w("span",fe," Create Organization "))],8,pe)])],32)])])])]))}}),ye={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ve={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},xe={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full sm:p-6"},we={class:"flex items-center justify-between mb-4"},he={class:"flex justify-end space-x-3 pt-4"},_e=["disabled"],Ve=B({__name:"AddPositionModal",emits:["close","added"],setup(z,{emit:h}){const f=h,g=$(""),c=$(""),d=O(()=>g.value.trim()&&!c.value),u=()=>{const n=g.value.trim();n?n.length>100?c.value="Position title must be less than 100 characters":c.value="":c.value="Position title is required"},m=()=>{if(u(),d.value){const n=g.value.trim().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" ");f("added",n)}};return(n,s)=>(v(),w("div",ye,[o("div",ve,[o("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:s[0]||(s[0]=x=>n.$emit("close"))}),o("div",xe,[o("div",null,[o("div",we,[s[4]||(s[4]=o("h3",{class:"text-lg font-medium text-gray-900",id:"modal-title"}," Add New Position ",-1)),o("button",{onClick:s[1]||(s[1]=x=>n.$emit("close")),class:"text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600"},[a(_(T),{class:"h-6 w-6"})])]),o("form",{onSubmit:A(m,["prevent"]),class:"space-y-4"},[o("div",null,[a(y,{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=x=>g.value=x),name:"position",label:"Position Title",required:"",error:c.value,placeholder:"e.g., F&B Director, Kitchen Manager",onBlur:u},null,8,["modelValue","error"]),s[5]||(s[5]=o("p",{class:"mt-1 text-xs text-gray-500"}," Examples: F&B Director, Kitchen Manager, Food Service Director, Assistant Manager ",-1))]),o("div",he,[o("button",{type:"button",onClick:s[3]||(s[3]=x=>n.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),o("button",{type:"submit",disabled:!d.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}," Add Position ",8,_e)])],32)])])])]))}}),$e={class:"bg-white shadow-sm rounded-lg border border-gray-200"},Ce={class:"px-6 py-4 border-b border-gray-200"},ze={class:"text-lg font-medium text-gray-900"},ke={class:"grid grid-cols-1 gap-6"},Oe={class:"border-b border-gray-200 pb-6"},Se={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},Ue={class:"space-y-1"},Be={class:"relative"},Ie={class:"flex"},Ae={class:"flex-1"},Ee={class:"space-y-1"},De={class:"relative"},Fe={class:"flex"},Me={class:"flex-1"},Te={class:"border-b border-gray-200 pb-6"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},je={class:"mt-4"},He={class:"mt-1"},Le={class:"space-y-4"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ge={class:"space-y-4"},Ke={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ye={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ze={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},We=["disabled"],Je={key:0,class:"flex items-center"},Qe={key:1},Xe=B({__name:"ContactForm",props:{contact:{default:null},isEditing:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(z,{emit:h}){const f=z,g=h,c=M(),d=$(!1),u=$(!1),m=$(!1),n=U({first_name:"",last_name:"",organization_id:"",position:"",purchase_influence:"Unknown",decision_authority:"End User",preferred_principals:[],phone:"",email:"",address:"",city:"",state:"",zip_code:"",website:"",account_manager:"",notes:"",is_primary:!1}),s=U({});if(f.isEditing&&f.contact){const t=k.contactToForm(f.contact);Object.assign(n,{...t,phone:t.phone||"",email:t.email||"",address:t.address||"",city:t.city||"",state:t.state||"",zip_code:t.zip_code||"",website:t.website||"",account_manager:t.account_manager||"",notes:t.notes||"",preferred_principals:t.preferred_principals||[]})}const x=O(()=>["first_name","last_name","organization_id","position","purchase_influence","decision_authority"].every(e=>n[e])&&Object.keys(s).every(e=>!s[e])),l=O(()=>c.organizations.map(t=>({value:t.id,label:t.name,subtitle:t.industry||void 0}))),i=$([...te.map(t=>({value:t,label:t}))]),b=oe.map(t=>({value:t,label:t,description:H(t)})),q=re.map(t=>({value:t,label:t,description:L(t)})),j=O(()=>c.organizations.filter(t=>t.name.toLowerCase().includes("principal")||t.status==="Partner"||t.status==="Vendor").map(t=>({value:t.id,label:t.name,subtitle:t.industry||void 0})));function H(t){switch(t){case"High":return"Significant decision-making power";case"Medium":return"Moderate influence on purchases";case"Low":return"Limited purchase decision impact";case"Unknown":return"Influence level needs assessment";default:return""}}function L(t){switch(t){case"Decision Maker":return"Final approval authority";case"Influencer":return"Influences purchase decisions";case"End User":return"Uses the products/services";case"Gatekeeper":return"Controls access to decision makers";default:return""}}const p=async t=>{const e=n[t];try{if(t==="first_name"||t==="last_name"){const r=V.requiredText(e,t.replace("_"," "));s[t]=r||""}else if(t==="organization_id"){const r=V.requiredSelect(e,"Organization");s[t]=r||""}else if(t==="position"){const r=V.requiredText(e,"Position");s[t]=r||""}else if(t==="purchase_influence"||t==="decision_authority"){const r=V.requiredSelect(e,t.replace("_"," "));s[t]=r||""}else if(t==="phone"){const r=V.phone(e);s[t]=r||""}else if(t==="email"){const r=V.email(e);s[t]=r||""}else if(t==="website"){const r=V.website(e);s[t]=r||""}else{const r=V.optionalText(e,t.replace("_"," "));s[t]=r||""}}catch{s[t]="Validation error"}},R=async()=>{if(!d.value)try{d.value=!0;const t={first_name:n.first_name,last_name:n.last_name,organization_id:n.organization_id,position:n.position,purchase_influence:n.purchase_influence,decision_authority:n.decision_authority,preferred_principals:n.preferred_principals,phone:n.phone||null,email:n.email||null,address:n.address||null,city:n.city||null,state:n.state||null,zip_code:n.zip_code||null,website:n.website||null,account_manager:n.account_manager||null,notes:n.notes||null,is_primary:n.is_primary},e=f.isEditing?await k.validateUpdate(t):await k.validateCreate(t);if(!e.isValid){e.errors.forEach(E=>{s[E.field]=E.message});return}const r={...e.data,_principalIds:n.preferred_principals};g("submit",r)}catch(t){console.error("Form validation error:",t)}finally{d.value=!1}},G=t=>{c.organizations.push(t),n.organization_id=t.id,u.value=!1},K=t=>{i.value.push({value:t,label:t}),n.position=t,m.value=!1};return Y(async()=>{c.organizations.length===0&&await c.fetchOrganizations()}),Z(()=>f.contact,t=>{if(t&&f.isEditing){const e=k.contactToForm(t);Object.assign(n,e)}},{deep:!0}),(t,e)=>(v(),w("div",$e,[o("div",Ce,[o("h3",ze,P(t.isEditing?"Edit Contact":"Create New Contact"),1),e[38]||(e[38]=o("p",{class:"mt-1 text-sm text-gray-600"}," Add a key contact who influences Principal product purchases within their organization. ",-1))]),o("form",{onSubmit:A(R,["prevent"]),class:"p-6 space-y-6"},[o("div",ke,[o("div",Oe,[e[43]||(e[43]=o("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Required Information",-1)),o("div",Se,[a(y,{modelValue:n.first_name,"onUpdate:modelValue":e[0]||(e[0]=r=>n.first_name=r),name:"first_name",label:"First Name",required:"",error:s.first_name,placeholder:"Enter first name",onBlur:e[1]||(e[1]=r=>p("first_name"))},null,8,["modelValue","error"]),a(y,{modelValue:n.last_name,"onUpdate:modelValue":e[2]||(e[2]=r=>n.last_name=r),name:"last_name",label:"Last Name",required:"",error:s.last_name,placeholder:"Enter last name",onBlur:e[3]||(e[3]=r=>p("last_name"))},null,8,["modelValue","error"])]),o("div",Pe,[o("div",Ue,[e[40]||(e[40]=o("label",{for:"organization",class:"block text-sm font-medium text-gray-700"},[S(" Organization "),o("span",{class:"text-red-500"},"*")],-1)),o("div",Be,[o("div",Ie,[o("div",Ae,[a(C,{modelValue:n.organization_id,"onUpdate:modelValue":e[4]||(e[4]=r=>n.organization_id=r),name:"organization_id",label:"Organization",options:l.value,required:"",error:s.organization_id,placeholder:"Search and select organization...",searchable:"",onBlur:e[5]||(e[5]=r=>p("organization_id"))},null,8,["modelValue","options","error"])]),o("button",{type:"button",onClick:e[6]||(e[6]=r=>u.value=!0),class:"ml-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[a(_(F),{class:"h-4 w-4"}),e[39]||(e[39]=o("span",{class:"ml-1 hidden sm:inline"},"New",-1))])])])]),o("div",Ee,[e[42]||(e[42]=o("label",{for:"position",class:"block text-sm font-medium text-gray-700"},[S(" Position "),o("span",{class:"text-red-500"},"*")],-1)),o("div",De,[o("div",Fe,[o("div",Me,[a(C,{modelValue:n.position,"onUpdate:modelValue":e[7]||(e[7]=r=>n.position=r),name:"position",label:"Position",options:i.value,required:"",error:s.position,placeholder:"Select position...",onBlur:e[8]||(e[8]=r=>p("position")),"allow-custom":""},null,8,["modelValue","options","error"])]),o("button",{type:"button",onClick:e[9]||(e[9]=r=>m.value=!0),class:"ml-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[a(_(F),{class:"h-4 w-4"}),e[41]||(e[41]=o("span",{class:"ml-1 hidden sm:inline"},"Add",-1))])])])])])]),o("div",Te,[e[46]||(e[46]=o("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Purchase Decision Information",-1)),o("div",qe,[a(C,{modelValue:n.purchase_influence,"onUpdate:modelValue":e[10]||(e[10]=r=>n.purchase_influence=r),name:"purchase_influence",label:"Purchase Influence",required:"",options:_(b),error:s.purchase_influence,placeholder:"Select influence level...",onBlur:e[11]||(e[11]=r=>p("purchase_influence"))},null,8,["modelValue","options","error"]),a(C,{modelValue:n.decision_authority,"onUpdate:modelValue":e[12]||(e[12]=r=>n.decision_authority=r),name:"decision_authority",label:"Decision Authority",required:"",options:_(q),error:s.decision_authority,placeholder:"Select decision role...",onBlur:e[13]||(e[13]=r=>p("decision_authority"))},null,8,["modelValue","options","error"])]),o("div",je,[e[44]||(e[44]=o("label",{for:"preferred_principals",class:"block text-sm font-medium text-gray-700"}," Preferred Principal Brands ",-1)),o("div",He,[a(C,{modelValue:n.preferred_principals,"onUpdate:modelValue":e[14]||(e[14]=r=>n.preferred_principals=r),name:"preferred_principals",label:"Preferred Principal Brands",options:j.value,error:s.preferred_principals,placeholder:"Select Principal brands this contact advocates for...",multiple:"",onBlur:e[15]||(e[15]=r=>p("preferred_principals"))},null,8,["modelValue","options","error"])]),e[45]||(e[45]=o("p",{class:"mt-1 text-xs text-gray-500"}," Select the Principal brands this contact champions within their organization ",-1))])]),o("div",Le,[e[48]||(e[48]=o("h4",{class:"text-md font-medium text-gray-900"},"Contact Details (Optional)",-1)),o("div",Re,[a(y,{modelValue:n.phone,"onUpdate:modelValue":e[16]||(e[16]=r=>n.phone=r),name:"phone",label:"Phone Number",type:"tel",error:s.phone,placeholder:"(555) 123-4567",onBlur:e[17]||(e[17]=r=>p("phone"))},null,8,["modelValue","error"]),a(y,{modelValue:n.email,"onUpdate:modelValue":e[18]||(e[18]=r=>n.email=r),name:"email",label:"Email Address",type:"email",error:s.email,placeholder:"contact@organization.com",onBlur:e[19]||(e[19]=r=>p("email"))},null,8,["modelValue","error"])]),o("div",Ge,[e[47]||(e[47]=o("h5",{class:"text-sm font-medium text-gray-700"},"Address",-1)),a(y,{modelValue:n.address,"onUpdate:modelValue":e[20]||(e[20]=r=>n.address=r),name:"address",label:"Street Address",error:s.address,placeholder:"123 Main Street",onBlur:e[21]||(e[21]=r=>p("address"))},null,8,["modelValue","error"]),o("div",Ke,[a(y,{modelValue:n.city,"onUpdate:modelValue":e[22]||(e[22]=r=>n.city=r),name:"city",label:"City",error:s.city,placeholder:"City",onBlur:e[23]||(e[23]=r=>p("city"))},null,8,["modelValue","error"]),a(y,{modelValue:n.state,"onUpdate:modelValue":e[24]||(e[24]=r=>n.state=r),name:"state",label:"State",error:s.state,placeholder:"State",onBlur:e[25]||(e[25]=r=>p("state"))},null,8,["modelValue","error"]),a(y,{modelValue:n.zip_code,"onUpdate:modelValue":e[26]||(e[26]=r=>n.zip_code=r),name:"zip_code",label:"ZIP Code",error:s.zip_code,placeholder:"12345",onBlur:e[27]||(e[27]=r=>p("zip_code"))},null,8,["modelValue","error"])])]),o("div",Ye,[a(y,{modelValue:n.website,"onUpdate:modelValue":e[28]||(e[28]=r=>n.website=r),name:"website",label:"Website",type:"url",error:s.website,placeholder:"https://www.organization.com",onBlur:e[29]||(e[29]=r=>p("website"))},null,8,["modelValue","error"]),a(y,{modelValue:n.account_manager,"onUpdate:modelValue":e[30]||(e[30]=r=>n.account_manager=r),name:"account_manager",label:"Account Manager",error:s.account_manager,placeholder:"Assigned account manager",onBlur:e[31]||(e[31]=r=>p("account_manager"))},null,8,["modelValue","error"])]),a(N,{modelValue:n.notes,"onUpdate:modelValue":e[32]||(e[32]=r=>n.notes=r),name:"notes",label:"Notes",error:s.notes,placeholder:"Additional notes about this contact...",rows:4,onBlur:e[33]||(e[33]=r=>p("notes"))},null,8,["modelValue","error"]),a(ee,{modelValue:n.is_primary,"onUpdate:modelValue":e[34]||(e[34]=r=>n.is_primary=r),name:"is_primary",label:"Primary Contact",description:"Mark this as the primary contact for the organization"},null,8,["modelValue"])])]),o("div",Ze,[o("button",{type:"button",onClick:e[35]||(e[35]=r=>t.$emit("cancel")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),o("button",{type:"submit",disabled:d.value||!x.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[d.value?(v(),w("span",Je,[e[49]||(e[49]=o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),S(" "+P(t.isEditing?"Updating...":"Creating..."),1)])):(v(),w("span",Qe,P(t.isEditing?"Update Contact":"Create Contact"),1))],8,We)])],32),u.value?(v(),D(be,{key:0,onClose:e[36]||(e[36]=r=>u.value=!1),onCreated:G})):I("",!0),m.value?(v(),D(Ve,{key:1,onClose:e[37]||(e[37]=r=>m.value=!1),onAdded:K})):I("",!0)]))}}),Ne=ne(Xe,[["__scopeId","data-v-89be674a"]]),et={class:"max-w-4xl mx-auto"},tt={class:"mb-8"},ot={class:"flex items-center space-x-3 mb-4"},rt={key:0,class:"mt-6 p-4 border border-red-300 rounded-md bg-red-50"},nt={class:"flex"},st={class:"mt-1 text-sm text-red-700"},vt=B({__name:"ContactCreateView",setup(z){const h=Q(),f=se(),g=$(null),c=async u=>{try{g.value=null;const m=u._principalIds||[],{_principalIds:n,...s}=u,x=k.formToInsert(s),l=await f.createContact(x);l?(m.length>0&&console.log("Principal IDs would be associated:",m),h.push(`/contacts/${l.id}`)):g.value=f.errorMessage||"Failed to create contact"}catch(m){console.error("Error creating contact:",m),g.value="An unexpected error occurred while creating the contact"}},d=()=>{h.push("/contacts")};return(u,m)=>{const n=J("router-link");return v(),w("div",et,[o("div",tt,[o("div",ot,[a(n,{to:"/contacts",class:"text-gray-500 hover:text-gray-700"},{default:W(()=>[a(_(ae),{class:"h-5 w-5"})]),_:1}),m[0]||(m[0]=o("h1",{class:"text-3xl font-bold text-gray-900"},"Create New Contact",-1))]),m[1]||(m[1]=o("p",{class:"text-gray-600"}," Add a key contact who influences Principal product purchases within their organization. ",-1))]),a(Ne,{"is-editing":!1,onSubmit:c,onCancel:d}),g.value?(v(),w("div",rt,[o("div",nt,[a(_(ie),{class:"h-5 w-5 text-red-400 mr-2 mt-0.5"}),o("div",null,[m[2]||(m[2]=o("h3",{class:"text-sm font-medium text-red-800"},"Error creating contact",-1)),o("p",st,P(g.value),1)])])])):I("",!0)])}}});export{vt as default};
//# sourceMappingURL=ContactCreateView-CI8apFhF.js.map
