import{a as $}from"./ManagePrincipalProductsButton.vue_vue_type_style_index_0_scoped_f75a9cbf_lang-CgdDeQZV.js";import{r as N,T as V}from"./TrendIndicator-CMQUPBAk.js";import{r as F}from"./ArrowDownTrayIcon-CO3_VHAU.js";import{a as I,r as L}from"./ChevronUpIcon-OFNtXdQa.js";import{d as A,r as k,c as W,a as n,b as t,t as a,n as x,f as d,e as E,u as _,F as b,i as v,h as C,j as i,p as R,J as U}from"./index-CtjJHjR0.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"principal-product-table"},G={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},H={class:"mt-1 text-sm text-gray-600"},K={class:"flex items-center space-x-3 mt-4 sm:mt-0"},Q={class:"flex rounded-md shadow-sm"},X={key:0,class:"animate-pulse"},Y={class:"bg-white shadow rounded-lg overflow-hidden"},Z={class:"px-4 py-5 sm:p-6"},tt={class:"space-y-4"},et={key:1,class:"bg-white shadow rounded-lg overflow-hidden"},st={class:"overflow-x-auto"},ot={class:"min-w-full divide-y divide-gray-200"},at={class:"bg-gray-50"},rt=["onClick"],nt={class:"flex items-center space-x-1"},it={key:0,class:"flex flex-col"},lt={class:"bg-white divide-y divide-gray-200"},dt={class:"px-6 py-4 whitespace-nowrap"},ct={class:"flex items-center"},ut={class:"text-sm font-medium text-gray-900"},mt={class:"text-sm text-gray-500"},pt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ft={class:"flex items-center"},_t={class:"font-medium"},gt={class:"text-xs text-green-600"},yt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"flex items-center"},vt={class:"flex-1 bg-gray-200 rounded-full h-2 mr-2"},ht={class:"text-sm font-medium text-gray-900"},wt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},kt={class:"font-semibold"},Ct={class:"text-xs text-gray-500"},Pt={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Dt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},$t={class:"flex items-center space-x-2"},Nt=["onClick"],Vt=["onClick"],Mt={key:0,class:"text-center py-12"},jt={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},zt={class:"p-6"},Ot={class:"flex items-center justify-between mb-4"},St={class:"text-lg font-medium text-gray-900 truncate"},Bt={class:"grid grid-cols-2 gap-4 mb-4"},Ft={class:"text-center"},It={class:"text-2xl font-bold text-blue-600"},Lt={class:"text-center"},At={class:"text-2xl font-bold text-green-600"},Wt={class:"mb-4"},Et={class:"flex justify-between items-center mb-2"},Rt={class:"text-sm font-semibold text-gray-900"},Ut={class:"flex justify-between items-center"},Jt={class:"text-sm font-medium text-gray-700"},qt={class:"flex items-center justify-between mb-4"},Gt={class:"flex items-center"},Ht={class:"text-sm text-gray-500"},Kt={class:"flex space-x-2"},Qt=["onClick"],Xt=["onClick"],Yt={key:0,class:"col-span-full text-center py-12"},Zt=A({__name:"PrincipalProductTable",props:{products:{},loading:{type:Boolean,default:!1},principalName:{default:"Principal"}},emits:["product-selected","create-opportunity","export-data"],setup(M,{emit:j}){const h=M,w=j,f=k("table"),c=k("product_performance_score"),u=k("desc"),z=[{key:"product_name",label:"Product",sortable:!0},{key:"product_performance_score",label:"Performance",sortable:!0},{key:"total_opportunities",label:"Opportunities",sortable:!0},{key:"win_rate",label:"Win Rate",sortable:!0},{key:"total_value",label:"Value",sortable:!0},{key:"engagement_trend",label:"Trend",sortable:!1},{key:"last_opportunity_date",label:"Last Activity",sortable:!0}],g=W(()=>!h.products||h.products.length===0?[]:[...h.products].sort((s,e)=>{const l=s[c.value],r=e[c.value];let m=l??0,p=r??0;return typeof l=="string"&&typeof r=="string"?(m=l.toLowerCase(),p=r.toLowerCase()):typeof l=="number"&&typeof r=="number"&&(m=l,p=r),u.value==="asc"?m<p?-1:m>p?1:0:m>p?-1:m<p?1:0})),O=o=>{c.value===o?u.value=u.value==="asc"?"desc":"asc":(c.value=o,u.value="desc")},P=o=>{w("product-selected",o)},T=o=>{w("create-opportunity",o)},S=()=>{w("export-data")},y=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(o),D=o=>{if(!o)return"Never";const s=new Date(o),l=Math.abs(new Date().getTime()-s.getTime()),r=Math.ceil(l/(1e3*60*60*24));return r<=1?"Today":r<=7?`${r} days ago`:r<=30?`${Math.ceil(r/7)} weeks ago`:r<=365?`${Math.ceil(r/30)} months ago`:s.toLocaleDateString()},B=o=>o>=70?"bg-green-500":o>=40?"bg-yellow-500":"bg-red-500";return(o,s)=>(i(),n("div",q,[t("div",G,[t("div",null,[s[2]||(s[2]=t("h3",{class:"text-lg font-medium text-gray-900"},"Product Performance",-1)),t("p",H," Performance metrics for products associated with "+a(o.principalName),1)]),t("div",K,[t("div",Q,[t("button",{onClick:s[0]||(s[0]=e=>f.value="table"),class:x(["px-4 py-2 text-sm font-medium border rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:z-10",f.value==="table"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," Table ",2),t("button",{onClick:s[1]||(s[1]=e=>f.value="cards"),class:x(["px-4 py-2 text-sm font-medium border-t border-r border-b rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:z-10 -ml-px",f.value==="cards"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," Cards ",2)]),t("button",{onClick:S,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[d(_(F),{class:"h-4 w-4 mr-1"}),s[3]||(s[3]=E(" Export ",-1))])])]),o.loading?(i(),n("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[(i(),n(b,null,v(5,e=>t("div",{key:e,class:"flex items-center space-x-4"},s[4]||(s[4]=[R('<div class="h-4 bg-gray-200 rounded w-1/4" data-v-9b8260f9></div><div class="h-4 bg-gray-200 rounded w-1/6" data-v-9b8260f9></div><div class="h-4 bg-gray-200 rounded w-1/6" data-v-9b8260f9></div><div class="h-4 bg-gray-200 rounded w-1/4" data-v-9b8260f9></div><div class="h-4 bg-gray-200 rounded w-1/6" data-v-9b8260f9></div>',5)]))),64))])])])])):f.value==="table"?(i(),n("div",et,[t("div",st,[t("table",ot,[t("thead",at,[t("tr",null,[(i(),n(b,null,v(z,e=>t("th",{key:e.key,onClick:l=>e.sortable&&O(e.key),class:x(["px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",e.sortable?"cursor-pointer hover:bg-gray-100":""])},[t("div",nt,[t("span",null,a(e.label),1),e.sortable?(i(),n("div",it,[d(_(I),{class:x(["h-3 w-3",[c.value===e.key&&u.value==="asc"?"text-blue-600":"text-gray-400"]])},null,8,["class"]),d(_(L),{class:x(["h-3 w-3 -mt-1",[c.value===e.key&&u.value==="desc"?"text-blue-600":"text-gray-400"]])},null,8,["class"])])):C("",!0)])],10,rt)),64)),s[5]||(s[5]=t("th",{class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Actions")],-1))])]),t("tbody",lt,[(i(!0),n(b,null,v(g.value,e=>(i(),n("tr",{key:e.product_id,class:"hover:bg-gray-50 transition-colors duration-150"},[t("td",dt,[t("div",ct,[t("div",null,[t("div",ut,a(e.product_name),1),t("div",mt," ID: "+a(e.product_id.slice(0,8))+"... ",1)])])]),t("td",pt,[d($,{score:e.product_performance_score||0,size:"md"},null,8,["score"])]),t("td",xt,[t("div",ft,[t("span",_t,a(e.total_opportunities||0),1),s[6]||(s[6]=t("span",{class:"ml-1 text-gray-500"},"total",-1))]),t("div",gt,a(e.won_opportunities_for_product||0)+" won ",1)]),t("td",yt,[t("div",bt,[t("div",vt,[t("div",{class:x(["h-2 rounded-full transition-all duration-300",B(e.win_rate||0)]),style:U({width:`${Math.min(e.win_rate||0,100)}%`})},null,6)]),t("span",ht,a(Math.round(e.win_rate||0))+"% ",1)])]),t("td",wt,[t("div",kt,a(y(e.total_value||0)),1),t("div",Ct," Avg: "+a(y((e.total_value||0)/Math.max(e.total_opportunities||1,1))),1)]),t("td",Pt,[d(V,{change:0,trend:"stable",size:"sm"})]),t("td",Tt,a(D(e.latest_opportunity_date)),1),t("td",Dt,[t("div",$t,[t("button",{onClick:l=>P(e.product_id),class:"text-blue-600 hover:text-blue-900 transition-colors"}," View ",8,Nt),t("button",{onClick:l=>T(e.product_id),class:"text-green-600 hover:text-green-900 transition-colors"}," New Opp ",8,Vt)])])]))),128))])])]),g.value.length===0?(i(),n("div",Mt,[d(_(N),{class:"mx-auto h-12 w-12 text-gray-400"}),s[7]||(s[7]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No products found",-1)),s[8]||(s[8]=t("p",{class:"mt-1 text-sm text-gray-500"}," This principal has no associated products yet. ",-1))])):C("",!0)])):(i(),n("div",jt,[(i(!0),n(b,null,v(g.value,e=>(i(),n("div",{key:e.product_id,class:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow duration-200"},[t("div",zt,[t("div",Ot,[t("h4",St,a(e.product_name),1),d($,{score:e.product_performance_score||0,size:"sm"},null,8,["score"])]),t("div",Bt,[t("div",Ft,[t("div",It,a(e.total_opportunities||0),1),s[9]||(s[9]=t("div",{class:"text-xs text-gray-500"},"Opportunities",-1))]),t("div",Lt,[t("div",At,a(Math.round(e.win_rate||0))+"% ",1),s[10]||(s[10]=t("div",{class:"text-xs text-gray-500"},"Win Rate",-1))])]),t("div",Wt,[t("div",Et,[s[11]||(s[11]=t("span",{class:"text-sm text-gray-600"},"Total Value",-1)),t("span",Rt,a(y(e.total_value||0)),1)]),t("div",Ut,[s[12]||(s[12]=t("span",{class:"text-sm text-gray-600"},"Avg per Opp",-1)),t("span",Jt,a(y((e.total_value||0)/Math.max(e.total_opportunities||1,1))),1)])]),t("div",qt,[t("div",Gt,[d(V,{change:0,trend:"stable",size:"sm"}),s[13]||(s[13]=t("span",{class:"ml-2 text-sm text-gray-600"},"Trend",-1))]),t("div",Ht,a(D(e.latest_opportunity_date)),1)]),t("div",Kt,[t("button",{onClick:l=>P(e.product_id),class:"flex-1 inline-flex justify-center items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," View Details ",8,Qt),t("button",{onClick:l=>T(e.product_id),class:"flex-1 inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," New Opportunity ",8,Xt)])])]))),128)),g.value.length===0?(i(),n("div",Yt,[d(_(N),{class:"mx-auto h-12 w-12 text-gray-400"}),s[14]||(s[14]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No products found",-1)),s[15]||(s[15]=t("p",{class:"mt-1 text-sm text-gray-500"}," This principal has no associated products yet. ",-1))])):C("",!0)]))]))}}),ne=J(Zt,[["__scopeId","data-v-9b8260f9"]]);export{ne as P};
//# sourceMappingURL=PrincipalProductTable-GbfFDXJY.js.map
