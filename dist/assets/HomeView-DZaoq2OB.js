import{c as F,o as R,a as N,_ as Ae,d as Xs,r as tt,b as Je,e as oe,f as Te,t as X,n as ps,F as Qs,g as er,s as tr,h as Mt,i as se,j as st,u as K,w as sr,k as rr}from"./index-BMDSrcXi.js";var D=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ir(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function nr(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var r=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return i[s]}})}),t}function ue(i){this._maxSize=i,this.clear()}ue.prototype.clear=function(){this._size=0,this._values=Object.create(null)};ue.prototype.get=function(i){return this._values[i]};ue.prototype.set=function(i,e){return this._size>=this._maxSize&&this.clear(),i in this._values||this._size++,this._values[i]=e};var ar=/[^.^\]^[]+|(?=\[\]|\.\.)/g,gs=/^\d+$/,or=/^\d/,lr=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,ur=/^\s*(['"]?)(.*?)(\1)\s*$/,Tt=512,Bt=new ue(Tt),qt=new ue(Tt),zt=new ue(Tt),le={Cache:ue,split:ft,normalizePath:rt,setter:function(i){var e=rt(i);return qt.get(i)||qt.set(i,function(s,r){for(var n=0,a=e.length,o=s;n<a-1;){var l=e[n];if(l==="__proto__"||l==="constructor"||l==="prototype")return s;o=o[e[n++]]}o[e[n]]=r})},getter:function(i,e){var t=rt(i);return zt.get(i)||zt.set(i,function(r){for(var n=0,a=t.length;n<a;)if(r!=null||!e)r=r[t[n++]];else return;return r})},join:function(i){return i.reduce(function(e,t){return e+($t(t)||gs.test(t)?"["+t+"]":(e?".":"")+t)},"")},forEach:function(i,e,t){cr(Array.isArray(i)?i:ft(i),e,t)}};function rt(i){return Bt.get(i)||Bt.set(i,ft(i).map(function(e){return e.replace(ur,"$2")}))}function ft(i){return i.match(ar)||[""]}function cr(i,e,t){var s=i.length,r,n,a,o;for(n=0;n<s;n++)r=i[n],r&&(fr(r)&&(r='"'+r+'"'),o=$t(r),a=!o&&/^\d+$/.test(r),e.call(t,r,o,a,n,i))}function $t(i){return typeof i=="string"&&i&&["'",'"'].indexOf(i.charAt(0))!==-1}function hr(i){return i.match(or)&&!i.match(gs)}function dr(i){return lr.test(i)}function fr(i){return!$t(i)&&(hr(i)||dr(i))}const pr=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Ke=i=>i.match(pr)||[],We=i=>i[0].toUpperCase()+i.slice(1),Ot=(i,e)=>Ke(i).join(e).toLowerCase(),ms=i=>Ke(i).reduce((e,t)=>`${e}${e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}`,""),gr=i=>We(ms(i)),mr=i=>Ot(i,"_"),yr=i=>Ot(i,"-"),vr=i=>We(Ot(i," ")),_r=i=>Ke(i).map(We).join(" ");var it={words:Ke,upperFirst:We,camelCase:ms,pascalCase:gr,snakeCase:mr,kebabCase:yr,sentenceCase:vr,titleCase:_r},jt={exports:{}};jt.exports=function(i){return ys(br(i),i)};jt.exports.array=ys;function ys(i,e){var t=i.length,s=new Array(t),r={},n=t,a=wr(e),o=kr(i);for(e.forEach(function(u){if(!o.has(u[0])||!o.has(u[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});n--;)r[n]||l(i[n],n,new Set);return s;function l(u,c,h){if(h.has(u)){var d;try{d=", node was:"+JSON.stringify(u)}catch{d=""}throw new Error("Cyclic dependency"+d)}if(!o.has(u))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(u));if(!r[c]){r[c]=!0;var p=a.get(u)||new Set;if(p=Array.from(p),c=p.length){h.add(u);do{var g=p[--c];l(g,o.get(g),h)}while(c);h.delete(u)}s[--t]=u}}}function br(i){for(var e=new Set,t=0,s=i.length;t<s;t++){var r=i[t];e.add(r[0]),e.add(r[1])}return Array.from(e)}function wr(i){for(var e=new Map,t=0,s=i.length;t<s;t++){var r=i[t];e.has(r[0])||e.set(r[0],new Set),e.has(r[1])||e.set(r[1],new Set),e.get(r[0]).add(r[1])}return e}function kr(i){for(var e=new Map,t=0,s=i.length;t<s;t++)e.set(i[t],t);return e}var Sr=jt.exports;const xr=ir(Sr),Er=Object.prototype.toString,Tr=Error.prototype.toString,$r=RegExp.prototype.toString,Or=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",jr=/^Symbol\((.*)\)(.*)$/;function Ar(i){return i!=+i?"NaN":i===0&&1/i<0?"-0":""+i}function Vt(i,e=!1){if(i==null||i===!0||i===!1)return""+i;const t=typeof i;if(t==="number")return Ar(i);if(t==="string")return e?`"${i}"`:i;if(t==="function")return"[Function "+(i.name||"anonymous")+"]";if(t==="symbol")return Or.call(i).replace(jr,"Symbol($1)");const s=Er.call(i).slice(8,-1);return s==="Date"?isNaN(i.getTime())?""+i:i.toISOString(i):s==="Error"||i instanceof Error?"["+Tr.call(i)+"]":s==="RegExp"?$r.call(i):null}function Q(i,e){let t=Vt(i,e);return t!==null?t:JSON.stringify(i,function(s,r){let n=Vt(this[s],e);return n!==null?n:r},2)}function vs(i){return i==null?[]:[].concat(i)}let _s,bs,ws,Cr=/\$\{\s*(\w+)\s*\}/g;_s=Symbol.toStringTag;class Jt{constructor(e,t,s,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[_s]="Error",this.name="ValidationError",this.value=t,this.path=s,this.type=r,this.errors=[],this.inner=[],vs(e).forEach(n=>{if(A.isError(n)){this.errors.push(...n.errors);const a=n.inner.length?n.inner:[n];this.inner.push(...a)}else this.errors.push(n)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}bs=Symbol.hasInstance;ws=Symbol.toStringTag;class A extends Error{static formatError(e,t){const s=t.label||t.path||"this";return t=Object.assign({},t,{path:s,originalPath:t.path}),typeof e=="string"?e.replace(Cr,(r,n)=>Q(t[n])):typeof e=="function"?e(t):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,t,s,r,n){const a=new Jt(e,t,s,r);if(n)return a;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[ws]="Error",this.name=a.name,this.message=a.message,this.type=a.type,this.value=a.value,this.path=a.path,this.errors=a.errors,this.inner=a.inner,Error.captureStackTrace&&Error.captureStackTrace(this,A)}static[bs](e){return Jt[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let B={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:i,type:e,value:t,originalValue:s})=>{const r=s!=null&&s!==t?` (cast from the value \`${Q(s,!0)}\`).`:".";return e!=="mixed"?`${i} must be a \`${e}\` type, but the final value was: \`${Q(t,!0)}\``+r:`${i} must match the configured type. The validated value was: \`${Q(t,!0)}\``+r}},P={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},H={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},pt={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Pr={isValue:"${path} field must be ${value}"},Le={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},Ir={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Rr={notType:i=>{const{path:e,value:t,spec:s}=i,r=s.types.length;if(Array.isArray(t)){if(t.length<r)return`${e} tuple value has too few items, expected a length of ${r} but got ${t.length} for value: \`${Q(t,!0)}\``;if(t.length>r)return`${e} tuple value has too many items, expected a length of ${r} but got ${t.length} for value: \`${Q(t,!0)}\``}return A.formatError(B.notType,i)}};Object.assign(Object.create(null),{mixed:B,string:P,number:H,date:pt,object:Le,array:Ir,boolean:Pr,tuple:Rr});const At=i=>i&&i.__isYupSchema__;class Be{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:s,then:r,otherwise:n}=t,a=typeof s=="function"?s:(...o)=>o.every(l=>l===s);return new Be(e,(o,l)=>{var u;let c=a(...o)?r:n;return(u=c==null?void 0:c(l))!=null?u:l})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let s=this.refs.map(n=>n.getValue(t==null?void 0:t.value,t==null?void 0:t.parent,t==null?void 0:t.context)),r=this.fn(s,e,t);if(r===void 0||r===e)return e;if(!At(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}const Re={context:"$",value:"."};class ce{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Re.context,this.isValue=this.key[0]===Re.value,this.isSibling=!this.isContext&&!this.isValue;let s=this.isContext?Re.context:this.isValue?Re.value:"";this.path=this.key.slice(s.length),this.getter=this.path&&le.getter(this.path,!0),this.map=t.map}getValue(e,t,s){let r=this.isContext?s:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,t==null?void 0:t.parent,t==null?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}ce.prototype.__isYupRef=!0;const J=i=>i==null;function de(i){function e({value:t,path:s="",options:r,originalValue:n,schema:a},o,l){const{name:u,test:c,params:h,message:d,skipAbsent:p}=i;let{parent:g,context:f,abortEarly:m=a.spec.abortEarly,disableStackTrace:w=a.spec.disableStackTrace}=r;function x(T){return ce.isRef(T)?T.getValue(t,g,f):T}function y(T={}){const te=Object.assign({value:t,originalValue:n,label:a.spec.label,path:T.path||s,spec:a.spec,disableStackTrace:T.disableStackTrace||w},h,T.params);for(const Nt of Object.keys(te))te[Nt]=x(te[Nt]);const Lt=new A(A.formatError(T.message||d,te),t,te.path,T.type||u,te.disableStackTrace);return Lt.params=te,Lt}const b=m?o:l;let E={path:s,parent:g,type:u,from:r.from,createError:y,resolve:x,options:r,originalValue:n,schema:a};const S=T=>{A.isError(T)?b(T):T?l(null):b(y())},O=T=>{A.isError(T)?b(T):o(T)};if(p&&J(t))return S(!0);let Ie;try{var Ut;if(Ie=c.call(E,t,E),typeof((Ut=Ie)==null?void 0:Ut.then)=="function"){if(r.sync)throw new Error(`Validation test of type: "${E.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(Ie).then(S,O)}}catch(T){O(T);return}S(Ie)}return e.OPTIONS=i,e}function Fr(i,e,t,s=t){let r,n,a;return e?(le.forEach(e,(o,l,u)=>{let c=l?o.slice(1,o.length-1):o;i=i.resolve({context:s,parent:r,value:t});let h=i.type==="tuple",d=u?parseInt(c,10):0;if(i.innerType||h){if(h&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${a}" must contain an index to the tuple element, e.g. "${a}[0]"`);if(t&&d>=t.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${o}, in the path: ${e}. because there is no value at that index. `);r=t,t=t&&t[d],i=h?i.spec.types[d]:i.innerType}if(!u){if(!i.fields||!i.fields[c])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${a} which is a type: "${i.type}")`);r=t,t=t&&t[c],i=i.fields[c]}n=c,a=l?"["+o+"]":"."+o}),{schema:i,parent:r,parentPath:n}):{parent:r,parentPath:e,schema:i}}class qe extends Set{describe(){const e=[];for(const t of this.values())e.push(ce.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const s of this.values())t.push(e(s));return t}clone(){return new qe(this.values())}merge(e,t){const s=this.clone();return e.forEach(r=>s.add(r)),t.forEach(r=>s.delete(r)),s}}function be(i,e=new Map){if(At(i)||!i||typeof i!="object")return i;if(e.has(i))return e.get(i);let t;if(i instanceof Date)t=new Date(i.getTime()),e.set(i,t);else if(i instanceof RegExp)t=new RegExp(i),e.set(i,t);else if(Array.isArray(i)){t=new Array(i.length),e.set(i,t);for(let s=0;s<i.length;s++)t[s]=be(i[s],e)}else if(i instanceof Map){t=new Map,e.set(i,t);for(const[s,r]of i.entries())t.set(s,be(r,e))}else if(i instanceof Set){t=new Set,e.set(i,t);for(const s of i)t.add(be(s,e))}else if(i instanceof Object){t={},e.set(i,t);for(const[s,r]of Object.entries(i))t[s]=be(r,e)}else throw Error(`Unable to clone ${i}`);return t}class M{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new qe,this._blacklist=new qe,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(B.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(t=>{t.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=be(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(e.length===0)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let s=e(this);return this._mutate=t,s}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,s=e.clone();const r=Object.assign({},t.spec,s.spec);return s.spec=r,s.internalTests=Object.assign({},t.internalTests,s.internalTests),s._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),s._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),s.tests=t.tests,s.exclusiveTests=t.exclusiveTests,s.withMutation(n=>{e.tests.forEach(a=>{n.test(a.OPTIONS)})}),s.transforms=[...t.transforms,...s.transforms],s}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let s=t.conditions;t=t.clone(),t.conditions=[],t=s.reduce((r,n)=>n.resolve(r,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,s,r,n;return Object.assign({},e,{from:e.from||[],strict:(t=e.strict)!=null?t:this.spec.strict,abortEarly:(s=e.abortEarly)!=null?s:this.spec.abortEarly,recursive:(r=e.recursive)!=null?r:this.spec.recursive,disableStackTrace:(n=e.disableStackTrace)!=null?n:this.spec.disableStackTrace})}cast(e,t={}){let s=this.resolve(Object.assign({value:e},t)),r=t.assert==="ignore-optionality",n=s._cast(e,t);if(t.assert!==!1&&!s.isType(n)){if(r&&J(n))return n;let a=Q(e),o=Q(n);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${s.type}". 

attempted value: ${a} 
`+(o!==a?`result of cast: ${o}`:""))}return n}_cast(e,t){let s=e===void 0?e:this.transforms.reduce((r,n)=>n.call(this,r,e,this),e);return s===void 0&&(s=this.getDefault(t)),s}_validate(e,t={},s,r){let{path:n,originalValue:a=e,strict:o=this.spec.strict}=t,l=e;o||(l=this._cast(l,Object.assign({assert:!1},t)));let u=[];for(let c of Object.values(this.internalTests))c&&u.push(c);this.runTests({path:n,value:l,originalValue:a,options:t,tests:u},s,c=>{if(c.length)return r(c,l);this.runTests({path:n,value:l,originalValue:a,options:t,tests:this.tests},s,r)})}runTests(e,t,s){let r=!1,{tests:n,value:a,originalValue:o,path:l,options:u}=e,c=f=>{r||(r=!0,t(f,a))},h=f=>{r||(r=!0,s(f,a))},d=n.length,p=[];if(!d)return h([]);let g={value:a,originalValue:o,path:l,options:u,schema:this};for(let f=0;f<n.length;f++){const m=n[f];m(g,c,function(x){x&&(Array.isArray(x)?p.push(...x):p.push(x)),--d<=0&&h(p)})}}asNestedTest({key:e,index:t,parent:s,parentPath:r,originalParent:n,options:a}){const o=e??t;if(o==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof o=="number";let u=s[o];const c=Object.assign({},a,{strict:!0,parent:s,value:u,originalValue:n[o],key:void 0,[l?"index":"key"]:o,path:l||o.includes(".")?`${r||""}[${l?o:`"${o}"`}]`:(r?`${r}.`:"")+e});return(h,d,p)=>this.resolve(c)._validate(u,c,d,p)}validate(e,t){var s;let r=this.resolve(Object.assign({},t,{value:e})),n=(s=t==null?void 0:t.disableStackTrace)!=null?s:r.spec.disableStackTrace;return new Promise((a,o)=>r._validate(e,t,(l,u)=>{A.isError(l)&&(l.value=u),o(l)},(l,u)=>{l.length?o(new A(l,u,void 0,void 0,n)):a(u)}))}validateSync(e,t){var s;let r=this.resolve(Object.assign({},t,{value:e})),n,a=(s=t==null?void 0:t.disableStackTrace)!=null?s:r.spec.disableStackTrace;return r._validate(e,Object.assign({},t,{sync:!0}),(o,l)=>{throw A.isError(o)&&(o.value=l),o},(o,l)=>{if(o.length)throw new A(o,e,void 0,void 0,a);n=l}),n}isValid(e,t){return this.validate(e,t).then(()=>!0,s=>{if(A.isError(s))return!1;throw s})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(s){if(A.isError(s))return!1;throw s}}_getDefault(e){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this,e):be(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const s=this.clone({nullable:e});return s.internalTests.nullable=de({message:t,name:"nullable",test(r){return r===null?this.schema.spec.nullable:!0}}),s}optionality(e,t){const s=this.clone({optional:e});return s.internalTests.optionality=de({message:t,name:"optionality",test(r){return r===void 0?this.schema.spec.optional:!0}}),s}optional(){return this.optionality(!0)}defined(e=B.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=B.notNull){return this.nullability(!1,e)}required(e=B.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(e.length===1?typeof e[0]=="function"?t={test:e[0]}:t=e[0]:e.length===2?t={name:e[0],test:e[1]}:t={name:e[0],message:e[1],test:e[2]},t.message===void 0&&(t.message=B.default),typeof t.test!="function")throw new TypeError("`test` is a required parameters");let s=this.clone(),r=de(t),n=t.exclusive||t.name&&s.exclusiveTests[t.name]===!0;if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(s.exclusiveTests[t.name]=!!t.exclusive),s.tests=s.tests.filter(a=>!(a.OPTIONS.name===t.name&&(n||a.OPTIONS.test===r.OPTIONS.test))),s.tests.push(r),s}when(e,t){!Array.isArray(e)&&typeof e!="string"&&(t=e,e=".");let s=this.clone(),r=vs(e).map(n=>new ce(n));return r.forEach(n=>{n.isSibling&&s.deps.push(n.key)}),s.conditions.push(typeof t=="function"?new Be(r,t):Be.fromOptions(r,t)),s}typeError(e){let t=this.clone();return t.internalTests.typeError=de({message:e,name:"typeError",skipAbsent:!0,test(s){return this.schema._typeCheck(s)?!0:this.createError({params:{type:this.schema.type}})}}),t}oneOf(e,t=B.oneOf){let s=this.clone();return e.forEach(r=>{s._whitelist.add(r),s._blacklist.delete(r)}),s.internalTests.whiteList=de({message:t,name:"oneOf",skipAbsent:!0,test(r){let n=this.schema._whitelist,a=n.resolveAll(this.resolve);return a.includes(r)?!0:this.createError({params:{values:Array.from(n).join(", "),resolved:a}})}}),s}notOneOf(e,t=B.notOneOf){let s=this.clone();return e.forEach(r=>{s._blacklist.add(r),s._whitelist.delete(r)}),s.internalTests.blacklist=de({message:t,name:"notOneOf",test(r){let n=this.schema._blacklist,a=n.resolveAll(this.resolve);return a.includes(r)?this.createError({params:{values:Array.from(n).join(", "),resolved:a}}):!0}}),s}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:s,meta:r,optional:n,nullable:a}=t.spec;return{meta:r,label:s,optional:n,nullable:a,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(l=>({name:l.OPTIONS.name,params:l.OPTIONS.params})).filter((l,u,c)=>c.findIndex(h=>h.name===l.name)===u)}}}M.prototype.__isYupSchema__=!0;for(const i of["validate","validateSync"])M.prototype[`${i}At`]=function(e,t,s={}){const{parent:r,parentPath:n,schema:a}=Fr(this,e,t,s.context);return a[i](r&&r[n],Object.assign({},s,{parent:r,path:e}))};for(const i of["equals","is"])M.prototype[i]=M.prototype.oneOf;for(const i of["not","nope"])M.prototype[i]=M.prototype.notOneOf;const Dr=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Ur(i){const e=gt(i);if(!e)return Date.parse?Date.parse(i):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let t=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(t=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(t=0-t)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+t,e.second,e.millisecond)}function gt(i){var e,t;const s=Dr.exec(i);return s?{year:q(s[1]),month:q(s[2],1)-1,day:q(s[3],1),hour:q(s[4]),minute:q(s[5]),second:q(s[6]),millisecond:s[7]?q(s[7].substring(0,3)):0,precision:(e=(t=s[7])==null?void 0:t.length)!=null?e:void 0,z:s[8]||void 0,plusMinus:s[9]||void 0,hourOffset:q(s[10]),minuteOffset:q(s[11])}:null}function q(i,e=0){return Number(i)||e}let Lr=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Nr=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Mr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Br="^\\d{4}-\\d{2}-\\d{2}",qr="\\d{2}:\\d{2}:\\d{2}",zr="(([+-]\\d{2}(:?\\d{2})?)|Z)",Vr=new RegExp(`${Br}T${qr}(\\.\\d+)?${zr}$`),Jr=i=>J(i)||i===i.trim(),Kr={}.toString();function Ne(){return new ks}class ks extends M{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,t,s)=>{if(!s.spec.coerce||s.isType(e)||Array.isArray(e))return e;const r=e!=null&&e.toString?e.toString():e;return r===Kr?e:r})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||B.required,name:"required",skipAbsent:!0,test:s=>!!s.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(t=>t.OPTIONS.name!=="required"),e))}length(e,t=P.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(s){return s.length===this.resolve(e)}})}min(e,t=P.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(s){return s.length>=this.resolve(e)}})}max(e,t=P.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(s){return s.length<=this.resolve(e)}})}matches(e,t){let s=!1,r,n;return t&&(typeof t=="object"?{excludeEmptyString:s=!1,message:r,name:n}=t:r=t),this.test({name:n||"matches",message:r||P.matches,params:{regex:e},skipAbsent:!0,test:a=>a===""&&s||a.search(e)!==-1})}email(e=P.email){return this.matches(Lr,{name:"email",message:e,excludeEmptyString:!0})}url(e=P.url){return this.matches(Nr,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=P.uuid){return this.matches(Mr,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t="",s,r;return e&&(typeof e=="object"?{message:t="",allowOffset:s=!1,precision:r=void 0}=e:t=e),this.matches(Vr,{name:"datetime",message:t||P.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:t||P.datetime_offset,params:{allowOffset:s},skipAbsent:!0,test:n=>{if(!n||s)return!0;const a=gt(n);return a?!!a.z:!1}}).test({name:"datetime_precision",message:t||P.datetime_precision,params:{precision:r},skipAbsent:!0,test:n=>{if(!n||r==null)return!0;const a=gt(n);return a?a.precision===r:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=P.trim){return this.transform(t=>t!=null?t.trim():t).test({message:e,name:"trim",test:Jr})}lowercase(e=P.lowercase){return this.transform(t=>J(t)?t:t.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>J(t)||t===t.toLowerCase()})}uppercase(e=P.uppercase){return this.transform(t=>J(t)?t:t.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>J(t)||t===t.toUpperCase()})}}Ne.prototype=ks.prototype;let Wr=i=>i!=+i;function Ss(){return new xs}class xs extends M{constructor(){super({type:"number",check(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&!Wr(e)}}),this.withMutation(()=>{this.transform((e,t,s)=>{if(!s.spec.coerce)return e;let r=e;if(typeof r=="string"){if(r=r.replace(/\s/g,""),r==="")return NaN;r=+r}return s.isType(r)||r===null?r:parseFloat(r)})})}min(e,t=H.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(s){return s>=this.resolve(e)}})}max(e,t=H.max){return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(s){return s<=this.resolve(e)}})}lessThan(e,t=H.lessThan){return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(s){return s<this.resolve(e)}})}moreThan(e,t=H.moreThan){return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(s){return s>this.resolve(e)}})}positive(e=H.positive){return this.moreThan(0,e)}negative(e=H.negative){return this.lessThan(0,e)}integer(e=H.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:t=>Number.isInteger(t)})}truncate(){return this.transform(e=>J(e)?e:e|0)}round(e){var t;let s=["ceil","floor","round","trunc"];if(e=((t=e)==null?void 0:t.toLowerCase())||"round",e==="trunc")return this.truncate();if(s.indexOf(e.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+s.join(", "));return this.transform(r=>J(r)?r:Math[e](r))}}Ss.prototype=xs.prototype;let Hr=new Date(""),Gr=i=>Object.prototype.toString.call(i)==="[object Date]";class Ct extends M{constructor(){super({type:"date",check(e){return Gr(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,t,s)=>!s.spec.coerce||s.isType(e)||e===null?e:(e=Ur(e),isNaN(e)?Ct.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let s;if(ce.isRef(e))s=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);s=r}return s}min(e,t=pt.min){let s=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r>=this.resolve(s)}})}max(e,t=pt.max){let s=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r<=this.resolve(s)}})}}Ct.INVALID_DATE=Hr;function Zr(i,e=[]){let t=[],s=new Set,r=new Set(e.map(([a,o])=>`${a}-${o}`));function n(a,o){let l=le.split(a)[0];s.add(l),r.has(`${o}-${l}`)||t.push([o,l])}for(const a of Object.keys(i)){let o=i[a];s.add(a),ce.isRef(o)&&o.isSibling?n(o.path,a):At(o)&&"deps"in o&&o.deps.forEach(l=>n(l,a))}return xr.array(Array.from(s),t).reverse()}function Kt(i,e){let t=1/0;return i.some((s,r)=>{var n;if((n=e.path)!=null&&n.includes(s))return t=r,!0}),t}function Es(i){return(e,t)=>Kt(i,e)-Kt(i,t)}const Yr=(i,e,t)=>{if(typeof i!="string")return i;let s=i;try{s=JSON.parse(i)}catch{}return t.isType(s)?s:i};function Me(i){if("fields"in i){const e={};for(const[t,s]of Object.entries(i.fields))e[t]=Me(s);return i.setFields(e)}if(i.type==="array"){const e=i.optional();return e.innerType&&(e.innerType=Me(e.innerType)),e}return i.type==="tuple"?i.optional().clone({types:i.spec.types.map(Me)}):"optional"in i?i.optional():i}const Xr=(i,e)=>{const t=[...le.normalizePath(e)];if(t.length===1)return t[0]in i;let s=t.pop(),r=le.getter(le.join(t),!0)(i);return!!(r&&s in r)};let Wt=i=>Object.prototype.toString.call(i)==="[object Object]";function Ht(i,e){let t=Object.keys(i.fields);return Object.keys(e).filter(s=>t.indexOf(s)===-1)}const Qr=Es([]);function Ts(i){return new $s(i)}class $s extends M{constructor(e){super({type:"object",check(t){return Wt(t)||typeof t=="function"}}),this.fields=Object.create(null),this._sortErrors=Qr,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var s;let r=super._cast(e,t);if(r===void 0)return this.getDefault(t);if(!this._typeCheck(r))return r;let n=this.fields,a=(s=t.stripUnknown)!=null?s:this.spec.noUnknown,o=[].concat(this._nodes,Object.keys(r).filter(h=>!this._nodes.includes(h))),l={},u=Object.assign({},t,{parent:l,__validating:t.__validating||!1}),c=!1;for(const h of o){let d=n[h],p=h in r;if(d){let g,f=r[h];u.path=(t.path?`${t.path}.`:"")+h,d=d.resolve({value:f,context:t.context,parent:l});let m=d instanceof M?d.spec:void 0,w=m==null?void 0:m.strict;if(m!=null&&m.strip){c=c||h in r;continue}g=!t.__validating||!w?d.cast(r[h],u):r[h],g!==void 0&&(l[h]=g)}else p&&!a&&(l[h]=r[h]);(p!==h in l||l[h]!==r[h])&&(c=!0)}return c?l:r}_validate(e,t={},s,r){let{from:n=[],originalValue:a=e,recursive:o=this.spec.recursive}=t;t.from=[{schema:this,value:a},...n],t.__validating=!0,t.originalValue=a,super._validate(e,t,s,(l,u)=>{if(!o||!Wt(u)){r(l,u);return}a=a||u;let c=[];for(let h of this._nodes){let d=this.fields[h];!d||ce.isRef(d)||c.push(d.asNestedTest({options:t,key:h,parent:u,parentPath:t.path,originalParent:a}))}this.runTests({tests:c,value:u,originalValue:a,options:t},s,h=>{r(h.sort(this._sortErrors).concat(l),u)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),s=t.fields;for(let[r,n]of Object.entries(this.fields)){const a=s[r];s[r]=a===void 0?n:a}return t.withMutation(r=>r.setFields(s,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(s=>{var r;const n=this.fields[s];let a=e;(r=a)!=null&&r.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[s]})),t[s]=n&&"getDefault"in n?n.getDefault(a):void 0}),t}setFields(e,t){let s=this.clone();return s.fields=e,s._nodes=Zr(e,t),s._sortErrors=Es(Object.keys(e)),t&&(s._excludedEdges=t),s}shape(e,t=[]){return this.clone().withMutation(s=>{let r=s._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[...s._excludedEdges,...t]),s.setFields(Object.assign(s.fields,e),r)})}partial(){const e={};for(const[t,s]of Object.entries(this.fields))e[t]="optional"in s&&s.optional instanceof Function?s.optional():s;return this.setFields(e)}deepPartial(){return Me(this)}pick(e){const t={};for(const s of e)this.fields[s]&&(t[s]=this.fields[s]);return this.setFields(t,this._excludedEdges.filter(([s,r])=>e.includes(s)&&e.includes(r)))}omit(e){const t=[];for(const s of Object.keys(this.fields))e.includes(s)||t.push(s);return this.pick(t)}from(e,t,s){let r=le.getter(e,!0);return this.transform(n=>{if(!n)return n;let a=n;return Xr(n,e)&&(a=Object.assign({},n),s||delete a[e],a[t]=r(n)),a})}json(){return this.transform(Yr)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||Le.exact,test(t){if(t==null)return!0;const s=Ht(this.schema,t);return s.length===0||this.createError({params:{properties:s.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,t=Le.noUnknown){typeof e!="boolean"&&(t=e,e=!0);let s=this.test({name:"noUnknown",exclusive:!0,message:t,test(r){if(r==null)return!0;const n=Ht(this.schema,r);return!e||n.length===0||this.createError({params:{unknown:n.join(", ")}})}});return s.spec.noUnknown=e,s}unknown(e=!0,t=Le.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const s={};for(const r of Object.keys(t))s[e(r)]=t[r];return s})}camelCase(){return this.transformKeys(it.camelCase)}snakeCase(){return this.transformKeys(it.snakeCase)}constantCase(){return this.transformKeys(e=>it.snakeCase(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),s=super.describe(e);s.fields={};for(const[n,a]of Object.entries(t.fields)){var r;let o=e;(r=o)!=null&&r.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[n]})),s.fields[n]=a.describe(o)}return s}}Ts.prototype=$s.prototype;function ei(i,e){return R(),F("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[N("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function ti(i,e){return R(),F("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[N("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function si(i,e){return R(),F("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[N("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const ri=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Ae(async()=>{const{default:s}=await Promise.resolve().then(()=>ke);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Pt extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class ii extends Pt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Gt extends Pt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zt extends Pt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mt;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(mt||(mt={}));var ni=function(i,e,t,s){function r(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?n(c.value):r(c.value).then(o,l)}u((s=s.apply(i,e||[])).next())})};class ai{constructor(e,{headers:t={},customFetch:s,region:r=mt.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=ri(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return ni(this,void 0,void 0,function*(){try{const{headers:r,method:n,body:a}=t;let o={},{region:l}=t;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(o["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let c;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(o["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:c}).catch(f=>{throw new ii(f)}),d=h.headers.get("x-relay-error");if(d&&d==="true")throw new Gt(h);if(!h.ok)throw new Zt(h);let p=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield h.json():p==="application/octet-stream"?g=yield h.blob():p==="text/event-stream"?g=h:p==="multipart/form-data"?g=yield h.formData():g=yield h.text(),{data:g,error:null,response:h}}catch(r){return{data:null,error:r,response:r instanceof Zt||r instanceof Gt?r.context:void 0}}})}}var I={},It={},He={},Ce={},Ge={},Ze={},oi=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},we=oi();const li=we.fetch,Os=we.fetch.bind(we),js=we.Headers,ui=we.Request,ci=we.Response,ke=Object.freeze(Object.defineProperty({__proto__:null,Headers:js,Request:ui,Response:ci,default:Os,fetch:li},Symbol.toStringTag,{value:"Module"})),hi=nr(ke);var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});let di=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ye.default=di;var As=D&&D.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ze,"__esModule",{value:!0});const fi=As(hi),pi=As(Ye);let gi=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=fi.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async n=>{var a,o,l;let u=null,c=null,h=null,d=n.status,p=n.statusText;if(n.ok){if(this.method!=="HEAD"){const w=await n.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=w:c=JSON.parse(w))}const f=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),m=(o=n.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");f&&m&&m.length>1&&(h=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,d=406,p="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const f=await n.text();try{u=JSON.parse(f),Array.isArray(u)&&n.status===404&&(c=[],u=null,d=200,p="OK")}catch{n.status===404&&f===""?(d=204,p="No Content"):u={message:f}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,d=200,p="OK"),u&&this.shouldThrowOnError)throw new pi.default(u)}return{error:u,data:c,count:h,status:d,statusText:p}});return this.shouldThrowOnError||(r=r.catch(n=>{var a,o,l;return{error:{message:`${(a=n==null?void 0:n.name)!==null&&a!==void 0?a:"FetchError"}: ${n==null?void 0:n.message}`,details:`${(o=n==null?void 0:n.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=n==null?void 0:n.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};Ze.default=gi;var mi=D&&D.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ge,"__esModule",{value:!0});const yi=mi(Ze);let vi=class extends yi.default{select(e){let t=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:n=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,n?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ge.default=vi;var _i=D&&D.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ce,"__esModule",{value:!0});const bi=_i(Ge);let wi=class extends bi.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let n="";r==="plain"?n="pl":r==="phrase"?n="ph":r==="websearch"&&(n="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};Ce.default=wi;var ki=D&&D.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(He,"__esModule",{value:!0});const xe=ki(Ce);let Si=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let n=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",a),s&&(this.headers.Prefer=`count=${s}`),new xe.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const r="POST",n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),s||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new xe.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:n=!0}={}){const a="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new xe.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new xe.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new xe.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};He.default=Si;var Xe={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.version=void 0;Qe.version="0.0.0-automated";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.DEFAULT_HEADERS=void 0;const xi=Qe;Xe.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${xi.version}`};var Cs=D&&D.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(It,"__esModule",{value:!0});const Ei=Cs(He),Ti=Cs(Ce),$i=Xe;let Oi=class Ps{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},$i.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Ei.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ps(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:n}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;s||r?(a=s?"HEAD":"GET",Object.entries(t).filter(([c,h])=>h!==void 0).map(([c,h])=>[c,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([c,h])=>{o.searchParams.append(c,h)})):(a="POST",l=t);const u=Object.assign({},this.headers);return n&&(u.Prefer=`count=${n}`),new Ti.default({method:a,url:o,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};It.default=Oi;var Se=D&&D.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(I,"__esModule",{value:!0});I.PostgrestError=I.PostgrestBuilder=I.PostgrestTransformBuilder=I.PostgrestFilterBuilder=I.PostgrestQueryBuilder=I.PostgrestClient=void 0;const Is=Se(It);I.PostgrestClient=Is.default;const Rs=Se(He);I.PostgrestQueryBuilder=Rs.default;const Fs=Se(Ce);I.PostgrestFilterBuilder=Fs.default;const Ds=Se(Ge);I.PostgrestTransformBuilder=Ds.default;const Us=Se(Ze);I.PostgrestBuilder=Us.default;const Ls=Se(Ye);I.PostgrestError=Ls.default;var ji=I.default={PostgrestClient:Is.default,PostgrestQueryBuilder:Rs.default,PostgrestFilterBuilder:Fs.default,PostgrestTransformBuilder:Ds.default,PostgrestBuilder:Us.default,PostgrestError:Ls.default};const{PostgrestClient:Ai,PostgrestQueryBuilder:za,PostgrestFilterBuilder:Va,PostgrestTransformBuilder:Ja,PostgrestBuilder:Ka,PostgrestError:Wa}=ji;function Ci(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Pi=Ci(),Ii="2.11.15",Ri=`realtime-js/${Ii}`,Fi="1.0.0",Ns=1e4,Di=1e3;var $e;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})($e||($e={}));var j;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(j||(j={}));var L;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(L||(L={}));var yt;(function(i){i.websocket="websocket"})(yt||(yt={}));var ae;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(ae||(ae={}));class Ui{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),n=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=s.decode(e.slice(a,a+r));a=a+r;const l=s.decode(e.slice(a,a+n));a=a+n;const u=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class Ms{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var k;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(k||(k={}));const Yt=(i,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((n,a)=>(n[a]=Li(a,i,e,r),n),{})},Li=(i,e,t,s)=>{const r=e.find(o=>o.name===i),n=r==null?void 0:r.type,a=t[i];return n&&!s.includes(n)?Bs(n,a):vt(a)},Bs=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return qi(e,t)}switch(i){case k.bool:return Ni(e);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return Mi(e);case k.json:case k.jsonb:return Bi(e);case k.timestamp:return zi(e);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:return vt(e);default:return vt(e)}},vt=i=>i,Ni=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Mi=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},Bi=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},qi=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,s=i[t];if(i[0]==="{"&&s==="}"){let n;const a=i.slice(1,t);try{n=JSON.parse("["+a+"]")}catch{n=a?a.split(","):[]}return n.map(o=>Bs(e,o))}return i},zi=i=>typeof i=="string"?i.replace(" ","T"):i,qs=i=>{let e=i;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class nt{constructor(e,t,s={},r=Ns){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xt;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Xt||(Xt={}));class Oe{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oe.syncState(this.state,r,n,a),this.pendingDiffs.forEach(l=>{this.state=Oe.syncDiff(this.state,l,n,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},r=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Oe.syncDiff(this.state,r,n,a),o())}),this.onJoin((r,n,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:n,newPresences:a})}),this.onLeave((r,n,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:n,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const n=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(n,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const h=n[u];if(h){const d=c.map(m=>m.presence_ref),p=h.map(m=>m.presence_ref),g=c.filter(m=>p.indexOf(m.presence_ref)<0),f=h.filter(m=>d.indexOf(m.presence_ref)<0);g.length>0&&(o[u]=g),f.length>0&&(l[u]=f)}else o[u]=c}),this.syncDiff(n,{joins:o,leaves:l},s,r)}static syncDiff(e,t,s,r){const{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(n,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const h=e[o].map(p=>p.presence_ref),d=c.filter(p=>h.indexOf(p.presence_ref)<0);e[o].unshift(...d)}s(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[o]=u,r(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Qt;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Qt||(Qt={}));var es;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(es||(es={}));var V;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(V||(V={}));class Rt{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=j.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new nt(this,L.join,this.params,this.timeout),this.rejoinTimer=new Ms(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=j.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=j.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=j.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=j.errored,this.rejoinTimer.scheduleTimeout())}),this._on(L.reply,{},(r,n)=>{this._trigger(this._replyEventName(n),r)}),this.presence=new Oe(this),this.broadcastEndpointURL=qs(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==j.closed){const{config:{broadcast:n,presence:a,private:o}}=this.params;this._onError(c=>e==null?void 0:e(V.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(V.CLOSED));const l={},u={broadcast:n,presence:a,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(c=>c.filter))!==null&&r!==void 0?r:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(V.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,p=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,g=[];for(let f=0;f<p;f++){const m=d[f],{filter:{event:w,schema:x,table:y,filter:b}}=m,E=c&&c[f];if(E&&E.event===w&&E.schema===x&&E.table===y&&E.filter===b)g.push(Object.assign(Object.assign({},m),{id:E.id}));else{this.unsubscribe(),this.state=j.errored,e==null||e(V.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(V.SUBSCRIBED);return}}).receive("error",c=>{this.state=j.errored,e==null||e(V.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(V.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var a,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&n("ok"),u.receive("ok",()=>n("ok")),u.receive("error",()=>n("error")),u.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=j.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(L.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new nt(this,L.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const r=new AbortController,n=setTimeout(()=>r.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(n),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new nt(this,e,t,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,n;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=L;if(s&&[o,l,u,c].indexOf(a)>=0&&s!==this._joinRef())return;let d=this._onMessage(a,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var g,f,m;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((m=(f=p.filter)===null||f===void 0?void 0:f.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===a}).map(p=>p.callback(d,s)):(n=this.bindings[a])===null||n===void 0||n.filter(p=>{var g,f,m,w,x,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const b=p.id,E=(g=p.filter)===null||g===void 0?void 0:g.event;return b&&((f=t.ids)===null||f===void 0?void 0:f.includes(b))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const b=(x=(w=p==null?void 0:p.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return b==="*"||b===((y=t==null?void 0:t.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:f,table:m,commit_timestamp:w,type:x,errors:y}=g;d=Object.assign(Object.assign({},{schema:f,table:m,commit_timestamp:w,eventType:x,new:{},old:{},errors:y}),this._getPayloadRecords(g))}p.callback(d,s)})}_isClosed(){return this.state===j.closed}_isJoined(){return this.state===j.joined}_isJoining(){return this.state===j.joining}_isLeaving(){return this.state===j.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),n={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(n):this.bindings[r]=[n],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var n;return!(((n=r.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===s&&Rt.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(L.close,{},e)}_onError(e){this._on(L.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=j.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Yt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Yt(e.columns,e.old_record)),t}}const ts=()=>{},Vi=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ji{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ns,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ts,this.ref=0,this.logger=ts,this.conn=null,this.sendBuffer=[],this.serializer=new Ui,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...o)=>Ae(async()=>{const{default:l}=await Promise.resolve().then(()=>ke);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${yt.websocket}`,this.httpEndpoint=qs(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(n,a)=>a(JSON.stringify(n)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ms(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Pi),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Fi}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case $e.connecting:return ae.Connecting;case $e.open:return ae.Open;case $e.closing:return ae.Closing;default:return ae.Closed}}isConnected(){return this.connectionState()===ae.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(n=>n.topic===s);if(r)return r;{const n=new Rt(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:s,payload:r,ref:n}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${s} (${n})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const r={access_token:t,version:Ri};t&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(L.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Di,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:r,payload:n,ref:a}=t;s==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${s} ${r} ${a&&"("+a+")"||""}`,n),Array.from(this.channels).filter(o=>o._isMember(s)).forEach(o=>o._trigger(r,n,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(L.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Vi],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class Ft extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function $(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Ki extends Ft{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class _t extends Ft{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Wi=function(i,e,t,s){function r(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?n(c.value):r(c.value).then(o,l)}u((s=s.apply(i,e||[])).next())})};const zs=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Ae(async()=>{const{default:s}=await Promise.resolve().then(()=>ke);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Hi=()=>Wi(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ae(()=>Promise.resolve().then(()=>ke),void 0)).Response:Response}),bt=i=>{if(Array.isArray(i))return i.map(t=>bt(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,s])=>{const r=t.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[r]=bt(s)}),e};var he=function(i,e,t,s){function r(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?n(c.value):r(c.value).then(o,l)}u((s=s.apply(i,e||[])).next())})};const at=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Gi=(i,e,t)=>he(void 0,void 0,void 0,function*(){const s=yield Hi();i instanceof s&&!(t!=null&&t.noResolveJson)?i.json().then(r=>{e(new Ki(at(r),i.status||500))}).catch(r=>{e(new _t(at(r),r))}):e(new _t(at(i),i))}),Zi=(i,e,t,s)=>{const r={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(r.body=JSON.stringify(s)),Object.assign(Object.assign({},r),t))};function Pe(i,e,t,s,r,n){return he(this,void 0,void 0,function*(){return new Promise((a,o)=>{i(t,Zi(e,s,r,n)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Gi(l,o,s))})})}function ze(i,e,t,s){return he(this,void 0,void 0,function*(){return Pe(i,"GET",e,t,s)})}function Z(i,e,t,s,r){return he(this,void 0,void 0,function*(){return Pe(i,"POST",e,s,r,t)})}function Yi(i,e,t,s,r){return he(this,void 0,void 0,function*(){return Pe(i,"PUT",e,s,r,t)})}function Xi(i,e,t,s){return he(this,void 0,void 0,function*(){return Pe(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Vs(i,e,t,s,r){return he(this,void 0,void 0,function*(){return Pe(i,"DELETE",e,s,r,t)})}var C=function(i,e,t,s){function r(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?n(c.value):r(c.value).then(o,l)}u((s=s.apply(i,e||[])).next())})};const Qi={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ss={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class en{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=zs(r)}uploadOrUpdate(e,t,s,r){return C(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},ss),r);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&s instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),l&&n.append("metadata",this.encodeMetadata(l)),n.append("",s)):typeof FormData<"u"&&s instanceof FormData?(n=s,n.append("cacheControl",a.cacheControl),l&&n.append("metadata",this.encodeMetadata(l))):(n=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(o=Object.assign(Object.assign({},o),r.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:n,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),d=yield h.json();return h.ok?{data:{path:u,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(n){if($(n))return{data:null,error:n};throw n}})}upload(e,t,s){return C(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return C(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:ss.upsert},r),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",u.cacheControl)):(l=s,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c}),d=yield h.json();return h.ok?{data:{path:n,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if($(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return C(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const n=yield Z(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),a=new URL(this.url+n.url),o=a.searchParams.get("token");if(!o)throw new Ft("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(s){if($(s))return{data:null,error:s};throw s}})}update(e,t,s){return C(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return C(this,void 0,void 0,function*(){try{return{data:yield Z(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}copy(e,t,s){return C(this,void 0,void 0,function*(){try{return{data:{path:(yield Z(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return C(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),n=yield Z(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},{data:n,error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return C(this,void 0,void 0,function*(){try{const r=yield Z(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${n}`):null})),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}download(e,t){return C(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield ze(this.fetch,`${this.url}/${r}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if($(o))return{data:null,error:o};throw o}})}info(e){return C(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield ze(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:bt(s),error:null}}catch(s){if($(s))return{data:null,error:s};throw s}})}exists(e){return C(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Xi(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if($(s)&&s instanceof _t){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],n=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&r.push(n);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${u}`)}}}remove(e){return C(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}})}list(e,t,s){return C(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Qi),t),{prefix:e||""});return{data:yield Z(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const tn="2.7.1",sn={"X-Client-Info":`storage-js/${tn}`};var fe=function(i,e,t,s){function r(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?n(c.value):r(c.value).then(o,l)}u((s=s.apply(i,e||[])).next())})};class rn{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},sn),t),this.fetch=zs(s)}listBuckets(){return fe(this,void 0,void 0,function*(){try{return{data:yield ze(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if($(e))return{data:null,error:e};throw e}})}getBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield ze(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return fe(this,void 0,void 0,function*(){try{return{data:yield Z(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if($(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return fe(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if($(s))return{data:null,error:s};throw s}})}emptyBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Z(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}})}}class nn extends rn{constructor(e,t={},s){super(e,t,s)}from(e){return new en(this.url,this.headers,e,this.fetch)}}const an="2.52.1";let Ee="";typeof Deno<"u"?Ee="deno":typeof document<"u"?Ee="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ee="react-native":Ee="node";const on={"X-Client-Info":`supabase-js-${Ee}/${an}`},ln={headers:on},un={schema:"public"},cn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hn={};var dn=function(i,e,t,s){function r(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?n(c.value):r(c.value).then(o,l)}u((s=s.apply(i,e||[])).next())})};const fn=i=>{let e;return i?e=i:typeof fetch>"u"?e=Os:e=fetch,(...t)=>e(...t)},pn=()=>typeof Headers>"u"?js:Headers,gn=(i,e,t)=>{const s=fn(t),r=pn();return(n,a)=>dn(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:i;let u=new r(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",i),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),s(n,Object.assign(Object.assign({},a),{headers:u}))})};var mn=function(i,e,t,s){function r(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?n(c.value):r(c.value).then(o,l)}u((s=s.apply(i,e||[])).next())})};function yn(i){return i.endsWith("/")?i:i+"/"}function vn(i,e){var t,s;const{db:r,auth:n,realtime:a,global:o}=i,{db:l,auth:u,realtime:c,global:h}=e,d={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},u),n),realtime:Object.assign(Object.assign({},c),a),global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>mn(this,void 0,void 0,function*(){return""})};return i.accessToken?d.accessToken=i.accessToken:delete d.accessToken,d}const Js="2.71.1",ve=30*1e3,wt=3,ot=wt*ve,_n="http://localhost:9999",bn="supabase.auth.token",wn={"X-Client-Info":`gotrue-js/${Js}`},kt="X-Supabase-Api-Version",Ks={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kn=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sn=10*60*1e3;class Dt extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function v(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class xn extends Dt{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function En(i){return v(i)&&i.name==="AuthApiError"}class Ws extends Dt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ee extends Dt{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class G extends ee{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Tn(i){return v(i)&&i.name==="AuthSessionMissingError"}class Fe extends ee{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class De extends ee{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ue extends ee{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $n(i){return v(i)&&i.name==="AuthImplicitGrantRedirectError"}class rs extends ee{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class St extends ee{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function lt(i){return v(i)&&i.name==="AuthRetryableFetchError"}class is extends ee{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class xt extends ee{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ns=` 	
\r=`.split(""),On=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<ns.length;e+=1)i[ns[e].charCodeAt(0)]=-2;for(let e=0;e<Ve.length;e+=1)i[Ve[e].charCodeAt(0)]=e;return i})();function as(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Ve[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Ve[s]),e.queuedBits-=6}}function Hs(i,e,t){const s=On[i];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function os(i){const e=[],t=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},n=a=>{Cn(a,s,t)};for(let a=0;a<i.length;a+=1)Hs(i.charCodeAt(a),r,n);return e.join("")}function jn(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function An(i,e){for(let t=0;t<i.length;t+=1){let s=i.charCodeAt(t);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(i.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}jn(s,e)}}function Cn(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let s=1;s<6;s+=1)if(!(i>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Pn(i){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<i.length;r+=1)Hs(i.charCodeAt(r),t,s);return new Uint8Array(e)}function In(i){const e=[];return An(i,t=>e.push(t)),new Uint8Array(e)}function Rn(i){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};return i.forEach(r=>as(r,t,s)),as(null,t,s),e.join("")}function Fn(i){return Math.round(Date.now()/1e3)+i}function Dn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const U=()=>typeof window<"u"&&typeof document<"u",re={tested:!1,writable:!1},Gs=()=>{if(!U())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(re.tested)return re.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),re.tested=!0,re.writable=!0}catch{re.tested=!0,re.writable=!1}return re.writable};function Un(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,n)=>{e[n]=r})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}const Zs=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Ae(async()=>{const{default:s}=await Promise.resolve().then(()=>ke);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Ln=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",_e=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},ie=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},W=async(i,e)=>{await i.removeItem(e)};class et{constructor(){this.promise=new et.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}et.promiseConstructor=Promise;function ut(i){const e=i.split(".");if(e.length!==3)throw new xt("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!kn.test(e[s]))throw new xt("JWT not in base64url format");return{header:JSON.parse(os(e[0])),payload:JSON.parse(os(e[1])),signature:Pn(e[2]),raw:{header:e[0],payload:e[1]}}}async function Nn(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function Mn(i,e){return new Promise((s,r)=>{(async()=>{for(let n=0;n<1/0;n++)try{const a=await i(n);if(!e(n,null,a)){s(a);return}}catch(a){if(!e(n,a)){r(a);return}}})()})}function Bn(i){return("0"+i.toString(16)).substr(-2)}function qn(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let n=0;n<56;n++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,Bn).join("")}async function zn(i){const t=new TextEncoder().encode(i),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(n=>String.fromCharCode(n)).join("")}async function Vn(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await zn(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pe(i,e,t=!1){const s=qn();let r=s;t&&(r+="/PASSWORD_RECOVERY"),await _e(i,`${e}-code-verifier`,r);const n=await Vn(s);return[n,s===n?"plain":"s256"]}const Jn=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Kn(i){const e=i.headers.get(kt);if(!e||!e.match(Jn))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Wn(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function Hn(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Gn=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ge(i){if(!Gn.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ct(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ls(i){return JSON.parse(JSON.stringify(i))}var Zn=function(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(i);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(i,s[r])&&(t[s[r]]=i[s[r]]);return t};const ne=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Yn=[502,503,504];async function us(i){var e;if(!Ln(i))throw new St(ne(i),0);if(Yn.includes(i.status))throw new St(ne(i),i.status);let t;try{t=await i.json()}catch(n){throw new Ws(ne(n),n)}let s;const r=Kn(i);if(r&&r.getTime()>=Ks["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new is(ne(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new G}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0))throw new is(ne(t),i.status,t.weak_password.reasons);throw new xn(ne(t),i.status||500,s)}const Xn=(i,e,t,s)=>{const r={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function _(i,e,t,s){var r;const n=Object.assign({},s==null?void 0:s.headers);n[kt]||(n[kt]=Ks["2024-01-01"].name),s!=null&&s.jwt&&(n.Authorization=`Bearer ${s.jwt}`);const a=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Qn(i,e,t+o,{headers:n,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function Qn(i,e,t,s,r,n){const a=Xn(e,s,r,n);let o;try{o=await i(t,Object.assign({},a))}catch(l){throw console.error(l),new St(ne(l),0)}if(o.ok||await us(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(l){await us(l)}}function z(i){var e;let t=null;ra(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=Fn(i.expires_in)));const s=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:s},error:null}}function cs(i){const e=z(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=i.weak_password),e}function Y(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function ea(i){return{data:i,error:null}}function ta(i){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:n}=i,a=Zn(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:n},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function sa(i){return i}function ra(i){return i.access_token&&i.refresh_token&&i.expires_in}const ht=["global","local","others"];var ia=function(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(i);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(i,s[r])&&(t[s[r]]=i[s[r]]);return t};class na{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Zs(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ht[0]){if(ht.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ht.join(", ")}`);try{return await _(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(v(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await _(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Y})}catch(s){if(v(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=ia(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await _(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ta,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(v(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await _(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Y})}catch(t){if(v(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,n,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await _(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(n=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""},xform:sa});if(c.error)throw c.error;const h=await c.json(),d=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const f=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);u[`${m}Page`]=f}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(v(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ge(e);try{return await _(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Y})}catch(t){if(v(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ge(e);try{return await _(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Y})}catch(s){if(v(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){ge(e);try{return await _(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Y})}catch(s){if(v(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ge(e.userId);try{const{data:t,error:s}=await _(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(v(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ge(e.userId),ge(e.id);try{return{data:await _(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(v(t))return{data:null,error:t};throw t}}}function hs(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}function aa(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const me={debug:!!(globalThis&&Gs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ys extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class oa extends Ys{}async function la(i,e,t){me.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),me.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){me.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,r.name);try{return await t()}finally{me.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,r.name)}}else{if(e===0)throw me.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new oa(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(me.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}aa();const ua={url:_n,storageKey:bn,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wn,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ds(i,e,t){return await t()}const ye={};class je{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=je.nextInstanceID,je.nextInstanceID+=1,this.instanceID>0&&U()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},ua),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new na({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Zs(r.fetch),this.lock=r.lock||ds,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:U()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=la:this.lock=ds,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Gs()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hs(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=hs(this.memoryStorage)),U()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=ye[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ye[this.storageKey]=Object.assign(Object.assign({},ye[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ye[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ye[this.storageKey]=Object.assign(Object.assign({},ye[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Js}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Un(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),U()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:n}=await this._getSessionFromURL(t,s);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),$n(n)){const l=(e=n.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:a,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return v(t)?{error:t}:{error:new Ws("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const n=await _(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:z}),{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(n){if(v(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,s,r;try{let n;if("email"in e){const{email:c,password:h,options:d}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await pe(this.storage,this.storageKey)),n=await _(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:g},xform:z})}else if("phone"in e){const{phone:c,password:h,options:d}=e;n=await _(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},channel:(r=d==null?void 0:d.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:z})}else throw new De("You must provide either an email or phone number and a password");const{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(n){if(v(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:a,options:o}=e;t=await _(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:cs})}else if("phone"in e){const{phone:n,password:a,options:o}=e;t=await _(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:cs})}else throw new De("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Fe}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(v(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,r,n,a,o,l,u,c,h,d,p;let g,f;if("message"in e)g=e.message,f=e.signature;else{const{chain:m,wallet:w,statement:x,options:y}=e;let b;if(U())if(typeof w=="object")b=w;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))b=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=w}const E=new URL((t=y==null?void 0:y.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in b&&b.signIn){const S=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),x?{statement:x}:null));let O;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")O=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)O=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)g=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),f=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${E.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(r=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((n=y==null?void 0:y.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(c=y==null?void 0:y.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const S=await b.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=S}}try{const{data:m,error:w}=await _(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Rn(f)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:z});if(w)throw w;return!m||!m.session||!m.user?{data:{user:null,session:null},error:new Fe}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:Object.assign({},m),error:w})}catch(m){if(v(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await ie(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t??"").split("/");try{const{data:n,error:a}=await _(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:z});if(await W(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new Fe}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:r??null}),error:a})}catch(n){if(v(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:n,nonce:a}=e,o=await _(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:z}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Fe}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(v(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,n,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await pe(this.storage,this.storageKey));const{error:h}=await _(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await _(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new De("You must provide either an email or phone number.")}catch(o){if(v(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{let r,n;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,n=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:o}=await _(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:r,xform:z});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(v(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let n=null,a=null;return this.flowType==="pkce"&&([n,a]=await pe(this.storage,this.storageKey)),await _(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:ea})}catch(n){if(v(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new G;const{error:r}=await _(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(v(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:n}=e,{error:a}=await _(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:r,options:n}=e,{data:a,error:o}=await _(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new De("You must provide either an email or phone number and a type")}catch(t){if(v(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ie(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<ot:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const a=await ie(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=ct()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:r,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Y}):await this._useSession(async t=>{var s,r,n;const{data:a,error:o}=t;if(o)throw o;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new G}:await _(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0,xform:Y})})}catch(t){if(v(t))return Tn(t)&&(await this._removeSession(),await W(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:n}=s;if(n)throw n;if(!r.session)throw new G;const a=r.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await pe(this.storage,this.storageKey));const{data:u,error:c}=await _(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Y});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(v(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new G;const t=Date.now()/1e3;let s=t,r=!0,n=null;const{payload:a}=ut(e.access_token);if(a.exp&&(s=a.exp,r=s<=t),r){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};n=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;n={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(v(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new G;const{session:r,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(v(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!U())throw new Ue("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ue(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new rs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ue("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new rs("No code detected.");const{data:x,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:n,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!n||!o||!a||!u)throw new Ue("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(o);let d=c+h;l&&(d=parseInt(l));const p=d-c;p*1e3<=ve&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=d-h;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,d,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,d,c);const{data:f,error:m}=await this._getUser(n);if(m)throw m;const w={provider_token:s,provider_refresh_token:r,access_token:n,expires_in:h,expires_at:d,refresh_token:a,token_type:u,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(s){if(v(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ie(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:n}=t;if(n)return{error:n};const a=(s=r.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(En(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await W(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Dn(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:n},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await pe(this.storage,this.storageKey,!0));try{return await _(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(v(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(v(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async n=>{var a,o,l,u,c;const{data:h,error:d}=n;if(d)throw d;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await _(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(r)throw r;return U()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(v(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:n,error:a}=t;if(a)throw a;return await _(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=n.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(v(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Mn(async r=>(r>0&&await Nn(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await _(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:z})),(r,n)=>{const a=200*Math.pow(2,r);return n&&lt(n)&&Date.now()+a-s<ve})}catch(s){if(this._debug(t,"error",s),v(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),U()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await ie(this.storage,this.storageKey);if(r&&this.userStorage){let a=await ie(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:r.user},await _e(this.userStorage,this.storageKey+"-user",a)),r.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:ct()}else if(r&&!r.user&&!r.user){const a=await ie(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(r.user=a.user,await W(this.storage,this.storageKey+"-user"),await _e(this.storage,this.storageKey,r)):r.user=ct()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<ot;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${ot}s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),lt(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(r.access_token);!o&&(a!=null&&a.user)?(r.user=a.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(s,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new G;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new et;const{data:n,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!n.session)throw new G;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const o={session:n.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(n){if(this._debug(r,"error",n),v(n)){const a={session:null,error:n};return lt(n)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(n),n}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){n.push(l)}});if(await Promise.all(a),n.length>0){for(let o=0;o<n.length;o+=1)console.error(n[o]);throw n[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await _e(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const n=ls(r);await _e(this.storage,this.storageKey,n)}else{const r=ls(t);await _e(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await W(this.storage,this.storageKey),await W(this.storage,this.storageKey+"-code-verifier"),await W(this.storage,this.storageKey+"-user"),this.userStorage&&await W(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&U()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ve);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/ve);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${ve}ms, refresh threshold is ${wt} ticks`),r<=wt&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ys)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!U()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[n,a]=await pe(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(s!=null&&s.queryParams){const n=new URLSearchParams(s.queryParams);r.push(n.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:n}=t;return n?{data:null,error:n}:await _(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(v(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:n,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await _(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(v(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:n}=t;if(n)return{data:null,error:n};const{data:a,error:o}=await _(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(v(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:n}=t;return n?{data:null,error:n}:await _(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(v(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],r=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),n=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:r,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:n}=e;if(n)return{data:null,error:n};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ut(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(o=>o.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+Sn>r)return s;const{data:n,error:a}=await _(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!n.keys||n.keys.length===0||(this.jwks=n,this.jwks_cached_at=r,s=n.keys.find(o=>o.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};s=p.session.access_token}const{header:r,payload:n,signature:a,raw:{header:o,payload:l}}=ut(s);t!=null&&t.allowExpired||Wn(n.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:n,header:r,signature:a},error:null}}const c=Hn(r.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,a,In(`${o}.${l}`)))throw new xt("Invalid JWT signature");return{data:{claims:n,header:r,signature:a},error:null}}catch(s){if(v(s))return{data:null,error:s};throw s}}}je.nextInstanceID=0;const ca=je;class ha extends ca{constructor(e){super(e)}}var da=function(i,e,t,s){function r(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?n(c.value):r(c.value).then(o,l)}u((s=s.apply(i,e||[])).next())})};class fa{constructor(e,t,s){var r,n,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=yn(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:un,realtime:hn,auth:Object.assign(Object.assign({},cn),{storageKey:u}),global:ln},h=vn(s??{},c);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(n=h.global.headers)!==null&&n!==void 0?n:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=gn(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Ai(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new ai(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new nn(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return da(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:n,flowType:a,lock:o,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ha({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:a,lock:o,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ji(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fs=(i,e,t)=>new fa(i,e,t);function pa(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const i=process.version.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}pa()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ga="https://jzxxwptgsyzhdtulrdjy.supabase.co",ma="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp6eHh3cHRnc3l6aGR0dWxyZGp5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1NDYyNzEsImV4cCI6MjA2OTEyMjI3MX0.X9eZUb_hM2g0pDTHYRbfxjKbrHeRbzYxWsWLrorEzRU",ya=ga,va=ma;let Et;try{Et=fs(ya,va,{auth:{persistSession:!0,autoRefreshToken:!0},db:{schema:"public"},global:{headers:{"x-application-name":"supabase-vue-app"}}})}catch(i){console.error("Failed to initialize Supabase client:",i),Et=fs("https://dummy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.dummy-key",{})}const _a=Xs("form",()=>{const i=tt(!1),e=tt("idle"),t=tt("");return{isSubmitting:i,submitStatus:e,errorMessage:t,submitForm:async n=>{try{i.value=!0,e.value="idle",t.value="";const a="https://jzxxwptgsyzhdtulrdjy.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp6eHh3cHRnc3l6aGR0dWxyZGp5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1NDYyNzEsImV4cCI6MjA2OTEyMjI3MX0.X9eZUb_hM2g0pDTHYRbfxjKbrHeRbzYxWsWLrorEzRU",l=!a||!o||a==="your-supabase-project-url"||o==="your-supabase-anon-key",{data:u,error:c}=await Et.from("user_submissions").insert(n).select().single();if(c)throw c;return console.log("Form submitted successfully:",u),e.value="success",u}catch(a){throw console.error("Form submission error:",a),e.value="error",t.value=a instanceof Error?a.message:"An unexpected error occurred",a}finally{i.value=!1}},resetStatus:()=>{e.value="idle",t.value=""}}}),ba={class:"space-y-1"},wa=["for"],ka=["id","type","placeholder","value","aria-describedby","aria-invalid"],Sa=["id"],dt=Je({__name:"InputField",props:{name:{},label:{},type:{default:"text"},modelValue:{},error:{},placeholder:{}},emits:["update:modelValue","blur"],setup(i){const e=i,t=oe(()=>`input-${e.name}`),s=oe(()=>`error-${e.name}`),r=oe(()=>`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 ${e.error?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`);return(n,a)=>(R(),F("div",ba,[N("label",{for:t.value,class:"block text-sm font-medium text-gray-700"},X(n.label),9,wa),N("input",{id:t.value,type:n.type,placeholder:n.placeholder,value:n.modelValue,onInput:a[0]||(a[0]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:a[1]||(a[1]=o=>n.$emit("blur")),"aria-describedby":n.error?s.value:void 0,"aria-invalid":n.error?"true":"false",class:ps(r.value)},null,42,ka),n.error?(R(),F("p",{key:0,id:s.value,role:"alert",class:"text-sm text-red-600"},X(n.error),9,Sa)):Te("",!0)]))}}),xa={class:"space-y-1"},Ea=["for"],Ta=["id","value","aria-describedby","aria-invalid"],$a={value:""},Oa=["value"],ja=["id"],Aa=Je({__name:"SelectField",props:{name:{},label:{},options:{},modelValue:{},error:{},placeholder:{default:"Select an option"}},emits:["update:modelValue","blur"],setup(i){const e=i,t=oe(()=>`select-${e.name}`),s=oe(()=>`error-${e.name}`),r=oe(()=>`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 ${e.error?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`);return(n,a)=>(R(),F("div",xa,[N("label",{for:t.value,class:"block text-sm font-medium text-gray-700"},X(n.label),9,Ea),N("select",{id:t.value,value:n.modelValue,onChange:a[0]||(a[0]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:a[1]||(a[1]=o=>n.$emit("blur")),"aria-describedby":n.error?s.value:void 0,"aria-invalid":n.error?"true":"false",class:ps(r.value)},[N("option",$a,X(n.placeholder),1),(R(!0),F(Qs,null,er(n.options,o=>(R(),F("option",{key:o,value:o},X(o),9,Oa))),128))],42,Ta),n.error?(R(),F("p",{key:0,id:s.value,role:"alert",class:"text-sm text-red-600"},X(n.error),9,ja)):Te("",!0)]))}}),Ca={key:0,class:"p-3 bg-blue-100 border border-blue-400 text-blue-700 rounded-md text-sm",role:"alert"},Pa={key:1,class:"p-4 bg-green-100 border border-green-400 text-green-700 rounded-md",role:"alert"},Ia={key:2,class:"p-4 bg-red-100 border border-red-400 text-red-700 rounded-md",role:"alert"},Ra=["disabled"],Fa=Je({__name:"UserInfoForm",setup(i){const e=Ts({firstName:Ne().required("First name is required"),lastName:Ne().required("Last name is required"),age:Ss().typeError("Age must be a number").positive("Age must be a positive number").integer("Age must be a whole number").required("Age is required"),favoriteColor:Ne().required("Please select a favorite color")}),t=["Red","Blue","Green","Yellow","Purple","Orange","Pink","Other"],s=_a(),{isSubmitting:r,submitStatus:n,errorMessage:a}=tr(s),o=oe(()=>{const g="https://jzxxwptgsyzhdtulrdjy.supabase.co",f="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp6eHh3cHRnc3l6aGR0dWxyZGp5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1NDYyNzEsImV4cCI6MjA2OTEyMjI3MX0.X9eZUb_hM2g0pDTHYRbfxjKbrHeRbzYxWsWLrorEzRU";return!g||!f||g==="your-supabase-project-url"||f==="your-supabase-anon-key"}),l=Mt({firstName:"",lastName:"",age:0,favoriteColor:""}),u=Mt({}),c=async g=>{try{const f=l[g];await e.validateAt(g,{[g]:f}),u[g]=""}catch(f){f instanceof A&&(u[g]=f.message)}},h=async()=>{try{return await e.validate(l,{abortEarly:!1}),Object.keys(u).forEach(g=>{u[g]=""}),!0}catch(g){return g instanceof A&&(Object.keys(u).forEach(f=>{u[f]=""}),g.inner.forEach(f=>{f.path&&(u[f.path]=f.message)})),!1}},d=()=>{l.firstName="",l.lastName="",l.age=0,l.favoriteColor="",Object.keys(u).forEach(g=>{u[g]=""})},p=async()=>{try{if(s.resetStatus(),!await h())return;const f={first_name:l.firstName,last_name:l.lastName,age:l.age,favorite_color:l.favoriteColor};await s.submitForm(f),d()}catch(g){console.error("Form submission failed:",g)}};return(g,f)=>(R(),F("form",{onSubmit:sr(p,["prevent"]),class:"max-w-md mx-auto p-6 bg-white shadow-lg rounded-lg space-y-4",novalidate:""},[f[11]||(f[11]=N("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"User Information",-1)),o.value?(R(),F("div",Ca,[se(K(ti),{class:"w-4 h-4 inline mr-2"}),f[8]||(f[8]=N("strong",null,"Demo Mode:",-1)),f[9]||(f[9]=st(" Form submissions will be simulated (no database connection) ",-1))])):Te("",!0),K(n)==="success"?(R(),F("div",Pa,[se(K(ei),{class:"w-5 h-5 inline mr-2"}),f[10]||(f[10]=st(" Form submitted successfully! ",-1))])):Te("",!0),K(n)==="error"?(R(),F("div",Ia,[se(K(si),{class:"w-5 h-5 inline mr-2"}),st(" Error: "+X(K(a)),1)])):Te("",!0),se(dt,{name:"firstName",label:"First Name",modelValue:l.firstName,"onUpdate:modelValue":f[0]||(f[0]=m=>l.firstName=m),error:u.firstName,placeholder:"Enter your first name",onBlur:f[1]||(f[1]=m=>c("firstName"))},null,8,["modelValue","error"]),se(dt,{name:"lastName",label:"Last Name",modelValue:l.lastName,"onUpdate:modelValue":f[2]||(f[2]=m=>l.lastName=m),error:u.lastName,placeholder:"Enter your last name",onBlur:f[3]||(f[3]=m=>c("lastName"))},null,8,["modelValue","error"]),se(dt,{name:"age",label:"Age",type:"number",modelValue:l.age,"onUpdate:modelValue":f[4]||(f[4]=m=>l.age=m),error:u.age,placeholder:"Enter your age",onBlur:f[5]||(f[5]=m=>c("age"))},null,8,["modelValue","error"]),se(Aa,{name:"favoriteColor",label:"Favorite Color",options:t,modelValue:l.favoriteColor,"onUpdate:modelValue":f[6]||(f[6]=m=>l.favoriteColor=m),error:u.favoriteColor,placeholder:"Select your favorite color",onBlur:f[7]||(f[7]=m=>c("favoriteColor"))},null,8,["modelValue","error"]),N("button",{type:"submit",disabled:K(r),class:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition duration-200"},X(K(r)?"Submitting...":"Submit"),9,Ra)],32))}}),Ha=Je({__name:"HomeView",setup(i){return(e,t)=>(R(),rr(Fa))}});export{Ha as default};
//# sourceMappingURL=HomeView-DZaoq2OB.js.map
