import{d as $,C as A,r as i,c as H,o as N,a,b as e,h as m,t as r,f as p,w as g,g as E,e as d,k as L,j as n}from"./index-CtjJHjR0.js";import{c as _}from"./contactsApi-ByZ-ToQh.js";import{o as P}from"./organizationsApi-DotikQjO.js";import{c as R}from"./contacts-BrUDII5K.js";import"./supabaseClient-Dum322BS.js";import"./index.esm-Do0MT1Iq.js";const O={class:"min-h-screen bg-gray-50 py-8"},S={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},T={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},U={key:1,class:"bg-white rounded-lg shadow-sm border border-red-200 p-6"},I={class:"flex items-center mb-4"},q={class:"text-red-700"},F={class:"flex space-x-3"},G={key:2,class:"space-y-6"},J={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},K={class:"flex items-center justify-between mb-6"},Q={class:"flex items-center space-x-3"},W={class:"flex space-x-3"},X={class:"flex items-center space-x-6"},Y={class:"flex-shrink-0"},Z={class:"h-20 w-20 rounded-full bg-blue-100 flex items-center justify-center"},ee={class:"text-2xl font-medium text-blue-600"},te={class:"flex-1"},oe={class:"text-2xl font-bold text-gray-900"},se={key:0,class:"text-lg text-gray-600 mt-1"},re={key:1,class:"text-lg text-gray-600 mt-1"},ae={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={class:"flex items-center space-x-3"},ie=["href"],de={class:"flex items-center space-x-3"},ue={class:"text-gray-900"},ce={class:"flex items-center space-x-3"},me={class:"text-gray-900"},ve={class:"flex items-center space-x-3"},xe={class:"text-gray-900"},pe={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ge={class:"prose max-w-none"},he={class:"text-gray-700 whitespace-pre-wrap"},fe={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ye={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},we={class:"mt-3 text-center"},be={class:"mt-2 px-7 py-3"},_e={class:"text-sm text-gray-500"},ke={class:"items-center px-4 py-3"},Ce={class:"flex space-x-3 justify-center"},Me=["disabled"],Ne=$({__name:"ContactDetailView",setup(je){const k=A(),C=L(),M=k.params.id,o=i(null),u=i(null),h=i(!0),l=i(null),c=i(!1),v=i(!1),j=H(()=>{var t;return!o.value||!o.value.id?"/opportunities/new":`/opportunities/new?${new URLSearchParams({contextType:"contact",contactId:o.value.id,organizationName:((t=u.value)==null?void 0:t.name)||"",contactName:`${o.value.first_name||""} ${o.value.last_name||""}`.trim()}).toString()}`}),f=async()=>{try{h.value=!0,l.value=null;const s=await _.getContact(M);if(s.success&&s.data){if(o.value=s.data,s.data.organization_id)try{const t=await P.getOrganization(s.data.organization_id);t.success&&t.data&&(u.value=t.data)}catch(t){console.error("Error loading organization:",t)}}else l.value=s.error||"Contact not found"}catch(s){l.value="An unexpected error occurred",console.error("Error loading contact:",s)}finally{h.value=!1}},z=()=>{c.value=!0},B=async()=>{if(!(!o.value||!o.value.id))try{v.value=!0;const s=await _.deleteContact(o.value.id);s.success?C.push("/contacts"):(l.value=s.error||"Failed to delete contact",c.value=!1)}catch(s){console.error("Error deleting contact:",s),l.value="An unexpected error occurred",c.value=!1}finally{v.value=!1}},V=s=>R.formatPhone(s),D=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown";return N(()=>{f()}),(s,t)=>{var y,w,b;const x=E("router-link");return n(),a("div",O,[e("div",S,[h.value?(n(),a("div",T,t[1]||(t[1]=[e("div",{class:"flex justify-center"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})],-1)]))):l.value?(n(),a("div",U,[e("div",I,[t[2]||(t[2]=e("svg",{class:"h-5 w-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",q,r(l.value),1)]),e("div",F,[p(x,{to:"/",class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},{default:g(()=>t[3]||(t[3]=[d(" Back to Contacts ",-1)])),_:1,__:[3]}),e("button",{onClick:f,class:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"}," Try Again ")])])):o.value?(n(),a("div",G,[e("div",J,[e("div",K,[e("div",Q,[p(x,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:g(()=>t[4]||(t[4]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[4]}),t[5]||(t[5]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Contact Details",-1))]),e("div",W,[p(x,{to:j.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:g(()=>t[6]||(t[6]=[e("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),d(" Create Opportunity ",-1)])),_:1,__:[6]},8,["to"]),p(x,{to:`/contacts/${o.value.id}/edit`,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},{default:g(()=>t[7]||(t[7]=[e("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),d(" Edit Contact ",-1)])),_:1,__:[7]},8,["to"]),e("button",{onClick:z,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700"},t[8]||(t[8]=[e("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),d(" Delete ",-1)]))])]),e("div",X,[e("div",Y,[e("div",Z,[e("span",ee,r(o.value?`${((y=o.value.first_name)==null?void 0:y[0])||""}${((w=o.value.last_name)==null?void 0:w[0])||""}`:""),1)])]),e("div",te,[e("h2",oe,r(o.value?`${o.value.first_name} ${o.value.last_name}`:""),1),o.value.position?(n(),a("p",se,r(o.value.position),1)):m("",!0),u.value?(n(),a("p",re,r(u.value.name),1)):m("",!0)])])]),e("div",ae,[t[17]||(t[17]=e("h3",{class:"text-lg font-medium text-gray-900 mb-6"},"Contact Information",-1)),e("div",ne,[e("div",le,[t[10]||(t[10]=e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-500"},"Email",-1)),e("a",{href:`mailto:${o.value.email}`,class:"text-blue-600 hover:text-blue-800"},r(o.value.email),9,ie)])]),e("div",de,[t[12]||(t[12]=e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),e("p",ue,r(V(o.value.phone)),1)])]),e("div",ce,[t[14]||(t[14]=e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-500"},"Organization",-1)),e("p",me,r(((b=u.value)==null?void 0:b.name)||"No organization"),1)])]),e("div",ve,[t[16]||(t[16]=e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("div",null,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-gray-500"},"Added",-1)),e("p",xe,r(D(o.value.created_at)),1)])])])]),o.value.notes?(n(),a("div",pe,[t[18]||(t[18]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Notes",-1)),e("div",ge,[e("p",he,r(o.value.notes),1)])])):m("",!0)])):m("",!0),c.value?(n(),a("div",fe,[e("div",ye,[e("div",we,[t[21]||(t[21]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[22]||(t[22]=e("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"Delete Contact",-1)),e("div",be,[e("p",_e,[t[19]||(t[19]=d(" Are you sure you want to delete ",-1)),e("strong",null,r(o.value?`${o.value.first_name} ${o.value.last_name}`:"this contact"),1),t[20]||(t[20]=d("? This action cannot be undone. ",-1))])]),e("div",ke,[e("div",Ce,[e("button",{onClick:t[0]||(t[0]=ze=>c.value=!1),class:"px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-600"}," Cancel "),e("button",{onClick:B,disabled:v.value,class:"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-600 disabled:opacity-50"},r(v.value?"Deleting...":"Delete"),9,Me)])])])])])):m("",!0)])])}}});export{Ne as default};
//# sourceMappingURL=ContactDetailView-4Ekd9tmk.js.map
