import{d as O,r as G,c as v,o as Q,a as n,h as a,b as t,e as u,f as i,u as l,t as r,q as J,z as K,g as X,w as I,n as C,F as E,i as L,k as M,j as o}from"./index-Br7bM97V.js";import{u as Y}from"./interactionStore-Do0zDCsY.js";import{b as Z,g as tt,a as et}from"./interactions-BY6_IYFA.js";import{r as S}from"./ExclamationTriangleIcon-3AUMR-W2.js";import{r as st}from"./TrashIcon-C97BRO8M.js";import{r as ot}from"./BuildingOfficeIcon-CE9ZCi7A.js";import{r as nt}from"./CheckIcon-0UoNe-IG.js";import{r as T}from"./CalendarIcon-CBoVSP04.js";import{r as rt}from"./CheckCircleIcon-Ct_Yhl-Z.js";import{r as U}from"./ArrowPathIcon-D9Yw9nnG.js";import{a as h,r as at}from"./TruckIcon-QLGi2t8J.js";import{r as D}from"./PresentationChartLineIcon-DP8FUBcN.js";import{r as it}from"./UserGroupIcon-Bll1C4SH.js";import{r as lt,a as dt}from"./PhoneIcon-CrBznpFF.js";import{r as ut}from"./PencilIcon-DNym4K5n.js";import{r as ct}from"./StarIcon-BOg-5s6P.js";import{r as mt}from"./PlusIcon-88x01lis.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as gt}from"./ArrowLeftIcon-JfxOxDX-.js";import"./supabaseClient-CwaY5m9F.js";const pt={class:"interaction-detail-view"},xt={key:0,class:"flex items-center justify-center py-12"},ft={key:1,class:"rounded-md bg-red-50 p-4"},yt={class:"flex"},vt={class:"ml-3"},_t={class:"mt-2 text-sm text-red-700"},bt={key:2,class:"space-y-6"},ht={class:"bg-white shadow rounded-lg"},wt={class:"px-6 py-4 border-b border-gray-200"},kt={class:"flex items-center justify-between"},It={class:"flex items-center space-x-3"},Ct={class:"flex-shrink-0 h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},Dt={class:"text-2xl font-bold text-gray-900"},$t={class:"text-sm text-gray-500"},Et={class:"flex items-center space-x-3"},Lt={class:"px-6 py-4"},St={class:"grid grid-cols-2 gap-6 lg:grid-cols-4"},Tt={class:"mt-1"},Ut={key:0},Ot={class:"mt-1"},Mt={key:1},Nt={class:"mt-1 flex items-center"},Bt={class:"flex"},Ft={class:"ml-1 text-sm text-gray-600"},Vt={key:2},jt={class:"mt-1 text-sm text-gray-900"},At={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},Pt={class:"lg:col-span-2 space-y-6"},Rt={class:"bg-white shadow rounded-lg"},zt={class:"px-6 py-4"},qt={key:0,class:"flex items-center"},Ht={class:"text-sm text-gray-500"},Wt={key:1,class:"text-sm text-gray-500"},Gt={class:"bg-white shadow rounded-lg"},Qt={class:"px-6 py-4"},Jt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Kt={class:"mt-1 text-sm text-gray-900"},Xt={key:0},Yt={class:"mt-1 text-sm text-gray-900"},Zt={key:1},te={class:"mt-1 text-sm text-gray-900"},ee={key:2},se={class:"mt-1 text-sm text-gray-900"},oe={key:0,class:"bg-white shadow rounded-lg"},ne={class:"px-6 py-4"},re={class:"text-sm text-gray-900 whitespace-pre-wrap"},ae={key:1,class:"bg-white shadow rounded-lg"},ie={class:"px-6 py-4"},le={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},de={key:0},ue={class:"mt-1 text-sm text-gray-900"},ce={key:0,class:"ml-2 text-xs text-red-600 font-medium"},me={key:1,class:"ml-2 text-xs text-orange-600 font-medium"},ge={key:2,class:"ml-2 text-xs text-gray-600"},pe={key:1},xe={class:"mt-1 text-sm text-gray-900"},fe={key:0,class:"mt-4"},ye={class:"mt-1 text-sm text-gray-900 whitespace-pre-wrap"},ve={class:"mt-4 flex space-x-3"},_e={class:"space-y-6"},be={class:"bg-white shadow rounded-lg"},he={class:"px-6 py-4 space-y-3"},we={key:0,class:"bg-white shadow rounded-lg"},ke={class:"px-6 py-4"},Ie={class:"flex flex-wrap gap-2"},Ce={class:"bg-white shadow rounded-lg"},De={class:"px-6 py-4"},$e={class:"space-y-3"},Ee={class:"mt-1 text-sm text-gray-900"},Le={key:0},Se={class:"mt-1 text-sm text-gray-900"},Te={key:1},Ue={class:"mt-1 text-sm text-gray-900"},Oe={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Me={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Ne={class:"mt-3 text-center"},Be={class:"flex justify-center space-x-3 mt-6"},Fe=O({__name:"InteractionDetailView",props:{interactionId:{}},setup(w){const c=w,p=M(),m=Y(),f=G(!1),s=v(()=>m.selectedInteraction),_=v(()=>m.loading),$=v(()=>m.error),x=v(()=>{var g;if(!((g=s.value)!=null&&g.follow_up_date))return null;const d=new Date(s.value.follow_up_date),e=new Date,y=d.getTime()-e.getTime();return Math.ceil(y/(1e3*60*60*24))}),B=v(()=>x.value!==null&&x.value<0),F=d=>({Email:dt,Phone:lt,Meeting:it,Demo:D,Proposal:D,Contract:D,Note:h,Task:U,Event:at,Social:h,Website:h,Other:U})[d]||h,V=d=>({SCHEDULED:"bg-blue-100 text-blue-800",COMPLETED:"bg-green-100 text-green-800",CANCELLED:"bg-gray-100 text-gray-800",NO_SHOW:"bg-red-100 text-red-800"})[d]||"bg-gray-100 text-gray-800",j=d=>({POSITIVE:"bg-green-100 text-green-800",NEUTRAL:"bg-yellow-100 text-yellow-800",NEGATIVE:"bg-red-100 text-red-800",NEEDS_FOLLOW_UP:"bg-orange-100 text-orange-800"})[d]||"bg-gray-100 text-gray-800",A=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),b=d=>new Date(d).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),P=()=>{f.value=!0},R=async()=>{await m.deleteInteraction(c.interactionId)&&p.push("/interactions"),f.value=!1},z=()=>{p.push(`/interactions/${c.interactionId}/edit?step=3&status=completed`)},q=()=>{p.push(`/interactions/${c.interactionId}/edit?step=3&follow_up=true`)},H=async()=>{if(!s.value)return;await m.updateInteraction(c.interactionId,{follow_up_required:!1,follow_up_date:null,follow_up_notes:null,next_action:null})&&await m.fetchInteractionById(c.interactionId)},W=()=>{p.push(`/interactions/${c.interactionId}/edit?step=3&reschedule=true`)};return Q(async()=>{await m.fetchInteractionById(c.interactionId)}),(d,e)=>{var k;const y=X("router-link");return o(),n("div",pt,[_.value?(o(),n("div",xt,e[1]||(e[1]=[t("div",{class:"inline-flex items-center"},[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),u(" Loading interaction... ")],-1)]))):$.value?(o(),n("div",ft,[t("div",yt,[i(l(S),{class:"h-5 w-5 text-red-400"}),t("div",vt,[e[2]||(e[2]=t("h3",{class:"text-sm font-medium text-red-800"},"Error",-1)),t("div",_t,r($.value),1)])])])):s.value?(o(),n("div",bt,[t("div",ht,[t("div",wt,[t("div",kt,[t("div",It,[t("div",Ct,[(o(),J(K(F(s.value.type)),{class:"h-5 w-5 text-blue-600"}))]),t("div",null,[t("h1",Dt,r(s.value.subject),1),t("p",$t,r(l(Z)(s.value.type))+" • "+r(A(s.value.interaction_date)),1)])]),t("div",Et,[i(y,{to:`/interactions/${s.value.id}/edit`,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:I(()=>[i(l(ut),{class:"h-4 w-4 mr-2"}),e[3]||(e[3]=u(" Edit ",-1))]),_:1,__:[3]},8,["to"]),t("button",{onClick:P,type:"button",class:"inline-flex items-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[i(l(st),{class:"h-4 w-4 mr-2"}),e[4]||(e[4]=u(" Delete ",-1))])])])]),t("div",Lt,[t("div",St,[t("div",null,[e[5]||(e[5]=t("dt",{class:"text-sm font-medium text-gray-500"},"Status",-1)),t("dd",Tt,[t("span",{class:C([V(s.value.status||""),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},r(s.value.status?l(tt)(s.value.status):"Unknown"),3)])]),s.value.outcome?(o(),n("div",Ut,[e[6]||(e[6]=t("dt",{class:"text-sm font-medium text-gray-500"},"Outcome",-1)),t("dd",Ot,[t("span",{class:C([j(s.value.outcome),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},r(l(et)(s.value.outcome)),3)])])):a("",!0),s.value.rating?(o(),n("div",Mt,[e[7]||(e[7]=t("dt",{class:"text-sm font-medium text-gray-500"},"Rating",-1)),t("dd",Nt,[t("div",Bt,[(o(),n(E,null,L(5,g=>i(l(ct),{key:g,class:C([g<=s.value.rating?"text-yellow-400":"text-gray-300","h-4 w-4"])},null,8,["class"])),64))]),t("span",Ft,r(s.value.rating)+"/5",1)])])):a("",!0),s.value.duration_minutes?(o(),n("div",Vt,[e[8]||(e[8]=t("dt",{class:"text-sm font-medium text-gray-500"},"Duration",-1)),t("dd",jt,r(s.value.duration_minutes)+" minutes",1)])):a("",!0)])])]),t("div",At,[t("div",Pt,[t("div",Rt,[e[9]||(e[9]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Related Opportunity")],-1)),t("div",zt,[s.value.opportunity?(o(),n("div",qt,[i(l(ot),{class:"h-8 w-8 text-gray-400 mr-3"}),t("div",null,[i(y,{to:`/opportunities/${s.value.opportunity.id}`,class:"text-lg font-medium text-blue-600 hover:text-blue-800"},{default:I(()=>[u(r(s.value.opportunity.name),1)]),_:1},8,["to"]),t("p",Ht,r((k=s.value.opportunity.organization)==null?void 0:k.name)+" • Stage: "+r(s.value.opportunity.stage),1)])])):(o(),n("div",Wt," Opportunity information not available "))])]),t("div",Gt,[e[14]||(e[14]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Interaction Details")],-1)),t("div",Qt,[t("dl",Jt,[t("div",null,[e[10]||(e[10]=t("dt",{class:"text-sm font-medium text-gray-500"},"Date & Time",-1)),t("dd",Kt,r(b(s.value.interaction_date)),1)]),s.value.contact_method?(o(),n("div",Xt,[e[11]||(e[11]=t("dt",{class:"text-sm font-medium text-gray-500"},"Contact Method",-1)),t("dd",Yt,r(s.value.contact_method),1)])):a("",!0),s.value.location?(o(),n("div",Zt,[e[12]||(e[12]=t("dt",{class:"text-sm font-medium text-gray-500"},"Location",-1)),t("dd",te,r(s.value.location),1)])):a("",!0),s.value.participants&&s.value.participants.length>0?(o(),n("div",ee,[e[13]||(e[13]=t("dt",{class:"text-sm font-medium text-gray-500"},"Participants",-1)),t("dd",se,r(Array.isArray(s.value.participants)?s.value.participants.join(", "):s.value.participants),1)])):a("",!0)])])]),s.value.notes?(o(),n("div",oe,[e[15]||(e[15]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Notes")],-1)),t("div",ne,[t("p",re,r(s.value.notes),1)])])):a("",!0),s.value.follow_up_required?(o(),n("div",ae,[e[21]||(e[21]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Follow-up Required")],-1)),t("div",ie,[t("dl",le,[s.value.follow_up_date?(o(),n("div",de,[e[16]||(e[16]=t("dt",{class:"text-sm font-medium text-gray-500"},"Follow-up Date",-1)),t("dd",ue,[u(r(b(s.value.follow_up_date))+" ",1),B.value?(o(),n("span",ce," ("+r(Math.abs(x.value||0))+" days overdue) ",1)):x.value===0?(o(),n("span",me," (Due today) ")):x.value!==null&&x.value>0?(o(),n("span",ge," (In "+r(x.value)+" days) ",1)):a("",!0)])])):a("",!0),s.value.next_action?(o(),n("div",pe,[e[17]||(e[17]=t("dt",{class:"text-sm font-medium text-gray-500"},"Next Action",-1)),t("dd",xe,r(s.value.next_action),1)])):a("",!0)]),s.value.follow_up_notes?(o(),n("div",fe,[e[18]||(e[18]=t("dt",{class:"text-sm font-medium text-gray-500"},"Follow-up Notes",-1)),t("dd",ye,r(s.value.follow_up_notes),1)])):a("",!0),t("div",ve,[t("button",{onClick:H,type:"button",class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-full text-green-700 bg-green-100 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},[i(l(nt),{class:"h-3 w-3 mr-1"}),e[19]||(e[19]=u(" Mark Complete ",-1))]),t("button",{onClick:W,type:"button",class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-full text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[i(l(T),{class:"h-3 w-3 mr-1"}),e[20]||(e[20]=u(" Reschedule ",-1))])])])])):a("",!0)]),t("div",_e,[t("div",be,[e[25]||(e[25]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Quick Actions")],-1)),t("div",he,[s.value.status==="SCHEDULED"?(o(),n("button",{key:0,onClick:z,type:"button",class:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},[i(l(rt),{class:"h-4 w-4 mr-2"}),e[22]||(e[22]=u(" Mark as Completed ",-1))])):a("",!0),!s.value.follow_up_required&&s.value.status==="COMPLETED"?(o(),n("button",{key:1,onClick:q,type:"button",class:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[i(l(T),{class:"h-4 w-4 mr-2"}),e[23]||(e[23]=u(" Schedule Follow-up ",-1))])):a("",!0),i(y,{to:`/interactions/new?opportunity_id=${s.value.opportunity_id}`,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:I(()=>[i(l(mt),{class:"h-4 w-4 mr-2"}),e[24]||(e[24]=u(" Create Related Interaction ",-1))]),_:1,__:[24]},8,["to"])])]),s.value.tags&&s.value.tags.length>0?(o(),n("div",we,[e[26]||(e[26]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Tags")],-1)),t("div",ke,[t("div",Ie,[(o(!0),n(E,null,L(s.value.tags,g=>(o(),n("span",{key:g,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},r(g),1))),128))])])])):a("",!0),t("div",Ce,[e[30]||(e[30]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Information")],-1)),t("div",De,[t("dl",$e,[t("div",null,[e[27]||(e[27]=t("dt",{class:"text-sm font-medium text-gray-500"},"Created",-1)),t("dd",Ee,r(b(s.value.created_at||"")),1)]),s.value.updated_at?(o(),n("div",Le,[e[28]||(e[28]=t("dt",{class:"text-sm font-medium text-gray-500"},"Last Updated",-1)),t("dd",Se,r(b(s.value.updated_at||s.value.created_at||"")),1)])):a("",!0),s.value.created_by?(o(),n("div",Te,[e[29]||(e[29]=t("dt",{class:"text-sm font-medium text-gray-500"},"Created By",-1)),t("dd",Ue,r(s.value.created_by),1)])):a("",!0)])])])])])])):a("",!0),f.value?(o(),n("div",Oe,[t("div",Me,[t("div",Ne,[i(l(S),{class:"mx-auto h-16 w-16 text-red-600"}),e[31]||(e[31]=t("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"Delete Interaction",-1)),e[32]||(e[32]=t("p",{class:"text-sm text-gray-500 mt-2"}," Are you sure you want to delete this interaction? This action cannot be undone. ",-1)),t("div",Be,[t("button",{onClick:e[0]||(e[0]=g=>f.value=!1),type:"button",class:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),t("button",{onClick:R,type:"button",class:"px-4 py-2 bg-red-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Delete ")])])])])):a("",!0)])}}}),Ve=N(Fe,[["__scopeId","data-v-40a81ec5"]]),je={class:"interaction-detail-page"},Ae={class:"mb-6"},Pe={class:"flex items-center space-x-3"},Re=O({__name:"InteractionDetailView",props:{id:{}},setup(w){const c=w,p=M(),m=c.id,f=()=>{window.history.length>1?p.go(-1):p.push("/interactions")};return(s,_)=>(o(),n("div",je,[t("div",Ae,[t("div",Pe,[t("button",{onClick:f,type:"button",class:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700"},[i(l(gt),{class:"h-4 w-4 mr-1"}),_[0]||(_[0]=u(" Back to Interactions ",-1))])])]),i(Ve,{"interaction-id":l(m)},null,8,["interaction-id"])]))}}),ds=N(Re,[["__scopeId","data-v-fdd62914"]]);export{ds as default};
//# sourceMappingURL=InteractionDetailView-CKPAZPZe.js.map
