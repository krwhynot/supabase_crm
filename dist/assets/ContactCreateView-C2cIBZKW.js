import{d as C,z as V,r as g,k as z,p as x,o as a,a as t,g as v,s as E,w as N,c as n,f as d,v as m,x as c,n as f,t as i,m as y,q as B}from"./index-C2TOB6PH.js";import{C as h,c as M}from"./contacts-B88u2vC1.js";import{D as U}from"./DashboardLayout-BO6e1EFI.js";const A={class:"min-h-screen bg-gray-50 py-8"},q={class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8"},D={class:"mb-8"},F={class:"flex items-center space-x-3 mb-4"},j={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},T={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},S={key:0,class:"mt-1 text-sm text-red-600"},L={key:0,class:"mt-1 text-sm text-red-600"},R={key:0,class:"mt-1 text-sm text-red-600"},H={key:0,class:"mt-1 text-sm text-red-600"},I={class:"md:col-span-2"},J={key:0,class:"mt-1 text-sm text-red-600"},O={class:"md:col-span-2"},P={key:0,class:"mt-1 text-sm text-red-600"},$={class:"md:col-span-2"},G={key:0,class:"mt-1 text-sm text-red-600"},K={key:0,class:"mt-6 p-4 border border-red-200 rounded-md bg-red-50"},Q={class:"flex"},W={class:"mt-1 text-sm text-red-700"},X={class:"mt-8 flex justify-end space-x-3"},Y=["disabled"],Z={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},se=C({__name:"ContactCreateView",setup(ee){const w=B(),r=V({first_name:"",last_name:"",email:"",phone:"",organization:"",title:"",notes:""}),o=g({}),b=g(null),p=g(!1),k=async()=>{try{const u=await h.validateCreate(r);if(u.isValid)return o.value={},!0;{const e={};return u.errors.forEach(l=>{e[l.field]=l.message}),o.value=e,!1}}catch(u){return console.error("Form validation error:",u),b.value="Form validation failed",!1}},_=async()=>{try{if(p.value=!0,b.value=null,!await k())return;const e=h.formToInsert(r),l=await M.createContact(e);l.success&&l.data?w.push(`/contacts/${l.data.id}`):b.value=l.error||"Failed to create contact"}catch(u){console.error("Error creating contact:",u),b.value="An unexpected error occurred"}finally{p.value=!1}};return(u,e)=>{const l=E("router-link");return a(),z(U,null,{default:x(()=>[t("div",A,[t("div",q,[t("div",D,[t("div",F,[v(l,{to:"/contacts",class:"text-gray-500 hover:text-gray-700"},{default:x(()=>e[7]||(e[7]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[7]}),e[8]||(e[8]=t("h1",{class:"text-3xl font-bold text-gray-900"},"New Contact",-1))]),e[9]||(e[9]=t("p",{class:"text-gray-600"},"Add a new contact to your CRM",-1))]),t("div",j,[t("form",{onSubmit:N(_,["prevent"])},[t("div",T,[t("div",null,[e[10]||(e[10]=t("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mb-2"}," First Name * ",-1)),m(t("input",{id:"first_name","onUpdate:modelValue":e[0]||(e[0]=s=>r.first_name=s),type:"text",required:"",class:f(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-300 focus:border-red-500 focus:ring-red-500":o.value.first_name}]),placeholder:"Enter first name"},null,2),[[c,r.first_name]]),o.value.first_name?(a(),n("p",S,i(o.value.first_name),1)):d("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{for:"last_name",class:"block text-sm font-medium text-gray-700 mb-2"}," Last Name * ",-1)),m(t("input",{id:"last_name","onUpdate:modelValue":e[1]||(e[1]=s=>r.last_name=s),type:"text",required:"",class:f(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-300 focus:border-red-500 focus:ring-red-500":o.value.last_name}]),placeholder:"Enter last name"},null,2),[[c,r.last_name]]),o.value.last_name?(a(),n("p",L,i(o.value.last_name),1)):d("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address * ",-1)),m(t("input",{id:"email","onUpdate:modelValue":e[2]||(e[2]=s=>r.email=s),type:"email",required:"",class:f(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-300 focus:border-red-500 focus:ring-red-500":o.value.email}]),placeholder:"Enter email address"},null,2),[[c,r.email]]),o.value.email?(a(),n("p",R,i(o.value.email),1)):d("",!0)]),t("div",null,[e[13]||(e[13]=t("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Phone Number ",-1)),m(t("input",{id:"phone","onUpdate:modelValue":e[3]||(e[3]=s=>r.phone=s),type:"tel",class:f(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-300 focus:border-red-500 focus:ring-red-500":o.value.phone}]),placeholder:"Enter phone number"},null,2),[[c,r.phone]]),o.value.phone?(a(),n("p",H,i(o.value.phone),1)):d("",!0)]),t("div",I,[e[14]||(e[14]=t("label",{for:"organization",class:"block text-sm font-medium text-gray-700 mb-2"}," Organization * ",-1)),m(t("input",{id:"organization","onUpdate:modelValue":e[4]||(e[4]=s=>r.organization=s),type:"text",required:"",class:f(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-300 focus:border-red-500 focus:ring-red-500":o.value.organization}]),placeholder:"Enter organization or company name"},null,2),[[c,r.organization]]),o.value.organization?(a(),n("p",J,i(o.value.organization),1)):d("",!0)]),t("div",O,[e[15]||(e[15]=t("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"}," Job Title ",-1)),m(t("input",{id:"title","onUpdate:modelValue":e[5]||(e[5]=s=>r.title=s),type:"text",class:f(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-300 focus:border-red-500 focus:ring-red-500":o.value.title}]),placeholder:"Enter job title"},null,2),[[c,r.title]]),o.value.title?(a(),n("p",P,i(o.value.title),1)):d("",!0)]),t("div",$,[e[16]||(e[16]=t("label",{for:"notes",class:"block text-sm font-medium text-gray-700 mb-2"}," Notes ",-1)),m(t("textarea",{id:"notes","onUpdate:modelValue":e[6]||(e[6]=s=>r.notes=s),rows:"4",class:f(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-300 focus:border-red-500 focus:ring-red-500":o.value.notes}]),placeholder:"Add any additional notes about this contact..."},null,2),[[c,r.notes]]),o.value.notes?(a(),n("p",G,i(o.value.notes),1)):d("",!0)])]),b.value?(a(),n("div",K,[t("div",Q,[e[18]||(e[18]=t("svg",{class:"h-5 w-5 text-red-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",null,[e[17]||(e[17]=t("h3",{class:"text-sm font-medium text-red-800"},"Error creating contact",-1)),t("p",W,i(b.value),1)])])])):d("",!0),t("div",X,[v(l,{to:"/contacts",class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:x(()=>e[19]||(e[19]=[y(" Cancel ",-1)])),_:1,__:[19]}),t("button",{type:"submit",disabled:p.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(a(),n("svg",Z,e[20]||(e[20]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):d("",!0),y(" "+i(p.value?"Creating...":"Create Contact"),1)],8,Y)])],32)])])])]),_:1})}}});export{se as default};
//# sourceMappingURL=ContactCreateView-C2cIBZKW.js.map
