import{d as B,C as E,r as p,o as j,a as n,h as g,b as t,t as v,f as i,w as m,g as M,p as V,j as l,e as x,k as S}from"./index-CtjJHjR0.js";import{u as N}from"./opportunityStore-B1hLuFtx.js";import{O as I}from"./OpportunityFormWrapper-BavdCTUU.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./supabaseClient-Dum322BS.js";import"./index.esm-Do0MT1Iq.js";import"./principalStore-DHqEcCuF.js";import"./organizationsApi-DotikQjO.js";import"./productStore-9Dx38iZU.js";const A={class:"opportunity-edit-view"},D={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},L={key:1,class:"bg-white rounded-lg shadow-sm border border-red-200 p-6"},R={class:"flex items-center mb-4"},T={class:"text-red-700"},z={class:"flex space-x-3"},F={key:2},U={class:"flex mb-4","aria-label":"Breadcrumb"},W={class:"inline-flex items-center space-x-1 md:space-x-3"},Z={class:"inline-flex items-center"},q={class:"flex items-center"},G={class:"flex items-center"},H={class:"mb-8"},J={class:"flex items-center space-x-3 mb-4"},K={class:"max-w-4xl"},P={key:0,class:"mt-6 max-w-4xl"},Q={class:"p-4 border border-red-300 rounded-md bg-red-50"},X={class:"flex"},Y={class:"mt-1 text-sm text-red-700"},tt={key:1,class:"mt-6 max-w-4xl"},et={class:"p-4 border border-green-300 rounded-md bg-green-50"},ot={class:"flex"},st={class:"mt-1 text-sm text-green-700"},rt=B({__name:"OpportunityEditView",setup(nt){const _=E(),y=S(),c=N(),b=_.params.id,s=p(null),f=p(!0),a=p(null),r=p(null),d=p(null),h=async()=>{try{f.value=!0,a.value=null,await c.fetchOpportunityById(b),c.selectedOpportunity?s.value=c.selectedOpportunity:a.value=c.error||"Opportunity not found"}catch(o){console.error("Error loading opportunity:",o),a.value="An unexpected error occurred while loading the opportunity"}finally{f.value=!1}},k=o=>{console.log("Opportunity updated successfully:",o),r.value=null,d.value="Opportunity updated successfully! Redirecting to details...",setTimeout(()=>{y.push(`/opportunities/${o.opportunityId}`)},1500)},w=()=>{r.value=null,d.value=null,s.value?y.push(`/opportunities/${s.value.id}`):y.push("/opportunities")},C=o=>{console.error("Opportunity update error:",o),d.value=null,r.value=typeof o=="string"?o:o.message||"An unexpected error occurred"},O=()=>{r.value=null};return j(()=>{h()}),(o,e)=>{const u=M("router-link");return l(),n("div",A,[f.value?(l(),n("div",D,e[0]||(e[0]=[t("div",{class:"flex justify-center"},[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})],-1),t("p",{class:"text-center text-gray-500 mt-4"},"Loading opportunity details...",-1)]))):a.value?(l(),n("div",L,[t("div",R,[e[1]||(e[1]=t("svg",{class:"h-5 w-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",T,v(a.value),1)]),t("div",z,[i(u,{to:"/opportunities",class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},{default:m(()=>e[2]||(e[2]=[x(" Back to Opportunities ",-1)])),_:1,__:[2]}),t("button",{onClick:h,class:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"}," Try Again ")])])):s.value?(l(),n("div",F,[t("nav",U,[t("ol",W,[t("li",Z,[i(u,{to:"/",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-primary-600"},{default:m(()=>e[3]||(e[3]=[t("svg",{class:"w-3 h-3 mr-2.5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})],-1),x(" Dashboard ",-1)])),_:1,__:[3]})]),t("li",null,[t("div",q,[e[5]||(e[5]=t("svg",{class:"w-3 h-3 text-gray-400 mx-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m9 5 7 7-7 7"})],-1)),i(u,{to:"/opportunities",class:"ml-1 text-sm font-medium text-gray-700 hover:text-primary-600 md:ml-2"},{default:m(()=>e[4]||(e[4]=[x(" Opportunities ",-1)])),_:1,__:[4]})])]),t("li",null,[t("div",G,[e[6]||(e[6]=t("svg",{class:"w-3 h-3 text-gray-400 mx-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m9 5 7 7-7 7"})],-1)),i(u,{to:`/opportunities/${s.value.id}`,class:"ml-1 text-sm font-medium text-gray-700 hover:text-primary-600 md:ml-2"},{default:m(()=>[x(v(s.value.name),1)]),_:1},8,["to"])])]),e[7]||(e[7]=V('<li aria-current="page" data-v-b6e22825><div class="flex items-center" data-v-b6e22825><svg class="w-3 h-3 text-gray-400 mx-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b6e22825><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 5 7 7-7 7" data-v-b6e22825></path></svg><span class="ml-1 text-sm font-medium text-gray-500 md:ml-2" data-v-b6e22825>Edit</span></div></li>',1))])]),t("div",H,[t("div",J,[i(u,{to:`/opportunities/${s.value.id}`,class:"inline-flex items-center text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-md p-1","aria-label":"Back to opportunity details"},{default:m(()=>e[8]||(e[8]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[8]},8,["to"]),e[9]||(e[9]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Edit Opportunity"),t("p",{class:"mt-2 text-gray-600"}," Update opportunity details, stage, and associated information. ")],-1))])]),t("div",K,[i(I,{"is-editing":!0,"existing-opportunity":s.value,onSuccess:k,onCancel:w,onError:C},null,8,["existing-opportunity"])]),r.value?(l(),n("div",P,[t("div",Q,[t("div",X,[e[11]||(e[11]=t("svg",{class:"h-5 w-5 text-red-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",null,[e[10]||(e[10]=t("h3",{class:"text-sm font-medium text-red-800"},"Error updating opportunity",-1)),t("p",Y,v(r.value),1),t("div",{class:"mt-3"},[t("button",{onClick:O,class:"text-sm font-medium text-red-800 hover:text-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 rounded-md px-2 py-1"}," Dismiss ")])])])])])):g("",!0),d.value?(l(),n("div",tt,[t("div",et,[t("div",ot,[e[13]||(e[13]=t("svg",{class:"h-5 w-5 text-green-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),t("div",null,[e[12]||(e[12]=t("h3",{class:"text-sm font-medium text-green-800"},"Success!",-1)),t("p",st,v(d.value),1)])])])])):g("",!0)])):g("",!0)])}}}),xt=$(rt,[["__scopeId","data-v-b6e22825"]]);export{xt as default};
//# sourceMappingURL=OpportunityEditView-BBjVcOKQ.js.map
