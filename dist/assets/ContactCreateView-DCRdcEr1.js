import{d as N,z as B,r as y,k as M,p as s,o as _,a as r,g as l,s as U,w as A,c as x,f as w,v as m,x as f,n as p,t as h,m as C,q as j}from"./index-Yn-xZP-S.js";import{C as k,c as D}from"./contacts-DIwgaMBg.js";import{D as F}from"./DashboardLayout-CxbjHPEj.js";import{_ as b,a as T}from"./FormGroup.vue_vue_type_script_setup_true_lang-DbHvgtwy.js";const S={class:"min-h-screen bg-gray-50 py-8"},$={class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8"},L={class:"mb-8"},R={class:"flex items-center space-x-3 mb-4"},H={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J=["id","aria-describedby","aria-invalid"],O=["id","aria-describedby","aria-invalid"],P=["id","aria-describedby","aria-invalid"],G=["id","aria-describedby","aria-invalid"],K={class:"md:col-span-2"},Q=["id","aria-describedby","aria-invalid"],W={class:"md:col-span-2"},X=["id","aria-describedby","aria-invalid"],Y={class:"md:col-span-2"},Z=["id","aria-describedby","aria-invalid"],E={key:0,class:"mt-6 p-4 border border-danger rounded-md bg-red-50"},ee={class:"flex"},re={class:"mt-1 text-sm text-red-700"},ae={class:"mt-8 flex justify-end space-x-3"},te={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},le=N({__name:"ContactCreateView",setup(oe){const V=j(),t=B({first_name:"",last_name:"",email:"",phone:"",organization:"",title:"",notes:""}),u=y({}),g=y(null),v=y(!1),z=async()=>{try{const c=await k.validateCreate(t);if(c.isValid)return u.value={},!0;{const e={};return c.errors.forEach(d=>{e[d.field]=d.message}),u.value=e,!1}}catch(c){return console.error("Form validation error:",c),g.value="Form validation failed",!1}},q=async()=>{try{if(v.value=!0,g.value=null,!await z())return;const e=k.formToInsert(t),d=await D.createContact(e);d.success&&d.data?V.push(`/contacts/${d.data.id}`):g.value=d.error||"Failed to create contact"}catch(c){console.error("Error creating contact:",c),g.value="An unexpected error occurred"}finally{v.value=!1}};return(c,e)=>{const d=U("router-link");return _(),M(F,null,{default:s(()=>[r("div",S,[r("div",$,[r("div",L,[r("div",R,[l(d,{to:"/contacts",class:"text-gray-500 hover:text-gray-700"},{default:s(()=>e[7]||(e[7]=[r("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[7]}),e[8]||(e[8]=r("h1",{class:"text-3xl font-bold text-gray-900"},"New Contact",-1))]),e[9]||(e[9]=r("p",{class:"text-gray-600"},"Add a new contact to your CRM",-1))]),r("div",H,[r("form",{onSubmit:A(q,["prevent"])},[r("div",I,[l(b,{name:"first_name",label:"First Name",error:u.value.first_name,required:""},{default:s(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[0]||(e[0]=n=>t.first_name=n),type:"text",required:"",placeholder:"Enter first name","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,J),[[f,t.first_name]])]),_:1},8,["error"]),l(b,{name:"last_name",label:"Last Name",error:u.value.last_name,required:""},{default:s(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[1]||(e[1]=n=>t.last_name=n),type:"text",required:"",placeholder:"Enter last name","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,O),[[f,t.last_name]])]),_:1},8,["error"]),l(b,{name:"email",label:"Email Address",error:u.value.email,required:""},{default:s(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[2]||(e[2]=n=>t.email=n),type:"email",required:"",placeholder:"Enter email address","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,P),[[f,t.email]])]),_:1},8,["error"]),l(b,{name:"phone",label:"Phone Number",error:u.value.phone},{default:s(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[3]||(e[3]=n=>t.phone=n),type:"tel",placeholder:"Enter phone number","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,G),[[f,t.phone]])]),_:1},8,["error"]),r("div",K,[l(b,{name:"organization",label:"Organization",error:u.value.organization,required:""},{default:s(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[4]||(e[4]=n=>t.organization=n),type:"text",required:"",placeholder:"Enter organization or company name","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,Q),[[f,t.organization]])]),_:1},8,["error"])]),r("div",W,[l(b,{name:"title",label:"Job Title",error:u.value.title},{default:s(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[5]||(e[5]=n=>t.title=n),type:"text",placeholder:"Enter job title","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,X),[[f,t.title]])]),_:1},8,["error"])]),r("div",Y,[l(b,{name:"notes",label:"Notes",error:u.value.notes},{default:s(({fieldId:o,hasError:a,errorId:i})=>[m(r("textarea",{id:o,"onUpdate:modelValue":e[6]||(e[6]=n=>t.notes=n),rows:"4",placeholder:"Add any additional notes about this contact...","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,Z),[[f,t.notes]])]),_:1},8,["error"])])]),g.value?(_(),x("div",E,[r("div",ee,[e[11]||(e[11]=r("svg",{class:"h-5 w-5 text-danger mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),r("div",null,[e[10]||(e[10]=r("h3",{class:"text-sm font-medium text-red-800"},"Error creating contact",-1)),r("p",re,h(g.value),1)])])])):w("",!0),r("div",ae,[l(d,{to:"/contacts",class:"inline-flex items-center justify-center px-4 py-2 border text-sm font-semibold rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary"},{default:s(()=>e[12]||(e[12]=[C(" Cancel ",-1)])),_:1,__:[12]}),l(T,{type:"submit",variant:"primary",disabled:v.value},{default:s(()=>[v.value?(_(),x("svg",te,e[13]||(e[13]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):w("",!0),C(" "+h(v.value?"Creating...":"Create Contact"),1)]),_:1},8,["disabled"])])],32)])])])]),_:1})}}});export{le as default};
//# sourceMappingURL=ContactCreateView-DCRdcEr1.js.map
