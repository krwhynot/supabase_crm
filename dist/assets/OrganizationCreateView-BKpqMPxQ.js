import{d as I,r as y,y as L,c as a,b as o,e as c,f,w as x,g as T,C as E,t as p,p as l,v as i,n as v,q as N,F as j,l as q,h as R,k as g,u as W,i as u,x as $}from"./index-B1F6v5N1.js";import{u as H,r as Y}from"./organizationStore-vuf2Lv1g.js";import{r as G}from"./XMarkIcon-BYZN4IKb.js";import"./supabaseClient-CzRfYRoe.js";const J={class:"max-w-4xl mx-auto space-y-6"},K={class:"flex items-center justify-between"},Q={class:"flex items-center space-x-2 text-sm text-gray-500 mb-2"},X={key:0,class:"bg-red-50 border border-red-200 rounded-md p-4"},Z={class:"flex"},ee={class:"ml-3"},oe={class:"mt-2 text-sm text-red-700"},te={class:"bg-white shadow-sm rounded-lg border border-gray-200"},re={class:"px-6 py-6 space-y-6"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={key:0,class:"mt-1 text-sm text-red-600"},ne=["value"],ie={class:"bg-white shadow-sm rounded-lg border border-gray-200"},de={class:"px-6 py-6 space-y-6"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ue={key:0,class:"mt-1 text-sm text-red-600"},me={key:0,class:"mt-1 text-sm text-red-600"},pe={class:"bg-white shadow-sm rounded-lg border border-gray-200"},be={class:"px-6 py-6 space-y-6"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fe={class:"md:col-span-2"},ge={class:"md:col-span-2"},ye={class:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200"},xe=["disabled"],ve={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},Ce=I({__name:"OrganizationCreateView",setup(we){const w=$(),P=H(),A=t=>{var d;const e={};return(d=t.name)!=null&&d.trim()||(e.name="Organization name is required"),t.email&&!/^[^@]+@[^@]+\.[^@]+$/.test(t.email)&&(e.email="Please enter a valid email address"),t.website&&!t.website.startsWith("http")&&(e.website="Website must start with http:// or https://"),{isValid:Object.keys(e).length===0,errors:e}},b=y(!1),n=y({}),m=y(""),s=L({name:"",industry:null,status:"Prospect",description:null,website:null,email:null,primary_phone:null,employees_count:null,address_line_1:null,address_line_2:null,city:null,state_province:null,postal_code:null,country:null}),M=["Technology","Healthcare","Finance","Education","Manufacturing","Retail","Real Estate","Consulting","Non-profit","Government","Media & Entertainment","Transportation","Energy","Agriculture","Construction","Food & Beverage","Telecommunications","Automotive","Aerospace","Other"],B=()=>{const t=A(s);return n.value=t.errors,t.isValid},D=t=>{var d,r,_,k,h,z,C,V,O,S,U;const e={name:t.name.trim()};return(d=t.industry)!=null&&d.trim()&&(e.industry=t.industry.trim()),(r=t.description)!=null&&r.trim()&&(e.description=t.description.trim()),(_=t.website)!=null&&_.trim()&&(e.website=t.website.trim()),(k=t.email)!=null&&k.trim()&&(e.email=t.email.trim()),(h=t.primary_phone)!=null&&h.trim()&&(e.primary_phone=t.primary_phone.trim()),(z=t.address_line_1)!=null&&z.trim()&&(e.address_line_1=t.address_line_1.trim()),(C=t.address_line_2)!=null&&C.trim()&&(e.address_line_2=t.address_line_2.trim()),(V=t.city)!=null&&V.trim()&&(e.city=t.city.trim()),(O=t.state_province)!=null&&O.trim()&&(e.state_province=t.state_province.trim()),(S=t.postal_code)!=null&&S.trim()&&(e.postal_code=t.postal_code.trim()),(U=t.country)!=null&&U.trim()&&(e.country=t.country.trim()),e.status=t.status||"Prospect",typeof t.employees_count=="number"&&t.employees_count>0&&(e.employees_count=t.employees_count),e},F=async()=>{if(n.value={},m.value="",!!B()){b.value=!0;try{console.log("Submitting organization data:",s);const t=D(s);console.log("Cleaned submission data:",t);const e=await P.createOrganization(t);console.log("Organization created:",e),e!=null&&e.id?(console.log("Organization created successfully, navigating to detail page"),await w.push(`/organizations/${e.id}`)):(console.log("Organization created successfully, navigating to list"),await w.push("/organizations"))}catch(t){if(console.error("Error creating organization:",t),t&&typeof t=="object")if("message"in t)m.value=t.message;else if("details"in t){const e=t.details;n.value={...n.value,...e}}else m.value="An unexpected error occurred";else m.value="Failed to create organization. Please try again."}finally{b.value=!1}}};return(t,e)=>{const d=T("router-link");return u(),a("div",J,[o("div",K,[o("div",null,[o("nav",Q,[f(d,{to:"/organizations",class:"hover:text-gray-700"},{default:x(()=>e[14]||(e[14]=[g("Organizations",-1)])),_:1,__:[14]}),f(E(Y),{class:"h-4 w-4"}),e[15]||(e[15]=o("span",{class:"text-gray-900"},"New Organization",-1))]),e[16]||(e[16]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Create New Organization",-1)),e[17]||(e[17]=o("p",{class:"mt-1 text-sm text-gray-500"}," Add a new organization to your CRM system ",-1))]),f(d,{to:"/organizations",class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:x(()=>[f(E(G),{class:"h-4 w-4 mr-2"}),e[18]||(e[18]=g(" Cancel ",-1))]),_:1,__:[18]})]),m.value?(u(),a("div",X,[o("div",Z,[e[20]||(e[20]=o("div",{class:"flex-shrink-0"},[o("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),o("div",ee,[e[19]||(e[19]=o("h3",{class:"text-sm font-medium text-red-800"},"Error Creating Organization",-1)),o("div",oe,[o("p",null,p(m.value),1)])])])])):c("",!0),o("form",{onSubmit:W(F,["prevent"]),class:"space-y-8"},[o("div",te,[e[28]||(e[28]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Basic Information"),o("p",{class:"mt-1 text-sm text-gray-500"},"Essential details about the organization")],-1)),o("div",re,[o("div",se,[o("div",null,[e[21]||(e[21]=o("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Organization Name * ",-1)),l(o("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=r=>s.name=r),type:"text",required:"",class:v(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-500 focus:ring-red-500 focus:border-red-500":n.value.name}]),placeholder:"Enter organization name"},null,2),[[i,s.name]]),n.value.name?(u(),a("p",le,p(n.value.name),1)):c("",!0)]),o("div",null,[e[23]||(e[23]=o("label",{for:"industry",class:"block text-sm font-medium text-gray-700 mb-2"}," Industry ",-1)),l(o("select",{id:"industry","onUpdate:modelValue":e[1]||(e[1]=r=>s.industry=r),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"},[e[22]||(e[22]=o("option",{value:""},"Select industry",-1)),(u(),a(j,null,q(M,r=>o("option",{key:r,value:r},p(r),9,ne)),64))],512),[[N,s.industry]])]),o("div",null,[e[25]||(e[25]=o("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"}," Status * ",-1)),l(o("select",{id:"status","onUpdate:modelValue":e[2]||(e[2]=r=>s.status=r),required:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"},e[24]||(e[24]=[R('<option value="Prospect">Prospect</option><option value="Active">Active</option><option value="Inactive">Inactive</option><option value="Customer">Customer</option><option value="Partner">Partner</option><option value="Vendor">Vendor</option>',6)]),512),[[N,s.status]])]),o("div",null,[e[26]||(e[26]=o("label",{for:"employees_count",class:"block text-sm font-medium text-gray-700 mb-2"}," Employee Count ",-1)),l(o("input",{id:"employees_count","onUpdate:modelValue":e[3]||(e[3]=r=>s.employees_count=r),type:"number",min:"1",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Number of employees"},null,512),[[i,s.employees_count,void 0,{number:!0}]])])]),o("div",null,[e[27]||(e[27]=o("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Description ",-1)),l(o("textarea",{id:"description","onUpdate:modelValue":e[4]||(e[4]=r=>s.description=r),rows:"3",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description of the organization"},null,512),[[i,s.description]])])])]),o("div",ie,[e[32]||(e[32]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Contact Information"),o("p",{class:"mt-1 text-sm text-gray-500"},"How to reach this organization")],-1)),o("div",de,[o("div",ae,[o("div",null,[e[29]||(e[29]=o("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address ",-1)),l(o("input",{id:"email","onUpdate:modelValue":e[5]||(e[5]=r=>s.email=r),type:"email",class:v(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-500 focus:ring-red-500 focus:border-red-500":n.value.email}]),placeholder:"contact@organization.com"},null,2),[[i,s.email]]),n.value.email?(u(),a("p",ue,p(n.value.email),1)):c("",!0)]),o("div",null,[e[30]||(e[30]=o("label",{for:"primary_phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Phone Number ",-1)),l(o("input",{id:"primary_phone","onUpdate:modelValue":e[6]||(e[6]=r=>s.primary_phone=r),type:"tel",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"+1 (555) 123-4567"},null,512),[[i,s.primary_phone]])]),o("div",null,[e[31]||(e[31]=o("label",{for:"website",class:"block text-sm font-medium text-gray-700 mb-2"}," Website ",-1)),l(o("input",{id:"website","onUpdate:modelValue":e[7]||(e[7]=r=>s.website=r),type:"url",class:v(["block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-500 focus:ring-red-500 focus:border-red-500":n.value.website}]),placeholder:"https://www.organization.com"},null,2),[[i,s.website]]),n.value.website?(u(),a("p",me,p(n.value.website),1)):c("",!0)])])])]),o("div",pe,[e[39]||(e[39]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Address Information"),o("p",{class:"mt-1 text-sm text-gray-500"},"Physical location details")],-1)),o("div",be,[o("div",ce,[o("div",fe,[e[33]||(e[33]=o("label",{for:"address_line_1",class:"block text-sm font-medium text-gray-700 mb-2"}," Street Address ",-1)),l(o("input",{id:"address_line_1","onUpdate:modelValue":e[8]||(e[8]=r=>s.address_line_1=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"123 Main Street"},null,512),[[i,s.address_line_1]])]),o("div",ge,[e[34]||(e[34]=o("label",{for:"address_line_2",class:"block text-sm font-medium text-gray-700 mb-2"}," Address Line 2 (Optional) ",-1)),l(o("input",{id:"address_line_2","onUpdate:modelValue":e[9]||(e[9]=r=>s.address_line_2=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Suite, unit, building, floor, etc."},null,512),[[i,s.address_line_2]])]),o("div",null,[e[35]||(e[35]=o("label",{for:"city",class:"block text-sm font-medium text-gray-700 mb-2"}," City ",-1)),l(o("input",{id:"city","onUpdate:modelValue":e[10]||(e[10]=r=>s.city=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"New York"},null,512),[[i,s.city]])]),o("div",null,[e[36]||(e[36]=o("label",{for:"state_province",class:"block text-sm font-medium text-gray-700 mb-2"}," State/Province ",-1)),l(o("input",{id:"state_province","onUpdate:modelValue":e[11]||(e[11]=r=>s.state_province=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"NY"},null,512),[[i,s.state_province]])]),o("div",null,[e[37]||(e[37]=o("label",{for:"postal_code",class:"block text-sm font-medium text-gray-700 mb-2"}," Postal Code ",-1)),l(o("input",{id:"postal_code","onUpdate:modelValue":e[12]||(e[12]=r=>s.postal_code=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"10001"},null,512),[[i,s.postal_code]])]),o("div",null,[e[38]||(e[38]=o("label",{for:"country",class:"block text-sm font-medium text-gray-700 mb-2"}," Country ",-1)),l(o("input",{id:"country","onUpdate:modelValue":e[13]||(e[13]=r=>s.country=r),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"United States"},null,512),[[i,s.country]])])])])]),o("div",ye,[f(d,{to:"/organizations",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:x(()=>e[40]||(e[40]=[g(" Cancel ",-1)])),_:1,__:[40]}),o("button",{type:"submit",disabled:b.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[b.value?(u(),a("div",ve)):c("",!0),g(" "+p(b.value?"Creating...":"Create Organization"),1)],8,xe)])],32)])}}});export{Ce as default};
//# sourceMappingURL=OrganizationCreateView-BKpqMPxQ.js.map
