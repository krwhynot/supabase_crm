import{m as N,r as s,j as p}from"./index-BoeHkTYk.js";import{c as h}from"./contactsApi-dM8aJBaa.js";const J=N("contact",()=>{const g=s([]),n=s(null),l=s(!1),o=s(!1),y=s(""),i=s(""),w=s(0),r=s(1),m=s(10),C=s("first_name"),E=s("asc"),B=p(()=>g.value.length>0),F=p(()=>Math.ceil(w.value/m.value)),S=p(()=>r.value<F.value),x=p(()=>r.value>1),u=()=>{y.value=""},v=t=>{y.value=t,console.error("Contact Store Error:",t)},c=async(t={})=>{try{l.value=!0,u();const e=t.search||i.value,a=t.offset||(r.value-1)*m.value,f=t.limit||m.value,A=t.sortBy||C.value,L=t.sortOrder||E.value,d=await h.getContacts({search:(e==null?void 0:e.trim())||void 0,offset:a,limit:f,sortBy:A,sortOrder:L});if(d.success&&d.data)g.value=d.data,w.value=d.data.length;else throw new Error(d.error||"Failed to fetch contacts")}catch(e){const a=e instanceof Error?e.message:"Failed to fetch contacts";v(a)}finally{l.value=!1}},O=async t=>{try{l.value=!0,u();const e=await h.getContact(t);if(e.success&&e.data)return n.value=e.data,e.data;throw new Error(e.error||"Failed to fetch contact")}catch(e){const a=e instanceof Error?e.message:"Failed to fetch contact";return v(a),n.value=null,null}finally{l.value=!1}},M=async t=>{try{o.value=!0,u();const e=await h.createContact(t);if(e.success&&e.data)return await c(),e.data;throw new Error(e.error||"Failed to create contact")}catch(e){const a=e instanceof Error?e.message:"Failed to create contact";return v(a),null}finally{o.value=!1}},_=async(t,e)=>{try{o.value=!0,u();const a=await h.updateContact(t,e);if(a.success&&a.data)return n.value=a.data,await c(),a.data;throw new Error(a.error||"Failed to update contact")}catch(a){const f=a instanceof Error?a.message:"Failed to update contact";return v(f),null}finally{o.value=!1}},b=async t=>{var e;try{o.value=!0,u();const a=await h.deleteContact(t);if(a.success)return((e=n.value)==null?void 0:e.id)===t&&(n.value=null),await c(),!0;throw new Error(a.error||"Failed to delete contact")}catch(a){const f=a instanceof Error?a.message:"Failed to delete contact";return v(f),!1}finally{o.value=!1}},j=async t=>{i.value=t,r.value=1,await c({search:t})},z=async()=>{i.value="",r.value=1,await c()},P=async t=>{t>=1&&t<=F.value&&(r.value=t,await c())};return{contacts:g,currentContact:n,isLoading:l,isSubmitting:o,errorMessage:y,searchQuery:i,currentPage:r,pageSize:m,totalCount:w,sortBy:C,sortOrder:E,hasContacts:B,totalPages:F,hasNextPage:S,hasPreviousPage:x,fetchContacts:c,fetchContact:O,createContact:M,updateContact:_,deleteContact:b,searchContacts:j,clearSearch:z,setPage:P,nextPage:async()=>{S.value&&await P(r.value+1)},previousPage:async()=>{x.value&&await P(r.value-1)},setSorting:async(t,e)=>{C.value=t,E.value=e,r.value=1,await c()},clearError:u,resetStore:()=>{g.value=[],n.value=null,l.value=!1,o.value=!1,y.value="",i.value="",r.value=1,w.value=0,C.value="first_name",E.value="asc"}}});export{J as u};
//# sourceMappingURL=contactStore-BpJS82tW.js.map
