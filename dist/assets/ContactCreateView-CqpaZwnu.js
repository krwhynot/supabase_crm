import{d as M,y as U,r as y,c as _,b as r,f as s,w as d,g as B,u as j,e as C,t as h,i as x,p as m,v as f,n as p,k,x as A}from"./index-B1F6v5N1.js";import{u as F}from"./contactStore-DpILzut2.js";import{C as V}from"./contacts-CPOtUt_G.js";import{_ as b,a as S}from"./FormGroup.vue_vue_type_script_setup_true_lang-CmJ7fe_c.js";import"./contactsApi-D_S6uTib.js";import"./supabaseClient-CzRfYRoe.js";const T={class:"min-h-screen bg-gray-50 py-8"},D={class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8"},$={class:"mb-8"},R={class:"flex items-center space-x-3 mb-4"},H={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J=["id","aria-describedby","aria-invalid"],L=["id","aria-describedby","aria-invalid"],O=["id","aria-describedby","aria-invalid"],P=["id","aria-describedby","aria-invalid"],G={class:"md:col-span-2"},K=["id","aria-describedby","aria-invalid"],Q={class:"md:col-span-2"},W=["id","aria-describedby","aria-invalid"],X={class:"md:col-span-2"},Y=["id","aria-describedby","aria-invalid"],Z={key:0,class:"mt-6 p-4 border border-danger rounded-md bg-red-50"},E={class:"flex"},ee={class:"mt-1 text-sm text-red-700"},re={class:"mt-8 flex justify-end space-x-3"},ae={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},ue=M({__name:"ContactCreateView",setup(te){const z=A(),w=F(),t=U({first_name:"",last_name:"",email:"",phone:"",organization:"",title:"",notes:""}),l=y({}),g=y(null),v=y(!1),N=async()=>{try{const u=await V.validateCreate(t);if(u.isValid)return l.value={},!0;{const e={};return u.errors.forEach(c=>{e[c.field]=c.message}),l.value=e,!1}}catch(u){return console.error("Form validation error:",u),g.value="Form validation failed",!1}},q=async()=>{try{if(v.value=!0,g.value=null,!await N())return;const e=V.formToInsert(t),c=await w.createContact(e);c?z.push(`/contacts/${c.id}`):g.value=w.errorMessage||"Failed to create contact"}catch(u){console.error("Error creating contact:",u),g.value="An unexpected error occurred"}finally{v.value=!1}};return(u,e)=>{const c=B("router-link");return x(),_("div",T,[r("div",D,[r("div",$,[r("div",R,[s(c,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:d(()=>e[7]||(e[7]=[r("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[7]}),e[8]||(e[8]=r("h1",{class:"text-3xl font-bold text-gray-900"},"New Contact",-1))]),e[9]||(e[9]=r("p",{class:"text-gray-600"},"Add a new contact to your CRM",-1))]),r("div",H,[r("form",{onSubmit:j(q,["prevent"])},[r("div",I,[s(b,{name:"first_name",label:"First Name",error:l.value.first_name,required:""},{default:d(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[0]||(e[0]=n=>t.first_name=n),type:"text",required:"",placeholder:"Enter first name","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,J),[[f,t.first_name]])]),_:1},8,["error"]),s(b,{name:"last_name",label:"Last Name",error:l.value.last_name,required:""},{default:d(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[1]||(e[1]=n=>t.last_name=n),type:"text",required:"",placeholder:"Enter last name","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,L),[[f,t.last_name]])]),_:1},8,["error"]),s(b,{name:"email",label:"Email Address",error:l.value.email,required:""},{default:d(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[2]||(e[2]=n=>t.email=n),type:"email",required:"",placeholder:"Enter email address","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,O),[[f,t.email]])]),_:1},8,["error"]),s(b,{name:"phone",label:"Phone Number",error:l.value.phone},{default:d(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[3]||(e[3]=n=>t.phone=n),type:"tel",placeholder:"Enter phone number","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,P),[[f,t.phone]])]),_:1},8,["error"]),r("div",G,[s(b,{name:"organization",label:"Organization",error:l.value.organization,required:""},{default:d(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[4]||(e[4]=n=>t.organization=n),type:"text",required:"",placeholder:"Enter organization or company name","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,K),[[f,t.organization]])]),_:1},8,["error"])]),r("div",Q,[s(b,{name:"title",label:"Job Title",error:l.value.title},{default:d(({fieldId:o,hasError:a,errorId:i})=>[m(r("input",{id:o,"onUpdate:modelValue":e[5]||(e[5]=n=>t.title=n),type:"text",placeholder:"Enter job title","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,W),[[f,t.title]])]),_:1},8,["error"])]),r("div",X,[s(b,{name:"notes",label:"Notes",error:l.value.notes},{default:d(({fieldId:o,hasError:a,errorId:i})=>[m(r("textarea",{id:o,"onUpdate:modelValue":e[6]||(e[6]=n=>t.notes=n),rows:"4",placeholder:"Add any additional notes about this contact...","aria-describedby":a?i:void 0,"aria-invalid":a?"true":"false",class:p(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent transition duration-200 border-gray-300 focus:ring-primary",{"border-danger focus:ring-danger":a}])},null,10,Y),[[f,t.notes]])]),_:1},8,["error"])])]),g.value?(x(),_("div",Z,[r("div",E,[e[11]||(e[11]=r("svg",{class:"h-5 w-5 text-danger mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),r("div",null,[e[10]||(e[10]=r("h3",{class:"text-sm font-medium text-red-800"},"Error creating contact",-1)),r("p",ee,h(g.value),1)])])])):C("",!0),r("div",re,[s(c,{to:"/",class:"inline-flex items-center justify-center px-4 py-2 border text-sm font-semibold rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary"},{default:d(()=>e[12]||(e[12]=[k(" Cancel ",-1)])),_:1,__:[12]}),s(S,{type:"submit",variant:"primary",disabled:v.value},{default:d(()=>[v.value?(x(),_("svg",ae,e[13]||(e[13]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):C("",!0),k(" "+h(v.value?"Creating...":"Create Contact"),1)]),_:1},8,["disabled"])])],32)])])])}}});export{ue as default};
//# sourceMappingURL=ContactCreateView-CqpaZwnu.js.map
