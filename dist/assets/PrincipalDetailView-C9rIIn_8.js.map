{"version":3,"file":"PrincipalDetailView-C9rIIn_8.js","sources":["../../src/components/principal/RecentOpportunitiesList.vue","../../src/views/principals/PrincipalDetailView.vue"],"sourcesContent":["<!--\n  RecentOpportunitiesList - Compact opportunities list for principal detail view\n  \n  Features:\n  - Touch-friendly list optimized for iPad viewport\n  - Opportunity status indicators with clear visual hierarchy\n  - Quick actions for viewing and editing opportunities\n  - Responsive design that adapts to container width\n-->\n<template>\n  <div class=\"recent-opportunities-list\">\n    <!-- Loading State -->\n    <div v-if=\"loading\" class=\"flex items-center justify-center py-8\">\n      <div class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\n      <span class=\"ml-2 text-gray-600\">Loading opportunities...</span>\n    </div>\n\n    <!-- Empty State -->\n    <div v-else-if=\"opportunities.length === 0\" class=\"text-center py-8\">\n      <svg class=\"mx-auto h-8 w-8 text-gray-400 mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n      </svg>\n      <p class=\"text-sm text-gray-500 mb-4\">No opportunities found for this principal</p>\n      <button\n        @click=\"handleCreateOpportunity\"\n        class=\"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[36px]\"\n      >\n        <svg class=\"h-4 w-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n        </svg>\n        Create First Opportunity\n      </button>\n    </div>\n\n    <!-- Opportunities List -->\n    <div v-else class=\"space-y-3\">\n      <div\n        v-for=\"opportunity in displayedOpportunities\"\n        :key=\"opportunity.id\"\n        class=\"border border-gray-200 rounded-lg p-4 hover:border-gray-300 hover:shadow-sm transition-all duration-200 cursor-pointer\"\n        @click=\"handleOpportunityClick(opportunity)\"\n        @keydown.enter=\"handleOpportunityClick(opportunity)\"\n        @keydown.space.prevent=\"handleOpportunityClick(opportunity)\"\n        tabindex=\"0\"\n        :aria-label=\"`View opportunity ${opportunity.name}`\"\n      >\n        <div class=\"flex items-start justify-between\">\n          <div class=\"flex-1 min-w-0\">\n            <h4 class=\"text-sm font-medium text-gray-900 truncate\">\n              {{ opportunity.name }}\n            </h4>\n            <p v-if=\"opportunity.product_name\" class=\"text-xs text-gray-500 mt-1\">\n              {{ opportunity.product_name }}\n            </p>\n            <div class=\"flex items-center space-x-4 mt-2\">\n              <StageTag \n                :stage=\"opportunity.stage as OpportunityStage\" \n                size=\"sm\"\n              />\n              <div v-if=\"opportunity.probability_percent\" class=\"text-xs text-gray-600\">\n                {{ opportunity.probability_percent }}% probability\n              </div>\n            </div>\n          </div>\n          \n          <div class=\"flex items-center space-x-2 flex-shrink-0 ml-4\">\n            <div v-if=\"opportunity.expected_close_date\" class=\"text-right\">\n              <div class=\"text-xs text-gray-500\">Expected close</div>\n              <div class=\"text-xs font-medium text-gray-900\">\n                {{ formatDate(opportunity.expected_close_date) }}\n              </div>\n            </div>\n            \n            <!-- Quick Actions -->\n            <div class=\"flex items-center space-x-1\">\n              <button\n                @click.stop=\"handleEditOpportunity(opportunity)\"\n                class=\"p-1 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 rounded min-h-[32px] min-w-[32px] flex items-center justify-center\"\n                :aria-label=\"`Edit opportunity ${opportunity.name}`\"\n              >\n                <svg class=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                </svg>\n              </button>\n              \n              <button\n                @click.stop=\"handleOpportunityClick(opportunity)\"\n                class=\"p-1 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 rounded min-h-[32px] min-w-[32px] flex items-center justify-center\"\n                :aria-label=\"`View opportunity details ${opportunity.name}`\"\n              >\n                <svg class=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Show More Button -->\n      <div v-if=\"opportunities.length > maxItems\" class=\"text-center pt-3 border-t border-gray-200\">\n        <button\n          @click=\"handleViewAllOpportunities\"\n          class=\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[44px]\"\n        >\n          View All {{ opportunities.length }} Opportunities\n          <svg class=\"ml-2 h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\n          </svg>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { StageTag } from '@/components/opportunities'\nimport type { OpportunityStage } from '@/types/opportunities'\n\n// ===============================\n// INTERFACES\n// ===============================\n\ninterface Opportunity {\n  id: string\n  name: string\n  stage: string\n  probability_percent?: number\n  expected_close_date?: string\n  product_name?: string\n  organization_name?: string\n}\n\n// ===============================\n// PROPS & EMITS\n// ===============================\n\ninterface Props {\n  principalId: string\n  loading?: boolean\n  maxItems?: number\n}\n\ninterface Emits {\n  (e: 'create-opportunity'): void\n  (e: 'opportunity-click', opportunity: Opportunity): void\n  (e: 'edit-opportunity', opportunity: Opportunity): void\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  loading: false,\n  maxItems: 5\n})\n\nconst emit = defineEmits<Emits>()\n\n// ===============================\n// COMPOSABLES\n// ===============================\n\nconst router = useRouter()\n\n// ===============================\n// REACTIVE STATE & COMPUTED\n// ===============================\n\n// Mock data - in real implementation, this would come from an API call\nconst opportunities = computed<Opportunity[]>(() => {\n  // This would be replaced with actual data fetching\n  return [\n    {\n      id: '1',\n      name: 'Q4 Product Line Expansion',\n      stage: 'DEMO_SCHEDULED' as OpportunityStage,\n      probability_percent: 75,\n      expected_close_date: '2024-12-15',\n      product_name: 'Premium Widget Series',\n      organization_name: 'Acme Corporation'\n    },\n    {\n      id: '2',\n      name: 'Annual Contract Renewal',\n      stage: 'FEEDBACK_LOGGED' as OpportunityStage,\n      probability_percent: 90,\n      expected_close_date: '2024-11-30',\n      product_name: 'Standard Widget Package',\n      organization_name: 'Acme Corporation'\n    },\n    {\n      id: '3',\n      name: 'New Territory Pilot Program',\n      stage: 'SAMPLE_VISIT_OFFERED' as OpportunityStage,\n      probability_percent: 45,\n      expected_close_date: '2025-01-31',\n      product_name: 'Starter Widget Kit',\n      organization_name: 'Acme Corporation'\n    }\n  ]\n})\n\nconst displayedOpportunities = computed(() => {\n  return opportunities.value.slice(0, props.maxItems)\n})\n\n// ===============================\n// UTILITY FUNCTIONS\n// ===============================\n\nconst formatDate = (dateString: string): string => {\n  const date = new Date(dateString)\n  return date.toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric'\n  })\n}\n\n// ===============================\n// EVENT HANDLERS\n// ===============================\n\nconst handleCreateOpportunity = () => {\n  emit('create-opportunity')\n}\n\nconst handleOpportunityClick = (opportunity: Opportunity) => {\n  emit('opportunity-click', opportunity)\n  router.push(`/opportunities/${opportunity.id}`)\n}\n\nconst handleEditOpportunity = (opportunity: Opportunity) => {\n  emit('edit-opportunity', opportunity)\n  router.push(`/opportunities/${opportunity.id}/edit`)\n}\n\nconst handleViewAllOpportunities = () => {\n  router.push(`/opportunities?principal=${props.principalId}`)\n}\n</script>\n\n<style scoped>\n.recent-opportunities-list {\n  /* Ensure proper spacing and layout */\n  @apply w-full;\n}\n\n/* Touch targets */\nbutton {\n  min-height: 44px;\n}\n\n@media (min-width: 640px) {\n  button {\n    min-height: 32px;\n  }\n}\n\n/* Focus states */\n.cursor-pointer:focus {\n  outline: none;\n}\n\n.cursor-pointer:focus-visible {\n  @apply ring-2 ring-blue-500 ring-offset-2;\n}\n\n/* Hover and transition effects */\n.transition-all {\n  transition: all 0.2s ease-in-out;\n}\n\n/* Responsive adjustments */\n@media (max-width: 640px) {\n  .space-y-3 > * + * {\n    margin-top: 0.75rem;\n  }\n  \n  .p-4 {\n    @apply p-3;\n  }\n}\n\n/* High contrast mode */\n@media (prefers-contrast: high) {\n  .border-gray-200 {\n    @apply border-gray-800;\n  }\n  \n  .text-gray-500 {\n    @apply text-gray-900;\n  }\n  \n  .hover\\\\:border-gray-300:hover {\n    @apply border-gray-900;\n  }\n}\n\n/* Reduced motion */\n@media (prefers-reduced-motion: reduce) {\n  .transition-all {\n    transition: none !important;\n  }\n  \n  .animate-spin {\n    animation: none;\n  }\n}\n</style>","<!--\n  PrincipalDetailView - Individual principal dashboard optimized for iPad viewport\n  \n  Features:\n  - Comprehensive single principal view with no horizontal scrolling\n  - Activity timeline with chronological insights\n  - KPI cards specific to selected principal\n  - Quick action buttons for opportunities/interactions\n  - Product association management\n  - Touch-friendly interface with 44px minimum touch targets\n  \n  Viewport Optimization:\n  - Stacked layout prevents overflow on 768px width\n  - Progressive disclosure for complex information\n  - Touch targets optimized for iPad interaction\n  - Responsive grid system for varying content\n-->\n<template>\n  <div class=\"principal-detail-view max-w-full\" data-testid=\"principal-detail-view\">\n    <!-- Loading State -->\n    <div v-if=\"isLoading && !principal\" class=\"flex items-center justify-center py-12\">\n      <div class=\"flex flex-col items-center space-y-4\">\n        <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        <p class=\"text-gray-600\">Loading principal details...</p>\n      </div>\n    </div>\n\n    <!-- Error State -->\n    <div v-else-if=\"error\" class=\"bg-white rounded-lg shadow-sm border border-red-200 p-6 mb-6\">\n      <div class=\"flex items-start space-x-3\">\n        <svg class=\"h-5 w-5 text-red-400 mt-1 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n        </svg>\n        <div class=\"flex-1\">\n          <h3 class=\"text-sm font-medium text-red-800\">Error loading principal</h3>\n          <p class=\"mt-1 text-sm text-red-700\">{{ error }}</p>\n          <div class=\"mt-4\">\n            <button\n              @click=\"handleRefresh\"\n              class=\"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 min-h-[44px]\"\n            >\n              Try Again\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Main Content -->\n    <div v-else-if=\"principal\" class=\"space-y-6\">\n      <!-- Header Section -->\n      <section class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n        <div class=\"flex flex-col space-y-4 lg:flex-row lg:items-start lg:justify-between lg:space-y-0\">\n          <!-- Principal Info -->\n          <div class=\"flex items-start space-x-4\">\n            <div class=\"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0\">\n              <span class=\"text-xl font-semibold text-blue-600\">\n                {{ getInitials(principal.principal_name) }}\n              </span>\n            </div>\n            \n            <div class=\"flex-1 min-w-0\">\n              <h1 class=\"text-2xl font-bold text-gray-900 mb-1\">\n                {{ principal.principal_name }}\n              </h1>\n              <p class=\"text-lg text-gray-600 mb-2\">\n                {{ principal.organization_type }}\n              </p>\n              <div class=\"flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0\">\n                <ActivityStatusBadge \n                  :status=\"(principal.activity_status === 'STALE' ? 'LOW' : principal.activity_status) as 'NO_ACTIVITY' | 'MODERATE' | 'ACTIVE' | 'LOW'\"\n                  size=\"md\"\n                />\n                <div v-if=\"principal.organization_type\" class=\"text-sm text-gray-500 uppercase tracking-wide\">\n                  {{ principal.organization_type }}\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- Action Buttons -->\n          <PrincipalActionBar \n            :selected-principal=\"principal\"\n            @refresh=\"handleRefresh\"\n            @create-opportunity=\"handleCreateOpportunity\"\n            @log-interaction=\"handleLogInteraction\"\n            @manage-products=\"handleManageProducts\"\n            class=\"flex-shrink-0\"\n          />\n        </div>\n      </section>\n\n      <!-- KPI Cards Section -->\n      <section>\n        <div class=\"mb-4\">\n          <h2 class=\"text-lg font-semibold text-gray-900\">Performance Overview</h2>\n          <p class=\"text-sm text-gray-600\">Key metrics and engagement insights for this principal</p>\n        </div>\n        \n        <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n          <!-- Engagement Score Card -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center\">\n            <div class=\"mb-4\">\n              <EngagementScoreRing \n                :score=\"principal.engagement_score || 0\" \n                size=\"xl\"\n                class=\"mx-auto\"\n              />\n            </div>\n            <h3 class=\"text-sm font-medium text-gray-900 mb-1\">Engagement Score</h3>\n            <p class=\"text-2xl font-bold text-gray-900\">{{ principal.engagement_score || 0 }}%</p>\n            <p class=\"text-sm text-gray-500\">{{ getEngagementLevel(principal.engagement_score || 0) }}</p>\n          </div>\n          \n          <!-- Total Interactions Card -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center\">\n            <div class=\"mb-4\">\n              <div class=\"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center mx-auto\">\n                <svg class=\"h-6 w-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                </svg>\n              </div>\n            </div>\n            <h3 class=\"text-sm font-medium text-gray-900 mb-1\">Total Interactions</h3>\n            <p class=\"text-2xl font-bold text-gray-900\">{{ principal.total_interactions || 0 }}</p>\n            <p class=\"text-sm text-gray-500\">All time</p>\n          </div>\n          \n          <!-- Active Opportunities Card -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center\">\n            <div class=\"mb-4\">\n              <div class=\"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center mx-auto\">\n                <svg class=\"h-6 w-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n                </svg>\n              </div>\n            </div>\n            <h3 class=\"text-sm font-medium text-gray-900 mb-1\">Active Opportunities</h3>\n            <p class=\"text-2xl font-bold text-gray-900\">{{ principal.active_opportunities || 0 }}</p>\n            <p class=\"text-sm text-gray-500\">In pipeline</p>\n          </div>\n          \n          <!-- Products Associated Card -->\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center\">\n            <div class=\"mb-4\">\n              <div class=\"h-12 w-12 rounded-full bg-orange-100 flex items-center justify-center mx-auto\">\n                <svg class=\"h-6 w-6 text-orange-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\n                </svg>\n              </div>\n            </div>\n            <h3 class=\"text-sm font-medium text-gray-900 mb-1\">Products Associated</h3>\n            <p class=\"text-2xl font-bold text-gray-900\">{{ principal.product_count || 0 }}</p>\n            <p class=\"text-sm text-gray-500\">Portfolio</p>\n          </div>\n        </div>\n      </section>\n\n      <!-- Follow-up Alert -->\n      <section v-if=\"principal.follow_ups_required && principal.follow_ups_required > 0\">\n        <div class=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n          <div class=\"flex items-start space-x-3\">\n            <svg class=\"h-5 w-5 text-amber-500 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            <div class=\"flex-1\">\n              <h3 class=\"text-sm font-medium text-amber-800\">\n                {{ principal.follow_ups_required }} Follow-up{{ principal.follow_ups_required > 1 ? 's' : '' }} Required\n              </h3>\n              <p v-if=\"principal.next_follow_up_date\" class=\"mt-1 text-sm text-amber-700\">\n                Next follow-up scheduled for {{ formatDate(principal.next_follow_up_date) }}\n              </p>\n            </div>\n            <div class=\"flex-shrink-0\">\n              <button\n                @click=\"handleLogInteraction\"\n                class=\"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-amber-800 bg-amber-100 hover:bg-amber-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 min-h-[36px]\"\n              >\n                Log Follow-up\n              </button>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <!-- Main Content Grid -->\n      <div class=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n        <!-- Activity Timeline -->\n        <section class=\"xl:col-span-1\">\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n              <h3 class=\"text-lg font-medium text-gray-900\">Activity Timeline</h3>\n              <p class=\"text-sm text-gray-600 mt-1\">Recent interactions and milestones</p>\n            </div>\n            <div class=\"p-6\">\n              <PrincipalActivityTimeline\n                :principal-id=\"principalId\"\n                :timeline-data=\"timelineData\"\n                :loading=\"isLoadingTimeline\"\n                :max-items=\"10\"\n              />\n              \n              <div v-if=\"timelineData.length > 10\" class=\"mt-4 text-center\">\n                <button\n                  @click=\"handleViewFullTimeline\"\n                  class=\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[44px]\"\n                >\n                  View Complete Timeline\n                  <svg class=\"ml-2 h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <!-- Product Performance -->\n        <section class=\"xl:col-span-1\">\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n            <div class=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n              <div>\n                <h3 class=\"text-lg font-medium text-gray-900\">Product Performance</h3>\n                <p class=\"text-sm text-gray-600 mt-1\">Associated products and success rates</p>\n              </div>\n              <ManagePrincipalProductsButton\n                :principal=\"principal\"\n                @updated=\"handleProductsUpdated\"\n              />\n            </div>\n            <div class=\"p-6\">\n              <PrincipalProductTable\n                :products=\"productPerformanceData\"\n                :loading=\"isLoadingProducts\"\n                :principal-name=\"principal?.principal_name\"\n              />\n            </div>\n          </div>\n        </section>\n      </div>\n\n      <!-- Additional Information Sections -->\n      <div class=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n        <!-- Distributor Relationships -->\n        <section class=\"xl:col-span-1\">\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n              <h3 class=\"text-lg font-medium text-gray-900\">Distributor Network</h3>\n              <p class=\"text-sm text-gray-600 mt-1\">Relationship hierarchy and connections</p>\n            </div>\n            <div class=\"p-6\">\n              <DistributorRelationshipTable\n                :relationships=\"distributorData\"\n                :loading=\"isLoadingDistributors\"\n                :principal-name=\"principal?.principal_name\"\n              />\n            </div>\n          </div>\n        </section>\n\n        <!-- Recent Opportunities -->\n        <section class=\"xl:col-span-1\">\n          <div class=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n            <div class=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n              <div>\n                <h3 class=\"text-lg font-medium text-gray-900\">Recent Opportunities</h3>\n                <p class=\"text-sm text-gray-600 mt-1\">Current sales pipeline</p>\n              </div>\n              <CreatePrincipalOpportunityButton\n                :principal=\"principal\"\n                @created=\"handleOpportunityCreated\"\n              />\n            </div>\n            <div class=\"p-6\">\n              <RecentOpportunitiesList\n                :principal-id=\"principalId\"\n                :loading=\"isLoadingOpportunities\"\n                :max-items=\"5\"\n              />\n            </div>\n          </div>\n        </section>\n      </div>\n\n      <!-- Analytics Chart Section -->\n      <section>\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n          <div class=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n            <div>\n              <h3 class=\"text-lg font-medium text-gray-900\">Performance Analytics</h3>\n              <p class=\"text-sm text-gray-600 mt-1\">Engagement trends and performance metrics</p>\n            </div>\n            <div class=\"flex items-center space-x-2\">\n              <select\n                v-model=\"analyticsTimeframe\"\n                @change=\"handleTimeframeChange\"\n                class=\"block w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[44px]\"\n              >\n                <option value=\"30\">Last 30 Days</option>\n                <option value=\"90\">Last 90 Days</option>\n                <option value=\"180\">Last 6 Months</option>\n                <option value=\"365\">Last Year</option>\n              </select>\n            </div>\n          </div>\n          <div class=\"p-6\">\n            <PrincipalAnalyticsChart\n              :principal-id=\"principalId\"\n              :activity-data=\"timelineData\"\n              :product-performance=\"productPerformanceData\"\n              :timeframe=\"analyticsTimeframe\"\n              :loading=\"isLoadingAnalytics\"\n            />\n          </div>\n        </div>\n      </section>\n    </div>\n\n    <!-- Empty State -->\n    <div v-else class=\"text-center py-12\">\n      <svg class=\"mx-auto h-12 w-12 text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n      </svg>\n      <h3 class=\"text-lg font-medium text-gray-900 mb-2\">Principal not found</h3>\n      <p class=\"text-gray-500 mb-6\">\n        The principal you're looking for could not be found or may have been removed.\n      </p>\n      <router-link\n        to=\"/principals\"\n        class=\"inline-flex items-center justify-center px-6 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[44px]\"\n      >\n        <svg class=\"h-4 w-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\n        </svg>\n        Back to Principals\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport PrincipalActivityApi from '@/services/principalActivityApi'\nimport type {\n  PrincipalActivitySummary,\n  PrincipalProductPerformance\n} from '@/services/principalActivityApi'\n\n// Component imports\nimport ActivityStatusBadge from '@/components/principal/ActivityStatusBadge.vue'\nimport EngagementScoreRing from '@/components/principal/EngagementScoreRing.vue'\nimport PrincipalActionBar from '@/components/principal/PrincipalActionBar.vue'\nimport PrincipalActivityTimeline from '@/components/principal/PrincipalActivityTimeline.vue'\nimport PrincipalAnalyticsChart from '@/components/principal/PrincipalAnalyticsChart.vue'\nimport PrincipalProductTable from '@/components/principal/PrincipalProductTable.vue'\nimport DistributorRelationshipTable from '@/components/principal/DistributorRelationshipTable.vue'\nimport CreatePrincipalOpportunityButton from '@/components/principal/CreatePrincipalOpportunityButton.vue'\nimport ManagePrincipalProductsButton from '@/components/principal/ManagePrincipalProductsButton.vue'\nimport RecentOpportunitiesList from '@/components/principal/RecentOpportunitiesList.vue'\n\n// ===============================\n// COMPOSABLES\n// ===============================\n\nconst route = useRoute()\nconst router = useRouter()\n\n// ===============================\n// REACTIVE STATE\n// ===============================\n\nconst principalId = computed(() => route.params.id as string)\nconst analyticsTimeframe = ref(30)\n\n// Loading states\nconst isLoading = ref(false)\nconst isLoadingTimeline = ref(false)\nconst isLoadingProducts = ref(false)\nconst isLoadingDistributors = ref(false)\nconst isLoadingOpportunities = ref(false)\nconst isLoadingAnalytics = ref(false)\n\n// Error handling\nconst error = ref<string | null>(null)\n\n// Data states\nconst principal = ref<PrincipalActivitySummary | null>(null)\nconst timelineData = ref<any[]>([]) // TODO: Add proper timeline type\nconst productPerformanceData = ref<PrincipalProductPerformance[]>([])\nconst distributorData = ref<any[]>([]) // TODO: Add proper distributor relationship type\n\n// ===============================\n// COMPUTED PROPERTIES\n// ===============================\n\nconst getInitials = (name: string): string => {\n  if (!name) return '?'\n  \n  const words = name.split(' ')\n  if (words.length === 1) {\n    return words[0].charAt(0).toUpperCase()\n  }\n  \n  return (words[0].charAt(0) + words[words.length - 1].charAt(0)).toUpperCase()\n}\n\nconst getEngagementLevel = (score: number): string => {\n  if (score >= 80) return 'High Engagement'\n  if (score >= 40) return 'Moderate Engagement'\n  if (score > 0) return 'Low Engagement'\n  return 'No Activity'\n}\n\nconst formatDate = (dateString: string): string => {\n  const date = new Date(dateString)\n  return date.toLocaleDateString('en-US', {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric'\n  })\n}\n\n// ===============================\n// EVENT HANDLERS\n// ===============================\n\nconst handleRefresh = async () => {\n  await Promise.all([\n    loadPrincipalData(),\n    loadTimelineData(),\n    loadProductData(),\n    loadDistributorData()\n  ])\n}\n\nconst handleCreateOpportunity = () => {\n  router.push(`/opportunities/new?principal=${principalId.value}`)\n}\n\nconst handleLogInteraction = () => {\n  router.push(`/interactions/new?principal=${principalId.value}`)\n}\n\nconst handleManageProducts = () => {\n  // This would typically open a modal or navigate to a product management page\n  console.log('Manage products for principal:', principal.value?.principal_name)\n}\n\nconst handleOpportunityCreated = () => {\n  // Refresh opportunities data\n  loadOpportunityData()\n}\n\nconst handleProductsUpdated = () => {\n  // Refresh product performance data\n  loadProductData()\n}\n\nconst handleViewFullTimeline = () => {\n  // Navigate to dedicated timeline view or expand current view\n  router.push(`/principals/${principalId.value}/timeline`)\n}\n\nconst handleTimeframeChange = () => {\n  // Reload analytics data with new timeframe\n  loadAnalyticsData()\n}\n\n// ===============================\n// DATA LOADING FUNCTIONS\n// ===============================\n\nconst loadPrincipalData = async () => {\n  isLoading.value = true\n  error.value = null\n  \n  try {\n    const response = await PrincipalActivityApi.getPrincipalActivitySummary({\n      principalIds: [principalId.value]\n    })\n    \n    if (response.success && response.data && response.data.length > 0) {\n      principal.value = response.data[0]\n    } else {\n      principal.value = null\n      error.value = 'Principal not found'\n    }\n  } catch (err) {\n    error.value = err instanceof Error ? err.message : 'Failed to load principal data'\n  } finally {\n    isLoading.value = false\n  }\n}\n\nconst loadTimelineData = async () => {\n  isLoadingTimeline.value = true\n  \n  try {\n    const response = await PrincipalActivityApi.getPrincipalTimeline([principalId.value], 50)\n    if (response.success) {\n      timelineData.value = response.data || []\n    }\n  } catch (err) {\n    console.error('Failed to load timeline data:', err)\n  } finally {\n    isLoadingTimeline.value = false\n  }\n}\n\nconst loadProductData = async () => {\n  isLoadingProducts.value = true\n  \n  try {\n    const response = await PrincipalActivityApi.getPrincipalProductPerformance(principalId.value)\n    if (response.success) {\n      productPerformanceData.value = response.data || []\n    }\n  } catch (err) {\n    console.error('Failed to load product data:', err)\n  } finally {\n    isLoadingProducts.value = false\n  }\n}\n\nconst loadDistributorData = async () => {\n  isLoadingDistributors.value = true\n  \n  try {\n    const response = await PrincipalActivityApi.getPrincipalDistributorRelationships([principalId.value])\n    if (response.success) {\n      distributorData.value = response.data || []\n    }\n  } catch (err) {\n    console.error('Failed to load distributor data:', err)\n  } finally {\n    isLoadingDistributors.value = false\n  }\n}\n\nconst loadOpportunityData = async () => {\n  isLoadingOpportunities.value = true\n  \n  try {\n    // This would typically call an opportunities API filtered by principal\n    // For now, we'll simulate the loading\n    await new Promise(resolve => setTimeout(resolve, 500))\n  } finally {\n    isLoadingOpportunities.value = false\n  }\n}\n\nconst loadAnalyticsData = async () => {\n  isLoadingAnalytics.value = true\n  \n  try {\n    // Reload timeline data based on timeframe\n    await loadTimelineData()\n  } finally {\n    isLoadingAnalytics.value = false\n  }\n}\n\n// ===============================\n// LIFECYCLE\n// ===============================\n\nonMounted(async () => {\n  await handleRefresh()\n})\n\n// Watch for route parameter changes\nwatch(\n  () => route.params.id,\n  async (newId) => {\n    if (newId && newId !== principalId.value) {\n      await handleRefresh()\n    }\n  }\n)\n</script>\n\n<style scoped>\n.principal-detail-view {\n  /* Ensure no horizontal overflow */\n  overflow-x: hidden;\n}\n\n/* Loading states */\n.loading-overlay {\n  @apply absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center;\n}\n\n/* Touch targets */\nbutton, select {\n  min-height: 44px;\n}\n\n/* Responsive adjustments */\n@media (max-width: 1024px) {\n  .principal-detail-view {\n    @apply px-4;\n  }\n  \n  .grid {\n    @apply gap-4;\n  }\n}\n\n@media (max-width: 768px) {\n  .principal-detail-view {\n    @apply px-2;\n  }\n  \n  .grid {\n    @apply gap-3;\n  }\n  \n  /* Stack all grids on mobile */\n  .xl\\\\:grid-cols-2 {\n    @apply grid-cols-1;\n  }\n}\n\n/* Animation for sections */\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\nsection {\n  animation: fadeIn 0.3s ease-out;\n}\n\n/* Accessibility enhancements */\n@media (prefers-reduced-motion: reduce) {\n  .animate-spin,\n  section {\n    animation: none !important;\n  }\n  \n  * {\n    transition: none !important;\n  }\n}\n\n/* High contrast mode */\n@media (prefers-contrast: high) {\n  .bg-white {\n    @apply border-2 border-gray-800;\n  }\n  \n  .text-gray-400 {\n    @apply text-gray-800;\n  }\n  \n  .text-gray-500 {\n    @apply text-gray-900;\n  }\n  \n  .bg-blue-600 {\n    @apply bg-gray-900;\n  }\n}\n\n/* Print styles */\n@media print {\n  .principal-detail-view {\n    @apply shadow-none;\n  }\n  \n  button {\n    @apply hidden;\n  }\n  \n  .bg-blue-600,\n  .bg-green-100,\n  .bg-purple-100,\n  .bg-orange-100 {\n    @apply bg-gray-200 !important;\n  }\n  \n  .text-blue-600,\n  .text-green-600,\n  .text-purple-600,\n  .text-orange-600 {\n    @apply text-gray-900 !important;\n  }\n}\n</style>"],"names":["props","__props","emit","__emit","router","useRouter","opportunities","computed","displayedOpportunities","formatDate","dateString","handleCreateOpportunity","handleOpportunityClick","opportunity","handleEditOpportunity","handleViewAllOpportunities","_openBlock","_createElementBlock","_hoisted_1","loading","_hoisted_2","_cache","_createElementVNode","_hoisted_3","_hoisted_4","_Fragment","_renderList","$event","_withKeys","_withModifiers","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","_hoisted_9","_hoisted_10","_createVNode","_unref","StageTag","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","maxItems","_hoisted_18","_createTextVNode","route","useRoute","principalId","analyticsTimeframe","ref","isLoading","isLoadingTimeline","isLoadingProducts","isLoadingDistributors","isLoadingOpportunities","isLoadingAnalytics","error","principal","timelineData","productPerformanceData","distributorData","getInitials","name","words","getEngagementLevel","score","handleRefresh","loadPrincipalData","loadTimelineData","loadProductData","loadDistributorData","handleLogInteraction","handleManageProducts","_a","handleOpportunityCreated","loadOpportunityData","handleProductsUpdated","handleViewFullTimeline","handleTimeframeChange","loadAnalyticsData","response","PrincipalActivityApi","err","resolve","onMounted","watch","newId","_hoisted_5","_hoisted_16","ActivityStatusBadge","_hoisted_17","PrincipalActionBar","_hoisted_19","_hoisted_20","EngagementScoreRing","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","PrincipalActivityTimeline","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","ManagePrincipalProductsButton","_hoisted_43","PrincipalProductTable","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","DistributorRelationshipTable","_b","_hoisted_48","_hoisted_49","_hoisted_50","CreatePrincipalOpportunityButton","_hoisted_51","RecentOpportunitiesList","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","PrincipalAnalyticsChart","_hoisted_56","_component_router_link"],"mappings":"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"}