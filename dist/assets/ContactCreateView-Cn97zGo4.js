import{c as y,i as b,b as o,d as q,r as B,j as f,e as z,n as D,k as P,t as V,y as G,z as H,f as p,A as O,u as K,o as W,B as J,s as L,w as Q,g as X,x as N}from"./index-CslXfma7.js";import{_ as k,a as E}from"./SelectField.vue_vue_type_script_setup_true_lang-Bpy8pwYa.js";import{u as Y,O as ee}from"./organizationStore-CtHw-x3r.js";import{r as Z}from"./XMarkIcon-tfUABorX.js";import{C as M,P as te,a as oe,D as se,f as S}from"./contacts-BmTe6arF.js";import{r as R}from"./PlusIcon-DV2xgcvy.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as ae}from"./contactStore-CixIU3DE.js";import{r as ne}from"./ExclamationTriangleIcon-QiwLKmxU.js";import"./supabaseClient-VdCb1AVM.js";import"./index.esm-WMJEAsKX.js";import"./contactsApi-Df0ehGuV.js";function le(I,C){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}const ie={class:"space-y-1"},de=["for"],ue={key:0,class:"text-danger ml-1","aria-label":"required"},ce=["id"],me={class:"relative"},pe=["id","name","placeholder","readonly","disabled","required","rows","maxlength","minlength","value","aria-describedby","aria-invalid","aria-required"],ge={key:1,class:"absolute bottom-1 right-1 w-3 h-3 opacity-30","aria-hidden":"true"},be=["id"],fe=["id"],ye=q({__name:"TextareaField",props:{name:{},label:{},modelValue:{},error:{},placeholder:{},description:{},helpText:{},required:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},rows:{default:4},maxlength:{},minlength:{},showCharacterCount:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},textareaClass:{},labelClass:{}},emits:["update:modelValue","blur","focus","input","keydown","validate"],setup(I,{expose:C,emit:w}){const n=I,d=w,c=B(!1),u=f(()=>`textarea-${n.name}`),g=f(()=>`error-${n.name}`),r=f(()=>`desc-${n.name}`),l=f(()=>`help-${n.name}`),x=f(()=>!!n.error),m=f(()=>{var t;return((t=n.modelValue)==null?void 0:t.length)||0}),i=f(()=>{const t=[];return n.description&&t.push(r.value),n.error&&t.push(g.value),n.helpText&&!n.error&&t.push(l.value),t.length>0?t.join(" "):void 0}),$=f(()=>{const t="block text-sm font-medium transition-colors duration-200",h=x.value?"text-red-700":c.value?"text-primary":"text-gray-700",_=n.disabled?"opacity-60":"",s=n.labelClass||"";return`${t} ${h} ${_} ${s}`.trim()}),A=f(()=>{const t="w-full px-3 py-2 border rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:border-transparent",h=x.value?"border-red-500 bg-red-50 focus:ring-red-500 focus:bg-white":c.value?"border-primary bg-white focus:ring-primary":"border-gray-300 bg-white hover:border-gray-400 focus:ring-primary",_=n.disabled?"bg-gray-100 text-gray-500 cursor-not-allowed":"",s=n.readonly?"bg-gray-50 cursor-default":"",e=n.resizable?"resize-y":"resize-none",a=n.showCharacterCount&&n.maxlength?"pb-8":"",j=n.textareaClass||"";return`${t} ${h} ${_} ${s} ${e} ${a} ${j}`.trim()}),U=t=>{const h=t.target;d("update:modelValue",h.value),d("input",t)},T=async t=>{c.value=!1,d("blur",t),await G(),d("validate",n.modelValue)},F=t=>{c.value=!0,d("focus",t)},v=t=>{d("keydown",t),t.key==="Escape"&&c.value&&t.target.blur(),t.key==="Tab"&&t.shiftKey};return C({focus:()=>{const t=document.getElementById(u.value);t==null||t.focus()},blur:()=>{const t=document.getElementById(u.value);t==null||t.blur()},select:()=>{const t=document.getElementById(u.value);t==null||t.select()}}),(t,h)=>(b(),y("div",ie,[o("label",{for:u.value,class:D($.value)},[P(V(t.label)+" ",1),t.required?(b(),y("span",ue,"*")):z("",!0)],10,de),t.description?(b(),y("p",{key:0,id:r.value,class:"text-sm text-gray-600"},V(t.description),9,ce)):z("",!0),o("div",me,[o("textarea",{id:u.value,name:t.name,placeholder:t.placeholder,readonly:t.readonly,disabled:t.disabled,required:t.required,rows:t.rows,maxlength:t.maxlength,minlength:t.minlength,value:t.modelValue,"aria-describedby":i.value,"aria-invalid":x.value,"aria-required":t.required,class:D(A.value),onInput:U,onBlur:T,onFocus:F,onKeydown:v},null,42,pe),t.showCharacterCount&&t.maxlength?(b(),y("div",{key:0,class:D(["absolute bottom-2 right-2 text-xs text-gray-400 bg-white px-1 rounded",{"text-red-500":m.value>t.maxlength*.9}])},V(m.value)+"/"+V(t.maxlength),3)):z("",!0),t.resizable?(b(),y("div",ge,h[0]||(h[0]=[o("svg",{viewBox:"0 0 12 12",class:"w-full h-full text-gray-400"},[o("path",{d:"M12 0v12H0L12 0zM8.5 0v3.5H12V0H8.5zM5 0v7h7V0H5z",fill:"currentColor",opacity:"0.3"})],-1)]))):z("",!0)]),t.error?(b(),y("p",{key:1,id:g.value,role:"alert",class:"text-sm text-danger flex items-start space-x-1"},[h[1]||(h[1]=o("svg",{class:"h-4 w-4 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",null,V(t.error),1)],8,be)):z("",!0),t.helpText&&!t.error?(b(),y("p",{key:2,id:l.value,class:"text-sm text-gray-500"},V(t.helpText),9,fe)):z("",!0)]))}}),ve={class:"space-y-1"},he=["id"],xe={class:"flex items-start space-x-3"},we={class:"relative flex-shrink-0"},$e=["id","name","disabled","required","value","checked","aria-describedby","aria-invalid","aria-required"],Ve={class:"flex-1 min-w-0"},Ce=["for"],_e={key:0,class:"text-danger ml-1","aria-label":"required"},ke=["id"],ze=["id"],Be=q({__name:"CheckboxField",props:{name:{},label:{},modelValue:{type:[Boolean,Array]},checkboxValue:{default:void 0},error:{},description:{},helpText:{},required:{type:Boolean},disabled:{type:Boolean},indeterminate:{type:Boolean,default:!1},checkboxClass:{},labelClass:{}},emits:["update:modelValue","blur","focus","change","keydown","validate"],setup(I,{expose:C,emit:w}){const n=I,d=w,c=B(!1),u=f(()=>`checkbox-${n.name}`),g=f(()=>`error-${n.name}`),r=f(()=>`desc-${n.name}`),l=f(()=>`help-${n.name}`),x=f(()=>!!n.error),m=f(()=>{const t=[];return n.description&&t.push(r.value),n.error&&t.push(g.value),n.helpText&&!n.error&&t.push(l.value),t.length>0?t.join(" "):void 0}),i=f(()=>typeof n.modelValue=="boolean"?n.modelValue:Array.isArray(n.modelValue)&&n.checkboxValue!==void 0?n.modelValue.includes(n.checkboxValue):!1),$=f(()=>{const t="block text-sm font-medium cursor-pointer transition-colors duration-200",h=x.value?"text-red-700":c.value?"text-primary":"text-gray-700",_=n.disabled?"opacity-60 cursor-not-allowed":"",s=n.labelClass||"";return`${t} ${h} ${_} ${s}`.trim()}),A=f(()=>{const t="w-5 h-5 border-2 rounded transition-colors duration-200 cursor-pointer focus:ring-2 focus:ring-offset-2 focus:ring-primary",h=x.value?"border-red-500":i.value?"border-primary bg-primary text-white":"border-gray-300 hover:border-primary",_=n.disabled?"opacity-50 cursor-not-allowed":"",s=n.checkboxClass||"";return`${t} ${h} ${_} ${s}`.trim()}),U=t=>{const _=t.target.checked;if(typeof n.modelValue=="boolean")d("update:modelValue",_);else if(Array.isArray(n.modelValue)&&n.checkboxValue!==void 0){const s=[...n.modelValue];if(_)s.includes(n.checkboxValue)||s.push(n.checkboxValue);else{const e=s.indexOf(n.checkboxValue);e>-1&&s.splice(e,1)}d("update:modelValue",s)}d("change",t,_)},T=async t=>{c.value=!1,d("blur",t),await G(),d("validate",n.modelValue)},F=t=>{c.value=!0,d("focus",t)},v=t=>{d("keydown",t),t.key==="Escape"&&c.value&&t.target.blur(),t.key===" "&&(t.preventDefault(),t.target.click())};return C({focus:()=>{const t=document.getElementById(u.value);t==null||t.focus()},blur:()=>{const t=document.getElementById(u.value);t==null||t.blur()},toggle:()=>{const t=document.getElementById(u.value);t==null||t.click()}}),(t,h)=>(b(),y("div",ve,[t.description?(b(),y("p",{key:0,id:r.value,class:"text-sm text-gray-600 mb-2"},V(t.description),9,he)):z("",!0),o("div",xe,[o("div",we,[o("input",{id:u.value,name:t.name,type:"checkbox",disabled:t.disabled,required:t.required,value:t.checkboxValue,checked:i.value,"aria-describedby":m.value,"aria-invalid":x.value,"aria-required":t.required,class:D(A.value),onChange:U,onBlur:T,onFocus:F,onKeydown:v},null,42,$e)]),o("div",Ve,[o("label",{for:u.value,class:D($.value)},[P(V(t.label)+" ",1),t.required?(b(),y("span",_e,"*")):z("",!0)],10,Ce),t.helpText&&!t.error?(b(),y("p",{key:0,id:l.value,class:"text-sm text-gray-500 mt-1"},V(t.helpText),9,ke)):z("",!0)])]),t.error?(b(),y("p",{key:1,id:g.value,role:"alert",class:"text-sm text-danger flex items-center space-x-1 ml-6"},[h[0]||(h[0]=o("svg",{class:"h-4 w-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",null,V(t.error),1)],8,ze)):z("",!0)]))}}),Ie={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Oe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Se={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},Ee={class:"flex items-center justify-between mb-4"},Pe={class:"flex justify-end space-x-3 pt-4"},qe=["disabled"],Ae={key:0,class:"flex items-center"},Ue={key:1},Te=q({__name:"OrganizationCreateModal",emits:["close","created"],setup(I,{emit:C}){const w=C,n=Y(),d=B(!1),c=H({name:"",industry:"",type:""}),u=H({}),g=f(()=>c.name.trim()&&!Object.keys(u).some(m=>u[m])),r=ee.map(m=>({value:m,label:m})),l=m=>{const i=c[m];m==="name"?!i||typeof i!="string"||!i.trim()?u[m]="Organization name is required":i.length>255?u[m]="Organization name must be less than 255 characters":u[m]="":m==="industry"&&(i&&typeof i=="string"&&i.length>255?u[m]="Industry must be less than 255 characters":u[m]="")},x=async()=>{if(!(d.value||!g.value))try{d.value=!0;const m={name:c.name.trim(),industry:c.industry.trim()||null,type:c.type||null,status:"Prospect"},i=await n.createOrganization(m);i?w("created",i):console.error("Failed to create organization")}catch(m){console.error("Error creating organization:",m)}finally{d.value=!1}};return(m,i)=>(b(),y("div",Ie,[o("div",Oe,[o("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:i[0]||(i[0]=$=>m.$emit("close"))}),o("div",Se,[o("div",null,[o("div",Ee,[i[9]||(i[9]=o("h3",{class:"text-lg font-medium text-gray-900",id:"modal-title"}," Create New Organization ",-1)),o("button",{onClick:i[1]||(i[1]=$=>m.$emit("close")),class:"text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600"},[p(O(Z),{class:"h-6 w-6"})])]),o("form",{onSubmit:K(x,["prevent"]),class:"space-y-4"},[p(k,{modelValue:c.name,"onUpdate:modelValue":i[2]||(i[2]=$=>c.name=$),name:"name",label:"Organization Name",required:"",error:u.name,placeholder:"Enter organization name",onBlur:i[3]||(i[3]=$=>l("name"))},null,8,["modelValue","error"]),p(k,{modelValue:c.industry,"onUpdate:modelValue":i[4]||(i[4]=$=>c.industry=$),name:"industry",label:"Industry",error:u.industry,placeholder:"e.g., Restaurant, Healthcare, Education",onBlur:i[5]||(i[5]=$=>l("industry"))},null,8,["modelValue","error"]),p(E,{modelValue:c.type,"onUpdate:modelValue":i[6]||(i[6]=$=>c.type=$),name:"type",label:"Organization Type",options:O(r),error:u.type,placeholder:"Select type...",onBlur:i[7]||(i[7]=$=>l("type"))},null,8,["modelValue","options","error"]),o("div",Pe,[o("button",{type:"button",onClick:i[8]||(i[8]=$=>m.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),o("button",{type:"submit",disabled:d.value||!g.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[d.value?(b(),y("span",Ae,i[10]||(i[10]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),P(" Creating... ",-1)]))):(b(),y("span",Ue," Create Organization "))],8,qe)])],32)])])])]))}}),Fe={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Me={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},De={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full sm:p-6"},je={class:"flex items-center justify-between mb-4"},He={class:"flex justify-end space-x-3 pt-4"},Ke=["disabled"],Le=q({__name:"AddPositionModal",emits:["close","added"],setup(I,{emit:C}){const w=C,n=B(""),d=B(""),c=f(()=>n.value.trim()&&!d.value),u=()=>{const r=n.value.trim();r?r.length>100?d.value="Position title must be less than 100 characters":d.value="":d.value="Position title is required"},g=()=>{if(u(),c.value){const r=n.value.trim().split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" ");w("added",r)}};return(r,l)=>(b(),y("div",Fe,[o("div",Me,[o("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:l[0]||(l[0]=x=>r.$emit("close"))}),o("div",De,[o("div",null,[o("div",je,[l[4]||(l[4]=o("h3",{class:"text-lg font-medium text-gray-900",id:"modal-title"}," Add New Position ",-1)),o("button",{onClick:l[1]||(l[1]=x=>r.$emit("close")),class:"text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600"},[p(O(Z),{class:"h-6 w-6"})])]),o("form",{onSubmit:K(g,["prevent"]),class:"space-y-4"},[o("div",null,[p(k,{modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=x=>n.value=x),name:"position",label:"Position Title",required:"",error:d.value,placeholder:"e.g., F&B Director, Kitchen Manager",onBlur:u},null,8,["modelValue","error"]),l[5]||(l[5]=o("p",{class:"mt-1 text-xs text-gray-500"}," Examples: F&B Director, Kitchen Manager, Food Service Director, Assistant Manager ",-1))]),o("div",He,[o("button",{type:"button",onClick:l[3]||(l[3]=x=>r.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),o("button",{type:"submit",disabled:!c.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}," Add Position ",8,Ke)])],32)])])])]))}}),Re={class:"bg-white shadow-sm rounded-lg border border-gray-200"},Ge={class:"px-6 py-4 border-b border-gray-200"},Ye={class:"text-lg font-medium text-gray-900"},Ze={class:"grid grid-cols-1 gap-6"},We={class:"border-b border-gray-200 pb-6"},Je={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},Xe={class:"space-y-1"},Ne={class:"relative"},et={class:"flex"},tt={class:"flex-1"},ot={class:"space-y-1"},st={class:"relative"},rt={class:"flex"},at={class:"flex-1"},nt={class:"border-b border-gray-200 pb-6"},lt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},it={class:"mt-4"},dt={class:"mt-1"},ut={class:"space-y-4"},ct={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mt={class:"space-y-4"},pt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},gt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bt={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},ft=["disabled"],yt={key:0,class:"flex items-center"},vt={key:1},ht=q({__name:"ContactForm",props:{contact:{default:null},isEditing:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(I,{emit:C}){const w=I,n=C,d=Y(),c=B(!1),u=B(!1),g=B(!1),r=H({first_name:"",last_name:"",organization_id:"",position:"",purchase_influence:"Unknown",decision_authority:"End User",preferred_principals:[],phone:"",email:"",address:"",city:"",state:"",zip_code:"",website:"",account_manager:"",notes:"",is_primary:!1}),l=H({});if(w.isEditing&&w.contact){const s=M.contactToForm(w.contact);Object.assign(r,{...s,phone:s.phone||"",email:s.email||"",address:s.address||"",city:s.city||"",state:s.state||"",zip_code:s.zip_code||"",website:s.website||"",account_manager:s.account_manager||"",notes:s.notes||"",preferred_principals:s.preferred_principals||[]})}const x=f(()=>["first_name","last_name","organization_id","position","purchase_influence","decision_authority"].every(e=>r[e])&&Object.keys(l).every(e=>!l[e])),m=f(()=>d.organizations.map(s=>({value:s.id,label:s.name,subtitle:s.industry||void 0}))),i=B([...te.map(s=>({value:s,label:s}))]),$=oe.map(s=>({value:s,label:s,description:T(s)})),A=se.map(s=>({value:s,label:s,description:F(s)})),U=f(()=>d.organizations.filter(s=>s.name.toLowerCase().includes("principal")||s.status==="Partner"||s.status==="Vendor").map(s=>({value:s.id,label:s.name,subtitle:s.industry||void 0})));function T(s){switch(s){case"High":return"Significant decision-making power";case"Medium":return"Moderate influence on purchases";case"Low":return"Limited purchase decision impact";case"Unknown":return"Influence level needs assessment";default:return""}}function F(s){switch(s){case"Decision Maker":return"Final approval authority";case"Influencer":return"Influences purchase decisions";case"End User":return"Uses the products/services";case"Gatekeeper":return"Controls access to decision makers";default:return""}}const v=async s=>{const e=r[s];try{if(s==="first_name"||s==="last_name"){const a=S.requiredText(e,s.replace("_"," "));l[s]=a||""}else if(s==="organization_id"){const a=S.requiredSelect(e,"Organization");l[s]=a||""}else if(s==="position"){const a=S.requiredText(e,"Position");l[s]=a||""}else if(s==="purchase_influence"||s==="decision_authority"){const a=S.requiredSelect(e,s.replace("_"," "));l[s]=a||""}else if(s==="phone"){const a=S.phone(e);l[s]=a||""}else if(s==="email"){const a=S.email(e);l[s]=a||""}else if(s==="website"){const a=S.website(e);l[s]=a||""}else{const a=S.optionalText(e,s.replace("_"," "));l[s]=a||""}}catch{l[s]="Validation error"}},t=async()=>{if(!c.value)try{c.value=!0;const s={first_name:r.first_name,last_name:r.last_name,organization_id:r.organization_id,position:r.position,purchase_influence:r.purchase_influence,decision_authority:r.decision_authority,preferred_principals:r.preferred_principals,phone:r.phone||null,email:r.email||null,address:r.address||null,city:r.city||null,state:r.state||null,zip_code:r.zip_code||null,website:r.website||null,account_manager:r.account_manager||null,notes:r.notes||null,is_primary:r.is_primary},e=w.isEditing?await M.validateUpdate(s):await M.validateCreate(s);if(!e.isValid){e.errors.forEach(j=>{l[j.field]=j.message});return}const a={...e.data,_principalIds:r.preferred_principals};n("submit",a)}catch(s){console.error("Form validation error:",s)}finally{c.value=!1}},h=s=>{d.organizations.push(s),r.organization_id=s.id,u.value=!1},_=s=>{i.value.push({value:s,label:s}),r.position=s,g.value=!1};return W(async()=>{d.organizations.length===0&&await d.fetchOrganizations()}),J(()=>w.contact,s=>{if(s&&w.isEditing){const e=M.contactToForm(s);Object.assign(r,e)}},{deep:!0}),(s,e)=>(b(),y("div",Re,[o("div",Ge,[o("h3",Ye,V(s.isEditing?"Edit Contact":"Create New Contact"),1),e[38]||(e[38]=o("p",{class:"mt-1 text-sm text-gray-600"}," Add a key contact who influences Principal product purchases within their organization. ",-1))]),o("form",{onSubmit:K(t,["prevent"]),class:"p-6 space-y-6"},[o("div",Ze,[o("div",We,[e[43]||(e[43]=o("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Required Information",-1)),o("div",Je,[p(k,{modelValue:r.first_name,"onUpdate:modelValue":e[0]||(e[0]=a=>r.first_name=a),name:"first_name",label:"First Name",required:"",error:l.first_name,placeholder:"Enter first name",onBlur:e[1]||(e[1]=a=>v("first_name"))},null,8,["modelValue","error"]),p(k,{modelValue:r.last_name,"onUpdate:modelValue":e[2]||(e[2]=a=>r.last_name=a),name:"last_name",label:"Last Name",required:"",error:l.last_name,placeholder:"Enter last name",onBlur:e[3]||(e[3]=a=>v("last_name"))},null,8,["modelValue","error"])]),o("div",Qe,[o("div",Xe,[e[40]||(e[40]=o("label",{for:"organization",class:"block text-sm font-medium text-gray-700"},[P(" Organization "),o("span",{class:"text-red-500"},"*")],-1)),o("div",Ne,[o("div",et,[o("div",tt,[p(E,{modelValue:r.organization_id,"onUpdate:modelValue":e[4]||(e[4]=a=>r.organization_id=a),name:"organization_id",label:"Organization",options:m.value,required:"",error:l.organization_id,placeholder:"Search and select organization...",searchable:"",onBlur:e[5]||(e[5]=a=>v("organization_id"))},null,8,["modelValue","options","error"])]),o("button",{type:"button",onClick:e[6]||(e[6]=a=>u.value=!0),class:"ml-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[p(O(R),{class:"h-4 w-4"}),e[39]||(e[39]=o("span",{class:"ml-1 hidden sm:inline"},"New",-1))])])])]),o("div",ot,[e[42]||(e[42]=o("label",{for:"position",class:"block text-sm font-medium text-gray-700"},[P(" Position "),o("span",{class:"text-red-500"},"*")],-1)),o("div",st,[o("div",rt,[o("div",at,[p(E,{modelValue:r.position,"onUpdate:modelValue":e[7]||(e[7]=a=>r.position=a),name:"position",label:"Position",options:i.value,required:"",error:l.position,placeholder:"Select position...",onBlur:e[8]||(e[8]=a=>v("position")),"allow-custom":""},null,8,["modelValue","options","error"])]),o("button",{type:"button",onClick:e[9]||(e[9]=a=>g.value=!0),class:"ml-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[p(O(R),{class:"h-4 w-4"}),e[41]||(e[41]=o("span",{class:"ml-1 hidden sm:inline"},"Add",-1))])])])])])]),o("div",nt,[e[46]||(e[46]=o("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Purchase Decision Information",-1)),o("div",lt,[p(E,{modelValue:r.purchase_influence,"onUpdate:modelValue":e[10]||(e[10]=a=>r.purchase_influence=a),name:"purchase_influence",label:"Purchase Influence",required:"",options:O($),error:l.purchase_influence,placeholder:"Select influence level...",onBlur:e[11]||(e[11]=a=>v("purchase_influence"))},null,8,["modelValue","options","error"]),p(E,{modelValue:r.decision_authority,"onUpdate:modelValue":e[12]||(e[12]=a=>r.decision_authority=a),name:"decision_authority",label:"Decision Authority",required:"",options:O(A),error:l.decision_authority,placeholder:"Select decision role...",onBlur:e[13]||(e[13]=a=>v("decision_authority"))},null,8,["modelValue","options","error"])]),o("div",it,[e[44]||(e[44]=o("label",{for:"preferred_principals",class:"block text-sm font-medium text-gray-700"}," Preferred Principal Brands ",-1)),o("div",dt,[p(E,{modelValue:r.preferred_principals,"onUpdate:modelValue":e[14]||(e[14]=a=>r.preferred_principals=a),name:"preferred_principals",label:"Preferred Principal Brands",options:U.value,error:l.preferred_principals,placeholder:"Select Principal brands this contact advocates for...",multiple:"",onBlur:e[15]||(e[15]=a=>v("preferred_principals"))},null,8,["modelValue","options","error"])]),e[45]||(e[45]=o("p",{class:"mt-1 text-xs text-gray-500"}," Select the Principal brands this contact champions within their organization ",-1))])]),o("div",ut,[e[48]||(e[48]=o("h4",{class:"text-md font-medium text-gray-900"},"Contact Details (Optional)",-1)),o("div",ct,[p(k,{modelValue:r.phone,"onUpdate:modelValue":e[16]||(e[16]=a=>r.phone=a),name:"phone",label:"Phone Number",type:"tel",error:l.phone,placeholder:"(555) 123-4567",onBlur:e[17]||(e[17]=a=>v("phone"))},null,8,["modelValue","error"]),p(k,{modelValue:r.email,"onUpdate:modelValue":e[18]||(e[18]=a=>r.email=a),name:"email",label:"Email Address",type:"email",error:l.email,placeholder:"contact@organization.com",onBlur:e[19]||(e[19]=a=>v("email"))},null,8,["modelValue","error"])]),o("div",mt,[e[47]||(e[47]=o("h5",{class:"text-sm font-medium text-gray-700"},"Address",-1)),p(k,{modelValue:r.address,"onUpdate:modelValue":e[20]||(e[20]=a=>r.address=a),name:"address",label:"Street Address",error:l.address,placeholder:"123 Main Street",onBlur:e[21]||(e[21]=a=>v("address"))},null,8,["modelValue","error"]),o("div",pt,[p(k,{modelValue:r.city,"onUpdate:modelValue":e[22]||(e[22]=a=>r.city=a),name:"city",label:"City",error:l.city,placeholder:"City",onBlur:e[23]||(e[23]=a=>v("city"))},null,8,["modelValue","error"]),p(k,{modelValue:r.state,"onUpdate:modelValue":e[24]||(e[24]=a=>r.state=a),name:"state",label:"State",error:l.state,placeholder:"State",onBlur:e[25]||(e[25]=a=>v("state"))},null,8,["modelValue","error"]),p(k,{modelValue:r.zip_code,"onUpdate:modelValue":e[26]||(e[26]=a=>r.zip_code=a),name:"zip_code",label:"ZIP Code",error:l.zip_code,placeholder:"12345",onBlur:e[27]||(e[27]=a=>v("zip_code"))},null,8,["modelValue","error"])])]),o("div",gt,[p(k,{modelValue:r.website,"onUpdate:modelValue":e[28]||(e[28]=a=>r.website=a),name:"website",label:"Website",type:"url",error:l.website,placeholder:"https://www.organization.com",onBlur:e[29]||(e[29]=a=>v("website"))},null,8,["modelValue","error"]),p(k,{modelValue:r.account_manager,"onUpdate:modelValue":e[30]||(e[30]=a=>r.account_manager=a),name:"account_manager",label:"Account Manager",error:l.account_manager,placeholder:"Assigned account manager",onBlur:e[31]||(e[31]=a=>v("account_manager"))},null,8,["modelValue","error"])]),p(ye,{modelValue:r.notes,"onUpdate:modelValue":e[32]||(e[32]=a=>r.notes=a),name:"notes",label:"Notes",error:l.notes,placeholder:"Additional notes about this contact...",rows:4,onBlur:e[33]||(e[33]=a=>v("notes"))},null,8,["modelValue","error"]),p(Be,{modelValue:r.is_primary,"onUpdate:modelValue":e[34]||(e[34]=a=>r.is_primary=a),name:"is_primary",label:"Primary Contact",description:"Mark this as the primary contact for the organization"},null,8,["modelValue"])])]),o("div",bt,[o("button",{type:"button",onClick:e[35]||(e[35]=a=>s.$emit("cancel")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),o("button",{type:"submit",disabled:c.value||!x.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[c.value?(b(),y("span",yt,[e[49]||(e[49]=o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),P(" "+V(s.isEditing?"Updating...":"Creating..."),1)])):(b(),y("span",vt,V(s.isEditing?"Update Contact":"Create Contact"),1))],8,ft)])],32),u.value?(b(),L(Te,{key:0,onClose:e[36]||(e[36]=a=>u.value=!1),onCreated:h})):z("",!0),g.value?(b(),L(Le,{key:1,onClose:e[37]||(e[37]=a=>g.value=!1),onAdded:_})):z("",!0)]))}}),xt=re(ht,[["__scopeId","data-v-89be674a"]]),wt={class:"max-w-4xl mx-auto"},$t={class:"mb-8"},Vt={class:"flex items-center space-x-3 mb-4"},Ct={key:0,class:"mt-6 p-4 border border-red-300 rounded-md bg-red-50"},_t={class:"flex"},kt={class:"mt-1 text-sm text-red-700"},Mt=q({__name:"ContactCreateView",setup(I){const C=N(),w=ae(),n=B(null),d=async u=>{try{n.value=null;const g=u._principalIds||[],{_principalIds:r,...l}=u,x=M.formToInsert(l),m=await w.createContact(x);m?(g.length>0&&console.log("Principal IDs would be associated:",g),C.push(`/contacts/${m.id}`)):n.value=w.errorMessage||"Failed to create contact"}catch(g){console.error("Error creating contact:",g),n.value="An unexpected error occurred while creating the contact"}},c=()=>{C.push("/contacts")};return(u,g)=>{const r=X("router-link");return b(),y("div",wt,[o("div",$t,[o("div",Vt,[p(r,{to:"/contacts",class:"text-gray-500 hover:text-gray-700"},{default:Q(()=>[p(O(le),{class:"h-5 w-5"})]),_:1}),g[0]||(g[0]=o("h1",{class:"text-3xl font-bold text-gray-900"},"Create New Contact",-1))]),g[1]||(g[1]=o("p",{class:"text-gray-600"}," Add a key contact who influences Principal product purchases within their organization. ",-1))]),p(xt,{"is-editing":!1,onSubmit:d,onCancel:c}),n.value?(b(),y("div",Ct,[o("div",_t,[p(O(ne),{class:"h-5 w-5 text-red-400 mr-2 mt-0.5"}),o("div",null,[g[2]||(g[2]=o("h3",{class:"text-sm font-medium text-red-800"},"Error creating contact",-1)),o("p",kt,V(n.value),1)])])])):z("",!0)])}}});export{Mt as default};
//# sourceMappingURL=ContactCreateView-Cn97zGo4.js.map
