import{d as e}from"./pinia-CUC4VGP7.js";import{D as t,a}from"./PrincipalDashboard.vue_vue_type_style_index_0_scoped_daf2c332_lang-CaWpxoCZ.js";import{p as o,E as i}from"./EngagementScoreRing-BHsysYHG.js";import{r as n,c as r,b as l,w as s,d as c,C as d,F as u,L as p,D as m,V as g,J as y,U as h,E as f,$ as _,Z as b,W as v,B as x,G as w,_ as k,h as P,y as C,u as M,N as E,K as j,Y as D,X as T,a2 as S,H as I}from"./vue-runtime-Ds28nt_E.js";import{u as V}from"./principalStore-Bil7HxyJ.js";import{P as z}from"./PrincipalSelector-PYcqOzWK.js";import{P as B}from"./PrincipalKPICards-CwCBBfUv.js";import{P as O,a as A,b as L,C as U,M as F}from"./ManagePrincipalProductsButton-BYORYlmg.js";import{P as H}from"./PrincipalProductTable-gjltz5Cg.js";import{D as N}from"./DistributorRelationshipTable-DJHD5sd1.js";import{u as R}from"./vue-router-BP51f1Hv.js";import{S as q}from"./StageTag-MlmUL7r9.js";import{P as Z}from"./ProbabilityBar-RgBmbKwi.js";import{_ as $}from"./_plugin-vue_export-helper-DYAABpgn.js";import{u as Q}from"./productStore-C7_R-7jb.js";import{u as W}from"./interactionStore-BcFjnLm_.js";import{V as K,r as G,b as J,W as Y,M as X,K as ee}from"./heroicons-QXV26b6T.js";import{S as te,Y as ae,h as oe,G as ie,V as ne}from"./headlessui-C8T9vwtP.js";import"./ManagePrincipalProductsButton.vue_vue_type_style_index_0_scoped_f75a9cbf_lang-CSAufz2N.js";import"./supabaseClient-Bh63a8tq.js";/* empty css                                                                       *//* empty css                                                                          */import"./opportunityStore-Cei765hD.js";/* empty css                                                                                     *//* empty css                                                                       */import"./yup-D1qa_jJc.js";import"./organizationsApi-CU0xJvEA.js";import"./TrendIndicator-CbCc-Yc8.js";import"./OpportunityPipelineChart-laHugPq7.js";import"./supabase-BNBjhZ5t.js";import"./index-CocGRfLV.js";const re=e("principalActivity",()=>{const e=n([]),i=n(!1),c=n(null),d=n(null),u=n(null),p=n(null),m=n(null),g=n(""),y=n(null),h=r({get:()=>e.value,set:t=>{e.value=[...t]}}),f=r({get:()=>i.value,set:e=>{i.value=e}}),_=r({get:()=>c.value,set:e=>{c.value=e}}),b=r({get:()=>d.value,set:e=>{d.value=e}}),v=r({get:()=>u.value,set:e=>{u.value=e}}),x=r({get:()=>p.value,set:e=>{p.value=e}}),w=r({get:()=>m.value,set:e=>{m.value=e}}),k=r({get:()=>g.value,set:e=>{g.value=e,O.searchQuery=e}}),P=r({get:()=>y.value||O.lastFetched,set:e=>{y.value=e,O.lastFetched=e}}),C=r(()=>O.principals),M=r(()=>O.metricsSummary),E=r(()=>O.selectedPrincipal),j=r(()=>O.dashboardData),D=r({get:()=>O.analytics,set:e=>{O.analytics=e}}),T=r({get:()=>O.activeFilters,set:e=>{O.activeFilters=e}}),S=r(()=>O.principalOptions),I=r({get:()=>O.loading,set:e=>{O.loading=e}}),V=r(()=>O.dataStale),z=n({page:1,limit:20,total:0,total_pages:0,has_next:!1,has_previous:!1}),B=r({get:()=>z.value||O.pagination,set:e=>{z.value={...e},O.pagination={...e}}}),O=l({principals:[],selectedPrincipal:null,distributorRelationships:[],productPerformance:[],timelineEntries:[],dashboardData:null,principalOptions:[],loading:!1,loadingDashboard:!1,loadingTimeline:!1,calculatingAnalytics:!1,refreshing:!1,processingBatch:!1,error:null,dashboardError:null,timelineError:null,analyticsError:null,searchQuery:"",activeFilters:{...a},sortConfig:{...t},pagination:{page:1,limit:20,total:0,total_pages:0,has_next:!1,has_previous:!1},analytics:null,metricsSummary:null,realTimeMetrics:{last_updated:null,update_frequency:3e4,auto_refresh:!0},batchMode:!1,maxSelections:null,lastFetched:null,cacheDuration:3e5,dataStale:!1});let A=null;const L=r(()=>O.loading||O.loadingDashboard||O.loadingTimeline||O.calculatingAnalytics||O.refreshing||O.processingBatch),U=r(()=>!!(d.value||u.value||p.value||m.value)),F=r(()=>[d.value,u.value,p.value,m.value].filter(Boolean).join("; ")),H=r(()=>O.principals.length),N=r(()=>O.principals.filter(e=>"ACTIVE"===e.activity_status).length),R=r(()=>{const e=T.value;return!!(e.search||e.activity_status?.length||e.organization_status?.length||e.organization_type?.length||e.product_categories?.length||void 0!==e.has_opportunities&&null!==e.has_opportunities||void 0!==e.has_products&&null!==e.has_products||e.engagement_score_range||e.lead_score_range||e.country?.length||void 0!==e.is_principal&&null!==e.is_principal||void 0!==e.is_distributor&&null!==e.is_distributor||e.created_after||e.created_before)}),q=r(()=>e.value.length),Z=r(()=>!!c.value&&e.value.length>=c.value),$=r(()=>e=>O.principals.find(t=>t.principal_id===e)),Q=r(()=>O.principals.filter(t=>e.value.includes(t.principal_id))),W=r(()=>{const e=new Map;return O.principals.forEach(t=>{const a=t.activity_status;e.has(a)||e.set(a,[]),e.get(a).push(t)}),e}),K=r(()=>{const e=new Map;return O.principals.forEach(t=>{const a=t.organization_type||"Unknown";e.has(a)||e.set(a,[]),e.get(a).push(t)}),e}),G=r(()=>[...O.principals].sort((e,t)=>t.engagement_score-e.engagement_score).slice(0,10)),J=r(()=>O.principals.filter(e=>e.follow_ups_required>0)),Y=r(()=>!O.lastFetched||Date.now()-O.lastFetched.getTime()>O.cacheDuration),X=async(e={},t={},a={})=>{O.loading=!0,d.value=null;try{const i={...O.activeFilters,...e},n={...O.sortConfig,...t},r={page:a.page||O.pagination.page,limit:a.limit||O.pagination.limit},l=await o.getPrincipalSummaries(i,n,r);if(l.success&&l.data){const e=l.data;O.principals=e.data,O.pagination=e.pagination,z.value={...e.pagination},O.activeFilters=e.filters,O.sortConfig=e.sort,e.analytics_summary&&(O.metricsSummary={total_principals:e.analytics_summary.total_count,active_this_month:e.analytics_summary.active_count,top_engagement_score:Math.max(...e.data.map(e=>e.engagement_score)),opportunities_created_this_month:e.data.reduce((e,t)=>e+t.opportunities_last_30_days,0),interactions_this_week:Math.floor(e.data.reduce((e,t)=>e+t.interactions_last_30_days,0)/4),pending_follow_ups:e.data.reduce((e,t)=>e+t.follow_ups_required,0)});const t=new Date;y.value=t,O.lastFetched=t,O.dataStale=!1}else d.value=l.error||"Failed to fetch principals"}catch(i){d.value=i instanceof Error?i.message:"Unexpected error occurred"}finally{O.loading=!1}},ee=async()=>{O.loading=!0,d.value=null;try{const e=await o.getDistributorRelationships();e.success&&e.data?O.distributorRelationships=e.data:d.value=e.error||"Failed to fetch distributor relationships"}catch(e){d.value=e instanceof Error?e.message:"Failed to fetch relationships"}finally{O.loading=!1}},te=async e=>{O.loading=!0,d.value=null;try{const t=await o.getProductPerformance(e);t.success&&t.data?O.productPerformance=t.data:d.value=t.error||"Failed to fetch product performance"}catch(t){d.value=t instanceof Error?t.message:"Product performance fetch failed"}finally{O.loading=!1}},ae=async(e=!1)=>{if(!(O.analytics&&!e&&O.realTimeMetrics.last_updated&&Date.now()-O.realTimeMetrics.last_updated.getTime()<O.realTimeMetrics.update_frequency)){O.calculatingAnalytics=!0,m.value=null;try{const e=await o.calculateAnalytics(O.principals);e.success&&e.data?(O.analytics=e.data,O.realTimeMetrics.last_updated=new Date):m.value=e.error||"Analytics calculation failed"}catch(t){m.value=t instanceof Error?t.message:"Analytics calculation error"}finally{O.calculatingAnalytics=!1}}},oe=async e=>{const t=z.value||O.pagination;e<1||e>t.total_pages||await X({},{},{page:e})},ie=t=>{const a=c.value?t.slice(0,c.value):t;e.value=[...a]},ne=()=>{e.value=[]},re=()=>{A||(O.realTimeMetrics.auto_refresh=!0,A=setInterval(()=>{O.realTimeMetrics.auto_refresh&&!L.value&&ae(!0).catch(e=>{})},O.realTimeMetrics.update_frequency))},le=()=>{A&&(clearInterval(A),A=null),O.realTimeMetrics.auto_refresh=!1};s(Y,e=>{O.dataStale=e},{immediate:!0}),O.realTimeMetrics.auto_refresh&&re();const se=()=>{le()};return"undefined"!=typeof window&&window.addEventListener("beforeunload",se),{principals:C,selectedPrincipal:E,distributorRelationships:O.distributorRelationships,productPerformance:O.productPerformance,timelineEntries:O.timelineEntries,dashboardData:j,principalOptions:S,loading:I,loadingDashboard:O.loadingDashboard,loadingTimeline:O.loadingTimeline,calculatingAnalytics:O.calculatingAnalytics,refreshing:O.refreshing,processingBatch:O.processingBatch,error:b,dashboardError:v,timelineError:x,analyticsError:w,searchQuery:k,activeFilters:T,sortConfig:O.sortConfig,pagination:B,analytics:D,metricsSummary:M,realTimeMetrics:O.realTimeMetrics,selectedPrincipalIds:h,batchMode:f,maxSelections:_,lastFetched:P,cacheDuration:O.cacheDuration,dataStale:V,isLoading:L,hasError:U,allErrors:F,principalCount:H,activePrincipalCount:N,hasActiveFilters:R,selectionCount:q,isMaxSelectionsReached:Z,getPrincipalById:$,getSelectedPrincipals:Q,principalsByActivityStatus:W,principalsByOrganizationType:K,topPerformingPrincipals:G,principalsRequiringFollowUp:J,isDataStale:Y,fetchPrincipals:X,fetchPrincipalDashboard:async e=>{O.loadingDashboard=!0,u.value=null;try{const t=await o.getPrincipalDashboard(e);t.success&&t.data?(O.dashboardData=t.data,O.selectedPrincipal=O.dashboardData.summary):u.value=t.error||"Failed to fetch principal dashboard"}catch(t){u.value=t instanceof Error?t.message:"Dashboard fetch failed"}finally{O.loadingDashboard=!1}},fetchPrincipalTimeline:async(e,t=50)=>{O.loadingTimeline=!0,p.value=null;try{const a=await o.getPrincipalTimeline(e,t);a.success&&a.data?O.timelineEntries=a.data:p.value=a.error||"Failed to fetch timeline"}catch(a){p.value=a instanceof Error?a.message:"Timeline fetch failed"}finally{O.loadingTimeline=!1}},fetchDistributorRelationships:ee,fetchProductPerformance:te,calculateAnalytics:ae,refreshMetrics:async()=>{0===O.principals.length?await X():await ae(!0)},searchPrincipals:async(e,t={})=>{g.value=e,O.searchQuery=e;const a={...t,search:e};await X(a,{},{page:1})},updateFilters:async e=>{const t={...O.activeFilters,...e};await X(t,{},{page:1})},clearFilters:async()=>{g.value="",O.searchQuery="",await X(a,{},{page:1})},updateSort:async e=>{const t={...O.sortConfig,...e};await X({},t,{page:1})},goToPage:oe,nextPage:async()=>{const e=z.value||O.pagination;e.has_next&&await oe(e.page+1)},previousPage:async()=>{const e=z.value||O.pagination;e.has_previous&&await oe(e.page-1)},updatePageSize:async e=>{await X({},{},{page:1,limit:e})},toggleSelection:t=>{const a=e.value,o=a.indexOf(t);o>-1?e.value=a.filter((e,t)=>t!==o):(!c.value||a.length<c.value)&&(e.value=[...a,t])},selectPrincipals:ie,clearSelections:ne,selectAll:()=>{const e=O.principals.map(e=>e.principal_id);ie(e)},isSelected:t=>e.value.includes(t),setBatchMode:(e,t)=>{i.value=e,c.value=t||null,e||ne()},batchUpdatePrincipals:async t=>{if(0===e.value.length)return!1;O.processingBatch=!0,d.value=null;try{const a=await o.batchUpdatePrincipals(e.value,t);return a.success?(await X(),ne(),!0):(d.value=a.error||"Batch update failed",!1)}catch(a){return d.value=a instanceof Error?a.message:"Batch update failed",!1}finally{O.processingBatch=!1}},exportSelectedPrincipals:(e="csv")=>{const t=Q.value;if("json"===e)return JSON.stringify(t,null,2);const a=t.map(e=>[e.principal_name,e.organization_type||"",e.activity_status,e.engagement_score.toString(),e.total_interactions.toString(),e.total_opportunities.toString(),e.last_activity_date||""]);let o=["Principal Name","Organization Type","Activity Status","Engagement Score","Total Interactions","Total Opportunities","Last Activity Date"].join(",")+"\n";return o+=a.map(e=>e.map(e=>`"${e}"`).join(",")).join("\n"),o},refreshAll:async()=>{O.refreshing=!0;try{await Promise.all([X(),ee(),te()]),O.principals.length>0&&await ae(!0)}catch(e){d.value=e instanceof Error?e.message:"Refresh failed"}finally{O.refreshing=!1}},clearErrors:()=>{d.value=null,u.value=null,p.value=null,m.value=null},selectPrincipal:e=>{O.selectedPrincipal={...e}},clearSelectedPrincipal:()=>{O.selectedPrincipal=null,O.dashboardData=null},loadActivitySummaries:async(e={},t=!1)=>{t&&(O.lastFetched=null),await X(e),O.principals.length>0&&await ae()},getPrincipalOptions:async e=>{try{const t=await o.getPrincipalOptions(e);return t.success&&t.data?(O.principalOptions=t.data,O.principalOptions):(d.value=t.error||"Failed to fetch principal options",[])}catch(t){return d.value=t instanceof Error?t.message:"Failed to fetch options",[]}},loadEngagementBreakdown:async e=>{O.calculatingAnalytics=!0,m.value=null;try{const t=e?O.principals.filter(t=>t.principal_id===e):O.principals;if(0===t.length)return void(m.value="No principal data available for engagement breakdown");const a={high_engagement:t.filter(e=>e.engagement_score>=80).length,medium_engagement:t.filter(e=>e.engagement_score>=50&&e.engagement_score<80).length,low_engagement:t.filter(e=>e.engagement_score<50).length,total_interactions:t.reduce((e,t)=>e+t.total_interactions,0),avg_engagement_score:t.reduce((e,t)=>e+t.engagement_score,0)/t.length,active_principals:t.filter(e=>"ACTIVE"===e.activity_status).length,principals_with_recent_activity:t.filter(e=>!!e.last_activity_date&&new Date(e.last_activity_date)>new Date(Date.now()-2592e6)).length};O.analytics={...O.analytics,engagement_breakdown:a,total_principals:t.length,last_updated:(new Date).toISOString()},O.realTimeMetrics.last_updated=new Date}catch(t){m.value=t instanceof Error?t.message:"Failed to load engagement breakdown"}finally{O.calculatingAnalytics=!1}},loadPrincipalStats:async e=>{O.calculatingAnalytics=!0,m.value=null;try{const t=e?O.principals.filter(t=>t.principal_id===e):O.principals;if(0===t.length)return void(m.value="No principal data available for statistics");const a=new Date,o=new Date(a.getTime()-2592e6),i=new Date(a.getTime()-7776e6),n={total_principals:t.length,active_principals:t.filter(e=>"ACTIVE"===e.activity_status).length,inactive_principals:t.filter(e=>"INACTIVE"===e.activity_status).length,high_value_principals:t.filter(e=>e.engagement_score>=80).length,avg_engagement_score:Math.round(t.reduce((e,t)=>e+t.engagement_score,0)/t.length*100)/100,total_interactions:t.reduce((e,t)=>e+t.total_interactions,0),interactions_last_30_days:t.reduce((e,t)=>e+t.interactions_last_30_days,0),interactions_last_90_days:t.reduce((e,t)=>e+t.interactions_last_90_days,0),total_opportunities:t.reduce((e,t)=>e+t.total_opportunities,0),active_opportunities:t.reduce((e,t)=>e+t.active_opportunities,0),won_opportunities:t.reduce((e,t)=>e+t.won_opportunities,0),opportunities_last_30_days:t.reduce((e,t)=>e+t.opportunities_last_30_days,0),avg_probability_percent:Math.round(t.reduce((e,t)=>e+(t.avg_probability_percent||0),0)/t.length*100)/100,total_contacts:t.reduce((e,t)=>e+t.contact_count,0),active_contacts:t.reduce((e,t)=>e+t.active_contacts,0),follow_ups_required:t.reduce((e,t)=>e+t.follow_ups_required,0),principals_by_type:t.reduce((e,t)=>{const a=t.organization_type||"Unknown";return e[a]=(e[a]||0)+1,e},{}),principals_by_industry:t.reduce((e,t)=>{const a=t.industry||"Unknown";return e[a]=(e[a]||0)+1,e},{}),top_performing_principals:t.sort((e,t)=>t.engagement_score-e.engagement_score).slice(0,5).map(e=>({principal_id:e.principal_id,principal_name:e.principal_name,engagement_score:e.engagement_score,total_opportunities:e.total_opportunities,total_interactions:e.total_interactions})),recent_activity_trend:{last_30_days:t.filter(e=>!!e.last_activity_date&&new Date(e.last_activity_date)>o).length,last_90_days:t.filter(e=>!!e.last_activity_date&&new Date(e.last_activity_date)>i).length}};O.metricsSummary={total_principals:n.total_principals,active_this_month:n.recent_activity_trend.last_30_days,top_engagement_score:Math.max(...t.map(e=>e.engagement_score)),opportunities_created_this_month:n.opportunities_last_30_days,interactions_this_week:Math.floor(n.interactions_last_30_days/4),pending_follow_ups:n.follow_ups_required},O.analytics={...O.analytics,principal_stats:n,total_principals:n.total_principals,active_principals:n.active_principals,avg_engagement_score:n.avg_engagement_score,total_interactions:n.total_interactions,total_opportunities:n.total_opportunities,last_updated:(new Date).toISOString()},O.realTimeMetrics.last_updated=new Date}catch(t){m.value=t instanceof Error?t.message:"Failed to load principal statistics"}finally{O.calculatingAnalytics=!1}},startRealTimeUpdates:re,stopRealTimeUpdates:le,configureRealTimeUpdates:(e,t)=>{O.realTimeMetrics.auto_refresh=e,t&&(O.realTimeMetrics.update_frequency=t),e?re():le()},cleanup:se}}),le={class:"principal-opportunity-list"},se={key:0,class:"animate-pulse space-y-4"},ce={key:1,class:"text-center py-8"},de={class:"text-sm text-gray-500"},ue={key:2,class:"space-y-3"},pe=["onClick","onKeypress"],me={class:"flex items-start justify-between mb-3"},ge={class:"flex-1 min-w-0"},ye={class:"text-sm font-medium text-gray-900 truncate"},he={class:"flex items-center mt-1 space-x-3 text-xs text-gray-500"},fe={key:0,class:"flex items-center"},_e={key:1,class:"flex items-center"},be={class:"flex items-center justify-between"},ve={class:"flex items-center space-x-4 text-sm text-gray-600"},xe={key:0,class:"flex items-center"},we={class:"text-xs"},ke={key:1,class:"text-xs text-gray-500 truncate max-w-32"},Pe={class:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity"},Ce=["onClick","aria-label"],Me=["onClick","aria-label"],Ee={key:0,class:"mt-3 pt-3 border-t border-gray-100"},je={class:"text-xs text-gray-600 line-clamp-2"},De={key:0,class:"text-center pt-4"},Te=["disabled"],Se={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ie=$(c({t:"PrincipalOpportunityList",props:{principalId:{},principalName:{},loading:{type:Boolean,default:!1},loadingMore:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!1},limit:{default:10},customOpportunities:{default:void 0}},emits:["opportunityClick","edit","delete","load-more"],setup(e,{emit:t}){const a=e,o=t,i=R(),n=r(()=>a.customOpportunities?a.customOpportunities.slice(0,a.limit):[{id:"1",name:`${a.principalName} - Q4 Initiative`,stage:"INITIAL_OUTREACH",probability_percent:25,expected_close_date:"2024-12-31",organization_name:"Sample Organization",organization_type:"DISTRIBUTOR",product_name:"Product A",deal_owner:"John Doe",is_won:!1,principal_name:a.principalName||"Unknown Principal",notes:"Initial outreach completed, waiting for response from decision maker.",product_category:"CHEMICALS",days_since_created:15,days_to_close:45,stage_duration_days:5,created_at:"2024-11-01T10:00:00Z",updated_at:"2024-11-15T14:30:00Z",deleted_at:null,organization_id:"org-1",principal_id:a.principalId},{id:"2",name:`${a.principalName} - Expansion Project`,stage:"SAMPLE_VISIT_OFFERED",probability_percent:60,expected_close_date:"2024-11-30",organization_name:"Another Organization",organization_type:"RETAILER",product_name:"Product B",deal_owner:"Jane Smith",is_won:!1,principal_name:a.principalName||"Unknown Principal",notes:"Sample visit scheduled for next week. High interest level.",product_category:"EQUIPMENT",days_since_created:32,days_to_close:15,stage_duration_days:12,created_at:"2024-10-15T09:00:00Z",updated_at:"2024-11-10T16:45:00Z",deleted_at:null,organization_id:"org-2",principal_id:a.principalId}].filter(()=>a.principalId)),l=e=>{o("opportunityClick",e),i.push(`/opportunities/${e.id}`)},s=e=>{const t=new Date(e);return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==(new Date).getFullYear()?"numeric":void 0})};return(e,t)=>(f(),d("div",le,[e.loading?(f(),d("div",se,[(f(),d(u,null,p(3,e=>m("div",{key:e,class:"bg-gray-200 h-16 rounded-lg"})),64))])):0===n.value.length?(f(),d("div",ce,[t[1]||(t[1]=m("div",{class:"mx-auto h-12 w-12 text-gray-400 mb-4"},[m("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t[2]||(t[2]=m("h3",{class:"text-sm font-medium text-gray-900 mb-1"},"No opportunities found",-1)),m("p",de,g(e.principalName?`No opportunities for ${e.principalName}`:"No opportunities to display"),1)])):(f(),d("div",ue,[(f(!0),d(u,null,p(n.value,e=>(f(),d("div",{key:e.id,class:"opportunity-card bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 hover:shadow-sm transition-all cursor-pointer",onClick:t=>l(e),role:"button",tabindex:"0",onKeypress:[_(t=>l(e),["enter"]),_(b(t=>l(e),["prevent"]),["space"])]},[m("div",me,[m("div",ge,[m("h4",ye,g(e.name),1),m("div",he,[e.organization_name?(f(),d("span",fe,[t[3]||(t[3]=m("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h3M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),h(" "+g(e.organization_name),1)])):y("",!0),e.expected_close_date?(f(),d("span",_e,[t[4]||(t[4]=m("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),h(" "+g(s(e.expected_close_date)),1)])):y("",!0)])]),v(q,{stage:e.stage,size:"sm",class:"ml-2 flex-shrink-0"},null,8,["stage"])]),m("div",be,[m("div",ve,[null!==e.probability_percent?(f(),d("div",xe,[v(Z,{probability:e.probability_percent||0,size:"sm",class:"mr-2"},null,8,["probability"]),m("span",we,g(e.probability_percent)+"%",1)])):y("",!0),e.product_name?(f(),d("span",ke,g(e.product_name),1)):y("",!0)]),m("div",Pe,[m("button",{onClick:b(t=>(e=>{o("edit",e),i.push(`/opportunities/${e.id}/edit`)})(e),["stop"]),class:"p-1 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100","aria-label":`Edit ${e.name}`},t[5]||(t[5]=[m("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Ce),m("button",{onClick:b(t=>(e=>{confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`)&&o("delete",e)})(e),["stop"]),class:"p-1 text-gray-400 hover:text-red-600 rounded-md hover:bg-red-50","aria-label":`Delete ${e.name}`},t[6]||(t[6]=[m("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Me)])]),e.notes?(f(),d("div",Ee,[m("p",je,g(e.notes),1)])):y("",!0)],40,pe))),128)),e.hasMore?(f(),d("div",De,[m("button",{onClick:t[0]||(t[0]=t=>e.$emit("load-more")),disabled:e.loadingMore,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[e.loadingMore?(f(),d("svg",Se,t[7]||(t[7]=[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):y("",!0),h(" "+g(e.loadingMore?"Loading...":"Load More"),1)],8,Te)])):y("",!0)]))]))}}),[["__scopeId","data-v-6d074277"]]),Ve={class:"principal-interaction-list"},ze={key:0,class:"animate-pulse space-y-4"},Be={key:1,class:"text-center py-8"},Oe={class:"text-sm text-gray-500"},Ae={key:2,class:"flow-root"},Le={class:"-mb-8",role:"list"},Ue={key:0,class:"absolute left-4 top-8 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"},Fe={class:"relative flex items-start space-x-3 group"},He={class:"flex-1 min-w-0"},Ne=["onClick","onKeypress"],Re={class:"flex items-start justify-between mb-2"},qe={class:"flex-1 min-w-0"},Ze={class:"text-sm font-medium text-gray-900"},$e={class:"flex items-center mt-1 space-x-3 text-xs text-gray-500"},Qe={class:"flex items-center"},We={key:0,class:"flex items-center"},Ke={key:0,class:"flex items-center ml-2 flex-shrink-0"},Ge={class:"flex items-center space-x-1"},Je={class:"text-xs text-gray-600 ml-1"},Ye={key:0,class:"mb-3"},Xe={class:"text-sm text-gray-700 line-clamp-2"},et={class:"flex items-center justify-between"},tt={class:"flex items-center space-x-2"},at={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},ot={class:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity"},it=["onClick"],nt={key:0,class:"text-center pt-6"},rt=["disabled"],lt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},st=$(c({t:"PrincipalInteractionList",props:{principalId:{},principalName:{},loading:{type:Boolean,default:!1},loadingMore:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!1},limit:{default:10},customInteractions:{default:void 0}},emits:["interactionClick","edit","load-more"],setup(e,{emit:t}){const a=e,o=t,i=R(),n=r(()=>a.customInteractions?a.customInteractions.slice(0,a.limit):[{id:"1",type:"Phone",interaction_type:"Phone",subject:`Follow-up call with ${a.principalName}`,summary:"Discussed upcoming project requirements and timeline. Very positive response, showing strong interest in our solution.",interaction_date:"2024-11-15T14:30:00Z",sample_rating:4,rating:4,follow_up_date:"2024-11-20",follow_up_required:!0,organization_name:"Sample Organization",organization_id:"org-1",principal_id:a.principalId,opportunity_id:"opp-1",status:"COMPLETED",outcome:"POSITIVE",duration_minutes:30,location:null,notes:"Discussed upcoming project requirements and timeline. Very positive response, showing strong interest in our solution.",contact_method:"Phone",participants:null,attachments:null,tags:null,custom_fields:null,next_action:"Follow up next week",follow_up_notes:"Schedule product demo",created_by:null,created_at:"2024-11-15T14:35:00Z",updated_at:"2024-11-15T14:35:00Z",deleted_at:null,days_since_interaction:7,days_until_followup:2},{id:"2",type:"Email",interaction_type:"Email",subject:"Product information request",summary:"Sent detailed product specifications and pricing information as requested.",interaction_date:"2024-11-10T09:15:00Z",sample_rating:null,rating:null,follow_up_date:null,follow_up_required:!1,organization_name:"Another Organization",organization_id:"org-2",principal_id:a.principalId,opportunity_id:"opp-2",status:"COMPLETED",outcome:"NEUTRAL",duration_minutes:null,location:null,notes:"Sent detailed product specifications and pricing information as requested.",contact_method:"Email",participants:null,attachments:null,tags:null,custom_fields:null,next_action:null,follow_up_notes:null,created_by:null,created_at:"2024-11-10T09:20:00Z",updated_at:"2024-11-10T09:20:00Z",deleted_at:null,days_since_interaction:12,days_until_followup:null},{id:"3",type:"Meeting",interaction_type:"Meeting",subject:"Quarterly business review",summary:"Comprehensive review of product performance and relationship status. Identified new opportunities for expansion.",interaction_date:"2024-11-05T11:00:00Z",sample_rating:5,rating:5,follow_up_date:null,follow_up_required:!1,organization_name:"Sample Organization",organization_id:"org-1",principal_id:a.principalId,opportunity_id:"opp-3",status:"COMPLETED",outcome:"POSITIVE",duration_minutes:90,location:"Client Office",notes:"Comprehensive review of product performance and relationship status. Identified new opportunities for expansion.",contact_method:"In Person",participants:null,attachments:null,tags:null,custom_fields:null,next_action:null,follow_up_notes:null,created_by:null,created_at:"2024-11-05T11:30:00Z",updated_at:"2024-11-05T11:30:00Z",deleted_at:null,days_since_interaction:17,days_until_followup:null}].filter(()=>a.principalId)),l=e=>{o("interactionClick",e),i.push(`/interactions/${e.id}`)},s=e=>({Phone:"Phone Call",Email:"Email",Meeting:"Meeting",Demo:"Demo",Event:"Event",Other:"Other",Proposal:"Proposal",Contract:"Contract",Note:"Note",Task:"Task",Social:"Social",Website:"Website"}[e]||e),c=e=>{const t={Phone:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})]),Email:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),Meeting:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})]),Demo:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})]),Event:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),Proposal:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),Contract:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),Note:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),Task:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})]),Social:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})]),Website:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})]),Other:()=>P("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])};return t[e]||t.Other},v=e=>{const t={Phone:"bg-blue-500 text-white",Email:"bg-green-500 text-white",Meeting:"bg-purple-500 text-white",Demo:"bg-orange-500 text-white",Event:"bg-indigo-500 text-white",Proposal:"bg-yellow-500 text-white",Contract:"bg-red-500 text-white",Note:"bg-teal-500 text-white",Task:"bg-pink-500 text-white",Social:"bg-cyan-500 text-white",Website:"bg-emerald-500 text-white",Other:"bg-gray-500 text-white"};return t[e]||t.Other},C=e=>{const t={Phone:"bg-blue-100 text-blue-800",Email:"bg-green-100 text-green-800",Meeting:"bg-purple-100 text-purple-800",Demo:"bg-orange-100 text-orange-800",Event:"bg-indigo-100 text-indigo-800",Proposal:"bg-yellow-100 text-yellow-800",Contract:"bg-red-100 text-red-800",Note:"bg-teal-100 text-teal-800",Task:"bg-pink-100 text-pink-800",Social:"bg-cyan-100 text-cyan-800",Website:"bg-emerald-100 text-emerald-800",Other:"bg-gray-100 text-gray-800"};return t[e]||t.Other},M=e=>{const t=new Date(e);return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==(new Date).getFullYear()?"numeric":void 0})},E=e=>{const t=new Date(e);return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==(new Date).getFullYear()?"numeric":void 0,hour:"numeric",minute:"2-digit"})};return(e,t)=>(f(),d("div",Ve,[e.loading?(f(),d("div",ze,[(f(),d(u,null,p(3,e=>m("div",{key:e,class:"flex items-start space-x-3"},t[1]||(t[1]=[m("div",{class:"w-8 h-8 bg-gray-200 rounded-full flex-shrink-0"},null,-1),m("div",{class:"flex-1 space-y-2"},[m("div",{class:"h-4 bg-gray-200 rounded w-3/4"}),m("div",{class:"h-3 bg-gray-200 rounded w-1/2"})],-1)]))),64))])):0===n.value.length?(f(),d("div",Be,[t[2]||(t[2]=m("div",{class:"mx-auto h-12 w-12 text-gray-400 mb-4"},[m("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),t[3]||(t[3]=m("h3",{class:"text-sm font-medium text-gray-900 mb-1"},"No interactions found",-1)),m("p",Oe,g(e.principalName?`No interactions recorded for ${e.principalName}`:"No interactions to display"),1)])):(f(),d("div",Ae,[m("ul",Le,[(f(!0),d(u,null,p(n.value,(e,a)=>(f(),d("li",{key:e.id,class:"relative"},[a!==n.value.length-1?(f(),d("div",Ue)):y("",!0),m("div",Fe,[m("div",{class:x(["relative flex h-8 w-8 items-center justify-center rounded-full ring-8 ring-white",v(e.interaction_type||e.type||"Other")])},[(f(),w(k(c(e.interaction_type||e.type||"Other")),{class:"h-4 w-4","aria-hidden":"true"}))],2),m("div",He,[m("div",{class:"interaction-card bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 hover:shadow-sm transition-all cursor-pointer",onClick:t=>l(e),role:"button",tabindex:"0",onKeypress:[_(t=>l(e),["enter"]),_(b(t=>l(e),["prevent"]),["space"])]},[m("div",Re,[m("div",qe,[m("h4",Ze,g(e.subject||s(e.interaction_type||e.type||"Other")),1),m("div",$e,[m("span",Qe,[t[4]||(t[4]=m("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),h(" "+g(E(e.interaction_date)),1)]),e.organization_name?(f(),d("span",We,[t[5]||(t[5]=m("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h3M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),h(" "+g(e.organization_name),1)])):y("",!0)])]),e.sample_rating?(f(),d("div",Ke,[m("div",Ge,[(f(),d(u,null,p(5,a=>m("svg",{key:a,class:x(["h-3 w-3",a<=e.sample_rating?"text-yellow-400 fill-current":"text-gray-300"]),viewBox:"0 0 20 20"},t[6]||(t[6]=[m("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64)),m("span",Je,g(e.sample_rating)+"/5",1)])])):y("",!0)]),e.summary?(f(),d("div",Ye,[m("p",Xe,g(e.summary),1)])):y("",!0),m("div",et,[m("div",tt,[m("span",{class:x(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",C(e.interaction_type||e.type||"Other")])},g(s(e.interaction_type||e.type||"Other")),3),e.follow_up_date?(f(),d("span",at,[t[7]||(t[7]=m("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),h(" Follow-up "+g(M(e.follow_up_date)),1)])):y("",!0)]),m("div",ot,[m("button",{onClick:b(t=>(e=>{o("edit",e),i.push(`/interactions/${e.id}/edit`)})(e),["stop"]),class:"p-1 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100","aria-label":"Edit interaction"},t[8]||(t[8]=[m("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,it)])])],40,Ne)])])]))),128))]),e.hasMore?(f(),d("div",nt,[m("button",{onClick:t[0]||(t[0]=t=>e.$emit("load-more")),disabled:e.loadingMore,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[e.loadingMore?(f(),d("svg",lt,t[9]||(t[9]=[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):y("",!0),h(" "+g(e.loadingMore?"Loading...":"Load More"),1)],8,rt)])):y("",!0)]))]))}}),[["__scopeId","data-v-66bdae05"]]),ct={class:"log-principal-interaction-button"},dt=["disabled"],ut={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},pt={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},mt={class:"flex items-center justify-between mb-4"},gt={class:"mt-1 text-sm text-gray-600"},yt={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},ht={class:"flex"},ft={class:"ml-3"},_t={class:"text-sm text-red-700"},bt={class:"space-y-6"},vt={class:"bg-gray-50 p-4 rounded-lg"},xt={class:"flex items-center justify-between"},wt={class:"flex items-center space-x-3"},kt={class:"flex-shrink-0"},Pt={class:"text-sm font-medium text-gray-900"},Ct={class:"text-sm text-gray-600"},Mt={class:"text-right"},Et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jt={key:0,class:"mt-1 text-sm text-red-600"},Dt=["max"],Tt={key:0,class:"mt-1 text-sm text-red-600"},St={key:0,class:"mt-1 text-sm text-red-600"},It={key:0,class:"mt-1 text-sm text-red-600"},Vt={class:"flex items-center space-x-2"},zt=["onClick"],Bt={class:"ml-2 text-sm text-gray-600"},Ot={class:"space-y-2 max-h-32 overflow-y-auto"},At=["value"],Lt={class:"ml-2 text-sm text-gray-700"},Ut={class:"flex items-center"},Ft={key:0,class:"pl-6 space-y-4 border-l-2 border-blue-200"},Ht={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Nt=["min"],Rt={class:"mt-6 flex items-center justify-end space-x-3"},qt=["disabled"],Zt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white rounded-full border-t-transparent"},$t=$(c({t:"LogPrincipalInteractionButton",props:{principal:{default:null}},emits:["logged"],setup(e,{emit:t}){const a=e,o=t,s=Q(),c=W(),_=n(!1),w=n(!1),k=n(null),P=l({type:"",dateTime:"",subject:"",notes:"",rating:0,productIds:[],outcome:"",scheduleFollowUp:!1,followUpType:"Phone",followUpDate:"",followUpNotes:""}),I=l({type:"",dateTime:"",subject:"",notes:""}),V=r(()=>s.products.filter(e=>e.is_active)),z=r(()=>""!==P.type&&""!==P.dateTime&&""!==P.subject.trim()&&""!==P.notes.trim()),B=()=>{a.principal&&(L(),H(),_.value=!0)},O=()=>{_.value=!1,L(),k.value=null},A=async()=>{if(z.value&&a.principal&&(U(),F())){w.value=!0,k.value=null;try{const e={type:P.type,interaction_date:new Date(P.dateTime).toISOString(),subject:P.subject,notes:P.notes,rating:P.rating||null,outcome:P.outcome||null,organization_id:a.principal.principal_id,principal_id:a.principal.principal_id,opportunity_id:null,product_ids:P.productIds.length>0?P.productIds:null,follow_up_required:P.scheduleFollowUp,follow_up_type:P.scheduleFollowUp?P.followUpType:null,follow_up_date:P.scheduleFollowUp&&P.followUpDate?new Date(P.followUpDate).toISOString():null,follow_up_notes:P.scheduleFollowUp?P.followUpNotes:null},t=await c.createInteraction(e);t?(o("logged",t),O()):k.value="Failed to log interaction. Please try again."}catch(e){k.value=e instanceof Error?e.message:"An unexpected error occurred"}finally{w.value=!1}}},L=()=>{P.type="",P.dateTime="",P.subject="",P.notes="",P.rating=0,P.productIds=[],P.outcome="",P.scheduleFollowUp=!1,P.followUpType="Phone",P.followUpDate="",P.followUpNotes="",U()},U=()=>{I.type="",I.dateTime="",I.subject="",I.notes=""},F=()=>{let e=!0;return P.type||(I.type="Interaction type is required",e=!1),P.dateTime||(I.dateTime="Date and time are required",e=!1),P.subject.trim()||(I.subject="Subject is required",e=!1),P.notes.trim()||(I.notes="Detailed notes are required",e=!1),e},H=()=>{const e=new Date;e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),P.dateTime=e.toISOString().slice(0,16)},N=()=>{const e=new Date;return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().slice(0,16)},R=()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]};return C(async()=>{0===s.products.length&&await s.fetchProducts()}),(e,t)=>(f(),d("div",ct,[m("button",{onClick:B,disabled:!e.principal||w.value,class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[v(M(K),{class:"h-4 w-4 mr-1"}),h(" "+g(w.value?"Logging...":"Log Interaction"),1)],8,dt),v(M(te),{as:"template",show:_.value},{default:E(()=>[v(M(ae),{as:"div",class:"relative z-50",onClose:O},{default:E(()=>[v(M(oe),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:E(()=>t[10]||(t[10]=[m("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),o:1,i:[10]}),m("div",ut,[m("div",pt,[v(M(oe),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:E(()=>[v(M(ie),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl sm:p-6"},{default:E(()=>{return[m("div",mt,[m("div",null,[v(M(ne),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:E(()=>t[11]||(t[11]=[h(" Log Interaction ",-1)])),o:1,i:[11]}),m("p",gt," Record an interaction with "+g(e.principal?.principal_name),1)]),m("button",{onClick:O,class:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"},[v(M(G),{class:"h-6 w-6"})])]),k.value?(f(),d("div",yt,[m("div",ht,[v(M(J),{class:"h-5 w-5 text-red-400"}),m("div",ft,[m("p",_t,g(k.value),1)])])])):y("",!0),m("form",{onSubmit:b(A,["prevent"])},[m("div",bt,[m("div",vt,[m("div",xt,[m("div",wt,[m("div",kt,[v(M(Y),{class:"h-10 w-10 text-gray-400"})]),m("div",null,[m("h4",Pt,g(e.principal?.principal_name),1),m("p",Ct,g(e.principal?.organization_type||"Organization"),1)])]),m("div",Mt,[v(i,{score:e.principal?.engagement_score||0,size:"sm"},null,8,["score"]),t[12]||(t[12]=m("p",{class:"text-xs text-gray-500 mt-1"}," Current Score ",-1))])])]),m("div",Et,[m("div",null,[t[14]||(t[14]=m("label",{for:"interaction-type",class:"block text-sm font-medium text-gray-700"}," Interaction Type * ",-1)),j(m("select",{id:"interaction-type","onUpdate:modelValue":t[0]||(t[0]=e=>P.type=e),required:"",class:x(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-300":I.type}])},t[13]||(t[13]=[m("option",{value:""},"Select type...",-1),m("option",{value:"Phone"},"Phone Call",-1),m("option",{value:"Email"},"Email",-1),m("option",{value:"Meeting"},"In-Person Meeting",-1),m("option",{value:"Demo"},"Product Demo",-1),m("option",{value:"Event"},"Sample Visit",-1),m("option",{value:"Other"},"Follow-up",-1)]),2),[[D,P.type]]),I.type?(f(),d("p",jt,g(I.type),1)):y("",!0)]),m("div",null,[t[15]||(t[15]=m("label",{for:"interaction-date",class:"block text-sm font-medium text-gray-700"}," Date & Time * ",-1)),j(m("input",{id:"interaction-date","onUpdate:modelValue":t[1]||(t[1]=e=>P.dateTime=e),type:"datetime-local",required:"",max:N(),class:x(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-300":I.dateTime}])},null,10,Dt),[[T,P.dateTime]]),I.dateTime?(f(),d("p",Tt,g(I.dateTime),1)):y("",!0)])]),m("div",null,[t[16]||(t[16]=m("label",{for:"subject",class:"block text-sm font-medium text-gray-700"}," Subject * ",-1)),j(m("input",{id:"subject","onUpdate:modelValue":t[2]||(t[2]=e=>P.subject=e),type:"text",required:"",class:x(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-300":I.subject}]),placeholder:"Brief description of the interaction..."},null,2),[[T,P.subject]]),I.subject?(f(),d("p",St,g(I.subject),1)):y("",!0)]),m("div",null,[t[17]||(t[17]=m("label",{for:"notes",class:"block text-sm font-medium text-gray-700"}," Detailed Notes * ",-1)),j(m("textarea",{id:"notes","onUpdate:modelValue":t[3]||(t[3]=e=>P.notes=e),rows:"4",required:"",class:x(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-300":I.notes}]),placeholder:"Detailed description of what was discussed, outcomes, next steps..."},null,2),[[T,P.notes]]),I.notes?(f(),d("p",It,g(I.notes),1)):y("",!0)]),m("div",null,[t[18]||(t[18]=m("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Interaction Rating ",-1)),m("div",Vt,[(f(),d(u,null,p(5,e=>m("button",{key:e,type:"button",onClick:t=>P.rating=e,class:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1"},[v(M(X),{class:x(["h-6 w-6 transition-colors duration-150",[e<=P.rating?"text-yellow-400 fill-current":"text-gray-300 hover:text-yellow-200"]])},null,8,["class"])],8,zt)),64)),m("span",Bt,g((a=P.rating,{0:"No rating",1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"}[a]||"No rating")),1)])]),m("div",null,[t[19]||(t[19]=m("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Products Discussed ",-1)),m("div",Ot,[(f(!0),d(u,null,p(V.value,e=>(f(),d("label",{key:e.id,class:"flex items-center p-2 rounded-md hover:bg-gray-50 cursor-pointer"},[j(m("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>P.productIds=e),type:"checkbox",value:e.id,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,At),[[S,P.productIds]]),m("span",Lt,g(e.name),1)]))),128))])]),m("div",null,[t[21]||(t[21]=m("label",{for:"outcome",class:"block text-sm font-medium text-gray-700"}," Outcome ",-1)),j(m("select",{id:"outcome","onUpdate:modelValue":t[5]||(t[5]=e=>P.outcome=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},t[20]||(t[20]=[m("option",{value:""},"Select outcome...",-1),m("option",{value:"POSITIVE"},"Positive - Strong Interest",-1),m("option",{value:"NEUTRAL"},"Neutral - Information Gathering",-1),m("option",{value:"NEGATIVE"},"Negative - Not Interested",-1),m("option",{value:"FOLLOW_UP_REQUIRED"},"Follow-up Required",-1),m("option",{value:"SAMPLE_REQUESTED"},"Sample Requested",-1),m("option",{value:"QUOTE_REQUESTED"},"Quote Requested",-1)]),512),[[D,P.outcome]])]),m("div",Ut,[j(m("input",{id:"schedule-follow-up","onUpdate:modelValue":t[6]||(t[6]=e=>P.scheduleFollowUp=e),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[S,P.scheduleFollowUp]]),t[22]||(t[22]=m("label",{for:"schedule-follow-up",class:"ml-2 block text-sm text-gray-700"}," Schedule follow-up activity ",-1))]),P.scheduleFollowUp?(f(),d("div",Ft,[m("div",Ht,[m("div",null,[t[24]||(t[24]=m("label",{for:"follow-up-type",class:"block text-sm font-medium text-gray-700"}," Follow-up Type ",-1)),j(m("select",{id:"follow-up-type","onUpdate:modelValue":t[7]||(t[7]=e=>P.followUpType=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},t[23]||(t[23]=[m("option",{value:"Phone"},"Phone Call",-1),m("option",{value:"Email"},"Email",-1),m("option",{value:"Meeting"},"In-Person Meeting",-1),m("option",{value:"Event"},"Sample Delivery",-1)]),512),[[D,P.followUpType]])]),m("div",null,[t[25]||(t[25]=m("label",{for:"follow-up-date",class:"block text-sm font-medium text-gray-700"}," Follow-up Date ",-1)),j(m("input",{id:"follow-up-date","onUpdate:modelValue":t[8]||(t[8]=e=>P.followUpDate=e),type:"date",min:R(),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,8,Nt),[[T,P.followUpDate]])])]),m("div",null,[t[26]||(t[26]=m("label",{for:"follow-up-notes",class:"block text-sm font-medium text-gray-700"}," Follow-up Notes ",-1)),j(m("textarea",{id:"follow-up-notes","onUpdate:modelValue":t[9]||(t[9]=e=>P.followUpNotes=e),rows:"2",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"What should be discussed in the follow-up..."},null,512),[[T,P.followUpNotes]])])])):y("",!0)]),m("div",Rt,[m("button",{type:"button",onClick:O,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),m("button",{type:"submit",disabled:w.value||!z.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[w.value?(f(),d("div",Zt)):y("",!0),h(" "+g(w.value?"Logging...":"Log Interaction"),1)],8,qt)])],32)];var a}),o:1})]),o:1})])])]),o:1})]),o:1},8,["show"])]))}}),[["__scopeId","data-v-a3ed6d65"]]),Qt={class:"principal-dashboard bg-gray-50 min-h-screen",role:"main","aria-label":"Principal Activity Dashboard"},Wt={class:"bg-white shadow-sm border-b border-gray-200"},Kt={class:"px-4 sm:px-6 lg:px-8"},Gt={class:"py-6"},Jt={class:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},Yt={class:"mt-6"},Xt={key:0,class:"flex items-center justify-center py-12"},ea={key:1,class:"px-4 sm:px-6 lg:px-8 py-8"},ta={class:"bg-red-50 border border-red-200 rounded-md p-4"},aa={class:"flex"},oa={class:"ml-3"},ia={class:"mt-1 text-sm text-red-700"},na={key:2,class:"px-4 sm:px-6 lg:px-8 py-8"},ra={class:"mb-8"},la={key:0,class:"space-y-8"},sa={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ca={class:"px-6 py-4 border-b border-gray-200"},da={class:"text-sm text-gray-600 mt-1"},ua={class:"p-6"},pa={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},ma={class:"bg-white rounded-lg shadow-sm border border-gray-200 h-full"},ga={class:"p-6"},ya={class:"bg-white rounded-lg shadow-sm border border-gray-200 h-full"},ha={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},fa={class:"p-6"},_a={class:"grid grid-cols-1 xl:grid-cols-2 gap-8"},ba={class:"bg-white rounded-lg shadow-sm border border-gray-200"},va={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},xa={class:"p-6"},wa={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ka={class:"p-6"},Pa={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Ca={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},Ma={class:"p-6"},Ea={key:1,class:"text-center py-12"},ja=$(c({t:"PrincipalDashboard",setup(e){const t=V(),a=re(),o=n(""),i=n(!1),l=n(null),c=n(!1),u=n(!1),p=n(!1),y=n(!1),h=n(!1),_=n(!1),b=n(!1),x=n(!1),w=n([]),k=n([]),P=n([]),E=n([]),j=n(null),D=n(null),T=n(null),S=r(()=>!!l.value||a.hasError),I=r(()=>{if(!o.value)return null;const e=t.getPrincipalById(o.value);return e?(e=>({principal_id:e.id,principal_name:e.name,principal_status:null,organization_type:e.organization_type,industry:null,organization_size:null,is_active:e.is_active,lead_score:null,contact_count:e.contact_count,active_contacts:0,primary_contact_name:null,primary_contact_email:null,last_contact_update:null,total_interactions:0,interactions_last_30_days:0,interactions_last_90_days:0,last_interaction_date:null,last_interaction_type:null,next_follow_up_date:null,avg_interaction_rating:0,positive_interactions:0,follow_ups_required:0,total_opportunities:e.opportunity_count,active_opportunities:0,won_opportunities:0,opportunities_last_30_days:0,latest_opportunity_stage:null,latest_opportunity_date:null,avg_probability_percent:0,highest_value_opportunity:null,product_count:e.product_count,active_product_count:0,product_categories:null,primary_product_category:null,is_principal:!0,is_distributor:!1,last_activity_date:null,activity_status:"NO_ACTIVITY",engagement_score:0,principal_created_at:e.created_at,principal_updated_at:e.updated_at,summary_generated_at:(new Date).toISOString()}))(e):null}),R=async e=>{e?(o.value=e.principal_id,await ie(e.principal_id)):(o.value="",ue())},q=async()=>{o.value&&await ie(o.value),await oe()},Z=e=>{e||I.value},$=()=>{},Q=()=>{},W=()=>{o.value&&ce(o.value)},K=e=>{},G=()=>{},Y=e=>{},X=e=>{},te=()=>{o.value&&(ne(o.value),de(o.value))},ae=()=>{o.value&&le(o.value)},oe=async()=>{u.value=!0,l.value=null;try{await a.loadEngagementBreakdown(),await a.loadPrincipalStats(),await a.loadActivitySummaries(),a.analytics&&(j.value=a.analytics.engagement_breakdown||null,D.value=a.analytics.principal_stats||null),w.value=a.principals}catch(e){l.value=e instanceof Error?e.message:"Failed to load dashboard data"}finally{u.value=!1}},ie=async e=>{i.value=!0,l.value=null;try{await Promise.all([ne(e),le(e),se(e),ce(e),de(e)])}catch(t){l.value=t instanceof Error?t.message:"Failed to load principal data"}finally{i.value=!1}},ne=async e=>{y.value=!0;try{await a.fetchPrincipalTimeline([e]),k.value=a.timelineEntries}catch(t){}finally{y.value=!1}},le=async e=>{_.value=!0;try{await a.fetchProductPerformance([e]),P.value=a.productPerformance}catch(t){}finally{_.value=!1}},se=async e=>{b.value=!0;try{await a.fetchDistributorRelationships(),E.value=a.distributorRelationships}catch(t){}finally{b.value=!1}},ce=async e=>{h.value=!0;try{await new Promise(e=>setTimeout(e,500))}finally{h.value=!1}},de=async e=>{x.value=!0;try{await new Promise(e=>setTimeout(e,500))}finally{x.value=!1}},ue=()=>{k.value=[],P.value=[],E.value=[]};return C(async()=>{await oe(),await t.fetchPrincipalOptions()}),s([()=>t.error,()=>a.error],([e,t])=>{e?l.value=e:t&&(l.value=t)}),(e,t)=>(f(),d("div",Qt,[m("div",Wt,[m("div",Kt,[m("div",Gt,[m("div",Jt,[t[2]||(t[2]=m("div",null,[m("h1",{class:"text-2xl font-bold text-gray-900"},"Principal Activity Dashboard"),m("p",{class:"mt-1 text-sm text-gray-500"}," Comprehensive relationship insights and performance analytics ")],-1)),v(O,{"selected-principal":I.value,onRefresh:q,onCreateOpportunity:Z,onLogInteraction:$,onManageProducts:Q},null,8,["selected-principal"])]),m("div",Yt,[v(z,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),loading:c.value,error:T.value,onChange:R},null,8,["modelValue","loading","error"])])])])]),i.value?(f(),d("div",Xt,t[3]||(t[3]=[m("div",{class:"flex items-center space-x-3"},[m("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),m("span",{class:"text-gray-600"},"Loading principal analytics...")],-1)]))):S.value?(f(),d("div",ea,[m("div",ta,[m("div",aa,[v(M(J),{class:"h-5 w-5 text-red-400"}),m("div",oa,[t[4]||(t[4]=m("h3",{class:"text-sm font-medium text-red-800"},"Error Loading Data",-1)),m("p",ia,g(l.value),1),m("button",{onClick:q,class:"mt-2 bg-red-100 px-3 py-1 rounded text-sm text-red-800 hover:bg-red-200"}," Try Again ")])])])])):(f(),d("div",na,[m("section",ra,[v(B,{"activity-summary":w.value,"engagement-breakdown":j.value,stats:D.value,loading:u.value},null,8,["activity-summary","engagement-breakdown","stats","loading"])]),I.value?(f(),d("div",la,[m("section",null,[m("div",sa,[m("div",ca,[t[5]||(t[5]=m("h2",{class:"text-lg font-semibold text-gray-900"},"Performance Analytics",-1)),m("p",da," Engagement trends and performance metrics for "+g(I.value.principal_name),1)]),m("div",ua,[v(A,{"principal-id":o.value,"activity-data":k.value,"product-performance":P.value,loading:p.value},null,8,["principal-id","activity-data","product-performance","loading"])])])]),m("div",pa,[m("section",null,[m("div",ma,[t[6]||(t[6]=m("div",{class:"px-6 py-4 border-b border-gray-200"},[m("h3",{class:"text-lg font-medium text-gray-900"},"Activity Timeline"),m("p",{class:"text-sm text-gray-600 mt-1"},"Recent interactions and milestones")],-1)),m("div",ga,[v(L,{"principal-id":o.value,"timeline-data":k.value,loading:y.value},null,8,["principal-id","timeline-data","loading"])])])]),m("section",null,[m("div",ya,[m("div",ha,[t[7]||(t[7]=m("div",null,[m("h3",{class:"text-lg font-medium text-gray-900"},"Active Opportunities"),m("p",{class:"text-sm text-gray-600 mt-1"},"Current sales pipeline")],-1)),v(U,{principal:I.value,onCreated:W},null,8,["principal"])]),m("div",fa,[v(Ie,{"principal-id":o.value,loading:h.value},null,8,["principal-id","loading"])])])])]),m("div",_a,[m("section",null,[m("div",ba,[m("div",va,[t[8]||(t[8]=m("div",null,[m("h3",{class:"text-lg font-medium text-gray-900"},"Product Performance"),m("p",{class:"text-sm text-gray-600 mt-1"},"Product associations and success rates")],-1)),v(F,{principal:I.value,onUpdated:ae},null,8,["principal"])]),m("div",xa,[v(H,{products:P.value,loading:_.value,"principal-name":I.value?.principal_name,onProductSelected:K,onCreateOpportunity:t[1]||(t[1]=e=>Z(I.value)),onExportData:G},null,8,["products","loading","principal-name"])])])]),m("section",null,[m("div",wa,[t[9]||(t[9]=m("div",{class:"px-6 py-4 border-b border-gray-200"},[m("h3",{class:"text-lg font-medium text-gray-900"},"Distributor Network"),m("p",{class:"text-sm text-gray-600 mt-1"},"Relationship hierarchy and connections")],-1)),m("div",ka,[v(N,{relationships:E.value,loading:b.value,"principal-name":I.value?.principal_name,onExportData:G,onDistributorSelected:Y,onContactDistributor:X},null,8,["relationships","loading","principal-name"])])])])]),m("section",null,[m("div",Pa,[m("div",Ca,[t[10]||(t[10]=m("div",null,[m("h3",{class:"text-lg font-medium text-gray-900"},"Recent Interactions"),m("p",{class:"text-sm text-gray-600 mt-1"},"Communication history and ratings")],-1)),v($t,{principal:I.value,onLogged:te},null,8,["principal"])]),m("div",Ma,[v(st,{"principal-id":o.value,loading:x.value},null,8,["principal-id","loading"])])])])])):(f(),d("div",Ea,[v(M(ee),{class:"mx-auto h-12 w-12 text-gray-400"}),t[11]||(t[11]=m("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"Select a Principal",-1)),t[12]||(t[12]=m("p",{class:"mt-2 text-gray-600"}," Choose a principal from the dropdown above to view their activity dashboard and analytics. ",-1))]))]))]))}}),[["__scopeId","data-v-daf2c332"]]),Da={class:"principal-dashboard-view"},Ta={class:"flex items-center justify-between mb-6"},Sa={class:"flex items-center space-x-3"},Ia=$(c({t:"PrincipalDashboardView",setup(e){const t=re();return C(async()=>{try{await t.loadActivitySummaries()}catch(e){}}),(e,t)=>{const a=I("router-link");return f(),d("div",Da,[m("div",Ta,[t[2]||(t[2]=m("div",null,[m("h1",{class:"text-2xl font-bold text-gray-900"},"Principal Activity Dashboard"),m("p",{class:"mt-1 text-sm text-gray-500"}," Comprehensive relationship insights and performance analytics ")],-1)),m("div",Sa,[v(a,{to:"/interactions",class:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:E(()=>t[0]||(t[0]=[m("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),h(" Interactions ",-1)])),o:1,i:[0]}),v(a,{to:"/opportunities",class:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:E(()=>t[1]||(t[1]=[m("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),h(" Opportunities ",-1)])),o:1,i:[1]})])]),v(M(ja))])}}}),[["__scopeId","data-v-32f308e0"]]);export{Ia as default};
