import{u as e}from"./vue-router-BP51f1Hv.js";import{u as t}from"./interactionStore-jdpdV19I.js";import{b as s,g as a,a as r}from"./interactions-BneQrg6J.js";import{b as o,n as l,f as n,R as i,S as d,s as c,e as u,L as m,J as x,p as g,K as y,j as p,k as f,m as b,M as v,a as h,c as w}from"./heroicons-QXV26b6T.js";import{d as k,r as _,c as C,y as D,C as E,J as j,D as I,U as L,W as S,u as O,V as M,G as N,_ as U,H as T,N as A,B as P,F as R,L as F,E as H}from"./vue-runtime-Ds28nt_E.js";import{_ as V}from"./_plugin-vue_export-helper-DYAABpgn.js";import"./pinia-CUC4VGP7.js";import"./supabaseClient-BTp2rsYU.js";import"./supabase-b_GQhF-l.js";import"./yup-D02u5inE.js";const $={class:"interaction-detail-view"},B={key:0,class:"flex items-center justify-center py-12"},W={key:1,class:"rounded-md bg-red-50 p-4"},z={class:"flex"},J={class:"ml-3"},q={class:"mt-2 text-sm text-red-700"},G={key:2,class:"space-y-6"},K={class:"bg-white shadow rounded-lg"},Q={class:"px-6 py-4 border-b border-gray-200"},X={class:"flex items-center justify-between"},Y={class:"flex items-center space-x-3"},Z={class:"flex-shrink-0 h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},ee={class:"text-2xl font-bold text-gray-900"},te={class:"text-sm text-gray-500"},se={class:"flex items-center space-x-3"},ae={class:"px-6 py-4"},re={class:"grid grid-cols-2 gap-6 lg:grid-cols-4"},oe={class:"mt-1"},le={key:0},ne={class:"mt-1"},ie={key:1},de={class:"mt-1 flex items-center"},ce={class:"flex"},ue={class:"ml-1 text-sm text-gray-600"},me={key:2},xe={class:"mt-1 text-sm text-gray-900"},ge={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},ye={class:"lg:col-span-2 space-y-6"},pe={class:"bg-white shadow rounded-lg"},fe={class:"px-6 py-4"},be={key:0,class:"flex items-center"},ve={class:"text-sm text-gray-500"},he={key:1,class:"text-sm text-gray-500"},we={class:"bg-white shadow rounded-lg"},ke={class:"px-6 py-4"},_e={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Ce={class:"mt-1 text-sm text-gray-900"},De={key:0},Ee={class:"mt-1 text-sm text-gray-900"},je={key:1},Ie={class:"mt-1 text-sm text-gray-900"},Le={key:2},Se={class:"mt-1 text-sm text-gray-900"},Oe={key:0,class:"bg-white shadow rounded-lg"},Me={class:"px-6 py-4"},Ne={class:"text-sm text-gray-900 whitespace-pre-wrap"},Ue={key:1,class:"bg-white shadow rounded-lg"},Te={class:"px-6 py-4"},Ae={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Pe={key:0},Re={class:"mt-1 text-sm text-gray-900"},Fe={key:0,class:"ml-2 text-xs text-red-600 font-medium"},He={key:1,class:"ml-2 text-xs text-orange-600 font-medium"},Ve={key:2,class:"ml-2 text-xs text-gray-600"},$e={key:1},Be={class:"mt-1 text-sm text-gray-900"},We={key:0,class:"mt-4"},ze={class:"mt-1 text-sm text-gray-900 whitespace-pre-wrap"},Je={class:"mt-4 flex space-x-3"},qe={class:"space-y-6"},Ge={class:"bg-white shadow rounded-lg"},Ke={class:"px-6 py-4 space-y-3"},Qe={key:0,class:"bg-white shadow rounded-lg"},Xe={class:"px-6 py-4"},Ye={class:"flex flex-wrap gap-2"},Ze={class:"bg-white shadow rounded-lg"},et={class:"px-6 py-4"},tt={class:"space-y-3"},st={class:"mt-1 text-sm text-gray-900"},at={key:0},rt={class:"mt-1 text-sm text-gray-900"},ot={key:1},lt={class:"mt-1 text-sm text-gray-900"},nt={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},it={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},dt={class:"mt-3 text-center"},ct={class:"flex justify-center space-x-3 mt-6"},ut=V(k({t:"InteractionDetailView",props:{interactionId:{}},setup(w){const k=w,V=e(),ut=t(),mt=_(!1),xt=C(()=>ut.selectedInteraction),gt=C(()=>ut.loading),yt=C(()=>ut.error),pt=C(()=>{if(!xt.value?.follow_up_date)return null;const e=new Date(xt.value.follow_up_date),t=new Date,s=e.getTime()-t.getTime();return Math.ceil(s/864e5)}),ft=C(()=>null!==pt.value&&pt.value<0),bt=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),vt=()=>{mt.value=!0},ht=async()=>{await ut.deleteInteraction(k.interactionId)&&V.push("/interactions"),mt.value=!1},wt=()=>{V.push(`/interactions/${k.interactionId}/edit?step=3&status=completed`)},kt=()=>{V.push(`/interactions/${k.interactionId}/edit?step=3&follow_up=true`)},_t=async()=>{xt.value&&await ut.updateInteraction(k.interactionId,{follow_up_required:!1,follow_up_date:null,follow_up_notes:null,next_action:null})&&await ut.fetchInteractionById(k.interactionId)},Ct=()=>{V.push(`/interactions/${k.interactionId}/edit?step=3&reschedule=true`)};return D(async()=>{await ut.fetchInteractionById(k.interactionId)}),(e,t)=>{const w=T("router-link");return H(),E("div",$,[gt.value?(H(),E("div",B,t[1]||(t[1]=[I("div",{class:"inline-flex items-center"},[I("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[I("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),I("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),L(" Loading interaction... ")],-1)]))):yt.value?(H(),E("div",W,[I("div",z,[S(O(o),{class:"h-5 w-5 text-red-400"}),I("div",J,[t[2]||(t[2]=I("h3",{class:"text-sm font-medium text-red-800"},"Error",-1)),I("div",q,M(yt.value),1)])])])):xt.value?(H(),E("div",G,[I("div",K,[I("div",Q,[I("div",X,[I("div",Y,[I("div",Z,[(H(),N(U((D=xt.value.type,{Email:f,Phone:p,Meeting:y,Demo:g,Proposal:g,Contract:g,Note:m,Task:u,Event:x,Social:m,Website:m,Other:u}[D]||m)),{class:"h-5 w-5 text-blue-600"}))]),I("div",null,[I("h1",ee,M(xt.value.subject),1),I("p",te,M(O(s)(xt.value.type))+" • "+M((C=xt.value.interaction_date,new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))),1)])]),I("div",se,[S(w,{to:`/interactions/${xt.value.id}/edit`,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:A(()=>[S(O(b),{class:"h-4 w-4 mr-2"}),t[3]||(t[3]=L(" Edit ",-1))]),o:1,l:[3]},8,["to"]),I("button",{onClick:vt,type:"button",class:"inline-flex items-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[S(O(l),{class:"h-4 w-4 mr-2"}),t[4]||(t[4]=L(" Delete ",-1))])])])]),I("div",ae,[I("div",re,[I("div",null,[t[5]||(t[5]=I("dt",{class:"text-sm font-medium text-gray-500"},"Status",-1)),I("dd",oe,[I("span",{class:P([(_=xt.value.status||"",{SCHEDULED:"bg-blue-100 text-blue-800",COMPLETED:"bg-green-100 text-green-800",CANCELLED:"bg-gray-100 text-gray-800",NO_SHOW:"bg-red-100 text-red-800"}[_]||"bg-gray-100 text-gray-800"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},M(xt.value.status?O(a)(xt.value.status):"Unknown"),3)])]),xt.value.outcome?(H(),E("div",le,[t[6]||(t[6]=I("dt",{class:"text-sm font-medium text-gray-500"},"Outcome",-1)),I("dd",ne,[I("span",{class:P([(k=xt.value.outcome,{POSITIVE:"bg-green-100 text-green-800",NEUTRAL:"bg-yellow-100 text-yellow-800",NEGATIVE:"bg-red-100 text-red-800",NEEDS_FOLLOW_UP:"bg-orange-100 text-orange-800"}[k]||"bg-gray-100 text-gray-800"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},M(O(r)(xt.value.outcome)),3)])])):j("",!0),xt.value.rating?(H(),E("div",ie,[t[7]||(t[7]=I("dt",{class:"text-sm font-medium text-gray-500"},"Rating",-1)),I("dd",de,[I("div",ce,[(H(),E(R,null,F(5,e=>S(O(v),{key:e,class:P([e<=xt.value.rating?"text-yellow-400":"text-gray-300","h-4 w-4"])},null,8,["class"])),64))]),I("span",ue,M(xt.value.rating)+"/5",1)])])):j("",!0),xt.value.duration_minutes?(H(),E("div",me,[t[8]||(t[8]=I("dt",{class:"text-sm font-medium text-gray-500"},"Duration",-1)),I("dd",xe,M(xt.value.duration_minutes)+" minutes",1)])):j("",!0)])])]),I("div",ge,[I("div",ye,[I("div",pe,[t[9]||(t[9]=I("div",{class:"px-6 py-4 border-b border-gray-200"},[I("h3",{class:"text-lg font-medium text-gray-900"},"Related Opportunity")],-1)),I("div",fe,[xt.value.opportunity?(H(),E("div",be,[S(O(n),{class:"h-8 w-8 text-gray-400 mr-3"}),I("div",null,[S(w,{to:`/opportunities/${xt.value.opportunity.id}`,class:"text-lg font-medium text-blue-600 hover:text-blue-800"},{default:A(()=>[L(M(xt.value.opportunity.name),1)]),o:1},8,["to"]),I("p",ve,M(xt.value.opportunity.organization?.name)+" • Stage: "+M(xt.value.opportunity.stage),1)])])):(H(),E("div",he," Opportunity information not available "))])]),I("div",we,[t[14]||(t[14]=I("div",{class:"px-6 py-4 border-b border-gray-200"},[I("h3",{class:"text-lg font-medium text-gray-900"},"Interaction Details")],-1)),I("div",ke,[I("dl",_e,[I("div",null,[t[10]||(t[10]=I("dt",{class:"text-sm font-medium text-gray-500"},"Date & Time",-1)),I("dd",Ce,M(bt(xt.value.interaction_date)),1)]),xt.value.contact_method?(H(),E("div",De,[t[11]||(t[11]=I("dt",{class:"text-sm font-medium text-gray-500"},"Contact Method",-1)),I("dd",Ee,M(xt.value.contact_method),1)])):j("",!0),xt.value.location?(H(),E("div",je,[t[12]||(t[12]=I("dt",{class:"text-sm font-medium text-gray-500"},"Location",-1)),I("dd",Ie,M(xt.value.location),1)])):j("",!0),xt.value.participants&&xt.value.participants.length>0?(H(),E("div",Le,[t[13]||(t[13]=I("dt",{class:"text-sm font-medium text-gray-500"},"Participants",-1)),I("dd",Se,M(Array.isArray(xt.value.participants)?xt.value.participants.join(", "):xt.value.participants),1)])):j("",!0)])])]),xt.value.notes?(H(),E("div",Oe,[t[15]||(t[15]=I("div",{class:"px-6 py-4 border-b border-gray-200"},[I("h3",{class:"text-lg font-medium text-gray-900"},"Notes")],-1)),I("div",Me,[I("p",Ne,M(xt.value.notes),1)])])):j("",!0),xt.value.follow_up_required?(H(),E("div",Ue,[t[21]||(t[21]=I("div",{class:"px-6 py-4 border-b border-gray-200"},[I("h3",{class:"text-lg font-medium text-gray-900"},"Follow-up Required")],-1)),I("div",Te,[I("dl",Ae,[xt.value.follow_up_date?(H(),E("div",Pe,[t[16]||(t[16]=I("dt",{class:"text-sm font-medium text-gray-500"},"Follow-up Date",-1)),I("dd",Re,[L(M(bt(xt.value.follow_up_date))+" ",1),ft.value?(H(),E("span",Fe," ("+M(Math.abs(pt.value||0))+" days overdue) ",1)):0===pt.value?(H(),E("span",He," (Due today) ")):null!==pt.value&&pt.value>0?(H(),E("span",Ve," (In "+M(pt.value)+" days) ",1)):j("",!0)])])):j("",!0),xt.value.next_action?(H(),E("div",$e,[t[17]||(t[17]=I("dt",{class:"text-sm font-medium text-gray-500"},"Next Action",-1)),I("dd",Be,M(xt.value.next_action),1)])):j("",!0)]),xt.value.follow_up_notes?(H(),E("div",We,[t[18]||(t[18]=I("dt",{class:"text-sm font-medium text-gray-500"},"Follow-up Notes",-1)),I("dd",ze,M(xt.value.follow_up_notes),1)])):j("",!0),I("div",Je,[I("button",{onClick:_t,type:"button",class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-full text-green-700 bg-green-100 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},[S(O(i),{class:"h-3 w-3 mr-1"}),t[19]||(t[19]=L(" Mark Complete ",-1))]),I("button",{onClick:Ct,type:"button",class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-full text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[S(O(d),{class:"h-3 w-3 mr-1"}),t[20]||(t[20]=L(" Reschedule ",-1))])])])])):j("",!0)]),I("div",qe,[I("div",Ge,[t[25]||(t[25]=I("div",{class:"px-6 py-4 border-b border-gray-200"},[I("h3",{class:"text-lg font-medium text-gray-900"},"Quick Actions")],-1)),I("div",Ke,["SCHEDULED"===xt.value.status?(H(),E("button",{key:0,onClick:wt,type:"button",class:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},[S(O(c),{class:"h-4 w-4 mr-2"}),t[22]||(t[22]=L(" Mark as Completed ",-1))])):j("",!0),xt.value.follow_up_required||"COMPLETED"!==xt.value.status?j("",!0):(H(),E("button",{key:1,onClick:kt,type:"button",class:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[S(O(d),{class:"h-4 w-4 mr-2"}),t[23]||(t[23]=L(" Schedule Follow-up ",-1))])),S(w,{to:`/interactions/new?opportunity_id=${xt.value.opportunity_id}`,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:A(()=>[S(O(h),{class:"h-4 w-4 mr-2"}),t[24]||(t[24]=L(" Create Related Interaction ",-1))]),o:1,l:[24]},8,["to"])])]),xt.value.tags&&xt.value.tags.length>0?(H(),E("div",Qe,[t[26]||(t[26]=I("div",{class:"px-6 py-4 border-b border-gray-200"},[I("h3",{class:"text-lg font-medium text-gray-900"},"Tags")],-1)),I("div",Xe,[I("div",Ye,[(H(!0),E(R,null,F(xt.value.tags,e=>(H(),E("span",{key:e,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},M(e),1))),128))])])])):j("",!0),I("div",Ze,[t[30]||(t[30]=I("div",{class:"px-6 py-4 border-b border-gray-200"},[I("h3",{class:"text-lg font-medium text-gray-900"},"Information")],-1)),I("div",et,[I("dl",tt,[I("div",null,[t[27]||(t[27]=I("dt",{class:"text-sm font-medium text-gray-500"},"Created",-1)),I("dd",st,M(bt(xt.value.created_at||"")),1)]),xt.value.updated_at?(H(),E("div",at,[t[28]||(t[28]=I("dt",{class:"text-sm font-medium text-gray-500"},"Last Updated",-1)),I("dd",rt,M(bt(xt.value.updated_at||xt.value.created_at||"")),1)])):j("",!0),xt.value.created_by?(H(),E("div",ot,[t[29]||(t[29]=I("dt",{class:"text-sm font-medium text-gray-500"},"Created By",-1)),I("dd",lt,M(xt.value.created_by),1)])):j("",!0)])])])])])])):j("",!0),mt.value?(H(),E("div",nt,[I("div",it,[I("div",dt,[S(O(o),{class:"mx-auto h-16 w-16 text-red-600"}),t[31]||(t[31]=I("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"Delete Interaction",-1)),t[32]||(t[32]=I("p",{class:"text-sm text-gray-500 mt-2"}," Are you sure you want to delete this interaction? This action cannot be undone. ",-1)),I("div",ct,[I("button",{onClick:t[0]||(t[0]=e=>mt.value=!1),type:"button",class:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),I("button",{onClick:ht,type:"button",class:"px-4 py-2 bg-red-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Delete ")])])])])):j("",!0)]);var k,_,C,D}}}),[["__scopeId","data-v-40a81ec5"]]),mt={class:"interaction-detail-page"},xt={class:"mb-6"},gt={class:"flex items-center space-x-3"},yt=V(k({t:"InteractionDetailView",props:{id:{}},setup(t){const s=t,a=e(),r=s.id,o=()=>{window.history.length>1?a.go(-1):a.push("/interactions")};return(e,t)=>(H(),E("div",mt,[I("div",xt,[I("div",gt,[I("button",{onClick:o,type:"button",class:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700"},[S(O(w),{class:"h-4 w-4 mr-1"}),t[0]||(t[0]=L(" Back to Interactions ",-1))])])]),S(ut,{"interaction-id":O(r)},null,8,["interaction-id"])]))}}),[["__scopeId","data-v-fdd62914"]]);export{yt as default};
