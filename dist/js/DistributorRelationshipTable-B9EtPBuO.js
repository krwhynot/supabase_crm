import{aa as e,a4 as s,y as t,f as l,s as a,b as i,_ as d,ag as r}from"./heroicons-QXV26b6T.js";import{d as n,r as c,c as o,C as u,D as x,J as m,V as v,G as g,U as f,_ as b,u as p,W as h,F as y,L as w,E as k,O as _,B as C}from"./vue-runtime-Ds28nt_E.js";/* empty css                                                                                     */import{_ as D}from"./_plugin-vue_export-helper-DYAABpgn.js";const j={class:"distributor-relationship-table"},R={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},A={class:"mt-1 text-sm text-gray-600"},P={class:"flex items-center space-x-3 mt-4 sm:mt-0"},T={key:0,class:"bg-white shadow rounded-lg overflow-hidden"},M={class:"animate-pulse p-6"},V={class:"space-y-4"},E={class:"ml-8 space-y-2"},N={key:1,class:"bg-white shadow rounded-lg overflow-hidden"},U={class:"p-6"},$={key:0,class:"text-center py-12"},z={key:1,class:"space-y-4"},B={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},H={class:"flex items-center space-x-4"},I={class:"flex items-center space-x-3"},L={class:"flex-shrink-0"},F={class:"text-sm font-medium text-gray-900"},G={class:"flex items-center space-x-2 text-xs text-gray-500"},J={class:"flex items-center space-x-4"},O={class:"flex items-center"},S={class:"text-sm text-gray-600 capitalize"},W={class:"text-sm text-gray-500"},q={class:"flex items-center space-x-2"},K=["onClick","disabled"],Q=["onClick","disabled"],X={key:0,class:"ml-8 mt-2 space-y-2"},Y={class:"flex items-center justify-between p-3 border border-gray-100 rounded-md bg-gray-50 hover:bg-gray-100 transition-colors"},Z={class:"flex items-center space-x-3"},ee={class:"flex items-center space-x-3"},se={class:"flex-shrink-0"},te={class:"text-sm font-medium text-gray-800"},le={class:"flex items-center space-x-2 text-xs text-gray-500"},ae={class:"flex items-center space-x-4"},ie={class:"flex items-center"},de={class:"text-xs text-gray-600 capitalize"},re={class:"text-xs text-gray-500"},ne={class:"flex items-center space-x-2"},ce=["onClick","disabled"],oe=["onClick","disabled"],ue={key:2,class:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4"},xe={class:"bg-white overflow-hidden shadow rounded-lg"},me={class:"p-5"},ve={class:"flex items-center"},ge={class:"flex-shrink-0"},fe={class:"ml-5 w-0 flex-1"},be={class:"text-lg font-medium text-gray-900"},pe={class:"bg-white overflow-hidden shadow rounded-lg"},he={class:"p-5"},ye={class:"flex items-center"},we={class:"flex-shrink-0"},ke={class:"ml-5 w-0 flex-1"},_e={class:"text-lg font-medium text-gray-900"},Ce={class:"bg-white overflow-hidden shadow rounded-lg"},De={class:"p-5"},je={class:"flex items-center"},Re={class:"flex-shrink-0"},Ae={class:"ml-5 w-0 flex-1"},Pe={class:"text-lg font-medium text-gray-900"},Te={class:"bg-white overflow-hidden shadow rounded-lg"},Me={class:"p-5"},Ve={class:"flex items-center"},Ee={class:"flex-shrink-0"},Ne={class:"ml-5 w-0 flex-1"},Ue={class:"text-lg font-medium text-gray-900"},$e=D(n({t:"DistributorRelationshipTable",props:{relationships:{},loading:{type:Boolean,default:!1},principalName:{default:"Principal"}},emits:["distributor-selected","contact-distributor","export-data"],setup(n,{emit:D}){const $e=n,ze=D,Be=c(new Set),He=o(()=>$e.relationships&&0!==$e.relationships.length?$e.relationships:[]),Ie=o(()=>He.value.every(e=>!e.distributor_name||Be.value.has(e.distributor_id||e.principal_id))),Le=o(()=>{var e;return(null==(e=$e.relationships)?void 0:e.length)||0}),Fe=o(()=>{var e;return(null==(e=$e.relationships)?void 0:e.filter(e=>"Active"===e.principal_status).length)||0}),Ge=o(()=>{var e;return(null==(e=$e.relationships)?void 0:e.filter(e=>"Prospect"===e.principal_status).length)||0}),Je=o(()=>$e.relationships&&0!==$e.relationships.length?$e.relationships.filter(e=>e.distributor_name).length>0?2:1:0),Oe=()=>{Ie.value?Be.value.clear():He.value.forEach(e=>{e.distributor_name&&Be.value.add(e.distributor_id||e.principal_id)})},Se=e=>{ze("distributor-selected",e)},We=(e,s)=>{ze("contact-distributor",e,s)},qe=()=>{ze("export-data")},Ke=e=>({Active:"bg-green-400",Prospect:"bg-yellow-400",Inactive:"bg-gray-400",Customer:"bg-blue-400",Partner:"bg-purple-400",Vendor:"bg-orange-400"}[e||""]||"bg-gray-400"),Qe=e=>{if(!e)return"Never";const s=new Date(e),t=new Date,l=Math.abs(t.getTime()-s.getTime()),a=Math.ceil(l/864e5);return a<=1?"Today":a<=7?`${a} days ago`:a<=30?`${Math.ceil(a/7)} weeks ago`:a<=365?`${Math.ceil(a/30)} months ago`:s.toLocaleDateString()};return(n,c)=>(k(),u("div",j,[x("div",R,[x("div",null,[c[0]||(c[0]=x("h3",{class:"text-lg font-medium text-gray-900"},"Distributor Relationships",-1)),x("p",A," Distributor hierarchy and relationships for "+v(n.principalName),1)]),x("div",P,[x("button",{onClick:Oe,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[(k(),g(b(Ie.value?p(e):p(s)),{class:"h-4 w-4 mr-1"})),f(" "+v(Ie.value?"Collapse All":"Expand All"),1)]),x("button",{onClick:qe,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[h(p(t),{class:"h-4 w-4 mr-1"}),c[1]||(c[1]=f(" Export ",-1))])])]),n.loading?(k(),u("div",T,[x("div",M,[x("div",V,[(k(),u(y,null,w(3,e=>x("div",{key:e},[c[3]||(c[3]=_('<div class="flex items-center space-x-4 mb-2" data-v-2c6b1608><div class="h-4 bg-gray-200 rounded w-4" data-v-2c6b1608></div><div class="h-4 bg-gray-200 rounded w-1/3" data-v-2c6b1608></div><div class="flex-1" data-v-2c6b1608></div><div class="h-4 bg-gray-200 rounded w-1/6" data-v-2c6b1608></div></div>',1)),x("div",E,[(k(),u(y,null,w(2,e=>x("div",{key:e,class:"flex items-center space-x-4"},c[2]||(c[2]=[x("div",{class:"h-3 bg-gray-100 rounded w-1/4"},null,-1),x("div",{class:"h-3 bg-gray-100 rounded w-1/6"},null,-1),x("div",{class:"flex-1"},null,-1),x("div",{class:"h-3 bg-gray-100 rounded w-16"},null,-1)]))),64))])])),64))])])])):(k(),u("div",N,[x("div",U,[0===He.value.length?(k(),u("div",$,[h(p(l),{class:"mx-auto h-12 w-12 text-gray-400"}),c[4]||(c[4]=x("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No relationships found",-1)),c[5]||(c[5]=x("p",{class:"mt-1 text-sm text-gray-500"}," This principal has no distributor relationships configured. ",-1))])):(k(),u("div",z,[(k(!0),u(y,null,w(He.value,e=>{var s,t;return k(),u("div",{key:e.distributor_id||e.principal_id,class:"relationship-node"},[x("div",B,[x("div",H,[c[8]||(c[8]=x("div",{class:"w-6"},null,-1)),x("div",I,[x("div",L,[h(p(l),{class:"h-8 w-8 text-blue-500"})]),x("div",null,[x("h4",F,v(e.distributor_name),1),x("div",G,[x("span",null,v(e.relationship_type),1),c[6]||(c[6]=x("span",null,"•",-1)),c[7]||(c[7]=x("span",null,"Direct Relationship",-1))])])])]),x("div",J,[x("div",O,[x("div",{class:C(["w-2 h-2 rounded-full mr-2",Ke(e.principal_status)])},null,2),x("span",S,v((null==(s=e.principal_status)?void 0:s.toLowerCase().replace("_"," "))||"Unknown"),1)]),x("div",W,v(Qe(e.principal_last_contact)),1),x("div",q,[x("button",{onClick:s=>Se(e.distributor_id),disabled:!e.distributor_id,class:"text-blue-600 hover:text-blue-900 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," View ",8,K),x("button",{onClick:s=>We(e.distributor_id,e.distributor_name),disabled:!e.distributor_id||!e.distributor_name,class:"text-green-600 hover:text-green-900 text-sm font-medium transition-colors"}," Contact ",8,Q)])])]),e.distributor_name&&Be.value.has(e.distributor_id||e.principal_id)?(k(),u("div",X,[x("div",Y,[x("div",Z,[c[10]||(c[10]=x("div",{class:"flex items-center"},[x("div",{class:"w-4 h-px bg-gray-300"}),x("div",{class:"w-2 h-2 rounded-full bg-gray-300"})],-1)),x("div",ee,[x("div",se,[h(p(r),{class:"h-6 w-6 text-gray-400"})]),x("div",null,[x("h5",te,v(e.distributor_name),1),x("div",le,[x("span",null,v(e.relationship_type),1),c[9]||(c[9]=x("span",null,"•",-1)),x("span",null,v(e.distributor_city)+", "+v(e.distributor_state),1)])])])]),x("div",ae,[x("div",ie,[x("div",{class:C(["w-1.5 h-1.5 rounded-full mr-2",Ke(e.distributor_status)])},null,2),x("span",de,v((null==(t=e.distributor_status)?void 0:t.toLowerCase().replace("_"," "))||"Unknown"),1)]),x("div",re,v(Qe(e.distributor_last_contact)),1),x("div",ne,[x("button",{onClick:s=>Se(e.distributor_id),disabled:!e.distributor_id,class:"text-blue-600 hover:text-blue-900 text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," View ",8,ce),x("button",{onClick:s=>We(e.distributor_id,e.distributor_name),disabled:!e.distributor_id||!e.distributor_name,class:"text-green-600 hover:text-green-900 text-xs font-medium transition-colors"}," Contact ",8,oe)])])])])):m("",!0)])}),128))]))])])),!n.loading&&He.value.length>0?(k(),u("div",ue,[x("div",xe,[x("div",me,[x("div",ve,[x("div",ge,[h(p(l),{class:"h-6 w-6 text-blue-500"})]),x("div",fe,[x("dl",null,[c[11]||(c[11]=x("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Total Distributors ",-1)),x("dd",be,v(Le.value),1)])])])])]),x("div",pe,[x("div",he,[x("div",ye,[x("div",we,[h(p(a),{class:"h-6 w-6 text-green-500"})]),x("div",ke,[x("dl",null,[c[12]||(c[12]=x("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Active Relationships ",-1)),x("dd",_e,v(Fe.value),1)])])])])]),x("div",Ce,[x("div",De,[x("div",je,[x("div",Re,[h(p(i),{class:"h-6 w-6 text-yellow-500"})]),x("div",Ae,[x("dl",null,[c[13]||(c[13]=x("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Pending Relationships ",-1)),x("dd",Pe,v(Ge.value),1)])])])])]),x("div",Te,[x("div",Me,[x("div",Ve,[x("div",Ee,[h(p(d),{class:"h-6 w-6 text-purple-500"})]),x("div",Ne,[x("dl",null,[c[14]||(c[14]=x("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Hierarchy Levels ",-1)),x("dd",Ue,v(Je.value),1)])])])])])])):m("",!0)]))}}),[["__scopeId","data-v-2c6b1608"]]);export{$e as D};
