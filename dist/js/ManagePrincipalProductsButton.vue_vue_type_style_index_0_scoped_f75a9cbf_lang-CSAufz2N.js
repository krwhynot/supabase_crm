import{_ as e}from"./heroicons-QXV26b6T.js";import{d as t,r as s,c as a,y as r,z as i,C as o,D as l,O as n,V as c,J as d,F as x,L as f,a1 as u,W as h,u as m,E as y,B as p}from"./vue-runtime-Ds28nt_E.js";import{_ as g}from"./_plugin-vue_export-helper-DYAABpgn.js";const v={class:"product-performance-chart"},b={class:"flex items-center justify-between mb-4"},w={class:"text-sm font-medium text-gray-900"},k={class:"relative h-full"},z=["width","height"],_={class:"performance-bars"},M=["x","y","width"],P=["x","y","width","fill","onMouseenter"],S=["x","y"],j=["x","y"],W={class:"x-axis"},B=["x1","x2","y1","y2"],F=["x1","x2","y1","y2"],D=["x","y"],I={class:"performance-zones",opacity:"0.1"},C=["x","y","width","height"],E=["x","y","width","height"],N=["x","y","width","height"],G={class:"font-medium"},L={class:"text-blue-300"},O={class:"text-gray-300 text-xs mt-1"},U={key:1,class:"absolute inset-0 flex items-center justify-center"},V={class:"text-center"},H=g(t({t:"ProductPerformanceChart",props:{data:{},principalName:{default:"Principal"}},setup(t){const p=t,g=s(),H=s(),J=s(800),R=s(250),T=20,q=40,A=150,K=s({visible:!1,x:0,y:0,data:null}),Q=a(()=>p.data&&0!==p.data.length?[...p.data].sort((e,t)=>(t.product_performance_score||0)-(e.product_performance_score||0)).slice(0,10):[]),X=a(()=>J.value-A-60),Y=a(()=>R.value-T-q),Z=a(()=>[0,20,40,60,80,100]),$=e=>T+28*e,ee=e=>e/100*X.value,te=()=>{K.value.visible=!1},se=()=>{if(g.value){const e=g.value.parentElement;if(e){J.value=e.clientWidth;const t=250,s=28*Q.value.length+T+q;R.value=Math.max(t,s)}}};return r(()=>{se(),window.addEventListener("resize",se)}),i(()=>{window.removeEventListener("resize",se)}),(t,s)=>{return y(),o("div",v,[l("div",b,[l("h4",w," Product Performance - "+c(t.principalName),1),s[1]||(s[1]=l("div",{class:"text-xs text-gray-500"}," Performance Score ",-1))]),l("div",k,[(y(),o("svg",{ref_key:"chartSvg",ref:g,width:J.value,height:R.value,class:"w-full h-full",onMouseleave:te},[l("g",_,[(y(!0),o(x,null,f(Q.value,(e,t)=>{return y(),o("g",{key:e.product_id,class:"product-group"},[l("rect",{x:A,y:$(t),width:X.value,height:20,fill:"#f3f4f6",rx:"2"},null,8,M),l("rect",{x:A,y:$(t),width:ee(e.product_performance_score||0),height:20,fill:(r=e.product_performance_score||0,r>=70?"#10b981":r>=40?"#f59e0b":"#ef4444"),rx:"2",class:"performance-bar hover:opacity-80 transition-opacity duration-200 cursor-pointer",onMouseenter:s=>((e,t)=>{const s=g.value?.getBoundingClientRect();s&&(K.value={visible:!0,x:A+ee(e.product_performance_score||0)/2,y:$(t)-10,data:e})})(e,t),onMousemove:s[0]||(s[0]=e=>(e=>{if(K.value.visible){const t=g.value?.getBoundingClientRect();t&&(K.value.x=e.clientX-t.left,K.value.y=e.clientY-t.top-20)}})(e))},null,40,P),l("text",{x:140,y:$(t)+10,"text-anchor":"end","dominant-baseline":"middle",class:"text-xs fill-gray-700 font-medium"},c((a=e.product_name,a.length<=20?a:a.substring(0,17)+"...")),9,S),l("text",{x:A+ee(e.product_performance_score||0)+8,y:$(t)+10,"dominant-baseline":"middle",class:"text-xs fill-gray-700 font-semibold"},c(Math.round(e.product_performance_score||0)),9,j)]);var a,r}),128))]),l("g",W,[l("line",{x1:A,x2:J.value-60,y1:R.value-q,y2:R.value-q,stroke:"#6b7280","stroke-width":"1"},null,8,B),(y(!0),o(x,null,f(Z.value,e=>(y(),o("g",{key:e},[l("line",{x1:A+e/100*X.value,x2:A+e/100*X.value,y1:R.value-q,y2:R.value-q+5,stroke:"#6b7280","stroke-width":"1"},null,8,F),l("text",{x:A+e/100*X.value,y:R.value-q+15,"text-anchor":"middle",class:"text-xs fill-gray-600"},c(e),9,D)]))),128))]),l("g",I,[l("rect",{x:A,y:T,width:.4*X.value,height:Y.value,fill:"#ef4444"},null,8,C),l("rect",{x:A+.4*X.value,y:T,width:.3*X.value,height:Y.value,fill:"#f59e0b"},null,8,E),l("rect",{x:A+.7*X.value,y:T,width:.3*X.value,height:Y.value,fill:"#10b981"},null,8,N)])],40,z)),K.value.visible?(y(),o("div",{key:0,ref_key:"tooltipEl",ref:H,class:"absolute z-10 px-3 py-2 bg-gray-900 text-white text-sm rounded shadow-lg pointer-events-none transform -translate-x-1/2",style:u({left:K.value.x+"px",top:K.value.y+"px"})},[l("div",G,c(K.value.data?.product_name),1),l("div",L," Performance Score: "+c(Math.round(K.value.data?.product_performance_score||0)),1),l("div",O,[l("div",null,"Opportunities: "+c(K.value.data?.total_opportunities||0),1),l("div",null,"Win Rate: "+c(Math.round(K.value.data?.win_rate||0))+"%",1),l("div",null,"Total Value: "+c((a=K.value.data?.total_value||0,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a))),1)])],4)):d("",!0),0===Q.value.length?(y(),o("div",U,[l("div",V,[h(m(e),{class:"mx-auto h-12 w-12 text-gray-400"}),s[2]||(s[2]=l("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No product data",-1)),s[3]||(s[3]=l("p",{class:"mt-1 text-sm text-gray-500"}," No product performance data available. ",-1))])])):d("",!0)]),s[4]||(s[4]=n('<div class="mt-4 flex items-center justify-center space-x-6 text-xs" data-v-83dc1e44><div class="flex items-center space-x-2" data-v-83dc1e44><div class="w-3 h-3 rounded bg-red-500" data-v-83dc1e44></div><span class="text-gray-600" data-v-83dc1e44>Poor (0-40)</span></div><div class="flex items-center space-x-2" data-v-83dc1e44><div class="w-3 h-3 rounded bg-yellow-500" data-v-83dc1e44></div><span class="text-gray-600" data-v-83dc1e44>Fair (40-70)</span></div><div class="flex items-center space-x-2" data-v-83dc1e44><div class="w-3 h-3 rounded bg-green-500" data-v-83dc1e44></div><span class="text-gray-600" data-v-83dc1e44>Good (70-100)</span></div></div>',1))]);var a}}}),[["__scopeId","data-v-83dc1e44"]]),J={class:"relative inline-flex items-center justify-center"},R=["width","height"],T=["cx","cy","r","stroke-width"],q=["cx","cy","r","stroke-width","stroke","stroke-dasharray","stroke-dashoffset"],A={class:"absolute inset-0 flex items-center justify-center"},K={key:0,class:"absolute -top-1 -right-1"},Q=g(t({t:"ProductPerformanceIndicator",props:{score:{default:0},size:{default:"md"},showLabel:{type:Boolean,default:!1},showBadge:{type:Boolean,default:!0},animated:{type:Boolean,default:!0}},setup(e){const t=e,s=a(()=>({xs:{size:24,strokeWidth:3,center:12,radius:9,fontSize:"text-xs"},sm:{size:32,strokeWidth:3,center:16,radius:13,fontSize:"text-xs"},md:{size:48,strokeWidth:4,center:24,radius:20,fontSize:"text-sm"},lg:{size:64,strokeWidth:5,center:32,radius:27,fontSize:"text-base"},xl:{size:80,strokeWidth:6,center:40,radius:34,fontSize:"text-lg"}}[t.size])),r=a(()=>2*Math.PI*s.value.radius),i=a(()=>{const e=Math.min(Math.max(t.score,0),100)/100;return r.value*(1-e)}),n=a(()=>t.score>=80?"excellent":t.score>=60?"good":t.score>=40?"fair":t.score>=20?"poor":"critical"),x=a(()=>({excellent:"#10b981",good:"#22c55e",fair:"#f59e0b",poor:"#ef4444",critical:"#dc2626"}[n.value])),f=a(()=>({excellent:"Excellent",good:"Good",fair:"Fair",poor:"Poor",critical:"Critical"}[n.value])),u=a(()=>{const e=[];return"xs"===t.size?e.push("performance-indicator-xs"):"sm"===t.size?e.push("performance-indicator-sm"):"md"===t.size?e.push("performance-indicator-md"):"lg"===t.size?e.push("performance-indicator-lg"):"xl"===t.size&&e.push("performance-indicator-xl"),e.join(" ")}),h=a(()=>{const e=["text-gray-900"];return e.push(s.value.fontSize),e.join(" ")}),m=a(()=>{const e=["text-gray-600"];return"xs"===t.size||"sm"===t.size?e.push("text-xs"):"md"===t.size?e.push("text-sm"):e.push("text-base"),e.join(" ")}),g=a(()=>{const e=[];return"excellent"===n.value?e.push("bg-green-500"):"good"===n.value?e.push("bg-green-400"):"fair"===n.value?e.push("bg-yellow-500"):"poor"===n.value?e.push("bg-red-500"):e.push("bg-red-600"),e.join(" ")});return(e,t)=>(y(),o("div",{class:p(["product-performance-indicator",u.value])},[l("div",J,[(y(),o("svg",{width:s.value.size,height:s.value.size,class:"transform -rotate-90"},[l("circle",{cx:s.value.center,cy:s.value.center,r:s.value.radius,fill:"none","stroke-width":s.value.strokeWidth,stroke:"#e5e7eb"},null,8,T),l("circle",{cx:s.value.center,cy:s.value.center,r:s.value.radius,fill:"none","stroke-width":s.value.strokeWidth,stroke:x.value,"stroke-dasharray":r.value,"stroke-dashoffset":i.value,"stroke-linecap":"round",class:"transition-all duration-500 ease-out"},null,8,q)],8,R)),l("div",A,[l("span",{class:p([h.value,"font-semibold"])},c(Math.round(e.score)),3)]),e.showBadge&&"xs"!==e.size&&"sm"!==e.size?(y(),o("div",K,[l("div",{class:p([g.value,"w-3 h-3 rounded-full border-2 border-white"])},null,2)])):d("",!0)]),e.showLabel?(y(),o("div",{key:0,class:p([m.value,"text-center mt-1"])},c(f.value),3)):d("",!0)],2))}}),[["__scopeId","data-v-005ad4e2"]]);export{H as P,Q as a};
