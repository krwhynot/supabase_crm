import{u as e}from"./vue-router-BP51f1Hv.js";import{d as a,r as t,b as r,c as o,C as l,D as s,W as n,u as i,V as d,E as c,w as u,y as m,G as p,J as g,N as v,U as y,O as b,B as f,F as x,L as h,_ as w,$ as _,n as k,H as C}from"./vue-runtime-Ds28nt_E.js";import{_ as V,a as z,u as S}from"./SelectField.vue_vue_type_script_setup_true_lang-DD42MXzI.js";import{P as j,a as B,b as F,C as E}from"./contacts-BLZDEW--.js";import{_ as M}from"./Button.vue_vue_type_script_setup_true_lang-CAoJdBXI.js";import{u as O}from"./organizationStore-Cdi8siI6.js";import{r as U,a as A,b as $,c as N}from"./heroicons-QXV26b6T.js";import"./pinia-CUC4VGP7.js";import"./contactsApi-DVX9N6iA.js";import"./supabaseClient-Bh63a8tq.js";import"./supabase-BNBjhZ5t.js";import"./index-CocGRfLV.js";import"./yup-D1qa_jJc.js";const D={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-md bg-white"},P={class:"flex items-center justify-between pb-3"},q={class:"mt-4 space-y-4"},I={class:"flex items-center justify-end pt-6 space-x-3"},T=["disabled"],L=a({t:"OrganizationCreateModal",emits:["close","success"],setup(e,{emit:a}){const u=a,m=O(),p=t(!1),g=r({name:"",industry:""}),v=r({}),y=[{value:"Food & Beverage - Manufacturing",label:"Food & Beverage - Manufacturing",description:"Food and beverage production"},{value:"Food & Beverage - Distribution",label:"Food & Beverage - Distribution",description:"Food and beverage distribution"},{value:"Food & Beverage - Restaurant",label:"Food & Beverage - Restaurant",description:"Restaurants and food service"},{value:"Technology",label:"Technology",description:"Software and tech services"},{value:"Healthcare",label:"Healthcare",description:"Medical and health services"},{value:"Finance",label:"Finance",description:"Banking and financial services"},{value:"Manufacturing",label:"Manufacturing",description:"Production and industrial"},{value:"Retail",label:"Retail",description:"Consumer goods and services"}],b=o(()=>g.name.trim().length>0&&g.industry.trim().length>0),f=(e,a)=>{g[e]=a,v[e]&&delete v[e]},x=e=>{e.target===e.currentTarget&&u("close")},h=async()=>{try{if(p.value=!0,Object.keys(v).forEach(e=>delete v[e]),!g.name.trim())return void(v.name="Organization name is required");if(!g.industry.trim())return void(v.industry="Industry is required");const e={name:g.name.trim(),industry:g.industry,lead_score:50,status:"Prospect"},a=await m.createOrganization(e);a?u("success",a.id):v.name=m.errors.creating||"Failed to create organization"}catch(e){v.name=e.message||"An unexpected error occurred"}finally{p.value=!1}};return(e,a)=>(c(),l("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:x},[s("div",D,[s("div",P,[a[4]||(a[4]=s("h3",{class:"text-lg font-semibold text-gray-900"},"Create New Organization",-1)),s("button",{onClick:a[0]||(a[0]=a=>e.$emit("close")),type:"button",class:"text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600","aria-label":"Close modal"},[n(i(U),{class:"h-5 w-5"})])]),s("div",q,[n(V,{name:"organization_name",label:"Organization Name",type:"text","model-value":g.name,error:v.name,placeholder:"Enter organization name",required:"","onUpdate:modelValue":a[1]||(a[1]=e=>f("name",String(e)))},null,8,["model-value","error"]),n(z,{name:"industry",label:"Industry","model-value":g.industry,options:y,error:v.industry,placeholder:"Select industry",required:"","onUpdate:modelValue":a[2]||(a[2]=e=>f("industry",String(Array.isArray(e)?e[0]||"":e)))},null,8,["model-value","error"])]),s("div",I,[s("button",{onClick:a[3]||(a[3]=a=>e.$emit("close")),type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),s("button",{onClick:h,type:"button",disabled:!b.value||p.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},d(p.value?"Creating...":"Create Organization"),9,T)])])]))}}),R={class:"space-y-4 md:space-y-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"},K={class:"space-y-2"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"},G=a({t:"ContactStepOne",props:{modelValue:{},errors:{},loading:{type:Boolean,default:!1}},emits:["update:modelValue","validate"],setup(e,{emit:a}){const r=e,d=a,b=O(),f=t(!1),x=j.map(e=>({value:e,label:e,description:`${e} role`})),h=o(()=>b.organizations.map(e=>({value:e.id,label:e.name,description:e.industry||"No industry specified"}))),w=(e,a)=>{const t={...r.modelValue,[e]:a};d("update:modelValue",t)},_=async(e,a)=>{await k()},k=async()=>{const e={};let a=!0;try{const e={first_name:r.modelValue.first_name,last_name:r.modelValue.last_name,organization_id:r.modelValue.organization_id,position:r.modelValue.position,email:r.modelValue.email,phone:r.modelValue.phone};await B.validate(e,{abortEarly:!1})}catch(t){a=!1,t.inner&&t.inner.forEach(a=>{a.path&&(e[a.path]=a.message)})}d("validate",1,a,e)},C=e=>{w("organization_id",e),f.value=!1,b.fetchOrganizations({resetList:!0})};return u(()=>[r.modelValue.first_name,r.modelValue.last_name,r.modelValue.organization_id,r.modelValue.position,r.modelValue.email,r.modelValue.phone],async()=>{await k()},{immediate:!0}),m(async()=>{0===b.organizations.length&&await b.fetchOrganizations({resetList:!0}),await k()}),(e,a)=>(c(),l("div",R,[s("div",H,[n(V,{name:"first_name",label:"First Name",type:"text","model-value":e.modelValue.first_name||"",error:e.errors.first_name,placeholder:"Enter first name",required:"",autocomplete:"given-name","onUpdate:modelValue":a[0]||(a[0]=e=>w("first_name",e)),onValidate:a[1]||(a[1]=e=>_())},null,8,["model-value","error"]),n(V,{name:"last_name",label:"Last Name",type:"text","model-value":e.modelValue.last_name||"",error:e.errors.last_name,placeholder:"Enter last name",required:"",autocomplete:"family-name","onUpdate:modelValue":a[2]||(a[2]=e=>w("last_name",e)),onValidate:a[3]||(a[3]=e=>_())},null,8,["model-value","error"])]),s("div",J,[s("div",K,[n(z,{name:"organization_id",label:"Organization","model-value":e.modelValue.organization_id||"",options:h.value,error:e.errors.organization_id,placeholder:"Select an organization",searchable:"",required:"","onUpdate:modelValue":a[4]||(a[4]=e=>w("organization_id",e)),onValidate:a[5]||(a[5]=e=>_())},null,8,["model-value","options","error"]),n(M,{variant:"secondary",size:"sm",class:"w-full",onClick:a[6]||(a[6]=e=>f.value=!0)},{default:v(()=>[n(i(A),{class:"h-4 w-4 mr-2"}),a[14]||(a[14]=y(" Create New Organization ",-1))]),o:1,l:[14]})]),n(z,{name:"position",label:"Position","model-value":e.modelValue.position||"",options:i(x),error:e.errors.position,placeholder:"Select or enter position","allow-custom":"",required:"","onUpdate:modelValue":a[7]||(a[7]=e=>w("position",e)),onValidate:a[8]||(a[8]=e=>_())},null,8,["model-value","options","error"])]),s("div",W,[n(V,{name:"email",label:"Email Address",type:"email","model-value":e.modelValue.email||"",error:e.errors.email,placeholder:"contact@company.com",autocomplete:"email","onUpdate:modelValue":a[9]||(a[9]=e=>w("email",e)),onValidate:a[10]||(a[10]=e=>_())},null,8,["model-value","error"]),n(V,{name:"phone",label:"Phone Number",type:"tel","model-value":e.modelValue.phone||"",error:e.errors.phone,placeholder:"(555) 123-4567",autocomplete:"tel","onUpdate:modelValue":a[11]||(a[11]=e=>w("phone",e)),onValidate:a[12]||(a[12]=e=>_())},null,8,["model-value","error"])]),f.value?(c(),p(L,{key:0,onClose:a[13]||(a[13]=e=>f.value=!1),onSuccess:C})):g("",!0)]))}}),Z={class:"space-y-4 md:space-y-6"},Q={class:"space-y-4"},X={class:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6"},Y={class:"space-y-4"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"},ae={class:"flex items-center space-x-3"},te=["checked"],re={class:"space-y-2"},oe=["value","aria-describedby","aria-invalid"],le={class:"flex justify-between items-center"},se={key:0,id:"notes-error",class:"text-sm text-red-600",role:"alert"},ne={key:1,class:"text-xs text-gray-500"},ie={class:"text-xs text-gray-400"},de=a({t:"ContactStepThree",props:{modelValue:{},errors:{},loading:{type:Boolean,default:!1}},emits:["update:modelValue","validate"],setup(e,{emit:a}){const t=e,r=a,o=(e,a)=>{const o={...t.modelValue,[e]:a};r("update:modelValue",o)},i=async(e,a)=>{await p()},p=async()=>{const e={};let a=!0;try{const e={address:t.modelValue.address,city:t.modelValue.city,state:t.modelValue.state,zip_code:t.modelValue.zip_code,website:t.modelValue.website,account_manager:t.modelValue.account_manager,notes:t.modelValue.notes,is_primary:t.modelValue.is_primary};await F.validate(e,{abortEarly:!1})}catch(o){a=!1,o.inner&&o.inner.forEach(a=>{a.path&&(e[a.path]=a.message)})}r("validate",3,a,e)};return u(()=>[t.modelValue.address,t.modelValue.city,t.modelValue.state,t.modelValue.zip_code,t.modelValue.website,t.modelValue.account_manager,t.modelValue.notes,t.modelValue.is_primary],async()=>{await p()},{immediate:!0}),m(async()=>{await p()}),(e,a)=>(c(),l("div",Z,[s("div",Q,[a[15]||(a[15]=s("h3",{class:"text-lg font-semibold text-gray-900"},"Address Information",-1)),n(V,{name:"address",label:"Street Address",type:"text","model-value":e.modelValue.address||"",error:e.errors.address,placeholder:"Enter street address",autocomplete:"street-address","onUpdate:modelValue":a[0]||(a[0]=e=>o("address",e)),onValidate:a[1]||(a[1]=e=>i())},null,8,["model-value","error"]),s("div",X,[n(V,{name:"city",label:"City",type:"text","model-value":e.modelValue.city||"",error:e.errors.city,placeholder:"Enter city","onUpdate:modelValue":a[2]||(a[2]=e=>o("city",e)),onValidate:a[3]||(a[3]=e=>i())},null,8,["model-value","error"]),n(V,{name:"state",label:"State",type:"text","model-value":e.modelValue.state||"",error:e.errors.state,placeholder:"Enter state","onUpdate:modelValue":a[4]||(a[4]=e=>o("state",e)),onValidate:a[5]||(a[5]=e=>i())},null,8,["model-value","error"]),n(V,{name:"zip_code",label:"ZIP Code",type:"text","model-value":e.modelValue.zip_code||"",error:e.errors.zip_code,placeholder:"Enter ZIP code",autocomplete:"postal-code","onUpdate:modelValue":a[6]||(a[6]=e=>o("zip_code",e)),onValidate:a[7]||(a[7]=e=>i())},null,8,["model-value","error"])])]),s("div",Y,[a[16]||(a[16]=s("h3",{class:"text-lg font-semibold text-gray-900"},"Additional Information",-1)),s("div",ee,[n(V,{name:"website",label:"Website",type:"url","model-value":e.modelValue.website||"",error:e.errors.website,placeholder:"https://example.com",autocomplete:"url","onUpdate:modelValue":a[8]||(a[8]=e=>o("website",e)),onValidate:a[9]||(a[9]=e=>i())},null,8,["model-value","error"]),n(V,{name:"account_manager",label:"Account Manager",type:"text","model-value":e.modelValue.account_manager||"",error:e.errors.account_manager,placeholder:"Enter account manager name","onUpdate:modelValue":a[10]||(a[10]=e=>o("account_manager",e)),onValidate:a[11]||(a[11]=e=>i())},null,8,["model-value","error"])])]),s("div",ae,[s("input",{id:"is_primary",name:"is_primary",type:"checkbox",checked:e.modelValue.is_primary||!1,onChange:a[12]||(a[12]=e=>o("is_primary",e.target.checked)),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,40,te),a[17]||(a[17]=s("label",{for:"is_primary",class:"flex-1"},[s("span",{class:"text-base font-semibold text-gray-900"},"Primary Contact"),s("p",{class:"text-sm font-medium text-gray-600 mt-0.5"}," Mark this as the primary contact for the organization ")],-1))]),s("div",re,[a[18]||(a[18]=s("label",{for:"notes",class:"block text-sm font-medium text-gray-700"}," Notes ",-1)),s("textarea",{id:"notes",name:"notes",rows:"4",value:e.modelValue.notes||"",onInput:a[13]||(a[13]=e=>o("notes",e.target.value)),onBlur:a[14]||(a[14]=e=>i(0,e.target.value)),class:f(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 transition-colors duration-200 resize-none",e.errors.notes?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"]),placeholder:"Add any additional notes about this contact...","aria-describedby":e.errors.notes?"notes-error":void 0,"aria-invalid":!!e.errors.notes,maxlength:"5000"},null,42,oe),s("div",le,[e.errors.notes?(c(),l("div",se,d(e.errors.notes),1)):(c(),l("div",ne," Optional notes and comments ")),s("div",ie,d((e.modelValue.notes||"").length)+"/5000 ",1)])]),a[19]||(a[19]=b('<div class="bg-green-50 border border-green-200 rounded-md p-4"><div class="flex items-start"><svg class="h-5 w-5 text-green-400 mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h3 class="text-sm font-medium text-green-800">Contact Details</h3><p class="mt-1 text-sm text-green-700"> All fields in this step are optional. Add any additional information that will help you and your team better understand and communicate with this contact. </p></div></div></div>',1))]))}}),ce={class:"max-w-4xl mx-auto"},ue=["aria-valuenow"],me={class:"flex items-center justify-center space-x-2 mb-2"},pe=["aria-label"],ge={class:"text-center"},ve=["id"],ye=["id"],be={key:0,class:"mb-3 flex items-center justify-center text-xs"},fe={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},xe={key:1,class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},he={key:2,class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},we={key:1,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",role:"alert"},_e={class:"flex items-start"},ke={class:"mt-1 text-sm font-medium text-red-700"},Ce={class:"bg-white shadow-lg rounded-lg border-2 border-gray-300 ring-1 ring-gray-100"},Ve={class:"p-4 md:p-6"},ze={class:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-300 shadow-xl md:relative md:bg-gray-50 md:border-2 md:border-gray-300 md:shadow-lg md:mt-4 md:rounded-lg"},Se={class:"max-w-4xl mx-auto px-4 py-3 md:px-6 md:py-4"},je={class:"flex items-center justify-between"},Be={key:1},Fe={class:"flex items-center space-x-3"},Ee={class:"text-sm font-medium text-gray-600"},Me={key:0,class:"h-4 w-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},Oe=a({t:"ContactFormWrapper",props:{initialData:{},isEditing:{type:Boolean,default:!1},contactId:{}},emits:["success","cancel","draft-saved"],setup(a,{emit:i}){const u=a,b=i,C=e(),V=S(),z=t(1),j=t(!1),B=t(!1),F=t(""),O=t(null),U=r({1:!1,2:!0}),A=r({first_name:"",last_name:"",organization_id:"",position:"",email:null,phone:null,address:null,city:null,state:null,zip_code:null,website:null,account_manager:null,notes:null,is_primary:!1,...u.initialData}),$=r({1:{},2:{}}),N=[{id:1,title:"Basic Info",description:"Enter contact name, organization, position, and contact details",component:"ContactStepOne",requiredFields:["first_name","last_name","organization_id","position"],optionalFields:["email","phone"]},{id:2,title:"Contact Details",description:"Add address, website, and additional information",component:"ContactStepThree",requiredFields:[],optionalFields:["address","city","state","zip_code","website","account_manager","notes","is_primary"]}],D=o(()=>N[z.value-1]),P=o(()=>({ContactStepOne:G,ContactStepThree:de}[D.value.component])),q=o(()=>2===z.value),I=o(()=>$[z.value]||{}),T=o(()=>U[z.value]),L=e=>{Object.assign(A,e),Q()},R=async(e,a,t={})=>{U[e]=a,$[e]=t,a&&F.value&&(F.value="")},H=async()=>{B.value=!0;try{const e=[...D.value.requiredFields,...D.value.optionalFields],a={};let t;switch(e.forEach(e=>{a[e]=A[e]}),z.value){case 1:t=await E.validateStepOne(a);break;case 2:t=await E.validateStepThree(a);break;default:throw new Error("Invalid step number")}if(t.isValid)return await R(z.value,!0,{}),!0;{const e={};return t.errors.forEach(a=>{e[a.field]=a.message}),await R(z.value,!1,e),!1}}catch(e){const a={general:e.message||"Validation failed"};return await R(z.value,!1,a),!1}finally{B.value=!1}},J=()=>{z.value>1&&(z.value--,k(()=>{ee()}))},K=async()=>{q.value?await W():await(async()=>{z.value<2&&await H()&&(z.value++,await k(),ee())})()},W=async()=>{try{j.value=!0,F.value="";for(let t=1;t<=2;t++)if(z.value=t,!(await H()))return void(F.value=`Please fix errors in Step ${t}`);const e=await E.validateCreate(A);if(!e.isValid)return void(F.value="Please fix all validation errors");let a;a=u.isEditing&&u.contactId?await V.updateContact(u.contactId,e.data):await V.createContact(e.data),a?(Y(),a.id&&(b("success",a.id),C.push(`/contacts/${a.id}`))):F.value="Failed to save contact. Please try again."}catch(e){F.value=e.message||"An unexpected error occurred"}finally{j.value=!1}};let Z=null;const Q=()=>{Z&&clearTimeout(Z),Z=setTimeout(async()=>{await X()},2e3)},X=async()=>{try{O.value="saving";const e=u.isEditing?`contact-edit-draft-${u.contactId}`:"contact-create-draft";localStorage.setItem(e,JSON.stringify({formData:{...A},currentStep:z.value,timestamp:Date.now()})),O.value="saved",setTimeout(()=>{"saved"===O.value&&(O.value=null)},3e3),b("draft-saved",{...A})}catch(e){O.value="error",setTimeout(()=>{"error"===O.value&&(O.value=null)},5e3)}},Y=()=>{try{const e=u.isEditing?`contact-edit-draft-${u.contactId}`:"contact-create-draft";localStorage.removeItem(e)}catch(e){}},ee=()=>{k(()=>{const e=document.querySelector("input, select, textarea");e&&e.focus()})};return m(async()=>{u.isEditing||await(async()=>{try{const e=u.isEditing?`contact-edit-draft-${u.contactId}`:"contact-create-draft",a=localStorage.getItem(e);if(a){const t=JSON.parse(a);Date.now()-t.timestamp<36e5?(Object.assign(A,t.formData),z.value=t.currentStep||1):localStorage.removeItem(e)}}catch(e){}})(),ee(),await H()}),(e,a)=>(c(),l("div",ce,[s("div",{class:"mb-3",role:"progressbar","aria-valuenow":z.value,"aria-valuemax":2,"aria-label":"Form progress"},[s("div",me,[(c(),l(x,null,h(N,(e,a)=>s("div",{key:e.id,class:f(["h-1.5 w-6 rounded-full transition-colors duration-200",a+1<=z.value?"bg-primary-600":"bg-gray-200"]),"aria-label":`Step ${a+1}: ${e.title} ${a+1<=z.value?"completed":"not completed"}`,role:"presentation"},null,10,pe)),64))]),s("div",ge,[s("h2",{class:"text-lg font-semibold text-gray-900",id:`step-${z.value}-title`},d(D.value.title),9,ve),s("p",{class:"text-sm font-medium text-gray-700 mt-0.5",id:`step-${z.value}-description`},d(D.value.description),9,ye)])],8,ue),O.value?(c(),l("div",be,[s("div",{class:f(["flex items-center space-x-2 px-3 py-1 rounded-full","saving"===O.value?"bg-blue-50 text-blue-700":"saved"===O.value?"bg-green-50 text-green-700":"bg-red-50 text-red-700"])},["saving"===O.value?(c(),l("svg",fe,a[0]||(a[0]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):"saved"===O.value?(c(),l("svg",xe,a[1]||(a[1]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(c(),l("svg",he,a[2]||(a[2]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))),s("span",null,d("saving"===O.value?"Saving draft...":"saved"===O.value?"Draft saved":"Failed to save draft"),1)],2)])):g("",!0),F.value?(c(),l("div",we,[s("div",_e,[a[4]||(a[4]=s("svg",{class:"h-5 w-5 text-red-400 mr-3 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s("div",null,[a[3]||(a[3]=s("h3",{class:"text-base font-semibold text-red-800"},"Error",-1)),s("p",ke,d(F.value),1)])])])):g("",!0),s("div",Ce,[s("div",Ve,[(c(),p(w(P.value),{"model-value":A,errors:I.value,loading:B.value,"aria-labelledby":`step-${z.value}-title`,"aria-describedby":`step-${z.value}-description`,role:"group",onValidate:R,"onUpdate:modelValue":L},null,40,["model-value","errors","loading","aria-labelledby","aria-describedby"]))])]),s("div",ze,[s("div",Se,[s("div",je,[z.value>1?(c(),p(M,{key:0,variant:"secondary",size:"sm",disabled:j.value,"aria-label":"Go back to step "+(z.value-1),onClick:J,onKeydown:_(J,["enter"])},{default:v(()=>a[5]||(a[5]=[s("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),y(" Back ",-1)])),o:1,l:[5]},8,["disabled","aria-label"])):(c(),l("div",Be)),s("div",Fe,[s("div",Ee," Step "+d(z.value)+" of "+d(2),1),n(M,{variant:q.value?"success":"primary",size:"sm",loading:j.value||B.value,disabled:!T.value||j.value,"aria-label":q.value?"Create contact and submit form":`Continue to step ${z.value+1}`,onClick:K,onKeydown:_(K,["enter"])},{default:v(()=>[y(d(q.value?"Create Contact":"Next")+" ",1),q.value?g("",!0):(c(),l("svg",Me,a[6]||(a[6]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])))]),o:1},8,["variant","loading","disabled","aria-label"])])])])])]))}}),Ue={class:"max-w-4xl mx-auto"},Ae={class:"mb-8"},$e={class:"flex items-center space-x-3 mb-4"},Ne={key:0,class:"mt-6 p-4 border border-red-300 rounded-md bg-red-50"},De={class:"flex"},Pe={class:"mt-1 text-sm text-red-700"},qe=a({t:"ContactCreateView",setup(a){const r=e(),o=t(null),u=e=>{o.value=null},m=e=>{},p=()=>{r.push("/contacts")};return(e,a)=>{const t=C("router-link");return c(),l("div",Ue,[s("div",Ae,[s("div",$e,[n(t,{to:"/contacts",class:"text-gray-500 hover:text-gray-700"},{default:v(()=>[n(i(N),{class:"h-5 w-5"})]),o:1}),a[0]||(a[0]=s("h1",{class:"text-3xl font-bold text-gray-900"},"Create New Contact",-1))]),a[1]||(a[1]=s("p",{class:"text-gray-600"}," Add a new contact with their organization, authority level, and contact details in three simple steps. ",-1))]),n(Oe,{"is-editing":!1,onSuccess:u,onCancel:p,onDraftSaved:m}),o.value?(c(),l("div",Ne,[s("div",De,[n(i($),{class:"h-5 w-5 text-red-400 mr-2 mt-0.5"}),s("div",null,[a[2]||(a[2]=s("h3",{class:"text-sm font-medium text-red-800"},"Error creating contact",-1)),s("p",Pe,d(o.value),1)])])])):g("",!0)])}}});export{qe as default};
