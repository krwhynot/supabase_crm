import{aa as e,a4 as s,y as t,f as l,s as a,b as i,_ as d,ag as r}from"./heroicons-QXV26b6T.js";import{d as n,r as c,c as o,C as x,D as u,J as m,V as g,G as v,U as f,_ as b,u as p,W as h,F as y,L as w,E as k,O as _,B as C}from"./vue-runtime-Ds28nt_E.js";/* empty css                                                                                     */import{_ as D}from"./_plugin-vue_export-helper-DYAABpgn.js";const j={class:"distributor-relationship-table"},R={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},A={class:"mt-1 text-sm text-gray-600"},P={class:"flex items-center space-x-3 mt-4 sm:mt-0"},T={key:0,class:"bg-white shadow rounded-lg overflow-hidden"},M={class:"animate-pulse p-6"},V={class:"space-y-4"},E={class:"ml-8 space-y-2"},N={key:1,class:"bg-white shadow rounded-lg overflow-hidden"},U={class:"p-6"},$={key:0,class:"text-center py-12"},z={key:1,class:"space-y-4"},B={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},H={class:"flex items-center space-x-4"},I={class:"flex items-center space-x-3"},L={class:"flex-shrink-0"},F={class:"text-sm font-medium text-gray-900"},G={class:"flex items-center space-x-2 text-xs text-gray-500"},J={class:"flex items-center space-x-4"},O={class:"flex items-center"},S={class:"text-sm text-gray-600 capitalize"},W={class:"text-sm text-gray-500"},q={class:"flex items-center space-x-2"},K=["onClick","disabled"],Q=["onClick","disabled"],X={key:0,class:"ml-8 mt-2 space-y-2"},Y={class:"flex items-center justify-between p-3 border border-gray-100 rounded-md bg-gray-50 hover:bg-gray-100 transition-colors"},Z={class:"flex items-center space-x-3"},ee={class:"flex items-center space-x-3"},se={class:"flex-shrink-0"},te={class:"text-sm font-medium text-gray-800"},le={class:"flex items-center space-x-2 text-xs text-gray-500"},ae={class:"flex items-center space-x-4"},ie={class:"flex items-center"},de={class:"text-xs text-gray-600 capitalize"},re={class:"text-xs text-gray-500"},ne={class:"flex items-center space-x-2"},ce=["onClick","disabled"],oe=["onClick","disabled"],xe={key:2,class:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4"},ue={class:"bg-white overflow-hidden shadow rounded-lg"},me={class:"p-5"},ge={class:"flex items-center"},ve={class:"flex-shrink-0"},fe={class:"ml-5 w-0 flex-1"},be={class:"text-lg font-medium text-gray-900"},pe={class:"bg-white overflow-hidden shadow rounded-lg"},he={class:"p-5"},ye={class:"flex items-center"},we={class:"flex-shrink-0"},ke={class:"ml-5 w-0 flex-1"},_e={class:"text-lg font-medium text-gray-900"},Ce={class:"bg-white overflow-hidden shadow rounded-lg"},De={class:"p-5"},je={class:"flex items-center"},Re={class:"flex-shrink-0"},Ae={class:"ml-5 w-0 flex-1"},Pe={class:"text-lg font-medium text-gray-900"},Te={class:"bg-white overflow-hidden shadow rounded-lg"},Me={class:"p-5"},Ve={class:"flex items-center"},Ee={class:"flex-shrink-0"},Ne={class:"ml-5 w-0 flex-1"},Ue={class:"text-lg font-medium text-gray-900"},$e=D(n({t:"DistributorRelationshipTable",props:{relationships:{},loading:{type:Boolean,default:!1},principalName:{default:"Principal"}},emits:["distributor-selected","contact-distributor","export-data"],setup(n,{emit:D}){const $e=n,ze=D,Be=c(new Set),He=o(()=>$e.relationships&&0!==$e.relationships.length?$e.relationships:[]),Ie=o(()=>He.value.every(e=>!e.distributor_name||Be.value.has(e.distributor_id||e.principal_id))),Le=o(()=>$e.relationships?.length||0),Fe=o(()=>$e.relationships?.filter(e=>"Active"===e.principal_status).length||0),Ge=o(()=>$e.relationships?.filter(e=>"Prospect"===e.principal_status).length||0),Je=o(()=>$e.relationships&&0!==$e.relationships.length?$e.relationships.filter(e=>e.distributor_name).length>0?2:1:0),Oe=()=>{Ie.value?Be.value.clear():He.value.forEach(e=>{e.distributor_name&&Be.value.add(e.distributor_id||e.principal_id)})},Se=e=>{ze("distributor-selected",e)},We=(e,s)=>{ze("contact-distributor",e,s)},qe=()=>{ze("export-data")},Ke=e=>({Active:"bg-green-400",Prospect:"bg-yellow-400",Inactive:"bg-gray-400",Customer:"bg-blue-400",Partner:"bg-purple-400",Vendor:"bg-orange-400"}[e||""]||"bg-gray-400"),Qe=e=>{if(!e)return"Never";const s=new Date(e),t=new Date,l=Math.abs(t.getTime()-s.getTime()),a=Math.ceil(l/864e5);return a<=1?"Today":a<=7?`${a} days ago`:a<=30?`${Math.ceil(a/7)} weeks ago`:a<=365?`${Math.ceil(a/30)} months ago`:s.toLocaleDateString()};return(n,c)=>(k(),x("div",j,[u("div",R,[u("div",null,[c[0]||(c[0]=u("h3",{class:"text-lg font-medium text-gray-900"},"Distributor Relationships",-1)),u("p",A," Distributor hierarchy and relationships for "+g(n.principalName),1)]),u("div",P,[u("button",{onClick:Oe,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[(k(),v(b(Ie.value?p(e):p(s)),{class:"h-4 w-4 mr-1"})),f(" "+g(Ie.value?"Collapse All":"Expand All"),1)]),u("button",{onClick:qe,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[h(p(t),{class:"h-4 w-4 mr-1"}),c[1]||(c[1]=f(" Export ",-1))])])]),n.loading?(k(),x("div",T,[u("div",M,[u("div",V,[(k(),x(y,null,w(3,e=>u("div",{key:e},[c[3]||(c[3]=_('<div class="flex items-center space-x-4 mb-2" data-v-2c6b1608><div class="h-4 bg-gray-200 rounded w-4" data-v-2c6b1608></div><div class="h-4 bg-gray-200 rounded w-1/3" data-v-2c6b1608></div><div class="flex-1" data-v-2c6b1608></div><div class="h-4 bg-gray-200 rounded w-1/6" data-v-2c6b1608></div></div>',1)),u("div",E,[(k(),x(y,null,w(2,e=>u("div",{key:e,class:"flex items-center space-x-4"},c[2]||(c[2]=[u("div",{class:"h-3 bg-gray-100 rounded w-1/4"},null,-1),u("div",{class:"h-3 bg-gray-100 rounded w-1/6"},null,-1),u("div",{class:"flex-1"},null,-1),u("div",{class:"h-3 bg-gray-100 rounded w-16"},null,-1)]))),64))])])),64))])])])):(k(),x("div",N,[u("div",U,[0===He.value.length?(k(),x("div",$,[h(p(l),{class:"mx-auto h-12 w-12 text-gray-400"}),c[4]||(c[4]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No relationships found",-1)),c[5]||(c[5]=u("p",{class:"mt-1 text-sm text-gray-500"}," This principal has no distributor relationships configured. ",-1))])):(k(),x("div",z,[(k(!0),x(y,null,w(He.value,e=>(k(),x("div",{key:e.distributor_id||e.principal_id,class:"relationship-node"},[u("div",B,[u("div",H,[c[8]||(c[8]=u("div",{class:"w-6"},null,-1)),u("div",I,[u("div",L,[h(p(l),{class:"h-8 w-8 text-blue-500"})]),u("div",null,[u("h4",F,g(e.distributor_name),1),u("div",G,[u("span",null,g(e.relationship_type),1),c[6]||(c[6]=u("span",null,"•",-1)),c[7]||(c[7]=u("span",null,"Direct Relationship",-1))])])])]),u("div",J,[u("div",O,[u("div",{class:C(["w-2 h-2 rounded-full mr-2",Ke(e.principal_status)])},null,2),u("span",S,g(e.principal_status?.toLowerCase().replace("_"," ")||"Unknown"),1)]),u("div",W,g(Qe(e.principal_last_contact)),1),u("div",q,[u("button",{onClick:s=>Se(e.distributor_id),disabled:!e.distributor_id,class:"text-blue-600 hover:text-blue-900 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," View ",8,K),u("button",{onClick:s=>We(e.distributor_id,e.distributor_name),disabled:!e.distributor_id||!e.distributor_name,class:"text-green-600 hover:text-green-900 text-sm font-medium transition-colors"}," Contact ",8,Q)])])]),e.distributor_name&&Be.value.has(e.distributor_id||e.principal_id)?(k(),x("div",X,[u("div",Y,[u("div",Z,[c[10]||(c[10]=u("div",{class:"flex items-center"},[u("div",{class:"w-4 h-px bg-gray-300"}),u("div",{class:"w-2 h-2 rounded-full bg-gray-300"})],-1)),u("div",ee,[u("div",se,[h(p(r),{class:"h-6 w-6 text-gray-400"})]),u("div",null,[u("h5",te,g(e.distributor_name),1),u("div",le,[u("span",null,g(e.relationship_type),1),c[9]||(c[9]=u("span",null,"•",-1)),u("span",null,g(e.distributor_city)+", "+g(e.distributor_state),1)])])])]),u("div",ae,[u("div",ie,[u("div",{class:C(["w-1.5 h-1.5 rounded-full mr-2",Ke(e.distributor_status)])},null,2),u("span",de,g(e.distributor_status?.toLowerCase().replace("_"," ")||"Unknown"),1)]),u("div",re,g(Qe(e.distributor_last_contact)),1),u("div",ne,[u("button",{onClick:s=>Se(e.distributor_id),disabled:!e.distributor_id,class:"text-blue-600 hover:text-blue-900 text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," View ",8,ce),u("button",{onClick:s=>We(e.distributor_id,e.distributor_name),disabled:!e.distributor_id||!e.distributor_name,class:"text-green-600 hover:text-green-900 text-xs font-medium transition-colors"}," Contact ",8,oe)])])])])):m("",!0)]))),128))]))])])),!n.loading&&He.value.length>0?(k(),x("div",xe,[u("div",ue,[u("div",me,[u("div",ge,[u("div",ve,[h(p(l),{class:"h-6 w-6 text-blue-500"})]),u("div",fe,[u("dl",null,[c[11]||(c[11]=u("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Total Distributors ",-1)),u("dd",be,g(Le.value),1)])])])])]),u("div",pe,[u("div",he,[u("div",ye,[u("div",we,[h(p(a),{class:"h-6 w-6 text-green-500"})]),u("div",ke,[u("dl",null,[c[12]||(c[12]=u("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Active Relationships ",-1)),u("dd",_e,g(Fe.value),1)])])])])]),u("div",Ce,[u("div",De,[u("div",je,[u("div",Re,[h(p(i),{class:"h-6 w-6 text-yellow-500"})]),u("div",Ae,[u("dl",null,[c[13]||(c[13]=u("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Pending Relationships ",-1)),u("dd",Pe,g(Ge.value),1)])])])])]),u("div",Te,[u("div",Me,[u("div",Ve,[u("div",Ee,[h(p(d),{class:"h-6 w-6 text-purple-500"})]),u("div",Ne,[u("dl",null,[c[14]||(c[14]=u("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Hierarchy Levels ",-1)),u("dd",Ue,g(Je.value),1)])])])])])])):m("",!0)]))}}),[["__scopeId","data-v-2c6b1608"]]);export{$e as D};
