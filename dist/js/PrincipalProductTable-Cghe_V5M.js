import{a as e}from"./ManagePrincipalProductsButton.vue_vue_type_style_index_0_scoped_f75a9cbf_lang-M6AE7TBG.js";import{T as t}from"./TrendIndicator-CbCc-Yc8.js";import{y as s,Z as a,aa as r,a4 as l}from"./heroicons-QXV26b6T.js";import{d as o,r as i,c as n,C as c,D as d,V as u,B as p,W as m,U as x,u as g,F as y,L as b,J as f,E as v,O as h,a1 as w}from"./vue-runtime-Ds28nt_E.js";import{_ as k}from"./_plugin-vue_export-helper-DYAABpgn.js";const _={class:"principal-product-table"},C={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},j={class:"mt-1 text-sm text-gray-600"},P={class:"flex items-center space-x-3 mt-4 sm:mt-0"},M={class:"flex rounded-md shadow-sm"},T={key:0,class:"animate-pulse"},D={class:"bg-white shadow rounded-lg overflow-hidden"},z={class:"px-4 py-5 sm:p-6"},N={class:"space-y-4"},O={key:1,class:"bg-white shadow rounded-lg overflow-hidden"},V={class:"overflow-x-auto"},A={class:"min-w-full divide-y divide-gray-200"},I={class:"bg-gray-50"},$=["onClick"],B={class:"flex items-center space-x-1"},F={key:0,class:"flex flex-col"},U={class:"bg-white divide-y divide-gray-200"},W={class:"px-6 py-4 whitespace-nowrap"},E={class:"flex items-center"},L={class:"text-sm font-medium text-gray-900"},R={class:"text-sm text-gray-500"},S={class:"px-6 py-4 whitespace-nowrap"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},H={class:"flex items-center"},J={class:"font-medium"},q={class:"text-xs text-green-600"},G={class:"px-6 py-4 whitespace-nowrap"},K={class:"flex items-center"},Q={class:"flex-1 bg-gray-200 rounded-full h-2 mr-2"},X={class:"text-sm font-medium text-gray-900"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ee={class:"font-semibold"},te={class:"text-xs text-gray-500"},se={class:"px-6 py-4 whitespace-nowrap"},ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},re={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},le={class:"flex items-center space-x-2"},oe=["onClick"],ie=["onClick"],ne={key:0,class:"text-center py-12"},ce={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},de={class:"p-6"},ue={class:"flex items-center justify-between mb-4"},pe={class:"text-lg font-medium text-gray-900 truncate"},me={class:"grid grid-cols-2 gap-4 mb-4"},xe={class:"text-center"},ge={class:"text-2xl font-bold text-blue-600"},ye={class:"text-center"},be={class:"text-2xl font-bold text-green-600"},fe={class:"mb-4"},ve={class:"flex justify-between items-center mb-2"},he={class:"text-sm font-semibold text-gray-900"},we={class:"flex justify-between items-center"},ke={class:"text-sm font-medium text-gray-700"},_e={class:"flex items-center justify-between mb-4"},Ce={class:"flex items-center"},je={class:"text-sm text-gray-500"},Pe={class:"flex space-x-2"},Me=["onClick"],Te=["onClick"],De={key:0,class:"col-span-full text-center py-12"},ze=k(o({t:"PrincipalProductTable",props:{products:{},loading:{type:Boolean,default:!1},principalName:{default:"Principal"}},emits:["product-selected","create-opportunity","export-data"],setup(o,{emit:k}){const ze=o,Ne=k,Oe=i("table"),Ve=i("product_performance_score"),Ae=i("desc"),Ie=[{key:"product_name",label:"Product",sortable:!0},{key:"product_performance_score",label:"Performance",sortable:!0},{key:"total_opportunities",label:"Opportunities",sortable:!0},{key:"win_rate",label:"Win Rate",sortable:!0},{key:"total_value",label:"Value",sortable:!0},{key:"engagement_trend",label:"Trend",sortable:!1},{key:"last_opportunity_date",label:"Last Activity",sortable:!0}],$e=n(()=>ze.products&&0!==ze.products.length?[...ze.products].sort((e,t)=>{const s=e[Ve.value],a=t[Ve.value];let r=null!=s?s:0,l=null!=a?a:0;return"string"==typeof s&&"string"==typeof a?(r=s.toLowerCase(),l=a.toLowerCase()):"number"==typeof s&&"number"==typeof a&&(r=s,l=a),"asc"===Ae.value?r<l?-1:r>l?1:0:r>l?-1:r<l?1:0}):[]),Be=e=>{Ne("product-selected",e)},Fe=e=>{Ne("create-opportunity",e)},Ue=()=>{Ne("export-data")},We=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Ee=e=>{if(!e)return"Never";const t=new Date(e),s=new Date,a=Math.abs(s.getTime()-t.getTime()),r=Math.ceil(a/864e5);return r<=1?"Today":r<=7?`${r} days ago`:r<=30?`${Math.ceil(r/7)} weeks ago`:r<=365?`${Math.ceil(r/30)} months ago`:t.toLocaleDateString()};return(o,i)=>(v(),c("div",_,[d("div",C,[d("div",null,[i[2]||(i[2]=d("h3",{class:"text-lg font-medium text-gray-900"},"Product Performance",-1)),d("p",j," Performance metrics for products associated with "+u(o.principalName),1)]),d("div",P,[d("div",M,[d("button",{onClick:i[0]||(i[0]=e=>Oe.value="table"),class:p(["px-4 py-2 text-sm font-medium border rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:z-10","table"===Oe.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," Table ",2),d("button",{onClick:i[1]||(i[1]=e=>Oe.value="cards"),class:p(["px-4 py-2 text-sm font-medium border-t border-r border-b rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:z-10 -ml-px","cards"===Oe.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," Cards ",2)]),d("button",{onClick:Ue,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[m(g(s),{class:"h-4 w-4 mr-1"}),i[3]||(i[3]=x(" Export ",-1))])])]),o.loading?(v(),c("div",T,[d("div",D,[d("div",z,[d("div",N,[(v(),c(y,null,b(5,e=>d("div",{key:e,class:"flex items-center space-x-4"},i[4]||(i[4]=[h('<div class="h-4 bg-gray-200 rounded w-1/4" data-v-9b8260f9></div><div class="h-4 bg-gray-200 rounded w-1/6" data-v-9b8260f9></div><div class="h-4 bg-gray-200 rounded w-1/6" data-v-9b8260f9></div><div class="h-4 bg-gray-200 rounded w-1/4" data-v-9b8260f9></div><div class="h-4 bg-gray-200 rounded w-1/6" data-v-9b8260f9></div>',5)]))),64))])])])])):"table"===Oe.value?(v(),c("div",O,[d("div",V,[d("table",A,[d("thead",I,[d("tr",null,[(v(),c(y,null,b(Ie,e=>d("th",{key:e.key,onClick:t=>e.sortable&&(e=>{Ve.value===e?Ae.value="asc"===Ae.value?"desc":"asc":(Ve.value=e,Ae.value="desc")})(e.key),class:p(["px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",e.sortable?"cursor-pointer hover:bg-gray-100":""])},[d("div",B,[d("span",null,u(e.label),1),e.sortable?(v(),c("div",F,[m(g(r),{class:p(["h-3 w-3",[Ve.value===e.key&&"asc"===Ae.value?"text-blue-600":"text-gray-400"]])},null,8,["class"]),m(g(l),{class:p(["h-3 w-3 -mt-1",[Ve.value===e.key&&"desc"===Ae.value?"text-blue-600":"text-gray-400"]])},null,8,["class"])])):f("",!0)])],10,$)),64)),i[5]||(i[5]=d("th",{class:"relative px-6 py-3"},[d("span",{class:"sr-only"},"Actions")],-1))])]),d("tbody",U,[(v(!0),c(y,null,b($e.value,s=>{return v(),c("tr",{key:s.product_id,class:"hover:bg-gray-50 transition-colors duration-150"},[d("td",W,[d("div",E,[d("div",null,[d("div",L,u(s.product_name),1),d("div",R," ID: "+u(s.product_id.slice(0,8))+"... ",1)])])]),d("td",S,[m(e,{score:s.product_performance_score||0,size:"md"},null,8,["score"])]),d("td",Z,[d("div",H,[d("span",J,u(s.total_opportunities||0),1),i[6]||(i[6]=d("span",{class:"ml-1 text-gray-500"},"total",-1))]),d("div",q,u(s.won_opportunities_for_product||0)+" won ",1)]),d("td",G,[d("div",K,[d("div",Q,[d("div",{class:p(["h-2 rounded-full transition-all duration-300",(a=s.win_rate||0,a>=70?"bg-green-500":a>=40?"bg-yellow-500":"bg-red-500")]),style:w({width:`${Math.min(s.win_rate||0,100)}%`})},null,6)]),d("span",X,u(Math.round(s.win_rate||0))+"% ",1)])]),d("td",Y,[d("div",ee,u(We(s.total_value||0)),1),d("div",te," Avg: "+u(We((s.total_value||0)/Math.max(s.total_opportunities||1,1))),1)]),d("td",se,[m(t,{change:0,trend:"stable",size:"sm"})]),d("td",ae,u(Ee(s.latest_opportunity_date)),1),d("td",re,[d("div",le,[d("button",{onClick:e=>Be(s.product_id),class:"text-blue-600 hover:text-blue-900 transition-colors"}," View ",8,oe),d("button",{onClick:e=>Fe(s.product_id),class:"text-green-600 hover:text-green-900 transition-colors"}," New Opp ",8,ie)])])]);var a}),128))])])]),0===$e.value.length?(v(),c("div",ne,[m(g(a),{class:"mx-auto h-12 w-12 text-gray-400"}),i[7]||(i[7]=d("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No products found",-1)),i[8]||(i[8]=d("p",{class:"mt-1 text-sm text-gray-500"}," This principal has no associated products yet. ",-1))])):f("",!0)])):(v(),c("div",ce,[(v(!0),c(y,null,b($e.value,s=>(v(),c("div",{key:s.product_id,class:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow duration-200"},[d("div",de,[d("div",ue,[d("h4",pe,u(s.product_name),1),m(e,{score:s.product_performance_score||0,size:"sm"},null,8,["score"])]),d("div",me,[d("div",xe,[d("div",ge,u(s.total_opportunities||0),1),i[9]||(i[9]=d("div",{class:"text-xs text-gray-500"},"Opportunities",-1))]),d("div",ye,[d("div",be,u(Math.round(s.win_rate||0))+"% ",1),i[10]||(i[10]=d("div",{class:"text-xs text-gray-500"},"Win Rate",-1))])]),d("div",fe,[d("div",ve,[i[11]||(i[11]=d("span",{class:"text-sm text-gray-600"},"Total Value",-1)),d("span",he,u(We(s.total_value||0)),1)]),d("div",we,[i[12]||(i[12]=d("span",{class:"text-sm text-gray-600"},"Avg per Opp",-1)),d("span",ke,u(We((s.total_value||0)/Math.max(s.total_opportunities||1,1))),1)])]),d("div",_e,[d("div",Ce,[m(t,{change:0,trend:"stable",size:"sm"}),i[13]||(i[13]=d("span",{class:"ml-2 text-sm text-gray-600"},"Trend",-1))]),d("div",je,u(Ee(s.latest_opportunity_date)),1)]),d("div",Pe,[d("button",{onClick:e=>Be(s.product_id),class:"flex-1 inline-flex justify-center items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," View Details ",8,Me),d("button",{onClick:e=>Fe(s.product_id),class:"flex-1 inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," New Opportunity ",8,Te)])])]))),128)),0===$e.value.length?(v(),c("div",De,[m(g(a),{class:"mx-auto h-12 w-12 text-gray-400"}),i[14]||(i[14]=d("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No products found",-1)),i[15]||(i[15]=d("p",{class:"mt-1 text-sm text-gray-500"}," This principal has no associated products yet. ",-1))])):f("",!0)]))]))}}),[["__scopeId","data-v-9b8260f9"]]);export{ze as P};
