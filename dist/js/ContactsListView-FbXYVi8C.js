import{d as e,r as t,y as s,C as o,D as r,J as a,W as n,N as l,H as i,K as c,X as d,Y as u,O as m,B as p,V as x,G as g,F as h,L as y,E as f,U as b,Z as v}from"./vue-runtime-Ds28nt_E.js";import{u as w}from"./vue-router-BP51f1Hv.js";import{c as k}from"./contactsApi-BzU-Ytgk.js";import{c as C}from"./contacts-C4llTsRs.js";import"./supabaseClient-BTp2rsYU.js";import"./supabase-b_GQhF-l.js";import"./yup-D02u5inE.js";const j={class:"max-w-7xl mx-auto"},_={class:"flex justify-between items-center mb-8"},M={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},z={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},S={class:"flex-1 max-w-md"},B={class:"relative"},A={class:"flex items-center space-x-3"},N={class:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},H=["d"],O={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},U={key:1,class:"bg-white rounded-lg shadow-sm border border-red-200 p-6"},V={class:"flex items-center"},E={class:"text-red-700"},F={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center"},L={class:"text-gray-500 mb-6"},$={key:3,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},D={class:"overflow-x-auto"},T={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},K=["onClick"],Y={class:"px-6 py-4 whitespace-nowrap"},I={class:"flex items-center"},J={class:"flex-shrink-0 h-10 w-10"},P={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},W={class:"text-sm font-medium text-blue-600"},X={class:"ml-4"},Z={class:"text-sm font-medium text-gray-900"},q={key:0,class:"text-sm text-gray-500"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},R={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ee=["href"],te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},oe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},re={class:"flex items-center space-x-2"},ae={key:4,class:"mt-6 flex justify-center"},ne={class:"text-sm text-gray-500"},le=e({t:"ContactsListView",setup(e){const le=w(),ie=t([]),ce=t(!0),de=t(null),ue=t(""),me=t("last_name"),pe=t("asc"),xe=async()=>{try{ce.value=!0,de.value=null;const e=await k.getContacts({search:ue.value.trim()||void 0,sortBy:me.value,sortOrder:pe.value});e.success&&e.data?ie.value=e.data:de.value=e.error||"Failed to load contacts"}catch(e){de.value="An unexpected error occurred"}finally{ce.value=!1}};let ge;const he=()=>{clearTimeout(ge),ge=setTimeout(()=>{xe()},300)},ye=()=>{xe()},fe=()=>{pe.value="asc"===pe.value?"desc":"asc",xe()},be=e=>C.getFullName(e),ve=e=>C.getInitials(e);return s(()=>{xe()}),(e,t)=>{const s=i("router-link");return f(),o("div",null,[r("div",j,[r("div",_,[t[6]||(t[6]=r("div",null,[r("h1",{class:"text-3xl font-bold text-gray-900"},"Contacts"),r("p",{class:"mt-2 text-gray-600"},"Manage your professional contacts")],-1)),n(s,{to:"/contacts/new",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:l(()=>t[5]||(t[5]=[r("svg",{class:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),b(" New Contact ",-1)])),o:1,l:[5]})]),r("div",M,[r("div",z,[r("div",S,[t[8]||(t[8]=r("label",{for:"search",class:"sr-only"},"Search contacts",-1)),r("div",B,[t[7]||(t[7]=r("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[r("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),c(r("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=e=>ue.value=e),type:"text",placeholder:"Search contacts...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onInput:he},null,544),[[d,ue.value]])])]),r("div",A,[c(r("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>me.value=e),class:"block w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:ye},t[9]||(t[9]=[m('<option value="last_name">Sort by Last Name</option><option value="first_name">Sort by First Name</option><option value="organization">Sort by Organization</option><option value="email">Sort by Email</option><option value="created_at">Sort by Date Added</option>',5)]),544),[[u,me.value]]),r("button",{onClick:fe,class:p(["p-2 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500",{"bg-gray-50":"desc"===pe.value}])},[(f(),o("svg",N,[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"asc"===pe.value?"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12":"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"},null,8,H)]))],2)])])]),ce.value?(f(),o("div",O,t[10]||(t[10]=[r("div",{class:"flex justify-center"},[r("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})],-1)]))):de.value?(f(),o("div",U,[r("div",V,[t[11]||(t[11]=r("svg",{class:"h-5 w-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),r("span",E,x(de.value),1)])])):0===ie.value.length?(f(),o("div",F,[t[13]||(t[13]=r("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t[14]||(t[14]=r("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No contacts found",-1)),r("p",L,x(ue.value?"Try adjusting your search terms.":"Get started by adding your first contact."),1),ue.value?a("",!0):(f(),g(s,{key:0,to:"/contacts/new",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"},{default:l(()=>t[12]||(t[12]=[r("svg",{class:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),b(" Add Your First Contact ",-1)])),o:1,l:[12]}))])):(f(),o("div",$,[r("div",D,[r("table",T,[t[17]||(t[17]=r("thead",{class:"bg-gray-50"},[r("tr",null,[r("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Contact "),r("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Organization "),r("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),r("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Phone "),r("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Added "),r("th",{scope:"col",class:"relative px-6 py-3"},[r("span",{class:"sr-only"},"Actions")])])],-1)),r("tbody",G,[(f(!0),o(h,null,y(ie.value,e=>{return f(),o("tr",{key:e.id||e.email||"unknown",class:"hover:bg-gray-50 cursor-pointer",onClick:t=>{return e.id&&void((s=e.id)&&le.push(`/contacts/${s}`));var s}},[r("td",Y,[r("div",I,[r("div",J,[r("div",P,[r("span",W,x(ve(e)),1)])]),r("div",X,[r("div",Z,x(be(e)),1),e.position?(f(),o("div",q,x(e.position),1)):a("",!0)])])]),r("td",Q,x(e.organization_id?"Organization":"No organization"),1),r("td",R,[r("a",{href:`mailto:${e.email}`,class:"hover:text-blue-600",onClick:t[2]||(t[2]=v(()=>{},["stop"]))},x(e.email),9,ee)]),r("td",te,x((c=e.phone,C.formatPhone(c))),1),r("td",se,x((i=e.created_at,i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown")),1),r("td",oe,[r("div",re,[n(s,{to:`/contacts/${e.id}`,class:"text-blue-600 hover:text-blue-900",onClick:t[3]||(t[3]=v(()=>{},["stop"]))},{default:l(()=>t[15]||(t[15]=[b(" View ",-1)])),o:2,l:[15]},1032,["to"]),n(s,{to:`/contacts/${e.id}/edit`,class:"text-indigo-600 hover:text-indigo-900",onClick:t[4]||(t[4]=v(()=>{},["stop"]))},{default:l(()=>t[16]||(t[16]=[b(" Edit ",-1)])),o:2,l:[16]},1032,["to"])])])],8,K);var i,c}),128))])])])])),ie.value.length>0?(f(),o("div",ae,[r("div",ne," Showing "+x(ie.value.length)+" contacts ",1)])):a("",!0)])])}}});export{le as default};
