import{u as e}from"./vue-router-BP51f1Hv.js";import{u as t}from"./organizationStore-BI5YngbF.js";import{d as s,r as a,b as r,y as o,C as l,D as n,J as i,W as d,U as c,u,Z as m,K as p,Y as g,O as x,X as b,V as y,F as f,L as h,E as v,B as w,G as k,_ as C,c as j,a1 as _,N as z,H as D}from"./vue-runtime-Ds28nt_E.js";import{a as O,b as P,e as $,o as E,m as A,n as U,p as F,q as I,s as V,t as S,u as T,j as L,k as M,v as B,w as N,r as W,x as R,y as q,z as H,A as K,B as Q,C as G,D as Y,E as J,h as X,f as Z,i as ee,F as te}from"./heroicons-QXV26b6T.js";import{_ as se}from"./_plugin-vue_export-helper-DYAABpgn.js";import"./pinia-CUC4VGP7.js";import"./supabaseClient-BTp2rsYU.js";import"./supabase-b_GQhF-l.js";import"./yup-D02u5inE.js";const ae={class:"bg-white shadow-sm rounded-lg border border-gray-200"},re={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},oe={key:0,class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ne={class:"flex items-center justify-end space-x-3"},ie=["disabled"],de={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},ce={class:"px-6 py-6"},ue={key:0,class:"text-center py-8"},me={key:1,class:"text-center py-8"},pe={class:"text-red-600 mb-4"},ge={class:"text-gray-600 mb-4"},xe={key:2,class:"text-center py-8"},be={key:3,class:"flow-root"},ye={class:"-mb-8"},fe={key:0,class:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"},he={class:"relative flex items-start space-x-3"},ve={class:"relative"},we={class:"min-w-0 flex-1"},ke={class:"flex items-center justify-between"},Ce={class:"text-sm"},je={class:"font-medium text-gray-900"},_e={class:"mt-1 flex items-center space-x-2 text-sm text-gray-500"},ze={class:"capitalize"},De={key:0,class:"capitalize"},Oe={class:"flex items-center space-x-2"},Pe=["onClick","aria-label"],$e=["onClick","aria-label"],Ee={key:0,class:"mt-2 text-sm text-gray-700"},Ae={class:"whitespace-pre-wrap"},Ue=s({t:"InteractionTimeline",props:{organizationId:{}},setup(e){const t=e,s=a(!1),j=a(null),_=a(!1),z=a(!1),D=a([]),B=r({type:"",channel:"",subject:"",notes:""}),N=async()=>{s.value=!0,j.value=null;try{D.value=[]}catch(e){j.value="Failed to load interactions. Please try again."}finally{s.value=!1}},W=async()=>{_.value=!0;try{const e={id:`interaction_${Date.now()}`,organization_id:t.organizationId,type:B.type,channel:B.channel||null,subject:B.subject,notes:B.notes||null,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};D.value.unshift(e),Object.assign(B,{type:"",channel:"",subject:"",notes:""}),z.value=!1}catch(e){alert("Failed to add interaction. Please try again.")}finally{_.value=!1}},R=()=>{Object.assign(B,{type:"",channel:"",subject:"",notes:""}),z.value=!1},q=e=>{const t={email:"bg-blue-500",phone:"bg-green-500",meeting:"bg-purple-500",note:"bg-gray-500",task:"bg-orange-500",demo:"bg-indigo-500",proposal:"bg-red-500"};return t[e]||t.note},H=e=>{const t=new Date(e),s=(new Date).getTime()-t.getTime(),a=Math.floor(s/864e5);return 0===a?"Today":1===a?"Yesterday":a<7?`${a} days ago`:t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})};return o(()=>{N()}),(e,t)=>(v(),l("div",ae,[n("div",re,[t[7]||(t[7]=n("div",null,[n("h3",{class:"text-lg font-medium text-gray-900"},"Interaction Timeline"),n("p",{class:"mt-1 text-sm text-gray-500"},"Communication history and engagement tracking")],-1)),n("button",{onClick:t[0]||(t[0]=e=>z.value=!z.value),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[d(u(O),{class:"h-4 w-4 mr-2"}),t[6]||(t[6]=c(" Add Interaction ",-1))])]),z.value?(v(),l("div",oe,[n("form",{onSubmit:m(W,["prevent"]),class:"space-y-4"},[n("div",le,[n("div",null,[t[9]||(t[9]=n("label",{for:"interaction-type",class:"block text-sm font-medium text-gray-700 mb-1"}," Type * ",-1)),p(n("select",{id:"interaction-type","onUpdate:modelValue":t[1]||(t[1]=e=>B.type=e),required:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"},t[8]||(t[8]=[x('<option value="">Select type</option><option value="email">Email</option><option value="phone">Phone Call</option><option value="meeting">Meeting</option><option value="note">Note</option><option value="task">Task</option><option value="demo">Demo</option><option value="proposal">Proposal</option>',8)]),512),[[g,B.type]])]),n("div",null,[t[11]||(t[11]=n("label",{for:"channel",class:"block text-sm font-medium text-gray-700 mb-1"}," Channel ",-1)),p(n("select",{id:"channel","onUpdate:modelValue":t[2]||(t[2]=e=>B.channel=e),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"},t[10]||(t[10]=[x('<option value="">Select channel</option><option value="direct">Direct</option><option value="linkedin">LinkedIn</option><option value="website">Website</option><option value="referral">Referral</option><option value="cold_outreach">Cold Outreach</option><option value="event">Event</option><option value="social_media">Social Media</option>',8)]),512),[[g,B.channel]])])]),n("div",null,[t[12]||(t[12]=n("label",{for:"subject",class:"block text-sm font-medium text-gray-700 mb-1"}," Subject * ",-1)),p(n("input",{id:"subject","onUpdate:modelValue":t[3]||(t[3]=e=>B.subject=e),type:"text",required:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter interaction subject"},null,512),[[b,B.subject]])]),n("div",null,[t[13]||(t[13]=n("label",{for:"notes",class:"block text-sm font-medium text-gray-700 mb-1"}," Notes ",-1)),p(n("textarea",{id:"notes","onUpdate:modelValue":t[4]||(t[4]=e=>B.notes=e),rows:"3",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Add detailed notes about this interaction"},null,512),[[b,B.notes]])]),n("div",ne,[n("button",{type:"button",onClick:R,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),n("button",{type:"submit",disabled:_.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[_.value?(v(),l("div",de)):i("",!0),c(" "+y(_.value?"Adding...":"Add Interaction"),1)],8,ie)])],32)])):i("",!0),n("div",ce,[s.value?(v(),l("div",ue,t[14]||(t[14]=[n("div",{class:"inline-flex items-center"},[n("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),n("span",{class:"text-gray-600"},"Loading interactions...")],-1)]))):j.value?(v(),l("div",me,[n("div",pe,[d(u(P),{class:"h-8 w-8 mx-auto"})]),t[16]||(t[16]=n("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Error Loading Interactions",-1)),n("p",ge,y(j.value),1),n("button",{onClick:N,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200"},[d(u($),{class:"h-4 w-4 mr-2"}),t[15]||(t[15]=c(" Try Again ",-1))])])):0===D.value.length?(v(),l("div",xe,[d(u(E),{class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t[18]||(t[18]=n("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"No interactions yet",-1)),t[19]||(t[19]=n("p",{class:"text-gray-600 mb-4"},"Start tracking communication with this organization.",-1)),n("button",{onClick:t[5]||(t[5]=e=>z.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"},[d(u(O),{class:"h-4 w-4 mr-2"}),t[17]||(t[17]=c(" Add First Interaction ",-1))])])):(v(),l("div",be,[n("ul",ye,[(v(!0),l(f,null,h(D.value,(e,t)=>{return v(),l("li",{key:e.id,class:"relative pb-8"},[t!==D.value.length-1?(v(),l("div",fe)):i("",!0),n("div",he,[n("div",ve,[n("div",{class:w(["h-10 w-10 rounded-full flex items-center justify-center ring-8 ring-white",q(e.type)])},[(v(),k(C((s=e.type,{email:M,phone:L,meeting:T,note:S,task:V,demo:I,proposal:F}[s]||S)),{class:"h-5 w-5 text-white"}))],2)]),n("div",we,[n("div",ke,[n("div",null,[n("div",Ce,[n("span",je,y(e.subject),1)]),n("div",_e,[n("span",ze,y(e.type),1),e.channel?(v(),l("span",De,"• "+y(e.channel),1)):i("",!0),n("span",null,"• "+y(H(e.created_at)),1)])]),n("div",Oe,[n("button",{onClick:e=>{alert("Edit functionality would be implemented here")},class:"p-1 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100","aria-label":`Edit interaction: ${e.subject}`},[d(u(A),{class:"h-4 w-4"})],8,Pe),n("button",{onClick:t=>(async e=>{const t=D.value.find(t=>t.id===e);if(t&&confirm(`Are you sure you want to delete this interaction: "${t.subject}"?`))try{D.value=D.value.filter(t=>t.id!==e)}catch(s){alert("Failed to delete interaction. Please try again.")}})(e.id),class:"p-1 text-red-400 hover:text-red-600 rounded-md hover:bg-red-50","aria-label":`Delete interaction: ${e.subject}`},[d(u(U),{class:"h-4 w-4"})],8,$e)])]),e.notes?(v(),l("div",Ee,[n("p",Ae,y(e.notes),1)])):i("",!0)])])]);var s}),128))])]))])]))}}),Fe={class:"bg-white shadow-sm rounded-lg border border-gray-200"},Ie={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},Ve={class:"flex items-center space-x-3"},Se=["value"],Te={class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500 cursor-pointer"},Le={key:0,class:"px-6 py-4 border-b border-gray-200 bg-blue-50"},Me={class:"space-y-2"},Be={class:"flex items-center space-x-3 min-w-0 flex-1"},Ne={class:"flex-shrink-0"},We={class:"min-w-0 flex-1"},Re={class:"text-sm font-medium text-gray-900 truncate"},qe={class:"w-full bg-gray-200 rounded-full h-2 mt-1"},He={class:"flex-shrink-0 ml-4"},Ke={class:"text-sm text-gray-500"},Qe={class:"px-6 py-6"},Ge={key:0,class:"text-center py-8"},Ye={key:1,class:"text-center py-8"},Je={class:"text-red-600 mb-4"},Xe={class:"text-gray-600 mb-4"},Ze={key:2,class:"text-center py-8"},et={class:"text-lg font-medium text-gray-900 mb-2"},tt={class:"text-gray-600 mb-4"},st={class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 cursor-pointer"},at={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},rt=["onClick"],ot={class:"text-center"},lt=["title"],nt={class:"text-xs text-gray-500 mt-1"},it={class:"text-xs text-gray-400 mt-1"},dt={class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},ct={class:"relative inline-block text-left"},ut=["onClick"],mt={key:0,class:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10"},pt={class:"py-1"},gt=["onClick"],xt=["onClick"],bt=["onClick"],yt={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:p-0"},ft={class:"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},ht={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},vt={class:"text-lg font-medium text-gray-900"},wt={class:"text-sm text-gray-500"},kt={class:"px-6 py-6"},Ct={class:"text-center py-12"},jt={class:"space-x-4"},_t=s({t:"DocumentRepository",props:{organizationId:{}},setup(e){const t=e,s=a(!1),x=a(null),b=a([]),z=a(""),D=a(null),O=a(),E=a([]),F=r({show:!1,document:null}),I=["Contract","Proposal","Invoice","Presentation","Legal","Marketing","Technical","Other"],V=j(()=>z.value?b.value.filter(e=>e.category===z.value):b.value),T=async()=>{s.value=!0,x.value=null;try{b.value=[]}catch(e){x.value="Failed to load documents. Please try again."}finally{s.value=!1}},L=async e=>{const t=e.target.files;if(t&&0!==t.length){for(const e of Array.from(t))await M(e);O.value&&(O.value.value="")}},M=async e=>{const s={fileName:e.name,progress:0};E.value.push(s);try{const a=setInterval(()=>{if(s.progress+=30*Math.random(),s.progress>=100){s.progress=100,clearInterval(a);const r={id:`doc_${Date.now()}_${Math.random()}`,organization_id:t.organizationId,name:e.name,file_type:e.type||J(e.name),file_url:URL.createObjectURL(e),category:"Other",size:e.size,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};b.value.unshift(r),setTimeout(()=>{const t=E.value.findIndex(t=>t.fileName===e.name);t>-1&&E.value.splice(t,1)},1e3)}},200)}catch(a){alert(`Failed to upload ${e.name}. Please try again.`);const t=E.value.findIndex(t=>t.fileName===e.name);t>-1&&E.value.splice(t,1)}},J=e=>{const t=e.split(".").pop()?.toLowerCase();return{pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",txt:"text/plain",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",csv:"text/csv",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xls:"application/vnd.ms-excel"}[t||""]||"application/octet-stream"},X=()=>{F.show=!1,F.document=null},Z=e=>{const t=window.document.createElement("a");t.href=e.file_url,t.download=e.name,t.click()},ee=e=>e.startsWith("image/")?K:e.includes("spreadsheet")||e.includes("excel")||"text/csv"===e?Q:e.startsWith("video/")?G:e.startsWith("audio/")?Y:S,te=e=>{const t={Contract:"bg-blue-100 text-blue-800",Proposal:"bg-purple-100 text-purple-800",Invoice:"bg-green-100 text-green-800",Presentation:"bg-orange-100 text-orange-800",Legal:"bg-red-100 text-red-800",Marketing:"bg-pink-100 text-pink-800",Technical:"bg-gray-100 text-gray-800",Other:"bg-gray-100 text-gray-800"};return t[e]||t.Other},se=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},ae={beforeMount:(e,t)=>{e.clickOutsideEvent=s=>{e===s.target||e.contains(s.target)||t.value()},window.document.addEventListener("click",e.clickOutsideEvent)},unmounted:e=>{e.clickOutsideEvent&&window.document.removeEventListener("click",e.clickOutsideEvent)}};return o(()=>{T()}),(e,t)=>(v(),l("div",Fe,[n("div",Ie,[t[4]||(t[4]=n("div",null,[n("h3",{class:"text-lg font-medium text-gray-900"},"Document Repository"),n("p",{class:"mt-1 text-sm text-gray-500"},"Manage files and documents for this organization")],-1)),n("div",Ve,[p(n("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>z.value=e),class:"block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"},[t[2]||(t[2]=n("option",{value:""},"All Categories",-1)),(v(),l(f,null,h(I,e=>n("option",{key:e,value:e},y(e),9,Se)),64))],512),[[g,z.value]]),n("label",Te,[d(u(B),{class:"h-4 w-4 mr-2"}),t[3]||(t[3]=c(" Upload Document ",-1)),n("input",{ref_key:"fileInput",ref:O,type:"file",multiple:"",accept:".pdf,.doc,.docx,.txt,.png,.jpg,.jpeg,.gif,.csv,.xlsx,.xls",onChange:L,class:"sr-only"},null,544)])])]),E.value.length>0?(v(),l("div",Le,[t[5]||(t[5]=n("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Uploading Files",-1)),n("div",Me,[(v(!0),l(f,null,h(E.value,e=>(v(),l("div",{key:e.fileName,class:"flex items-center justify-between"},[n("div",Be,[n("div",Ne,[d(u(R),{class:"h-5 w-5 text-gray-400"})]),n("div",We,[n("p",Re,y(e.fileName),1),n("div",qe,[n("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:_({width:`${e.progress}%`})},null,4)])])]),n("div",He,[n("span",Ke,y(e.progress)+"%",1)])]))),128))])])):i("",!0),n("div",Qe,[s.value?(v(),l("div",Ge,t[6]||(t[6]=[n("div",{class:"inline-flex items-center"},[n("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),n("span",{class:"text-gray-600"},"Loading documents...")],-1)]))):x.value?(v(),l("div",Ye,[n("div",Je,[d(u(P),{class:"h-8 w-8 mx-auto"})]),t[8]||(t[8]=n("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Error Loading Documents",-1)),n("p",Xe,y(x.value),1),n("button",{onClick:T,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200"},[d(u($),{class:"h-4 w-4 mr-2"}),t[7]||(t[7]=c(" Try Again ",-1))])])):0===V.value.length?(v(),l("div",Ze,[d(u(N),{class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n("h4",et,y(z.value?"No documents in this category":"No documents yet"),1),n("p",tt,y(z.value?"Try selecting a different category or upload documents.":"Upload documents to get started."),1),n("label",st,[d(u(B),{class:"h-4 w-4 mr-2"}),t[9]||(t[9]=c(" Upload Documents ",-1)),n("input",{type:"file",multiple:"",accept:".pdf,.doc,.docx,.txt,.png,.jpg,.jpeg,.gif,.csv,.xlsx,.xls",onChange:L,class:"sr-only"},null,32)])])):(v(),l("div",at,[(v(!0),l(f,null,h(V.value,e=>{return v(),l("div",{key:e.id,class:"relative group border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:t=>(e=>{F.document=e,F.show=!0})(e)},[n("div",{class:w(["flex items-center justify-center w-12 h-12 mx-auto mb-3 rounded-lg",(a=e.file_type,a.startsWith("image/")?"bg-green-500":a.includes("spreadsheet")||a.includes("excel")||"text/csv"===a?"bg-emerald-500":a.startsWith("video/")?"bg-purple-500":a.startsWith("audio/")?"bg-pink-500":"application/pdf"===a?"bg-red-500":"bg-blue-500")])},[(v(),k(C(ee(e.file_type)),{class:"h-6 w-6 text-white"}))],2),n("div",ot,[n("h4",{class:"text-sm font-medium text-gray-900 truncate",title:e.name},y(e.name),9,lt),n("p",nt,y(e.category)+" • "+y(se(e.size)),1),n("p",it,y((s=e.created_at,new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))),1)]),n("span",{class:w(["absolute top-2 left-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",te(e.category)])},y(e.category),3),n("div",dt,[n("div",ct,[n("button",{onClick:m(t=>{return s=e.id,void(D.value=D.value===s?null:s);var s},["stop"]),class:"p-1 rounded-full bg-white shadow-sm border border-gray-200 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},[d(u(H),{class:"h-4 w-4 text-gray-600"})],8,ut),D.value===e.id?p((v(),l("div",mt,[n("div",pt,[n("button",{onClick:m(t=>Z(e),["stop"]),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[d(u(q),{class:"h-4 w-4 inline mr-2"}),t[10]||(t[10]=c(" Download ",-1))],8,gt),n("button",{onClick:m(t=>(e=>{const t=prompt("Enter new document name:",e.name);t&&t.trim()&&(e.name=t.trim(),e.updated_at=(new Date).toISOString())})(e),["stop"]),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[d(u(A),{class:"h-4 w-4 inline mr-2"}),t[11]||(t[11]=c(" Edit Details ",-1))],8,xt),n("button",{onClick:m(t=>(async e=>{const t=b.value.find(t=>t.id===e);if(t&&confirm(`Are you sure you want to delete "${t.name}"? This action cannot be undone.`))try{b.value=b.value.filter(t=>t.id!==e),D.value=null}catch(s){alert("Failed to delete document. Please try again.")}})(e.id),["stop"]),class:"block w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-50"},[d(u(U),{class:"h-4 w-4 inline mr-2"}),t[12]||(t[12]=c(" Delete ",-1))],8,bt)])])),[[ae,()=>D.value=null]]):i("",!0)])])],8,rt);var s,a}),128))]))]),F.show?(v(),l("div",{key:1,class:"fixed inset-0 z-50 overflow-y-auto",onClick:X},[n("div",yt,[t[16]||(t[16]=n("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),n("div",ft,[n("div",ht,[n("div",null,[n("h3",vt,y(F.document?.name),1),n("p",wt,y(F.document?.category)+" • "+y(se(F.document?.size||0)),1)]),n("button",{onClick:X,class:"rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"},[d(u(W),{class:"h-6 w-6"})])]),n("div",kt,[n("div",Ct,[d(u(R),{class:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t[14]||(t[14]=n("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Document Preview",-1)),t[15]||(t[15]=n("p",{class:"text-gray-600 mb-6"}," Document preview functionality would be implemented here based on file type. ",-1)),n("div",jt,[n("button",{onClick:t[1]||(t[1]=e=>Z(F.document)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"},[d(u(q),{class:"h-4 w-4 mr-2"}),t[13]||(t[13]=c(" Download ",-1))]),n("button",{onClick:X,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Close ")])])])])])])):i("",!0)]))}}),zt={class:"bg-white shadow-sm rounded-lg border border-gray-200"},Dt={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},Ot={class:"flex items-center space-x-3"},Pt={class:"flex items-center border border-gray-300 rounded-md"},$t={key:0,class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},Et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},At=["value"],Ut={class:"flex items-center justify-end space-x-3"},Ft=["disabled"],It={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},Vt={class:"px-6 py-6"},St={key:0,class:"text-center py-8"},Tt={key:1,class:"text-center py-8"},Lt={class:"text-red-600 mb-4"},Mt={class:"text-gray-600 mb-4"},Bt={key:2,class:"text-center py-8"},Nt={key:3,class:"space-y-6"},Wt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Rt={class:"bg-gray-50 rounded-lg p-4"},qt={class:"text-2xl font-bold text-gray-900"},Ht={class:"bg-blue-50 rounded-lg p-4"},Kt={class:"text-2xl font-bold text-blue-600"},Qt={class:"bg-green-50 rounded-lg p-4"},Gt={class:"text-2xl font-bold text-green-600"},Yt={class:"bg-yellow-50 rounded-lg p-4"},Jt={class:"text-2xl font-bold text-yellow-600"},Xt={class:"flex space-x-6 overflow-x-auto pb-4"},Zt={class:"flex items-center justify-between mb-4"},es={class:"flex items-center space-x-2"},ts={class:"font-medium text-gray-900"},ss={class:"text-sm text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full"},as={class:"text-sm text-gray-500"},rs={class:"space-y-3"},os=["onClick"],ls={class:"flex items-start justify-between mb-2"},ns={class:"font-medium text-gray-900 text-sm"},is=["onClick"],ds={class:"text-lg font-bold text-gray-900 mb-2"},cs={key:0,class:"text-sm text-gray-500 mb-2"},us={key:1,class:"text-sm text-gray-600 line-clamp-2"},ms={key:4,class:"space-y-4"},ps={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},gs={class:"bg-gray-50 rounded-lg p-4"},xs={class:"text-2xl font-bold text-gray-900"},bs={class:"bg-blue-50 rounded-lg p-4"},ys={class:"text-2xl font-bold text-blue-600"},fs={class:"bg-green-50 rounded-lg p-4"},hs={class:"text-2xl font-bold text-green-600"},vs={class:"bg-yellow-50 rounded-lg p-4"},ws={class:"text-2xl font-bold text-yellow-600"},ks={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},Cs={class:"min-w-full divide-y divide-gray-300"},js={class:"bg-white divide-y divide-gray-200"},_s={class:"px-6 py-4 whitespace-nowrap"},zs={class:"text-sm font-medium text-gray-900"},Ds={key:0,class:"text-sm text-gray-500 truncate max-w-xs"},Os={class:"px-6 py-4 whitespace-nowrap"},Ps={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},$s={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Es={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 space-x-2"},As=["onClick"],Us=["onClick"],Fs=se(s({t:"OpportunityPipeline",props:{organizationId:{}},setup(e){const t=e,s=a(!1),x=a(null),k=a(!1),C=a(!1),z=a("kanban"),D=a([]),E=r({name:"",stage:"",value:void 0,close_date:"",description:""}),A=[{id:"lead",name:"Lead",color:"#6B7280",order:1},{id:"qualified",name:"Qualified",color:"#3B82F6",order:2},{id:"proposal",name:"Proposal",color:"#F59E0B",order:3},{id:"negotiation",name:"Negotiation",color:"#EF4444",order:4},{id:"won",name:"Won",color:"#10B981",order:5},{id:"lost",name:"Lost",color:"#6B7280",order:6}],F=j(()=>D.value.filter(e=>"lost"!==e.stage).reduce((e,t)=>e+(t.value||0),0)),I=j(()=>D.value.filter(e=>"won"===e.stage).reduce((e,t)=>e+(t.value||0),0)),V=j(()=>{const e=D.value.filter(e=>"won"===e.stage||"lost"===e.stage);return 0===e.length?0:e.filter(e=>"won"===e.stage).length/e.length*100}),S=async()=>{s.value=!0,x.value=null;try{D.value=[]}catch(e){x.value="Failed to load opportunities. Please try again."}finally{s.value=!1}},L=async()=>{k.value=!0;try{const e={id:`opp_${Date.now()}`,organization_id:t.organizationId,name:E.name,description:E.description||null,value:E.value||null,stage:E.stage,close_date:E.close_date||null,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};D.value.push(e),Object.assign(E,{name:"",stage:"",value:void 0,close_date:"",description:""}),C.value=!1}catch(e){alert("Failed to add opportunity. Please try again.")}finally{k.value=!1}},M=()=>{Object.assign(E,{name:"",stage:"",value:void 0,close_date:"",description:""}),C.value=!1},B=e=>{alert("Edit functionality would be implemented here")},N=async e=>{const t=D.value.find(t=>t.id===e);if(t&&confirm(`Are you sure you want to delete the opportunity "${t.name}"?`))try{D.value=D.value.filter(t=>t.id!==e)}catch(s){alert("Failed to delete opportunity. Please try again.")}},W=e=>D.value.filter(t=>t.stage===e),R=e=>A.find(t=>t.id===e),q=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o(()=>{S()}),(e,t)=>(v(),l("div",zt,[n("div",Dt,[t[10]||(t[10]=n("div",null,[n("h3",{class:"text-lg font-medium text-gray-900"},"Opportunity Pipeline"),n("p",{class:"mt-1 text-sm text-gray-500"},"Track deals and sales opportunities for this organization")],-1)),n("div",Ot,[n("div",Pt,[n("button",{onClick:t[0]||(t[0]=e=>z.value="kanban"),class:w(["px-3 py-2 text-sm font-medium rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500","kanban"===z.value?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"])}," Kanban ",2),n("button",{onClick:t[1]||(t[1]=e=>z.value="list"),class:w(["px-3 py-2 text-sm font-medium rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500","list"===z.value?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"])}," List ",2)]),n("button",{onClick:t[2]||(t[2]=e=>C.value=!C.value),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[d(u(O),{class:"h-4 w-4 mr-2"}),t[9]||(t[9]=c(" Add Opportunity ",-1))])])]),C.value?(v(),l("div",$t,[n("form",{onSubmit:m(L,["prevent"]),class:"space-y-4"},[n("div",Et,[n("div",null,[t[11]||(t[11]=n("label",{for:"opportunity-name",class:"block text-sm font-medium text-gray-700 mb-1"}," Opportunity Name * ",-1)),p(n("input",{id:"opportunity-name","onUpdate:modelValue":t[3]||(t[3]=e=>E.name=e),type:"text",required:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter opportunity name"},null,512),[[b,E.name]])]),n("div",null,[t[13]||(t[13]=n("label",{for:"stage",class:"block text-sm font-medium text-gray-700 mb-1"}," Stage * ",-1)),p(n("select",{id:"stage","onUpdate:modelValue":t[4]||(t[4]=e=>E.stage=e),required:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"},[t[12]||(t[12]=n("option",{value:""},"Select stage",-1)),(v(),l(f,null,h(A,e=>n("option",{key:e.id,value:e.id},y(e.name),9,At)),64))],512),[[g,E.stage]])]),n("div",null,[t[14]||(t[14]=n("label",{for:"value",class:"block text-sm font-medium text-gray-700 mb-1"}," Value ($) ",-1)),p(n("input",{id:"value","onUpdate:modelValue":t[5]||(t[5]=e=>E.value=e),type:"number",min:"0",step:"0.01",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"0.00"},null,512),[[b,E.value,void 0,{number:!0}]])]),n("div",null,[t[15]||(t[15]=n("label",{for:"close-date",class:"block text-sm font-medium text-gray-700 mb-1"}," Expected Close Date ",-1)),p(n("input",{id:"close-date","onUpdate:modelValue":t[6]||(t[6]=e=>E.close_date=e),type:"date",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[b,E.close_date]])])]),n("div",null,[t[16]||(t[16]=n("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"}," Description ",-1)),p(n("textarea",{id:"description","onUpdate:modelValue":t[7]||(t[7]=e=>E.description=e),rows:"2",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Brief description of the opportunity"},null,512),[[b,E.description]])]),n("div",Ut,[n("button",{type:"button",onClick:M,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),n("button",{type:"submit",disabled:k.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[k.value?(v(),l("div",It)):i("",!0),c(" "+y(k.value?"Adding...":"Add Opportunity"),1)],8,Ft)])],32)])):i("",!0),n("div",Vt,[s.value?(v(),l("div",St,t[17]||(t[17]=[n("div",{class:"inline-flex items-center"},[n("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),n("span",{class:"text-gray-600"},"Loading opportunities...")],-1)]))):x.value?(v(),l("div",Tt,[n("div",Lt,[d(u(P),{class:"h-8 w-8 mx-auto"})]),t[19]||(t[19]=n("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Error Loading Opportunities",-1)),n("p",Mt,y(x.value),1),n("button",{onClick:S,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200"},[d(u($),{class:"h-4 w-4 mr-2"}),t[18]||(t[18]=c(" Try Again ",-1))])])):0===D.value.length?(v(),l("div",Bt,[d(u(J),{class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t[21]||(t[21]=n("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"No opportunities yet",-1)),t[22]||(t[22]=n("p",{class:"text-gray-600 mb-4"},"Create your first sales opportunity for this organization.",-1)),n("button",{onClick:t[8]||(t[8]=e=>C.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"},[d(u(O),{class:"h-4 w-4 mr-2"}),t[20]||(t[20]=c(" Create First Opportunity ",-1))])])):"kanban"===z.value?(v(),l("div",Nt,[n("div",Wt,[n("div",Rt,[n("div",qt,y(D.value.length),1),t[23]||(t[23]=n("div",{class:"text-sm text-gray-600"},"Total Opportunities",-1))]),n("div",Ht,[n("div",Kt,"$"+y(F.value.toLocaleString()),1),t[24]||(t[24]=n("div",{class:"text-sm text-gray-600"},"Pipeline Value",-1))]),n("div",Qt,[n("div",Gt,"$"+y(I.value.toLocaleString()),1),t[25]||(t[25]=n("div",{class:"text-sm text-gray-600"},"Won Value",-1))]),n("div",Yt,[n("div",Jt,y(Math.round(V.value))+"%",1),t[26]||(t[26]=n("div",{class:"text-sm text-gray-600"},"Win Rate",-1))])]),n("div",Xt,[(v(),l(f,null,h(A,e=>{return n("div",{key:e.id,class:"flex-shrink-0 w-80"},[n("div",Zt,[n("div",es,[n("div",{class:"w-3 h-3 rounded-full",style:_({backgroundColor:e.color})},null,4),n("h4",ts,y(e.name),1),n("span",ss,y(W(e.id).length),1)]),n("div",as," $"+y((t=e.id,W(t).reduce((e,t)=>e+(t.value||0),0)).toLocaleString()),1)]),n("div",rs,[(v(!0),l(f,null,h(W(e.id),e=>(v(),l("div",{key:e.id,class:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:e=>B()},[n("div",ls,[n("h5",ns,y(e.name),1),n("button",{onClick:m(t=>N(e.id),["stop"]),class:"p-1 text-gray-400 hover:text-red-600 rounded-md hover:bg-red-50"},[d(u(U),{class:"h-4 w-4"})],8,is)]),n("div",ds," $"+y(e.value?.toLocaleString()||"0"),1),e.close_date?(v(),l("div",cs,[d(u(T),{class:"h-4 w-4 inline mr-1"}),c(" "+y(q(e.close_date)),1)])):i("",!0),e.description?(v(),l("div",us,y(e.description),1)):i("",!0)],8,os))),128))])]);var t}),64))])])):(v(),l("div",ms,[n("div",ps,[n("div",gs,[n("div",xs,y(D.value.length),1),t[27]||(t[27]=n("div",{class:"text-sm text-gray-600"},"Total Opportunities",-1))]),n("div",bs,[n("div",ys,"$"+y(F.value.toLocaleString()),1),t[28]||(t[28]=n("div",{class:"text-sm text-gray-600"},"Pipeline Value",-1))]),n("div",fs,[n("div",hs,"$"+y(I.value.toLocaleString()),1),t[29]||(t[29]=n("div",{class:"text-sm text-gray-600"},"Won Value",-1))]),n("div",vs,[n("div",ws,y(Math.round(V.value))+"%",1),t[30]||(t[30]=n("div",{class:"text-sm text-gray-600"},"Win Rate",-1))])]),n("div",ks,[n("table",Cs,[t[31]||(t[31]=n("thead",{class:"bg-gray-50"},[n("tr",null,[n("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide"}," Opportunity "),n("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide"}," Stage "),n("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide"}," Value "),n("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide"}," Close Date "),n("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide"}," Actions ")])],-1)),n("tbody",js,[(v(!0),l(f,null,h(D.value,e=>(v(),l("tr",{key:e.id,class:"hover:bg-gray-50"},[n("td",_s,[n("div",null,[n("div",zs,y(e.name),1),e.description?(v(),l("div",Ds,y(e.description),1)):i("",!0)])]),n("td",Os,[n("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:_({backgroundColor:R(e.stage)?.color+"20",color:R(e.stage)?.color})},y(R(e.stage)?.name),5)]),n("td",Ps," $"+y(e.value?.toLocaleString()||"0"),1),n("td",$s,y(e.close_date?q(e.close_date):"-"),1),n("td",Es,[n("button",{onClick:e=>B(),class:"text-blue-600 hover:text-blue-900"}," Edit ",8,As),n("button",{onClick:t=>N(e.id),class:"text-red-600 hover:text-red-900"}," Delete ",8,Us)])]))),128))])])])]))])]))}}),[["__scopeId","data-v-14bb637c"]]),Is={key:0,class:"text-center py-12"},Vs={key:1,class:"text-center py-12"},Ss={class:"text-red-600 mb-4"},Ts={class:"text-gray-600 mb-6"},Ls={class:"space-x-4"},Ms={key:2,class:"space-y-6"},Bs={class:"flex items-start justify-between"},Ns={class:"min-w-0 flex-1"},Ws={class:"flex items-center space-x-2 text-sm text-gray-500 mb-2"},Rs={class:"text-gray-900 truncate"},qs={class:"flex items-center space-x-4"},Hs={class:"w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center"},Ks={class:"min-w-0 flex-1"},Qs={class:"text-2xl font-bold text-gray-900 truncate"},Gs={class:"flex items-center space-x-4 mt-1"},Ys={key:0,class:"text-sm text-gray-500"},Js={class:"flex items-center space-x-3 ml-4"},Xs={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Zs={class:"lg:col-span-2 space-y-6"},ea={class:"bg-white shadow-sm rounded-lg border border-gray-200"},ta={class:"px-6 py-6 space-y-6"},sa={key:0,class:"prose max-w-none"},aa={class:"text-gray-700"},ra={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},oa={key:0},la={class:"mt-1 text-sm text-gray-900"},na={key:1},ia={class:"mt-1 text-sm text-gray-900"},da={key:2},ca={class:"mt-1 text-sm text-gray-900"},ua={class:"bg-white shadow-sm rounded-lg border border-gray-200"},ma={class:"px-6 py-6"},pa={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},ga={key:0},xa={class:"text-sm font-medium text-gray-500 flex items-center"},ba={class:"mt-1"},ya=["href"],fa={key:1},ha={class:"text-sm font-medium text-gray-500 flex items-center"},va={class:"mt-1"},wa=["href"],ka={key:2},Ca={class:"text-sm font-medium text-gray-500 flex items-center"},ja={class:"mt-1"},_a=["href"],za={key:0,class:"bg-white shadow-sm rounded-lg border border-gray-200"},Da={class:"px-6 py-6"},Oa={class:"text-sm text-gray-900 not-italic"},Pa={key:0},$a={key:1},Ea={class:"flex items-center space-x-2"},Aa={key:0},Ua={key:1},Fa={key:2},Ia={key:3},Va={key:2},Sa={class:"space-y-6"},Ta={class:"bg-white shadow-sm rounded-lg border border-gray-200"},La={class:"px-6 py-6 space-y-4"},Ma={class:"flex items-center justify-between"},Ba={key:0,class:"flex items-center justify-between"},Na={class:"text-sm font-medium text-gray-900"},Wa={key:1,class:"flex items-center justify-between"},Ra={class:"text-sm font-medium text-gray-900"},qa={class:"bg-white shadow-sm rounded-lg border border-gray-200"},Ha={class:"px-6 py-6 space-y-3"},Ka={class:"space-y-6"},Qa=s({t:"OrganizationDetailView",props:{id:{}},setup(s){const r=s,m=e(),p=t(),g=a(!1),x=a(null),b=j(()=>p.currentOrganization),f=j(()=>!!b.value&&!!(b.value.address_line_1||b.value.city||b.value.state_province||b.value.postal_code||b.value.country)),h=j(()=>b.value?`/opportunities/new?${new URLSearchParams({contextType:"organization",organizationId:b.value.id,organizationName:b.value.name||""}).toString()}`:"/opportunities/new"),k=async()=>{g.value=!0,x.value=null;try{await p.fetchOrganization(r.id),b.value||(x.value="Organization not found")}catch(e){x.value="Failed to load organization. Please try again."}finally{g.value=!1}},C=async()=>{if(b.value&&confirm(`Are you sure you want to delete "${b.value.name}"? This action cannot be undone.`))try{await p.deleteOrganization(r.id),m.push("/organizations")}catch(e){alert("Failed to delete organization. Please try again.")}},_=()=>{b.value?.website&&window.open(b.value.website,"_blank","noopener,noreferrer")},O=()=>{b.value?.email&&(window.location.href=`mailto:${b.value.email}`)},E=e=>{if(!e)return"bg-gray-100 text-gray-800";const t={Active:"bg-green-100 text-green-800",Inactive:"bg-gray-100 text-gray-800",Prospect:"bg-blue-100 text-blue-800",Customer:"bg-purple-100 text-purple-800",Partner:"bg-yellow-100 text-yellow-800",Vendor:"bg-indigo-100 text-indigo-800"};return t[e]||t.Inactive},F=e=>e||"Unknown",I=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return o(()=>{k()}),(e,t)=>{const s=D("router-link");return g.value?(v(),l("div",Is,t[0]||(t[0]=[n("div",{class:"inline-flex items-center"},[n("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),n("span",{class:"text-lg text-gray-600"},"Loading organization...")],-1)]))):x.value?(v(),l("div",Vs,[n("div",Ss,[d(u(P),{class:"h-16 w-16 mx-auto"})]),t[3]||(t[3]=n("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"Error Loading Organization",-1)),n("p",Ts,y(x.value),1),n("div",Ls,[n("button",{onClick:k,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200"},[d(u($),{class:"h-4 w-4 mr-2"}),t[1]||(t[1]=c(" Try Again ",-1))]),d(s,{to:"/organizations",class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:z(()=>t[2]||(t[2]=[c(" Back to Organizations ",-1)])),o:1,l:[2]})])])):b.value?(v(),l("div",Ms,[n("div",Bs,[n("div",Ns,[n("nav",Ws,[d(s,{to:"/organizations",class:"hover:text-gray-700"},{default:z(()=>t[4]||(t[4]=[c("Organizations",-1)])),o:1,l:[4]}),d(u(X),{class:"h-4 w-4"}),n("span",Rs,y(b.value.name),1)]),n("div",qs,[n("div",Hs,[d(u(Z),{class:"h-8 w-8 text-blue-600"})]),n("div",Ks,[n("h1",Qs,y(b.value.name),1),n("div",Gs,[b.value.industry?(v(),l("span",Ys,y(b.value.industry),1)):i("",!0),n("span",{class:w(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",E(b.value.status)])},y(F(b.value.status)),3)])])])]),n("div",Js,[d(s,{to:`/organizations/${b.value.id}/edit`,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:z(()=>[d(u(A),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=c(" Edit ",-1))]),o:1,l:[5]},8,["to"]),n("button",{onClick:C,class:"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[d(u(U),{class:"h-4 w-4 mr-2"}),t[6]||(t[6]=c(" Delete ",-1))])])]),n("div",Xs,[n("div",Zs,[n("div",ea,[t[10]||(t[10]=n("div",{class:"px-6 py-4 border-b border-gray-200"},[n("h3",{class:"text-lg font-medium text-gray-900"},"Organization Details")],-1)),n("div",ta,[b.value.description?(v(),l("div",sa,[n("p",aa,y(b.value.description),1)])):i("",!0),n("div",ra,[b.value.employees_count?(v(),l("div",oa,[t[7]||(t[7]=n("dt",{class:"text-sm font-medium text-gray-500"},"Employee Count",-1)),n("dd",la,y(b.value.employees_count.toLocaleString())+" employees ",1)])):i("",!0),b.value.created_at?(v(),l("div",na,[t[8]||(t[8]=n("dt",{class:"text-sm font-medium text-gray-500"},"Created",-1)),n("dd",ia,y(I(b.value.created_at)),1)])):i("",!0),b.value.updated_at?(v(),l("div",da,[t[9]||(t[9]=n("dt",{class:"text-sm font-medium text-gray-500"},"Last Updated",-1)),n("dd",ca,y(I(b.value.updated_at)),1)])):i("",!0)])])]),n("div",ua,[t[14]||(t[14]=n("div",{class:"px-6 py-4 border-b border-gray-200"},[n("h3",{class:"text-lg font-medium text-gray-900"},"Contact Information")],-1)),n("div",ma,[n("dl",pa,[b.value.email?(v(),l("div",ga,[n("dt",xa,[d(u(M),{class:"h-4 w-4 mr-2"}),t[11]||(t[11]=c(" Email ",-1))]),n("dd",ba,[n("a",{href:`mailto:${b.value.email}`,class:"text-sm text-blue-600 hover:text-blue-800"},y(b.value.email),9,ya)])])):i("",!0),b.value.primary_phone?(v(),l("div",fa,[n("dt",ha,[d(u(L),{class:"h-4 w-4 mr-2"}),t[12]||(t[12]=c(" Phone ",-1))]),n("dd",va,[n("a",{href:`tel:${b.value.primary_phone}`,class:"text-sm text-blue-600 hover:text-blue-800"},y(b.value.primary_phone),9,wa)])])):i("",!0),b.value.website?(v(),l("div",ka,[n("dt",Ca,[d(u(ee),{class:"h-4 w-4 mr-2"}),t[13]||(t[13]=c(" Website ",-1))]),n("dd",ja,[n("a",{href:b.value.website,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 hover:text-blue-800 flex items-center"},[c(y(b.value.website)+" ",1),d(u(te),{class:"h-3 w-3 ml-1"})],8,_a)])])):i("",!0)])])]),f.value?(v(),l("div",za,[t[15]||(t[15]=n("div",{class:"px-6 py-4 border-b border-gray-200"},[n("h3",{class:"text-lg font-medium text-gray-900"},"Address")],-1)),n("div",Da,[n("address",Oa,[b.value.address_line_1?(v(),l("div",Pa,y(b.value.address_line_1),1)):i("",!0),b.value.address_line_2?(v(),l("div",$a,y(b.value.address_line_2),1)):i("",!0),n("div",Ea,[b.value.city?(v(),l("span",Aa,y(b.value.city),1)):i("",!0),b.value.city&&b.value.state_province?(v(),l("span",Ua,",")):i("",!0),b.value.state_province?(v(),l("span",Fa,y(b.value.state_province),1)):i("",!0),b.value.postal_code?(v(),l("span",Ia,y(b.value.postal_code),1)):i("",!0)]),b.value.country?(v(),l("div",Va,y(b.value.country),1)):i("",!0)])])])):i("",!0)]),n("div",Sa,[n("div",Ta,[t[19]||(t[19]=n("div",{class:"px-6 py-4 border-b border-gray-200"},[n("h3",{class:"text-lg font-medium text-gray-900"},"Quick Stats")],-1)),n("div",La,[n("div",Ma,[t[16]||(t[16]=n("span",{class:"text-sm text-gray-500"},"Status",-1)),n("span",{class:w(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",E(b.value.status)])},y(F(b.value.status)),3)]),b.value.employees_count?(v(),l("div",Ba,[t[17]||(t[17]=n("span",{class:"text-sm text-gray-500"},"Employees",-1)),n("span",Na,y(b.value.employees_count.toLocaleString()),1)])):i("",!0),b.value.industry?(v(),l("div",Wa,[t[18]||(t[18]=n("span",{class:"text-sm text-gray-500"},"Industry",-1)),n("span",Ra,y(b.value.industry),1)])):i("",!0)])]),n("div",qa,[t[24]||(t[24]=n("div",{class:"px-6 py-4 border-b border-gray-200"},[n("h3",{class:"text-lg font-medium text-gray-900"},"Quick Actions")],-1)),n("div",Ha,[d(s,{to:h.value,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700"},{default:z(()=>t[20]||(t[20]=[n("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),c(" Create Opportunity ",-1)])),o:1,l:[20]},8,["to"]),d(s,{to:`/organizations/${b.value.id}/edit`,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:z(()=>[d(u(A),{class:"h-4 w-4 mr-2"}),t[21]||(t[21]=c(" Edit Organization ",-1))]),o:1,l:[21]},8,["to"]),b.value.website?(v(),l("button",{key:0,onClick:_,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},[d(u(ee),{class:"h-4 w-4 mr-2"}),t[22]||(t[22]=c(" Visit Website ",-1))])):i("",!0),b.value.email?(v(),l("button",{key:1,onClick:O,class:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},[d(u(M),{class:"h-4 w-4 mr-2"}),t[23]||(t[23]=c(" Send Email ",-1))])):i("",!0)])])])]),n("div",Ka,[d(Ue,{"organization-id":b.value.id},null,8,["organization-id"]),d(_t,{"organization-id":b.value.id},null,8,["organization-id"]),d(Fs,{"organization-id":b.value.id},null,8,["organization-id"])])])):i("",!0)}}});export{Qa as default};
