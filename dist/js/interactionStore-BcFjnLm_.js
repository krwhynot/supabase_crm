import{d as t}from"./pinia-CUC4VGP7.js";import{s as e}from"./supabaseClient-Bh63a8tq.js";import{b as n,r as a,c as o}from"./vue-runtime-Ds28nt_E.js";const r=new class{async isSupabaseAvailable(){try{if(!e)return!1;const{error:t}=await e.from("interactions").select("count").limit(1);return!t}catch{return!1}}async getInteractionsWithFilters(t={},n={page:1,limit:20,sort_by:"interaction_date",sort_order:"desc"}){if(!(await this.isSupabaseAvailable()))return{success:!1,error:"Database connection not available"};try{let a=e.from("interactions").select("\n          id,\n          type,\n          subject,\n          interaction_date,\n          opportunity_id,\n          status,\n          outcome,\n          duration_minutes,\n          rating,\n          follow_up_required,\n          follow_up_date,\n          notes,\n          created_at,\n          updated_at,\n          opportunities (\n            id,\n            name,\n            organization_id,\n            organizations (\n              name\n            )\n          )\n        ").is("deleted_at",null);t.opportunity_id&&(a=a.eq("opportunity_id",t.opportunity_id)),t.type&&(a=a.eq("type",t.type)),t.status&&(a=a.eq("status",t.status)),t.outcome&&(a=a.eq("outcome",t.outcome)),t.date_from&&(a=a.gte("interaction_date",t.date_from)),t.date_to&&(a=a.lte("interaction_date",t.date_to)),t.search&&(a=a.or(`subject.ilike.%${t.search}%,notes.ilike.%${t.search}%`)),void 0!==t.follow_up_required&&(a=a.eq("follow_up_required",t.follow_up_required));const o=n.sort_by||"interaction_date",r="asc"===n.sort_order?{ascending:!0}:{ascending:!1};a=a.order(o,r);const i=((n.page||1)-1)*(n.limit||20),c=i+(n.limit||20)-1;a=a.range(i,c);const{data:s,error:u,count:l}=await a;if(u)return{success:!1,error:u.message};const d=s?.map(t=>({id:t.id,type:t.type,subject:t.subject,interaction_date:t.interaction_date,opportunity_id:t.opportunity_id,status:t.status,outcome:t.outcome,duration_minutes:t.duration_minutes,rating:t.rating,follow_up_required:t.follow_up_required||!1,follow_up_date:t.follow_up_date,notes:t.notes||null,created_at:t.created_at,updated_at:t.updated_at,opportunity_name:t.opportunities&&"name"in t.opportunities?String(t.opportunities.name):"",organization_name:t.opportunities&&"organizations"in t.opportunities&&t.opportunities.organizations&&"name"in t.opportunities.organizations?String(t.opportunities.organizations.name):"",days_since_interaction:this.calculateDaysSince(t.interaction_date),days_until_followup:t.follow_up_date?this.calculateDaysUntil(t.follow_up_date):null}))||[],_=l||0,p=n.page||1,y=n.limit||20;return{success:!0,data:{interactions:d,total_count:_,page:p,limit:y,has_next:p*y<_,has_previous:p>1}}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unexpected error occurred"}}}async getInteractionsByOpportunity(t){if(!(await this.isSupabaseAvailable()))return{success:!1,error:"Database connection not available"};try{const{data:n,error:a}=await e.from("interactions").select("\n          id,\n          type,\n          subject,\n          interaction_date,\n          opportunity_id,\n          status,\n          outcome,\n          duration_minutes,\n          rating,\n          follow_up_required,\n          follow_up_date,\n          notes,\n          created_at,\n          updated_at,\n          opportunities (\n            name,\n            organizations (\n              name\n            )\n          )\n        ").eq("opportunity_id",t).is("deleted_at",null).order("interaction_date",{ascending:!1});return a?{success:!1,error:a.message}:{success:!0,data:n?.map(t=>({id:t.id,type:t.type,subject:t.subject,interaction_date:t.interaction_date,opportunity_id:t.opportunity_id,status:t.status,outcome:t.outcome,duration_minutes:t.duration_minutes,rating:t.rating,follow_up_required:t.follow_up_required||!1,follow_up_date:t.follow_up_date,notes:t.notes||null,created_at:t.created_at,updated_at:t.updated_at,opportunity_name:t.opportunities&&"name"in t.opportunities?String(t.opportunities.name):"",organization_name:t.opportunities&&"organizations"in t.opportunities&&t.opportunities.organizations&&"name"in t.opportunities.organizations?String(t.opportunities.organizations.name):"",days_since_interaction:this.calculateDaysSince(t.interaction_date),days_until_followup:t.follow_up_date?this.calculateDaysUntil(t.follow_up_date):null}))||[]}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unexpected error occurred"}}}async getInteractionById(t){if(!(await this.isSupabaseAvailable()))return{success:!1,error:"Database connection not available"};try{const{data:n,error:a}=await e.from("interactions").select("\n          *,\n          opportunities (\n            id,\n            name,\n            stage,\n            organization_id,\n            organizations (\n              id,\n              name,\n              type\n            )\n          )\n        ").eq("id",t).is("deleted_at",null).single();return a?{success:!1,error:a.message}:{success:!0,data:{id:n.id,type:n.type,subject:n.subject,interaction_date:n.interaction_date,opportunity_id:n.opportunity_id,status:n.status,outcome:n.outcome,notes:n.notes,duration_minutes:n.duration_minutes,location:n.location,follow_up_required:n.follow_up_required||!1,follow_up_date:n.follow_up_date,follow_up_notes:n.follow_up_notes,rating:n.rating,next_action:n.next_action,contact_method:n.contact_method,participants:n.participants||[],attachments:n.attachments||[],tags:n.tags||[],custom_fields:n.custom_fields||{},created_at:n.created_at,updated_at:n.updated_at,created_by:n.created_by,deleted_at:null,opportunity:n.opportunities&&"id"in n.opportunities?{id:String(n.opportunities.id),name:String(n.opportunities.name),stage:String(n.opportunities.stage),organization:n.opportunities.organizations&&"id"in n.opportunities.organizations?{id:String(n.opportunities.organizations.id),name:n.opportunities&&"organizations"in n.opportunities&&n.opportunities.organizations&&"name"in n.opportunities.organizations?String(n.opportunities.organizations.name):"",type:n.opportunities&&"organizations"in n.opportunities&&n.opportunities.organizations&&"type"in n.opportunities.organizations?String(n.opportunities.organizations.type):null}:null}:null}}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unexpected error occurred"}}}async createInteraction(t){if(!(await this.isSupabaseAvailable()))return{success:!1,error:"Database connection not available"};try{const n={type:t.type,subject:t.subject,interaction_date:t.interaction_date,opportunity_id:t.opportunity_id||"",status:t.status||"SCHEDULED",outcome:t.outcome||null,notes:t.notes||null,duration_minutes:t.duration_minutes||null,location:t.location||null,follow_up_required:t.follow_up_required||!1,follow_up_date:t.follow_up_date||null,follow_up_notes:t.follow_up_notes||null,rating:t.rating||null,next_action:t.next_action||null,contact_method:t.contact_method||null,participants:t.participants||[],attachments:t.attachments||[],tags:t.tags||[],custom_fields:t.custom_fields||{},created_by:t.created_by||null},{data:a,error:o}=await e.from("interactions").insert(n).select().single();return o?{success:!1,error:o.message}:{success:!0,data:a}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unexpected error occurred"}}}async updateInteraction(t,n){if(!(await this.isSupabaseAvailable()))return{success:!1,error:"Database connection not available"};try{const{data:a,error:o}=await e.from("interactions").update(n).eq("id",t).is("deleted_at",null).select().single();return o?{success:!1,error:o.message}:{success:!0,data:a}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unexpected error occurred"}}}async deleteInteraction(t){if(!(await this.isSupabaseAvailable()))return{success:!1,error:"Database connection not available"};try{const{error:n}=await e.from("interactions").update({deleted_at:(new Date).toISOString()}).eq("id",t);return n?{success:!1,error:n.message}:{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unexpected error occurred"}}}async getInteractionKPIs(){if(!(await this.isSupabaseAvailable()))return{success:!1,error:"Database connection not available"};try{const{data:t}=await e.from("interactions").select("id",{count:"exact"}).is("deleted_at",null),{data:n}=await e.from("interactions").select("id",{count:"exact"}).eq("status","COMPLETED").is("deleted_at",null),{data:a}=await e.from("interactions").select("id",{count:"exact"}).eq("status","SCHEDULED").is("deleted_at",null),{data:o}=await e.from("interactions").select("id",{count:"exact"}).eq("outcome","POSITIVE").is("deleted_at",null),{data:r}=await e.from("interactions").select("id",{count:"exact"}).eq("follow_up_required",!0).gte("follow_up_date",(new Date).toISOString()).is("deleted_at",null),{data:i}=await e.from("interactions").select("id",{count:"exact"}).eq("follow_up_required",!0).lt("follow_up_date",(new Date).toISOString()).is("deleted_at",null),c=new Date;c.setDate(1),c.setHours(0,0,0,0);const{data:s}=await e.from("interactions").select("id",{count:"exact"}).gte("created_at",c.toISOString()).is("deleted_at",null),u=new Date(c);u.setMonth(u.getMonth()-1);const l=new Date(c);l.setTime(l.getTime()-1);const{data:d}=await e.from("interactions").select("id",{count:"exact"}).gte("created_at",u.toISOString()).lte("created_at",l.toISOString()).is("deleted_at",null),{data:_}=await e.from("interactions").select("rating, duration_minutes").not("rating","is",null).is("deleted_at",null),p=_?.map(t=>t.rating).filter(t=>null!==t)||[],y=_?.map(t=>t.duration_minutes).filter(t=>null!==t)||[],m=p.length>0?p.reduce((t,e)=>t+e,0)/p.length:0,w=y.length>0?y.reduce((t,e)=>t+e,0)/y.length:0,{data:f}=await e.from("interactions").select("type").is("deleted_at",null),g={};f?.forEach(t=>{g[t.type]=(g[t.type]||0)+1});const h=Object.keys(g).reduce((t,e)=>g[t]>g[e]?t:e,"CALL"),b=t?.length||0,D=n?.length||0,E=o?.length||0;return{success:!0,data:{total_interactions:b,completed_interactions:D,scheduled_interactions:a?.length||0,positive_outcomes:E,success_rate:D>0?Math.round(E/D*100):0,average_rating:Math.round(10*m)/10,pending_follow_ups:r?.length||0,overdue_follow_ups:i?.length||0,interactions_this_month:s?.length||0,interactions_last_month:d?.length||0,average_duration_minutes:Math.round(w),most_common_type:h}}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unexpected error occurred"}}}async getUpcomingFollowUps(){if(!(await this.isSupabaseAvailable()))return{success:!1,error:"Database connection not available"};try{const{data:t,error:n}=await e.from("interactions").select("\n          id,\n          type,\n          subject,\n          interaction_date,\n          opportunity_id,\n          status,\n          outcome,\n          duration_minutes,\n          rating,\n          follow_up_required,\n          follow_up_date,\n          notes,\n          created_at,\n          updated_at,\n          opportunities (\n            name,\n            organizations (\n              name\n            )\n          )\n        ").eq("follow_up_required",!0).not("follow_up_date","is",null).is("deleted_at",null).order("follow_up_date",{ascending:!0});return n?{success:!1,error:n.message}:{success:!0,data:t?.map(t=>({id:t.id,type:t.type,subject:t.subject,interaction_date:t.interaction_date,opportunity_id:t.opportunity_id,status:t.status,outcome:t.outcome,duration_minutes:t.duration_minutes,rating:t.rating,follow_up_required:t.follow_up_required||!1,follow_up_date:t.follow_up_date,notes:t.notes||null,created_at:t.created_at,updated_at:t.updated_at,opportunity_name:t.opportunities&&"name"in t.opportunities?String(t.opportunities.name):"",organization_name:t.opportunities&&"organizations"in t.opportunities&&t.opportunities.organizations&&"name"in t.opportunities.organizations?String(t.opportunities.organizations.name):"",days_since_interaction:this.calculateDaysSince(t.interaction_date),days_until_followup:t.follow_up_date?this.calculateDaysUntil(t.follow_up_date):null}))||[]}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unexpected error occurred"}}}async getRecentInteractions(t=10){if(!(await this.isSupabaseAvailable()))return{success:!1,error:"Database connection not available"};try{const{data:n,error:a}=await e.from("interactions").select("\n          id,\n          type,\n          subject,\n          interaction_date,\n          opportunity_id,\n          status,\n          outcome,\n          duration_minutes,\n          rating,\n          follow_up_required,\n          follow_up_date,\n          notes,\n          created_at,\n          updated_at,\n          opportunities (\n            name,\n            organizations (\n              name\n            )\n          )\n        ").is("deleted_at",null).order("created_at",{ascending:!1}).limit(t);return a?{success:!1,error:a.message}:{success:!0,data:n?.map(t=>({id:t.id,type:t.type,subject:t.subject,interaction_date:t.interaction_date,opportunity_id:t.opportunity_id,status:t.status,outcome:t.outcome,duration_minutes:t.duration_minutes,rating:t.rating,follow_up_required:t.follow_up_required||!1,follow_up_date:t.follow_up_date,notes:t.notes||null,created_at:t.created_at,updated_at:t.updated_at,opportunity_name:t.opportunities&&"name"in t.opportunities?String(t.opportunities.name):"",organization_name:t.opportunities&&"organizations"in t.opportunities&&t.opportunities.organizations&&"name"in t.opportunities.organizations?String(t.opportunities.organizations.name):"",days_since_interaction:this.calculateDaysSince(t.interaction_date),days_until_followup:t.follow_up_date?this.calculateDaysUntil(t.follow_up_date):null}))||[]}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unexpected error occurred"}}}calculateDaysSince(t){const e=new Date(t),n=(new Date).getTime()-e.getTime();return Math.floor(n/864e5)}calculateDaysUntil(t){const e=new Date(t),n=new Date,a=e.getTime()-n.getTime();return Math.ceil(a/864e5)}},i=t("interaction",()=>{const t=n({interactions:[],selectedInteraction:null,opportunityInteractions:{},loading:!1,creating:!1,updating:!1,deleting:!1,error:null,currentPage:1,totalCount:0,hasNextPage:!1,hasPreviousPage:!1,kpis:null,typeDistribution:null,statusDistribution:null,upcomingFollowUps:[],overdueFollowUps:[],recentActivity:[],monthlyInteractionCounts:{}}),e=a({}),i=a({page:1,limit:20,sort_by:"interaction_date",sort_order:"desc"}),c=o(()=>t.loading||t.creating||t.updating||t.deleting),s=o(()=>!!t.error),u=o(()=>t.interactions.length),l=o(()=>e=>t.interactions.find(t=>t.id===e)),d=o(()=>e=>t.interactions.filter(t=>t.type===e)),_=o(()=>e=>t.interactions.filter(t=>t.status===e)),p=o(()=>e=>t.opportunityInteractions[e]||[]),y=o(()=>t.kpis?.total_interactions||t.interactions.length),m=o(()=>t.interactions.filter(t=>"COMPLETED"===t.status).length),w=o(()=>t.interactions.filter(t=>"POSITIVE"===t.outcome).length),f=o(()=>{const e=t.interactions.filter(t=>null!==t.rating);if(0===e.length)return 0;const n=e.reduce((t,e)=>t+(e.rating||0),0);return Math.round(n/e.length*10)/10}),g=o(()=>0===m.value?0:Math.round(w.value/m.value*100)),h=o(()=>t.upcomingFollowUps.length+t.overdueFollowUps.length),b=async(n={},a=i.value)=>{t.loading=!0,t.error=null;try{const o=await r.getInteractionsWithFilters(n,a);o.success&&o.data?(t.interactions=o.data.interactions,t.totalCount=o.data.total_count,t.currentPage=o.data.page,t.hasNextPage=o.data.has_next,t.hasPreviousPage=o.data.has_previous,e.value=n,i.value=a):(t.interactions=x(),t.totalCount=t.interactions.length,t.currentPage=1,t.hasNextPage=!1,t.hasPreviousPage=!1,e.value=n,i.value=a)}catch(o){t.interactions=x(),t.totalCount=t.interactions.length,t.currentPage=1,t.hasNextPage=!1,t.hasPreviousPage=!1,e.value=n,i.value=a}finally{t.loading=!1}},D=async e=>{t.loading=!0,t.error=null;try{const n=await r.getInteractionsByOpportunity(e);n.success&&n.data?t.opportunityInteractions[e]=n.data:(t.error=n.error||"Failed to fetch opportunity interactions",t.opportunityInteractions[e]=[])}catch(n){t.error=n instanceof Error?n.message:"Unexpected error occurred",t.opportunityInteractions[e]=[]}finally{t.loading=!1}},E=async e=>{t.loading=!0,t.error=null;try{const n=await r.getInteractionById(e);n.success&&n.data?t.selectedInteraction=n.data:t.error=n.error||"Failed to fetch interaction"}catch(n){t.error=n instanceof Error?n.message:"Unexpected error occurred"}finally{t.loading=!1}},I=async(e,n)=>{t.updating=!0,t.error=null;try{const a=await r.updateInteraction(e,n);if(a.success&&a.data){const n=t.interactions.findIndex(t=>t.id===e);-1!==n&&(t.interactions[n]={...t.interactions[n],type:a.data.type,subject:a.data.subject,interaction_date:a.data.interaction_date,status:a.data.status||"SCHEDULED",outcome:a.data.outcome,duration_minutes:a.data.duration_minutes,rating:a.data.rating,follow_up_required:a.data.follow_up_required||!1,follow_up_date:a.data.follow_up_date,updated_at:a.data.updated_at}),t.selectedInteraction?.id===e&&await E(e);const o=a.data.opportunity_id;return o&&t.opportunityInteractions[o]&&await D(o),!0}return t.error=a.error||"Failed to update interaction",!1}catch(a){return t.error=a instanceof Error?a.message:"Unexpected error occurred",!1}finally{t.updating=!1}},S=async()=>{t.loading=!0,t.error=null;try{const e=await r.getInteractionKPIs();e.success&&e.data?t.kpis=e.data:t.kpis=U()}catch(e){t.kpis=U()}finally{t.loading=!1}},v=async()=>{t.loading=!0,t.error=null;try{const e=await r.getUpcomingFollowUps();if(e.success&&e.data){const n=new Date;t.upcomingFollowUps=e.data.filter(t=>t.follow_up_date&&new Date(t.follow_up_date)>=n),t.overdueFollowUps=e.data.filter(t=>t.follow_up_date&&new Date(t.follow_up_date)<n)}else t.error=e.error||"Failed to fetch follow-ups"}catch(e){t.error=e instanceof Error?e.message:"Unexpected error occurred"}finally{t.loading=!1}},T=async(e=10)=>{t.loading=!0,t.error=null;try{const n=await r.getRecentInteractions(e);n.success&&n.data?t.recentActivity=n.data:t.error=n.error||"Failed to fetch recent activity"}catch(n){t.error=n instanceof Error?n.message:"Unexpected error occurred"}finally{t.loading=!1}},U=()=>({total_interactions:42,completed_interactions:38,scheduled_interactions:4,positive_outcomes:28,success_rate:74,average_rating:4.2,pending_follow_ups:6,overdue_follow_ups:2,interactions_this_month:15,interactions_last_month:23,average_duration_minutes:35,most_common_type:"Phone"}),x=()=>[{id:"demo-int-1",type:"Phone",subject:"Product Demo Discussion",interaction_date:"2024-08-03T14:00:00Z",opportunity_id:"demo-1",status:"COMPLETED",outcome:"POSITIVE",duration_minutes:45,rating:5,follow_up_required:!0,follow_up_date:"2024-08-10T10:00:00Z",notes:"Very productive call. Client is interested in our enterprise features and wants to schedule a technical demo.",created_at:"2024-08-03T14:00:00Z",updated_at:"2024-08-03T15:00:00Z",opportunity_name:"Enterprise Integration - TechCorp",organization_name:"TechCorp Solutions",days_since_interaction:0,days_until_followup:7},{id:"demo-int-2",type:"Email",subject:"Follow-up on Pricing Discussion",interaction_date:"2024-08-02T09:30:00Z",opportunity_id:"demo-2",status:"COMPLETED",outcome:"NEUTRAL",duration_minutes:null,rating:3,follow_up_required:!1,follow_up_date:null,notes:"Sent detailed pricing breakdown. Client is evaluating budget and will respond by end of week.",created_at:"2024-08-02T09:30:00Z",updated_at:"2024-08-02T09:35:00Z",opportunity_name:"Cloud Migration - StartupCo",organization_name:"StartupCo Inc",days_since_interaction:1,days_until_followup:null},{id:"demo-int-3",type:"Meeting",subject:"Site Visit and Requirements Review",interaction_date:"2024-08-01T13:00:00Z",opportunity_id:"demo-3",status:"COMPLETED",outcome:"POSITIVE",duration_minutes:120,rating:4,follow_up_required:!0,follow_up_date:"2024-08-05T14:00:00Z",notes:"Comprehensive on-site meeting. Toured their facilities and documented all technical requirements. Strong interest in our analytics platform.",created_at:"2024-08-01T13:00:00Z",updated_at:"2024-08-01T15:30:00Z",opportunity_name:"Data Analytics - RetailGiant",organization_name:"RetailGiant Corp",days_since_interaction:2,days_until_followup:2},{id:"demo-int-4",type:"Demo",subject:"Technical Demo Scheduled",interaction_date:"2024-08-05T11:00:00Z",opportunity_id:"demo-1",status:"SCHEDULED",outcome:null,duration_minutes:null,rating:null,follow_up_required:!1,follow_up_date:null,notes:"Scheduled follow-up technical demo to showcase integration capabilities. Meeting confirmed with their IT team.",created_at:"2024-08-03T16:00:00Z",updated_at:"2024-08-03T16:00:00Z",opportunity_name:"Enterprise Integration - TechCorp",organization_name:"TechCorp Solutions",days_since_interaction:-2,days_until_followup:null}];return{...t,activeFilters:e,activePagination:i,isLoading:c,hasError:s,interactionCount:u,getInteractionById:l,getInteractionsByType:d,getInteractionsByStatus:_,getInteractionsByOpportunity:p,totalInteractions:y,completedInteractions:m,positiveOutcomes:w,averageRating:f,successRate:g,pendingFollowUps:h,fetchInteractions:b,fetchInteractionsByOpportunity:D,fetchInteractionById:E,createInteraction:async e=>{t.creating=!0,t.error=null;try{const n=await r.createInteraction(e);if(n.success&&n.data){if(1===t.currentPage){const e={id:n.data.id,type:n.data.type,subject:n.data.subject,interaction_date:n.data.interaction_date,opportunity_id:n.data.opportunity_id,status:n.data.status||"SCHEDULED",outcome:n.data.outcome,duration_minutes:n.data.duration_minutes,rating:n.data.rating,follow_up_required:n.data.follow_up_required||!1,notes:n.data.notes||null,follow_up_date:n.data.follow_up_date,created_at:n.data.created_at,updated_at:n.data.updated_at,opportunity_name:"",organization_name:"",days_since_interaction:0,days_until_followup:null};t.interactions.unshift(e)}return e.opportunity_id&&t.opportunityInteractions[e.opportunity_id]&&await D(e.opportunity_id),!0}return t.error=n.error||"Failed to create interaction",!1}catch(n){return t.error=n instanceof Error?n.message:"Unexpected error occurred",!1}finally{t.creating=!1}},updateInteraction:I,completeInteraction:async(t,e,n,a)=>{const o={status:"COMPLETED",outcome:e,rating:n,notes:a};return await I(t,o)},scheduleFollowUp:async(t,e,n)=>{const a={follow_up_required:!0,follow_up_date:e,follow_up_notes:n};return await I(t,a)},deleteInteraction:async e=>{t.deleting=!0,t.error=null;try{const n=await r.deleteInteraction(e);if(n.success){const n=t.interactions.findIndex(t=>t.id===e);if(-1!==n){const e=t.interactions[n];t.interactions.splice(n,1),t.opportunityInteractions[e.opportunity_id]&&await D(e.opportunity_id)}return t.selectedInteraction?.id===e&&(t.selectedInteraction=null),!0}return t.error=n.error||"Failed to delete interaction",!1}catch(n){return t.error=n instanceof Error?n.message:"Unexpected error occurred",!1}finally{t.deleting=!1}},fetchKPIs:S,fetchUpcomingFollowUps:v,fetchRecentActivity:T,clearError:()=>{t.error=null},clearSelectedInteraction:()=>{t.selectedInteraction=null},clearOpportunityCache:e=>{e?delete t.opportunityInteractions[e]:t.opportunityInteractions={}},resetFilters:()=>{e.value={},i.value={page:1,limit:20,sort_by:"interaction_date",sort_order:"desc"}},refresh:async()=>{await b(e.value,i.value)},refreshDashboard:async()=>{await Promise.all([S(),v(),T()])}}});export{i as u};
