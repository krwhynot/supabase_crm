import{d as e,c as t,r as a,C as s,D as o,$ as r,B as i,Z as n,V as l,E as c,J as d,F as p,L as u,U as v,O as b,a1 as g,K as m,a2 as y,y as k,w as x,W as h,N as f,H as w,X as C,Y as M,G as _}from"./vue-runtime-Ds28nt_E.js";import{u as j}from"./vue-router-BP51f1Hv.js";import{u as B}from"./productStore-g1VeSLDp.js";import{_ as S}from"./_plugin-vue_export-helper-DYAABpgn.js";import{C as P}from"./products-C6KYHVl4.js";import"./pinia-CUC4VGP7.js";import"./supabaseClient-BTp2rsYU.js";import"./supabase-b_GQhF-l.js";import"./yup-D02u5inE.js";const D={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 lg:gap-6",role:"region","aria-label":"Product Key Performance Indicators"},A={class:"kpi-card-content"},$={class:"kpi-details"},z={key:0,class:"loading-placeholder"},H={key:1},V={class:"kpi-card-content"},I={class:"kpi-details"},T={key:0,class:"loading-placeholder"},U={key:1},F={class:"kpi-card-content"},L={class:"kpi-details"},N={key:0,class:"loading-placeholder"},K={key:1},R={class:"kpi-subtitle"},O={class:"kpi-card-content"},E={class:"kpi-details"},Y={key:0,class:"loading-placeholder"},G={key:1},W=S(e({t:"ProductKPICards",props:{loading:{type:Boolean,default:!1},customStats:{default:null}},emits:["cardClick"],setup(e,{emit:d}){const p=e,u=d,v=B(),b=t(()=>p.customStats||v.stats),g=t(()=>p.loading||v.isLoading),m=a(null),y=e=>{m.value=e,setTimeout(()=>{m.value=null},300),u("cardClick",e)},k=e=>e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),x=()=>{const e=b.value?.active_products||0;return 0===e?0:Math.floor(.85*e)/e*100};return(e,t)=>{return c(),s("div",D,[o("div",{class:i(["kpi-card",{"kpi-card-clicked":"total"===m.value}]),onClick:t[0]||(t[0]=e=>y("total")),tabindex:"0",role:"button","aria-label":"View all products",onKeydown:[t[1]||(t[1]=r(e=>y("total"),["enter"])),t[2]||(t[2]=r(n(e=>y("total"),["prevent"]),["space"]))]},[o("div",A,[t[14]||(t[14]=o("div",{class:"kpi-icon kpi-icon-blue"},[o("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),o("div",$,[t[12]||(t[12]=o("div",{class:"kpi-label"},"Total Products",-1)),o("div",{class:i(["kpi-value",{"kpi-loading":g.value}])},[g.value?(c(),s("span",z,"--")):(c(),s("span",H,l(k(b.value?.total_products||0)),1))],2),t[13]||(t[13]=o("div",{class:"kpi-subtitle"},"In catalog",-1))])])],34),o("div",{class:i(["kpi-card",{"kpi-card-clicked":"active"===m.value}]),onClick:t[3]||(t[3]=e=>y("active")),tabindex:"0",role:"button","aria-label":"View active products",onKeydown:[t[4]||(t[4]=r(e=>y("active"),["enter"])),t[5]||(t[5]=r(n(e=>y("active"),["prevent"]),["space"]))]},[o("div",V,[t[17]||(t[17]=o("div",{class:"kpi-icon kpi-icon-green"},[o("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o("div",I,[t[15]||(t[15]=o("div",{class:"kpi-label"},"Active Products",-1)),o("div",{class:i(["kpi-value",{"kpi-loading":g.value}])},[g.value?(c(),s("span",T,"--")):(c(),s("span",U,l(k(b.value?.active_products||0)),1))],2),t[16]||(t[16]=o("div",{class:"kpi-subtitle"},"Available for sale",-1))])])],34),o("div",{class:i(["kpi-card",{"kpi-card-clicked":"categories"===m.value}]),onClick:t[6]||(t[6]=e=>y("categories")),tabindex:"0",role:"button","aria-label":"View categories breakdown",onKeydown:[t[7]||(t[7]=r(e=>y("categories"),["enter"])),t[8]||(t[8]=r(n(e=>y("categories"),["prevent"]),["space"]))]},[o("div",F,[t[19]||(t[19]=o("div",{class:"kpi-icon kpi-icon-purple"},[o("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1)),o("div",L,[t[18]||(t[18]=o("div",{class:"kpi-label"},"Categories",-1)),o("div",{class:i(["kpi-value",{"kpi-loading":g.value}])},[g.value?(c(),s("span",N,"--")):(c(),s("span",K,l(b.value?.products_by_category?Object.values(b.value.products_by_category).filter(e=>e>0).length:0),1))],2),o("div",R,l(b.value?.most_common_category?`Most: ${b.value.most_common_category}`:"No category"),1)])])],34),o("div",{class:i(["kpi-card",{"kpi-card-clicked":"principals"===m.value}]),onClick:t[9]||(t[9]=e=>y("principals")),tabindex:"0",role:"button","aria-label":"View principal assignments",onKeydown:[t[10]||(t[10]=r(e=>y("principals"),["enter"])),t[11]||(t[11]=r(n(e=>y("principals"),["prevent"]),["space"]))]},[o("div",O,[t[22]||(t[22]=o("div",{class:"kpi-icon kpi-icon-emerald"},[o("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),o("div",E,[t[20]||(t[20]=o("div",{class:"kpi-label"},"Principal Coverage",-1)),o("div",{class:i(["kpi-value",{"kpi-loading":g.value}])},[g.value?(c(),s("span",Y,"--%")):(c(),s("span",G,l((a=x(),Math.round(a)+"%")),1))],2),t[21]||(t[21]=o("div",{class:"kpi-subtitle"},"With assignments",-1))])])],34)]);var a}}}),[["__scopeId","data-v-b7324940"]]),J={class:"product-table-container"},X={key:0,class:"celebration-confetti absolute inset-0 pointer-events-none z-50","aria-hidden":"true"},Z={key:1,class:"bg-blue-50 border border-blue-200 rounded-t-lg p-4 bulk-actions-bar"},q={class:"flex items-center justify-between"},Q={class:"flex items-center space-x-3"},ee={class:"text-sm font-medium text-blue-900 selection-count"},te={class:"selection-icon"},ae={class:"selection-encouragement"},se={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},oe={class:"overflow-x-auto"},re={class:"min-w-full divide-y divide-gray-200"},ie={class:"bg-gray-50"},ne={scope:"col",class:"px-4 py-3 text-left"},le=["checked",".indeterminate"],ce={class:"flex items-center space-x-1"},de={class:"flex items-center space-x-1"},pe={class:"flex items-center space-x-1"},ue={class:"flex items-center space-x-1"},ve={class:"bg-white divide-y divide-gray-200"},be={key:1,class:"empty-state-row"},ge={colspan:"8",class:"px-6 py-16 text-center"},me={class:"empty-state-container"},ye={class:"empty-state-content"},ke={class:"empty-state-title"},xe={class:"empty-state-message"},he=["onClick","onMouseenter","onMouseleave"],fe=["value","aria-label"],we={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"flex items-center"},Me={class:"flex-shrink-0 h-10 w-10"},_e={class:"product-icon-container h-10 w-10 rounded-lg bg-gray-100 flex items-center justify-center transition-all duration-300"},je={class:"product-icon text-lg transition-transform duration-200"},Be={class:"ml-4"},Se={class:"text-sm font-medium text-gray-900"},Pe={key:0,class:"text-sm text-gray-500"},De={class:"px-6 py-4 whitespace-nowrap"},Ae={key:1,class:"text-gray-400 text-sm"},$e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ze={key:0},He={key:1,class:"text-gray-400"},Ve={class:"px-6 py-4 whitespace-nowrap"},Ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Te={class:"flex items-center"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Fe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Le={class:"flex items-center space-x-2"},Ne=["onClick","aria-label"],Ke=["onClick","aria-label"],Re=["onClick","aria-label"],Oe={key:2,class:"pagination-footer bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Ee={class:"flex items-center justify-between"},Ye={class:"flex items-center space-x-2 text-sm text-gray-700"},Ge={key:0,class:"selected-indicator"},We={key:0,class:"text-sm text-gray-500"},Je=S(e({t:"ProductTable",props:{loading:{type:Boolean,default:!1}},emits:["rowClick","edit","delete","duplicate","bulkDelete","createNew","sortChange"],setup(e,{emit:r}){const k=r,x=B(),h=t(()=>x.products),f=a([]),w=a("created_at"),C=a("desc"),M=a(!1),_=a(null),j=a(""),S=t(()=>h.value.length>0&&f.value.length===h.value.length),D=t(()=>f.value.length>0&&f.value.length<h.value.length),A=()=>{S.value?f.value=[]:f.value=h.value.map(e=>e.id)},$=()=>{f.value=[]},z=async()=>{if(0===f.value.length)return;const e={operation:"activate",product_ids:f.value,parameters:{is_active:!0}};if(await x.performBulkOperation(e)){const e=f.value.length;L(`üéâ Successfully activated ${e} product${1===e?"":"s"}!`),$()}},H=async()=>{if(0===f.value.length)return;const e={operation:"deactivate",product_ids:f.value,parameters:{is_active:!1}};if(await x.performBulkOperation(e)){const e=f.value.length;L(`‚è∏Ô∏è Paused ${e} product${1===e?"":"s"} successfully!`),$()}},V=()=>{if(0===f.value.length)return;const e=f.value.length;k("bulkDelete",[...f.value]),setTimeout(()=>{L(`üóÑÔ∏è Archived ${e} product${1===e?"":"s"} safely!`)},500),$()},I=e=>{w.value===e?C.value="asc"===C.value?"desc":"asc":(w.value=e,C.value="asc"),k("sortChange",e,C.value)},T=()=>{k("createNew")},U=(e,t)=>{_.value=t?e.id:null},F=e=>({Protein:"bg-red-100 text-red-800",Sauce:"bg-orange-100 text-orange-800",Seasoning:"bg-green-100 text-green-800",Beverage:"bg-blue-100 text-blue-800",Snack:"bg-yellow-100 text-yellow-800",Frozen:"bg-cyan-100 text-cyan-800",Dairy:"bg-purple-100 text-purple-800",Bakery:"bg-pink-100 text-pink-800",Other:"bg-gray-100 text-gray-800"}[e]||"bg-gray-100 text-gray-800"),L=e=>{j.value=e,M.value=!0,setTimeout(()=>{M.value=!1,j.value=""},3e3)},N=e=>1===e?" - Ready for action!":e<=3?" - Great choice!":e<=10?" - Looking good!":" - Impressive selection!",K=e=>{const t=2*Math.random()+.1*e;return{left:100*Math.random()+"%",animationDelay:`${t}s`,animationDuration:2+3*Math.random()+"s"}};return(e,t)=>{return c(),s("div",J,[M.value?(c(),s("div",X,[(c(),s(p,null,u(20,e=>o("div",{class:"confetti-piece",key:e,style:g(K(e))},l((e=>{const t=["üéâ","‚ú®","üéä","‚≠ê","üí´","üåü","üéà"];return t[e%t.length]})(e)),5)),64))])):d("",!0),f.value.length>0?(c(),s("div",Z,[o("div",q,[o("div",Q,[o("span",ee,[o("span",te,l((a=f.value.length,1===a?"üéØ":a<=5?"üì¶":a<=10?"üìã":"üöÄ")),1),v(" "+l(f.value.length)+" product"+l(1===f.value.length?"":"s")+" selected ",1),o("span",ae,l(N(f.value.length)),1)]),o("button",{onClick:$,class:"text-blue-600 hover:text-blue-800 text-sm font-medium transition-all duration-150 hover:scale-105"}," Clear selection ")]),o("div",{class:"flex items-center space-x-2"},[o("button",{onClick:z,class:"bulk-action-btn activate-btn px-3 py-1 text-sm font-medium text-green-700 bg-green-100 border border-green-200 rounded-md hover:bg-green-200 transition-all duration-200"},t[6]||(t[6]=[o("span",{class:"action-icon"},"‚ú®",-1),v(" Activate ",-1)])),o("button",{onClick:H,class:"bulk-action-btn deactivate-btn px-3 py-1 text-sm font-medium text-yellow-700 bg-yellow-100 border border-yellow-200 rounded-md hover:bg-yellow-200 transition-all duration-200"},t[7]||(t[7]=[o("span",{class:"action-icon"},"‚è∏Ô∏è",-1),v(" Pause ",-1)])),o("button",{onClick:V,class:"bulk-action-btn delete-btn px-3 py-1 text-sm font-medium text-red-700 bg-red-100 border border-red-200 rounded-md hover:bg-red-200 transition-all duration-200"},t[8]||(t[8]=[o("span",{class:"action-icon"},"üóëÔ∏è",-1),v(" Archive ",-1)]))])])])):d("",!0),o("div",se,[o("div",oe,[o("table",re,[o("thead",ie,[o("tr",null,[o("th",ne,[o("input",{type:"checkbox",checked:S.value,".indeterminate":D.value,onChange:A,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded","aria-label":"Select all products"},null,40,le)]),o("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:t[0]||(t[0]=e=>I("name"))},[o("div",ce,[t[10]||(t[10]=o("span",null,"Product",-1)),"name"===w.value?(c(),s("svg",{key:0,class:i(["h-4 w-4","asc"===C.value?"transform rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[9]||(t[9]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2)):d("",!0)])]),o("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:t[1]||(t[1]=e=>I("category"))},[o("div",de,[t[12]||(t[12]=o("span",null,"Category",-1)),"category"===w.value?(c(),s("svg",{key:0,class:i(["h-4 w-4","asc"===C.value?"transform rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[11]||(t[11]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2)):d("",!0)])]),o("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:t[2]||(t[2]=e=>I("unit_price"))},[o("div",pe,[t[14]||(t[14]=o("span",null,"Price",-1)),"unit_price"===w.value?(c(),s("svg",{key:0,class:i(["h-4 w-4","asc"===C.value?"transform rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[13]||(t[13]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2)):d("",!0)])]),t[17]||(t[17]=o("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[18]||(t[18]=o("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Principals ",-1)),o("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:t[3]||(t[3]=e=>I("created_at"))},[o("div",ue,[t[16]||(t[16]=o("span",null,"Created",-1)),"created_at"===w.value?(c(),s("svg",{key:0,class:i(["h-4 w-4","asc"===C.value?"transform rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[15]||(t[15]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2)):d("",!0)])]),t[19]||(t[19]=o("th",{scope:"col",class:"relative px-6 py-3"},[o("span",{class:"sr-only"},"Actions")],-1))])]),o("tbody",ve,[e.loading&&0===h.value.length?(c(),s(p,{key:0},u(3,e=>o("tr",{key:`skeleton-${e}`,class:"skeleton-row"},t[20]||(t[20]=[o("td",{class:"px-4 py-4"},[o("div",{class:"skeleton-checkbox"})],-1),o("td",{class:"px-6 py-4"},[o("div",{class:"flex items-center"},[o("div",{class:"skeleton-icon"}),o("div",{class:"ml-4 space-y-2"},[o("div",{class:"skeleton-text skeleton-product-name"}),o("div",{class:"skeleton-text skeleton-sku"})])])],-1),o("td",{class:"px-6 py-4"},[o("div",{class:"skeleton-badge"})],-1),o("td",{class:"px-6 py-4"},[o("div",{class:"skeleton-text skeleton-price"})],-1),o("td",{class:"px-6 py-4"},[o("div",{class:"skeleton-status-badge"})],-1),o("td",{class:"px-6 py-4"},[o("div",{class:"skeleton-text skeleton-principals"})],-1),o("td",{class:"px-6 py-4"},[o("div",{class:"skeleton-text skeleton-date"})],-1),o("td",{class:"px-6 py-4"},[o("div",{class:"flex space-x-2"},[o("div",{class:"skeleton-action-btn"}),o("div",{class:"skeleton-action-btn"}),o("div",{class:"skeleton-action-btn"})])],-1)]))),64)):d("",!0),e.loading||0!==h.value.length?d("",!0):(c(),s("tr",be,[o("td",ge,[o("div",me,[t[23]||(t[23]=b('<div class="empty-state-illustration" data-v-0fbbfc93><div class="empty-box" data-v-0fbbfc93><div class="empty-box-lid" data-v-0fbbfc93></div><div class="empty-box-body" data-v-0fbbfc93><span class="empty-search-icon" data-v-0fbbfc93>üîç</span></div></div></div>',1)),o("div",ye,[o("h3",ke,l("Your product catalog awaits!"),1),o("p",xe,l("Time to stock up! Add your first products and start building relationships with your principals. Every successful business begins with great products."),1),o("button",{onClick:T,class:"empty-state-cta"},[t[21]||(t[21]=o("span",{class:"cta-icon"},"‚ú®",-1)),v(" "+l("Add your first product")+" ",1),t[22]||(t[22]=o("span",{class:"cta-arrow"},"‚Üí",-1))])])])])])),(c(!0),s(p,null,u(h.value,(e,a)=>{return c(),s("tr",{key:e.id,class:i(["product-row hover:bg-gray-50 cursor-pointer transition-all duration-200 ease-out",{"row-selected":f.value.includes(e.id),"row-staggered":!0}]),style:g({animationDelay:50*a+"ms"}),onClick:t=>(e=>{k("rowClick",e)})(e),onMouseenter:t=>U(e,!0),onMouseleave:t=>U(e,!1)},[o("td",{class:"px-4 py-4",onClick:t[5]||(t[5]=n(()=>{},["stop"]))},[m(o("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":t[4]||(t[4]=e=>f.value=e),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded","aria-label":`Select ${e.name}`},null,8,fe),[[y,f.value]])]),o("td",we,[o("div",Ce,[o("div",Me,[o("div",_e,[o("span",je,l((u=e.category,u&&P[u]||"üì¶")),1)])]),o("div",Be,[o("div",Se,l(e.name),1),e.sku?(c(),s("div",Pe," SKU: "+l(e.sku),1)):d("",!0)])])]),o("td",De,[e.category?(c(),s("span",{key:0,class:i(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",F(e.category)])},l(e.category),3)):(c(),s("span",Ae,"No category"))]),o("td",$e,[e.unit_price?(c(),s("span",ze," $"+l((p=e.unit_price,new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(p))),1)):(c(),s("span",He,"Not set"))]),o("td",Ve,[o("span",{class:i(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(e.is_active?"Active":"Inactive"),3)]),o("td",Ie,[o("div",Te,[t[24]||(t[24]=o("svg",{class:"h-4 w-4 text-gray-400 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),o("span",null,l(e.principal_count||0),1)])]),o("td",Ue,l((r=e.created_at,r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown")),1),o("td",Fe,[o("div",Le,[o("button",{onClick:n(t=>(e=>{k("edit",e)})(e),["stop"]),class:"text-blue-600 hover:text-blue-900 p-1 rounded-md hover:bg-blue-50","aria-label":`Edit ${e.name}`},t[25]||(t[25]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Ne),o("button",{onClick:n(t=>(e=>{k("duplicate",e)})(e),["stop"]),class:"text-gray-600 hover:text-gray-900 p-1 rounded-md hover:bg-gray-50","aria-label":`Duplicate ${e.name}`},t[26]||(t[26]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,Ke),o("button",{onClick:n(t=>(e=>{k("delete",e)})(e),["stop"]),class:"text-red-600 hover:text-red-900 p-1 rounded-md hover:bg-red-50","aria-label":`Delete ${e.name}`},t[27]||(t[27]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Re)])])],46,he);var r,p,u}),128))])])])]),h.value.length>0?(c(),s("div",Oe,[o("div",Ee,[o("div",Ye,[t[28]||(t[28]=o("span",{class:"product-count-icon"},"üìä",-1)),o("span",null,"Showing "+l(h.value.length)+" products",1),f.value.length>0?(c(),s("span",Ge," ("+l(f.value.length)+" selected) ",1)):d("",!0)]),h.value.length>=25?(c(),s("div",We,t[29]||(t[29]=[o("span",{class:"pagination-hint"},"üí° Tip: Use search to find specific products faster!",-1)]))):d("",!0)])])):d("",!0)]);var a}}}),[["__scopeId","data-v-0fbbfc93"]]),Xe={class:"products-list-view","data-testid":"products-list-view"},Ze={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8","data-testid":"products-header"},qe={class:"flex items-center space-x-3"},Qe=["disabled","aria-label"],et={class:"ml-2 hidden sm:inline"},tt={class:"mb-8","data-testid":"kpi-cards-section"},at={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},st={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},ot={class:"flex-1 max-w-md"},rt={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},it={class:"flex items-center space-x-3"},nt=["aria-label"],lt={class:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ct=["d"],dt={class:"space-y-6"},pt={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 loading-container","data-testid":"loading-spinner"},ut={class:"text-center text-gray-500 loading-text"},vt={class:"loading-message"},bt={key:1,class:"bg-white rounded-lg shadow-sm border border-red-200 p-6","data-testid":"error-message"},gt={class:"flex items-center"},mt={class:"text-red-700"},yt={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center empty-state"},kt={class:"text-lg font-medium text-gray-900 mb-2"},xt={class:"text-gray-500 mb-6"},ht={class:"flex justify-center space-x-3"},ft={key:3,"data-testid":"product-table-section"},wt=S(e({t:"ProductsListView",setup(e){const r=j(),n=B(),p=a(""),u=a("created_at"),g=a("desc"),y=a(!1),S=a(!1),P=a(),D=["Loading your amazing products...","Gathering product information...","Building your catalog view...","Almost ready to show your inventory...","Preparing product showcase..."],A=a(0);let $=null;const z=a({search:"",category:[],is_active:void 0,price_min:void 0,price_max:void 0}),H=t(()=>n.products),V=t(()=>n.isLoading),I=t(()=>n.error),T=t(()=>!!(p.value||z.value.category?.length||void 0!==z.value.is_active||void 0!==z.value.price_min||void 0!==z.value.price_max||z.value.principal_id||z.value.created_after||z.value.created_before));let U;const F=()=>{clearTimeout(U),U=setTimeout(()=>{L()},300)},L=async()=>{const e={...z.value};p.value.trim()&&(e.search=p.value.trim());const t={page:1,limit:20,sort_by:u.value,sort_order:g.value};await n.fetchProducts({...e,...t})},N=()=>{p.value="",z.value={search:"",category:[],is_active:void 0,price_min:void 0,price_max:void 0},u.value="created_at",g.value="desc",L()},K=()=>{p.value="",setTimeout(()=>{P.value?.focus()},150),L()},R=()=>{L()},O=()=>{g.value="asc"===g.value?"desc":"asc",L()},E=(e,t)=>{u.value=e,g.value=t,L()},Y=async()=>{await Promise.all([G(),J()])},G=async()=>{const e={...z.value};p.value.trim()&&(e.search=p.value.trim());const t={page:1,limit:20,sort_by:u.value,sort_order:g.value};await n.fetchProducts({...e,...t})},J=async()=>{y.value=!0;try{await n.fetchStats()}finally{y.value=!1}},X=e=>{switch(e){case"total":N();break;case"active":z.value.is_active=!0,L();break;case"inactive":z.value.is_active=!1,L()}},Z=e=>{r.push(`/products/${e.id}`)},q=e=>{r.push(`/products/${e.id}/edit`)},Q=async e=>{confirm(`Are you sure you want to delete "${e.name}"? This will deactivate the product but preserve the data.`)&&await n.deleteProduct(e.id)},ee=e=>{},te=async e=>{if(confirm(`Are you sure you want to deactivate ${e.length} products? This action can be reversed later.`)){const t={operation:"deactivate",product_ids:e};await n.performBulkOperation(t)}},ae=()=>{r.push("/products/new")};return k(async()=>{await Y()}),x(()=>r.currentRoute.value.fullPath,e=>{"/products"===e&&Y()}),x(V,e=>{e&&0===H.value.length?(A.value=0,$=setInterval(()=>{A.value=(A.value+1)%D.length},2e3)):$&&(clearInterval($),$=null)}),(e,t)=>{const a=w("router-link");return c(),s("div",Xe,[o("div",Ze,[t[8]||(t[8]=o("div",{class:"mb-4 lg:mb-0"},[o("h1",{class:"text-3xl font-bold text-gray-900","data-testid":"page-title"},"Products"),o("p",{class:"mt-2 text-gray-600"}," Manage your product catalog and principal assignments ")],-1)),o("div",qe,[o("button",{onClick:Y,disabled:V.value,class:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-all duration-200 hover:scale-105 refresh-btn","aria-label":V.value?"Refreshing...":"Refresh data"},[(c(),s("svg",{class:i(["h-4 w-4 transition-transform duration-200",{"animate-spin":V.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[6]||(t[6]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2)),o("span",et,l(V.value?"üîÑ Refreshing...":"Refresh"),1)],8,Qe),h(a,{to:"/products/new",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 hover:scale-105 new-product-btn"},{default:f(()=>t[7]||(t[7]=[o("svg",{class:"-ml-1 mr-2 h-5 w-5 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),v(" New Product ",-1)])),o:1,i:[7]})])]),o("div",tt,[h(W,{loading:y.value,onCardClick:X,"data-testid":"kpi-cards"},null,8,["loading"])]),o("div",at,[o("div",st,[o("div",ot,[t[11]||(t[11]=o("label",{for:"search",class:"sr-only"},"Search products",-1)),o("div",{class:i(["relative search-container",{"search-focused":S.value,"search-has-value":p.value.length>0}])},[t[10]||(t[10]=o("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none search-icon"},[o("svg",{class:"h-5 w-5 text-gray-400 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),m(o("input",{id:"search",ref_key:"searchInputRef",ref:P,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),type:"text",placeholder:"Search products...",class:"search-input block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",onInput:F,onFocus:t[1]||(t[1]=e=>S.value=!0),onBlur:t[2]||(t[2]=e=>S.value=!1)},null,544),[[C,p.value]]),p.value.length>0?(c(),s("div",rt,[o("button",{onClick:K,class:"text-gray-400 hover:text-gray-600 transition-colors duration-150 clear-search-btn","aria-label":"Clear search"},t[9]||(t[9]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):d("",!0)],2)]),o("div",it,[m(o("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>z.value.category=e),class:"block w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:L},t[12]||(t[12]=[b('<option value="" data-v-6bf00b9d>All Categories</option><option value="Protein" data-v-6bf00b9d>Protein</option><option value="Sauce" data-v-6bf00b9d>Sauce</option><option value="Seasoning" data-v-6bf00b9d>Seasoning</option><option value="Beverage" data-v-6bf00b9d>Beverage</option><option value="Snack" data-v-6bf00b9d>Snack</option><option value="Frozen" data-v-6bf00b9d>Frozen</option><option value="Dairy" data-v-6bf00b9d>Dairy</option><option value="Bakery" data-v-6bf00b9d>Bakery</option><option value="Other" data-v-6bf00b9d>Other</option>',10)]),544),[[M,z.value.category]]),m(o("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>z.value.is_active=e),class:"block w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:L},t[13]||(t[13]=[o("option",{value:""},"All Products",-1),o("option",{value:!0},"Active Only",-1),o("option",{value:!1},"Inactive Only",-1)]),544),[[M,z.value.is_active]]),m(o("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>u.value=e),class:"block w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:R},t[14]||(t[14]=[b('<option value="created_at" data-v-6bf00b9d>Sort by Created Date</option><option value="name" data-v-6bf00b9d>Sort by Name</option><option value="category" data-v-6bf00b9d>Sort by Category</option><option value="unit_price" data-v-6bf00b9d>Sort by Price</option><option value="updated_at" data-v-6bf00b9d>Sort by Updated Date</option>',5)]),544),[[M,u.value]]),o("button",{onClick:O,class:i(["p-2 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500",{"bg-gray-50":"desc"===g.value}]),"aria-label":"Sort "+("asc"===g.value?"descending":"ascending")},[(c(),s("svg",lt,[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"asc"===g.value?"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12":"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"},null,8,ct)]))],10,nt),T.value?(c(),s("button",{key:0,onClick:N,class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 focus:outline-none focus:ring-1 focus:ring-blue-500 rounded-md"}," Clear Filters ")):d("",!0)])])]),o("div",dt,[V.value&&0===H.value.length?(c(),s("div",pt,[t[15]||(t[15]=b('<div class="flex justify-center mb-4" data-v-6bf00b9d><div class="relative" data-v-6bf00b9d><div class="loading-spinner animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600" data-v-6bf00b9d></div><div class="loading-dots" data-v-6bf00b9d><div class="loading-dot" data-v-6bf00b9d></div><div class="loading-dot" data-v-6bf00b9d></div><div class="loading-dot" data-v-6bf00b9d></div></div></div></div>',1)),o("p",ut,[o("span",vt,l(D[A.value]),1)])])):I.value?(c(),s("div",bt,[o("div",gt,[t[16]||(t[16]=o("svg",{class:"h-5 w-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",mt,l(I.value),1)]),o("div",{class:"mt-4 flex space-x-3"},[o("button",{onClick:Y,class:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700","data-testid":"retry-button"}," Try Again "),o("button",{onClick:N,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"}," Clear Filters ")])])):0!==H.value.length||V.value?(c(),s("div",ft,[h(Je,{loading:V.value,onRowClick:Z,onEdit:q,onDelete:Q,onDuplicate:ee,onBulkDelete:te,onCreateNew:ae,onSortChange:E,"data-testid":"product-table"},null,8,["loading"])])):(c(),s("div",yt,[t[18]||(t[18]=o("div",{class:"empty-icon-container"},[o("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4 empty-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),o("h3",kt,l(T.value?"üîç No products match your search":"üì¶ Ready to build your catalog?"),1),o("p",xt,l(T.value?"Don't worry! Try adjusting your search terms or filters to find what you're looking for.":"Your product catalog is waiting to be filled with amazing products. Let's get started!"),1),o("div",ht,[T.value?d("",!0):(c(),_(a,{key:0,to:"/products/new",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-all duration-200 hover:scale-105 empty-cta-btn"},{default:f(()=>t[17]||(t[17]=[o("svg",{class:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),v(" Add Your First Product ",-1)])),o:1,i:[17]})),T.value?(c(),s("button",{key:1,onClick:N,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-all duration-200 hover:scale-105"}," üîÑ Clear All Filters ")):d("",!0)])]))])])}}}),[["__scopeId","data-v-6bf00b9d"]]);export{wt as default};
