import{_ as e}from"./heroicons-QXV26b6T.js";import{d as t,r as s,c as a,y as r,z as i,C as l,D as o,O as n,V as d,J as c,F as x,L as u,a1 as f,W as h,u as m,E as y,B as v}from"./vue-runtime-Ds28nt_E.js";import{_ as p}from"./_plugin-vue_export-helper-DYAABpgn.js";const g={class:"product-performance-chart"},b={class:"flex items-center justify-between mb-4"},w={class:"text-sm font-medium text-gray-900"},k={class:"relative h-full"},z=["width","height"],_={class:"performance-bars"},M=["x","y","width"],P=["x","y","width","fill","onMouseenter"],S=["x","y"],j=["x","y"],W={class:"x-axis"},B=["x1","x2","y1","y2"],F=["x1","x2","y1","y2"],D=["x","y"],I={class:"performance-zones",opacity:"0.1"},C=["x","y","width","height"],E=["x","y","width","height"],N=["x","y","width","height"],G={class:"font-medium"},L={class:"text-blue-300"},O={class:"text-gray-300 text-xs mt-1"},U={key:1,class:"absolute inset-0 flex items-center justify-center"},V={class:"text-center"},H=p(t({t:"ProductPerformanceChart",props:{data:{},principalName:{default:"Principal"}},setup(t){const v=t,p=s(),H=s(),J=s(800),R=s(250),T=20,q=40,A=150,K=s({visible:!1,x:0,y:0,data:null}),Q=a(()=>v.data&&0!==v.data.length?[...v.data].sort((e,t)=>(t.product_performance_score||0)-(e.product_performance_score||0)).slice(0,10):[]),X=a(()=>J.value-A-60),Y=a(()=>R.value-T-q),Z=a(()=>[0,20,40,60,80,100]),$=e=>T+28*e,ee=e=>e/100*X.value,te=()=>{K.value.visible=!1},se=()=>{if(p.value){const e=p.value.parentElement;if(e){J.value=e.clientWidth;const t=250,s=28*Q.value.length+T+q;R.value=Math.max(t,s)}}};return r(()=>{se(),window.addEventListener("resize",se)}),i(()=>{window.removeEventListener("resize",se)}),(t,s)=>{var a,r,i,v,se,ae;return y(),l("div",g,[o("div",b,[o("h4",w," Product Performance - "+d(t.principalName),1),s[1]||(s[1]=o("div",{class:"text-xs text-gray-500"}," Performance Score ",-1))]),o("div",k,[(y(),l("svg",{ref_key:"chartSvg",ref:p,width:J.value,height:R.value,class:"w-full h-full",onMouseleave:te},[o("g",_,[(y(!0),l(x,null,u(Q.value,(e,t)=>{return y(),l("g",{key:e.product_id,class:"product-group"},[o("rect",{x:A,y:$(t),width:X.value,height:20,fill:"#f3f4f6",rx:"2"},null,8,M),o("rect",{x:A,y:$(t),width:ee(e.product_performance_score||0),height:20,fill:(r=e.product_performance_score||0,r>=70?"#10b981":r>=40?"#f59e0b":"#ef4444"),rx:"2",class:"performance-bar hover:opacity-80 transition-opacity duration-200 cursor-pointer",onMouseenter:s=>((e,t)=>{var s;(null==(s=p.value)?void 0:s.getBoundingClientRect())&&(K.value={visible:!0,x:A+ee(e.product_performance_score||0)/2,y:$(t)-10,data:e})})(e,t),onMousemove:s[0]||(s[0]=e=>(e=>{var t;if(K.value.visible){const s=null==(t=p.value)?void 0:t.getBoundingClientRect();s&&(K.value.x=e.clientX-s.left,K.value.y=e.clientY-s.top-20)}})(e))},null,40,P),o("text",{x:140,y:$(t)+10,"text-anchor":"end","dominant-baseline":"middle",class:"text-xs fill-gray-700 font-medium"},d((a=e.product_name,a.length<=20?a:a.substring(0,17)+"...")),9,S),o("text",{x:A+ee(e.product_performance_score||0)+8,y:$(t)+10,"dominant-baseline":"middle",class:"text-xs fill-gray-700 font-semibold"},d(Math.round(e.product_performance_score||0)),9,j)]);var a,r}),128))]),o("g",W,[o("line",{x1:A,x2:J.value-60,y1:R.value-q,y2:R.value-q,stroke:"#6b7280","stroke-width":"1"},null,8,B),(y(!0),l(x,null,u(Z.value,e=>(y(),l("g",{key:e},[o("line",{x1:A+e/100*X.value,x2:A+e/100*X.value,y1:R.value-q,y2:R.value-q+5,stroke:"#6b7280","stroke-width":"1"},null,8,F),o("text",{x:A+e/100*X.value,y:R.value-q+15,"text-anchor":"middle",class:"text-xs fill-gray-600"},d(e),9,D)]))),128))]),o("g",I,[o("rect",{x:A,y:T,width:.4*X.value,height:Y.value,fill:"#ef4444"},null,8,C),o("rect",{x:A+.4*X.value,y:T,width:.3*X.value,height:Y.value,fill:"#f59e0b"},null,8,E),o("rect",{x:A+.7*X.value,y:T,width:.3*X.value,height:Y.value,fill:"#10b981"},null,8,N)])],40,z)),K.value.visible?(y(),l("div",{key:0,ref_key:"tooltipEl",ref:H,class:"absolute z-10 px-3 py-2 bg-gray-900 text-white text-sm rounded shadow-lg pointer-events-none transform -translate-x-1/2",style:f({left:K.value.x+"px",top:K.value.y+"px"})},[o("div",G,d(null==(a=K.value.data)?void 0:a.product_name),1),o("div",L," Performance Score: "+d(Math.round((null==(r=K.value.data)?void 0:r.product_performance_score)||0)),1),o("div",O,[o("div",null,"Opportunities: "+d((null==(i=K.value.data)?void 0:i.total_opportunities)||0),1),o("div",null,"Win Rate: "+d(Math.round((null==(v=K.value.data)?void 0:v.win_rate)||0))+"%",1),o("div",null,"Total Value: "+d((ae=(null==(se=K.value.data)?void 0:se.total_value)||0,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(ae))),1)])],4)):c("",!0),0===Q.value.length?(y(),l("div",U,[o("div",V,[h(m(e),{class:"mx-auto h-12 w-12 text-gray-400"}),s[2]||(s[2]=o("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No product data",-1)),s[3]||(s[3]=o("p",{class:"mt-1 text-sm text-gray-500"}," No product performance data available. ",-1))])])):c("",!0)]),s[4]||(s[4]=n('<div class="mt-4 flex items-center justify-center space-x-6 text-xs" data-v-83dc1e44><div class="flex items-center space-x-2" data-v-83dc1e44><div class="w-3 h-3 rounded bg-red-500" data-v-83dc1e44></div><span class="text-gray-600" data-v-83dc1e44>Poor (0-40)</span></div><div class="flex items-center space-x-2" data-v-83dc1e44><div class="w-3 h-3 rounded bg-yellow-500" data-v-83dc1e44></div><span class="text-gray-600" data-v-83dc1e44>Fair (40-70)</span></div><div class="flex items-center space-x-2" data-v-83dc1e44><div class="w-3 h-3 rounded bg-green-500" data-v-83dc1e44></div><span class="text-gray-600" data-v-83dc1e44>Good (70-100)</span></div></div>',1))])}}}),[["__scopeId","data-v-83dc1e44"]]),J={class:"relative inline-flex items-center justify-center"},R=["width","height"],T=["cx","cy","r","stroke-width"],q=["cx","cy","r","stroke-width","stroke","stroke-dasharray","stroke-dashoffset"],A={class:"absolute inset-0 flex items-center justify-center"},K={key:0,class:"absolute -top-1 -right-1"},Q=p(t({t:"ProductPerformanceIndicator",props:{score:{default:0},size:{default:"md"},showLabel:{type:Boolean,default:!1},showBadge:{type:Boolean,default:!0},animated:{type:Boolean,default:!0}},setup(e){const t=e,s=a(()=>({xs:{size:24,strokeWidth:3,center:12,radius:9,fontSize:"text-xs"},sm:{size:32,strokeWidth:3,center:16,radius:13,fontSize:"text-xs"},md:{size:48,strokeWidth:4,center:24,radius:20,fontSize:"text-sm"},lg:{size:64,strokeWidth:5,center:32,radius:27,fontSize:"text-base"},xl:{size:80,strokeWidth:6,center:40,radius:34,fontSize:"text-lg"}}[t.size])),r=a(()=>2*Math.PI*s.value.radius),i=a(()=>{const e=Math.min(Math.max(t.score,0),100)/100;return r.value*(1-e)}),n=a(()=>t.score>=80?"excellent":t.score>=60?"good":t.score>=40?"fair":t.score>=20?"poor":"critical"),x=a(()=>({excellent:"#10b981",good:"#22c55e",fair:"#f59e0b",poor:"#ef4444",critical:"#dc2626"}[n.value])),u=a(()=>({excellent:"Excellent",good:"Good",fair:"Fair",poor:"Poor",critical:"Critical"}[n.value])),f=a(()=>{const e=[];return"xs"===t.size?e.push("performance-indicator-xs"):"sm"===t.size?e.push("performance-indicator-sm"):"md"===t.size?e.push("performance-indicator-md"):"lg"===t.size?e.push("performance-indicator-lg"):"xl"===t.size&&e.push("performance-indicator-xl"),e.join(" ")}),h=a(()=>{const e=["text-gray-900"];return e.push(s.value.fontSize),e.join(" ")}),m=a(()=>{const e=["text-gray-600"];return"xs"===t.size||"sm"===t.size?e.push("text-xs"):"md"===t.size?e.push("text-sm"):e.push("text-base"),e.join(" ")}),p=a(()=>{const e=[];return"excellent"===n.value?e.push("bg-green-500"):"good"===n.value?e.push("bg-green-400"):"fair"===n.value?e.push("bg-yellow-500"):"poor"===n.value?e.push("bg-red-500"):e.push("bg-red-600"),e.join(" ")});return(e,t)=>(y(),l("div",{class:v(["product-performance-indicator",f.value])},[o("div",J,[(y(),l("svg",{width:s.value.size,height:s.value.size,class:"transform -rotate-90"},[o("circle",{cx:s.value.center,cy:s.value.center,r:s.value.radius,fill:"none","stroke-width":s.value.strokeWidth,stroke:"#e5e7eb"},null,8,T),o("circle",{cx:s.value.center,cy:s.value.center,r:s.value.radius,fill:"none","stroke-width":s.value.strokeWidth,stroke:x.value,"stroke-dasharray":r.value,"stroke-dashoffset":i.value,"stroke-linecap":"round",class:"transition-all duration-500 ease-out"},null,8,q)],8,R)),o("div",A,[o("span",{class:v([h.value,"font-semibold"])},d(Math.round(e.score)),3)]),e.showBadge&&"xs"!==e.size&&"sm"!==e.size?(y(),l("div",K,[o("div",{class:v([p.value,"w-3 h-3 rounded-full border-2 border-white"])},null,2)])):c("",!0)]),e.showLabel?(y(),l("div",{key:0,class:v([m.value,"text-center mt-1"])},d(u.value),3)):c("",!0)],2))}}),[["__scopeId","data-v-005ad4e2"]]);export{H as P,Q as a};
