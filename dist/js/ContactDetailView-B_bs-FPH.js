import{b as e,u as t}from"./vue-router-BP51f1Hv.js";import{c as s}from"./contactsApi-DVX9N6iA.js";import{o as r}from"./organizationsApi-CU0xJvEA.js";import{c as a}from"./contacts-BLZDEW--.js";import{d as o,r as n,c as l,y as i,C as d,D as c,J as m,V as u,W as x,N as p,H as h,U as g,E as v}from"./vue-runtime-Ds28nt_E.js";import"./supabaseClient-Bh63a8tq.js";import"./supabase-BNBjhZ5t.js";import"./index-CocGRfLV.js";import"./pinia-CUC4VGP7.js";import"./yup-D1qa_jJc.js";const y={class:"min-h-screen bg-gray-50 py-8"},f={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},w={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},b={key:1,class:"bg-white rounded-lg shadow-sm border border-red-200 p-6"},k={class:"flex items-center mb-4"},C={class:"text-red-700"},j={class:"flex space-x-3"},M={key:2,class:"space-y-6"},_={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},z={class:"flex items-center justify-between mb-6"},B={class:"flex items-center space-x-3"},$={class:"flex space-x-3"},V={class:"flex items-center space-x-6"},H={class:"flex-shrink-0"},A={class:"h-20 w-20 rounded-full bg-blue-100 flex items-center justify-center"},D={class:"text-2xl font-medium text-blue-600"},L={class:"flex-1"},N={class:"text-2xl font-bold text-gray-900"},U={key:0,class:"text-lg text-gray-600 mt-1"},E={key:1,class:"text-lg text-gray-600 mt-1"},T={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={class:"flex items-center space-x-3"},P=["href"],S={class:"flex items-center space-x-3"},F={class:"text-gray-900"},G={class:"flex items-center space-x-3"},J={class:"text-gray-900"},K={class:"flex items-center space-x-3"},R={class:"text-gray-900"},W={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},q={class:"prose max-w-none"},Q={class:"text-gray-700 whitespace-pre-wrap"},X={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Y={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Z={class:"mt-3 text-center"},ee={class:"mt-2 px-7 py-3"},te={class:"text-sm text-gray-500"},se={class:"items-center px-4 py-3"},re={class:"flex space-x-3 justify-center"},ae=["disabled"],oe=o({t:"ContactDetailView",setup(o){const oe=e(),ne=t(),le=oe.params.id,ie=n(null),de=n(null),ce=n(!0),me=n(null),ue=n(!1),xe=n(!1),pe=l(()=>ie.value&&ie.value.id?`/opportunities/new?${new URLSearchParams({contextType:"contact",contactId:ie.value.id,organizationName:de.value?.name||"",contactName:`${ie.value.first_name||""} ${ie.value.last_name||""}`.trim()}).toString()}`:"/opportunities/new"),he=async()=>{try{ce.value=!0,me.value=null;const t=await s.getContact(le);if(t.success&&t.data){if(ie.value=t.data,t.data.organization_id)try{const e=await r.getOrganization(t.data.organization_id);e.success&&e.data&&(de.value=e.data)}catch(e){}}else me.value=t.error||"Contact not found"}catch(t){me.value="An unexpected error occurred"}finally{ce.value=!1}},ge=()=>{ue.value=!0},ve=async()=>{if(ie.value&&ie.value.id)try{xe.value=!0;const e=await s.deleteContact(ie.value.id);e.success?ne.push("/contacts"):(me.value=e.error||"Failed to delete contact",ue.value=!1)}catch(e){me.value="An unexpected error occurred",ue.value=!1}finally{xe.value=!1}};return i(()=>{he()}),(e,t)=>{const s=h("router-link");return v(),d("div",y,[c("div",f,[ce.value?(v(),d("div",w,t[1]||(t[1]=[c("div",{class:"flex justify-center"},[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})],-1)]))):me.value?(v(),d("div",b,[c("div",k,[t[2]||(t[2]=c("svg",{class:"h-5 w-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c("span",C,u(me.value),1)]),c("div",j,[x(s,{to:"/",class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},{default:p(()=>t[3]||(t[3]=[g(" Back to Contacts ",-1)])),o:1,l:[3]}),c("button",{onClick:he,class:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"}," Try Again ")])])):ie.value?(v(),d("div",M,[c("div",_,[c("div",z,[c("div",B,[x(s,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:p(()=>t[4]||(t[4]=[c("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),o:1,l:[4]}),t[5]||(t[5]=c("h1",{class:"text-3xl font-bold text-gray-900"},"Contact Details",-1))]),c("div",$,[x(s,{to:pe.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:p(()=>t[6]||(t[6]=[c("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),g(" Create Opportunity ",-1)])),o:1,l:[6]},8,["to"]),x(s,{to:`/contacts/${ie.value.id}/edit`,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},{default:p(()=>t[7]||(t[7]=[c("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),g(" Edit Contact ",-1)])),o:1,l:[7]},8,["to"]),c("button",{onClick:ge,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700"},t[8]||(t[8]=[c("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),g(" Delete ",-1)]))])]),c("div",V,[c("div",H,[c("div",A,[c("span",D,u(ie.value?`${ie.value.first_name?.[0]||""}${ie.value.last_name?.[0]||""}`:""),1)])]),c("div",L,[c("h2",N,u(ie.value?`${ie.value.first_name} ${ie.value.last_name}`:""),1),ie.value.position?(v(),d("p",U,u(ie.value.position),1)):m("",!0),de.value?(v(),d("p",E,u(de.value.name),1)):m("",!0)])])]),c("div",T,[t[17]||(t[17]=c("h3",{class:"text-lg font-medium text-gray-900 mb-6"},"Contact Information",-1)),c("div",I,[c("div",O,[t[10]||(t[10]=c("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),c("div",null,[t[9]||(t[9]=c("p",{class:"text-sm font-medium text-gray-500"},"Email",-1)),c("a",{href:`mailto:${ie.value.email}`,class:"text-blue-600 hover:text-blue-800"},u(ie.value.email),9,P)])]),c("div",S,[t[12]||(t[12]=c("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),c("div",null,[t[11]||(t[11]=c("p",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),c("p",F,u((o=ie.value.phone,a.formatPhone(o))),1)])]),c("div",G,[t[14]||(t[14]=c("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),c("div",null,[t[13]||(t[13]=c("p",{class:"text-sm font-medium text-gray-500"},"Organization",-1)),c("p",J,u(de.value?.name||"No organization"),1)])]),c("div",K,[t[16]||(t[16]=c("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),c("div",null,[t[15]||(t[15]=c("p",{class:"text-sm font-medium text-gray-500"},"Added",-1)),c("p",R,u((r=ie.value.created_at,r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown")),1)])])])]),ie.value.notes?(v(),d("div",W,[t[18]||(t[18]=c("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Notes",-1)),c("div",q,[c("p",Q,u(ie.value.notes),1)])])):m("",!0)])):m("",!0),ue.value?(v(),d("div",X,[c("div",Y,[c("div",Z,[t[21]||(t[21]=c("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[c("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[22]||(t[22]=c("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"Delete Contact",-1)),c("div",ee,[c("p",te,[t[19]||(t[19]=g(" Are you sure you want to delete ",-1)),c("strong",null,u(ie.value?`${ie.value.first_name} ${ie.value.last_name}`:"this contact"),1),t[20]||(t[20]=g("? This action cannot be undone. ",-1))])]),c("div",se,[c("div",re,[c("button",{onClick:t[0]||(t[0]=e=>ue.value=!1),class:"px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-600"}," Cancel "),c("button",{onClick:ve,disabled:xe.value,class:"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-600 disabled:opacity-50"},u(xe.value?"Deleting...":"Delete"),9,ae)])])])])])):m("",!0)])]);var r,o}}});export{oe as default};
