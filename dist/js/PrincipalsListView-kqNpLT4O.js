import{d as e,C as t,E as s,$ as r,Z as o,D as n,J as a,W as i,V as l,U as c,r as d,B as u,F as p,L as m,c as g,y as x,w as f,K as y,X as v,Y as b,O as h,N as w,H as k,G as C}from"./vue-runtime-Ds28nt_E.js";import{u as M}from"./vue-router-BP51f1Hv.js";import{u as j}from"./principalStore-Bil7HxyJ.js";import{A,E as T,p as _}from"./EngagementScoreRing-BHsysYHG.js";import{P as L}from"./PrincipalSelector-PYcqOzWK.js";import{P as z}from"./PrincipalKPICards-CwCBBfUv.js";import{_ as I}from"./_plugin-vue_export-helper-DYAABpgn.js";import"./pinia-CUC4VGP7.js";import"./organizationsApi-CU0xJvEA.js";import"./supabaseClient-Bh63a8tq.js";import"./supabase-BNBjhZ5t.js";import"./index-CocGRfLV.js";import"./heroicons-QXV26b6T.js";import"./TrendIndicator-CbCc-Yc8.js";/* empty css                                                                       *//* empty css                                                                          */const B=["onKeydown","aria-label"],$={class:"flex items-start justify-between mb-3"},E={class:"flex-1 min-w-0"},O={class:"text-lg font-semibold text-gray-900 truncate"},S={class:"text-sm text-gray-600 truncate"},V={key:0,class:"text-xs text-gray-500 uppercase tracking-wide"},P={class:"flex items-center justify-center mb-4"},U={class:"grid grid-cols-2 gap-3 mb-4"},N={class:"text-center"},R={class:"text-lg font-semibold text-gray-900"},D={class:"text-center"},H={class:"text-lg font-semibold text-gray-900"},K={class:"text-center"},F={class:"text-lg font-semibold text-gray-900"},W={class:"text-center"},Y={class:"text-lg font-semibold text-gray-900"},q={key:0,class:"mb-4"},G={class:"flex items-center space-x-2 p-2 bg-amber-50 rounded-md border border-amber-200"},X={class:"flex-1 min-w-0"},Z={class:"text-sm font-medium text-amber-800"},J={key:0,class:"text-xs text-amber-700"},Q={class:"grid grid-cols-2 gap-2"},ee=["aria-label"],te=["aria-label"],se=I(e({t:"PrincipalCard",props:{principal:{}},emits:["click","create-opportunity","log-interaction"],setup(e,{emit:d}){const u=e,p=d,m=e=>{if(!e)return"Never";const t=new Date(e),s=new Date,r=Math.abs(s.getTime()-t.getTime()),o=Math.floor(r/864e5);return 0===o?"Today":1===o?"1 day ago":o<7?`${o} days ago`:o<30?`${Math.floor(o/7)} weeks ago`:o<365?`${Math.floor(o/30)} months ago`:`${Math.floor(o/365)} years ago`},g=e=>{switch(e){case"NO_ACTIVITY":return"NO_ACTIVITY";case"STALE":default:return"LOW";case"MODERATE":return"MODERATE";case"ACTIVE":return"ACTIVE"}},x=()=>{p("click",u.principal)},f=()=>{p("create-opportunity",u.principal)},y=()=>{p("log-interaction",u.principal)};return(e,d)=>{return s(),t("div",{class:"principal-card bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow duration-200 cursor-pointer focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2",onClick:x,onKeydown:[r(x,["enter"]),r(o(x,["prevent"]),["space"])],role:"button",tabindex:"0","aria-label":`View details for ${e.principal.principal_name}`},[n("div",$,[n("div",E,[n("h3",O,l(e.principal.principal_name),1),n("p",S,l(e.principal.principal_name),1),e.principal.organization_type?(s(),t("p",V,l(e.principal.organization_type),1)):a("",!0)]),i(A,{status:g(e.principal.activity_status),size:"sm",class:"flex-shrink-0"},null,8,["status"])]),n("div",P,[i(T,{score:e.principal.engagement_score||0,size:"lg"},null,8,["score"])]),n("div",U,[n("div",N,[n("div",R,l(e.principal.total_interactions||0),1),d[0]||(d[0]=n("div",{class:"text-xs text-gray-500"},"Interactions",-1))]),n("div",D,[n("div",H,l(e.principal.active_opportunities||0),1),d[1]||(d[1]=n("div",{class:"text-xs text-gray-500"},"Opportunities",-1))]),n("div",K,[n("div",F,l(e.principal.product_count||0),1),d[2]||(d[2]=n("div",{class:"text-xs text-gray-500"},"Products",-1))]),n("div",W,[n("div",Y,l(m(e.principal.last_activity_date)),1),d[3]||(d[3]=n("div",{class:"text-xs text-gray-500"},"Last Activity",-1))])]),e.principal.follow_ups_required&&e.principal.follow_ups_required>0?(s(),t("div",q,[n("div",G,[d[4]||(d[4]=n("svg",{class:"h-4 w-4 text-amber-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),n("div",X,[n("p",Z,l(e.principal.follow_ups_required)+" Follow-up"+l(e.principal.follow_ups_required>1?"s":"")+" Required ",1),e.principal.next_follow_up_date?(s(),t("p",J," Next: "+l((u=e.principal.next_follow_up_date,new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))),1)):a("",!0)])])])):a("",!0),n("div",Q,[n("button",{onClick:o(f,["stop"]),class:"inline-flex items-center justify-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200 min-h-[36px]","aria-label":`Create opportunity for ${e.principal.principal_name}`},d[5]||(d[5]=[n("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),c(" Opportunity ",-1)]),8,ee),n("button",{onClick:o(y,["stop"]),class:"inline-flex items-center justify-center px-3 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200 min-h-[36px]","aria-label":`Log interaction for ${e.principal.principal_name}`},d[6]||(d[6]=[n("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),c(" Interaction ",-1)]),8,te)]),d[7]||(d[7]=n("div",{class:"absolute inset-0 rounded-lg bg-blue-50 opacity-0 hover:opacity-10 focus:opacity-10 transition-opacity duration-200 pointer-events-none"},null,-1))],40,B);var u}}}),[["__scopeId","data-v-9a22e276"]]),re={class:"principal-table-container"},oe={class:"hidden sm:block overflow-x-auto"},ne={class:"min-w-full divide-y divide-gray-200"},ae={class:"bg-gray-50"},ie=["aria-sort"],le={class:"flex items-center space-x-1"},ce=["d"],de=["aria-sort"],ue={class:"flex items-center space-x-1"},pe=["d"],me=["aria-sort"],ge={class:"flex items-center space-x-1"},xe=["d"],fe=["aria-sort"],ye={class:"flex items-center space-x-1"},ve=["d"],be={class:"bg-white divide-y divide-gray-200"},he=["onClick","onKeydown","aria-label"],we={class:"px-4 py-4 whitespace-nowrap"},ke={class:"flex items-center"},Ce={class:"flex-shrink-0 h-10 w-10"},Me={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},je={class:"text-sm font-medium text-blue-600"},Ae={class:"ml-4"},Te={class:"text-sm font-medium text-gray-900 truncate max-w-[200px]"},_e={class:"text-sm text-gray-500 truncate max-w-[200px]"},Le={key:0,class:"text-xs text-gray-400 uppercase"},ze={class:"px-4 py-4 whitespace-nowrap"},Ie={class:"flex items-center"},Be={class:"flex flex-col"},$e={class:"text-sm font-medium text-gray-900"},Ee={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},Oe={class:"flex flex-col"},Se={class:"text-xs text-gray-500"},Ve={class:"px-4 py-4 whitespace-nowrap"},Pe={class:"flex items-center space-x-4 text-sm text-gray-900"},Ue={class:"flex flex-col items-center"},Ne={class:"font-medium"},Re={class:"flex flex-col items-center"},De={class:"font-medium"},He={class:"flex flex-col items-center"},Ke={class:"font-medium"},Fe={class:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium"},We={class:"flex items-center justify-end space-x-2"},Ye=["onClick","aria-label"],qe=["onClick","aria-label"],Ge=["onClick","aria-label"],Xe={class:"sm:hidden space-y-3"},Ze=["onClick","onKeydown","aria-label"],Je={class:"flex items-start justify-between mb-3"},Qe={class:"flex items-center space-x-3"},et={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},tt={class:"text-sm font-medium text-blue-600"},st={class:"min-w-0 flex-1"},rt={class:"text-sm font-medium text-gray-900 truncate"},ot={class:"text-xs text-gray-500 truncate"},nt={key:0,class:"text-xs text-gray-400 uppercase"},at={class:"grid grid-cols-2 gap-4 mb-3"},it={class:"text-center"},lt={class:"text-center"},ct={class:"text-sm font-medium text-gray-900"},dt={class:"grid grid-cols-3 gap-2 mb-3 text-center"},ut={class:"text-sm font-medium text-gray-900"},pt={class:"text-sm font-medium text-gray-900"},mt={class:"text-sm font-medium text-gray-900"},gt={class:"grid grid-cols-2 gap-2"},xt=["onClick"],ft=["onClick"],yt={key:0,class:"flex items-center justify-center py-8"},vt=I(e({t:"PrincipalTable",props:{principals:{},loading:{type:Boolean,default:!1}},emits:["principal-click","create-opportunity","log-interaction","sort-change"],setup(e,{emit:g}){const x=g,f=d({column:null,direction:"asc"}),y=e=>f.value.column!==e?"none":"asc"===f.value.direction?"ascending":"descending",v=e=>{if(!e)return"?";const t=e.split(" ");return 1===t.length?t[0].charAt(0).toUpperCase():(t[0].charAt(0)+t[t.length-1].charAt(0)).toUpperCase()},b=e=>{if(!e)return"Never";const t=new Date(e),s=new Date,r=Math.abs(s.getTime()-t.getTime()),o=Math.floor(r/864e5);return 0===o?"Today":1===o?"1 day ago":o<7?`${o} days ago`:o<30?`${Math.floor(o/7)} weeks ago`:o<365?`${Math.floor(o/30)} months ago`:`${Math.floor(o/365)} years ago`},h=e=>{let t="asc";f.value.column===e&&(t="asc"===f.value.direction?"desc":"asc"),f.value={column:e,direction:t},x("sort-change",e,t)},w=e=>{x("principal-click",e)},k=e=>{x("create-opportunity",e)},C=e=>{x("log-interaction",e)},M=e=>f.value.column!==e?"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4":"asc"===f.value.direction?"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12":"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4",j=e=>f.value.column===e?"h-3 w-3 text-blue-600":"h-3 w-3 text-gray-400";return(e,d)=>(s(),t("div",re,[n("div",oe,[n("table",ne,[n("thead",ae,[n("tr",null,[n("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:bg-gray-100 transition-colors duration-200",onClick:d[0]||(d[0]=e=>h("name")),onKeydown:[d[1]||(d[1]=r(e=>h("name"),["enter"])),d[2]||(d[2]=r(o(e=>h("name"),["prevent"]),["space"]))],tabindex:"0","aria-sort":y("name")},[n("div",le,[d[12]||(d[12]=n("span",null,"Principal",-1)),(s(),t("svg",{class:u(j("name")),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:M("name")},null,8,ce)],2))])],40,ie),n("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:bg-gray-100 transition-colors duration-200",onClick:d[3]||(d[3]=e=>h("engagement")),onKeydown:[d[4]||(d[4]=r(e=>h("engagement"),["enter"])),d[5]||(d[5]=r(o(e=>h("engagement"),["prevent"]),["space"]))],tabindex:"0","aria-sort":y("engagement")},[n("div",ue,[d[13]||(d[13]=n("span",null,"Engagement",-1)),(s(),t("svg",{class:u(j("engagement")),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:M("engagement")},null,8,pe)],2))])],40,de),n("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:bg-gray-100 transition-colors duration-200",onClick:d[6]||(d[6]=e=>h("activity")),onKeydown:[d[7]||(d[7]=r(e=>h("activity"),["enter"])),d[8]||(d[8]=r(o(e=>h("activity"),["prevent"]),["space"]))],tabindex:"0","aria-sort":y("activity")},[n("div",ge,[d[14]||(d[14]=n("span",null,"Last Activity",-1)),(s(),t("svg",{class:u(j("activity")),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:M("activity")},null,8,xe)],2))])],40,me),n("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:bg-gray-100 transition-colors duration-200",onClick:d[9]||(d[9]=e=>h("opportunities")),onKeydown:[d[10]||(d[10]=r(e=>h("opportunities"),["enter"])),d[11]||(d[11]=r(o(e=>h("opportunities"),["prevent"]),["space"]))],tabindex:"0","aria-sort":y("opportunities")},[n("div",ye,[d[15]||(d[15]=n("span",null,"Opportunities",-1)),(s(),t("svg",{class:u(j("opportunities")),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:M("opportunities")},null,8,ve)],2))])],40,fe),d[16]||(d[16]=n("th",{scope:"col",class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),n("tbody",be,[(s(!0),t(p,null,m(e.principals,e=>{return s(),t("tr",{key:e.principal_id,class:"hover:bg-gray-50 cursor-pointer transition-colors duration-200",onClick:t=>w(e),onKeydown:[r(t=>w(e),["enter"]),r(o(t=>w(e),["prevent"]),["space"])],tabindex:"0","aria-label":`View details for ${e.principal_name}`},[n("td",we,[n("div",ke,[n("div",Ce,[n("div",Me,[n("span",je,l(v(e.principal_name)),1)])]),n("div",Ae,[n("div",Te,l(e.principal_name),1),n("div",_e,l(e.organization_type),1),e.organization_type?(s(),t("div",Le,l(e.organization_type),1)):a("",!0)])])]),n("td",ze,[n("div",Ie,[i(T,{score:e.engagement_score||0,size:"sm",class:"mr-3"},null,8,["score"]),n("div",Be,[n("span",$e,l(e.engagement_score||0)+"% ",1),i(A,{status:"STALE"===e.activity_status?"LOW":e.activity_status,size:"xs"},null,8,["status"])])])]),n("td",Ee,[n("div",Oe,[n("span",null,l((c=e.last_activity_date,c?new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never")),1),n("span",Se,l(b(e.last_activity_date)),1)])]),n("td",Ve,[n("div",Pe,[n("div",Ue,[n("span",Ne,l(e.active_opportunities||0),1),d[17]||(d[17]=n("span",{class:"text-xs text-gray-500"},"Active",-1))]),n("div",Re,[n("span",De,l(e.total_interactions||0),1),d[18]||(d[18]=n("span",{class:"text-xs text-gray-500"},"Interactions",-1))]),n("div",He,[n("span",Ke,l(e.total_opportunities||0),1),d[19]||(d[19]=n("span",{class:"text-xs text-gray-500"},"Total",-1))])])]),n("td",Fe,[n("div",We,[n("button",{onClick:o(t=>k(e),["stop"]),class:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-blue-600 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[32px] min-w-[32px]","aria-label":`Create opportunity for ${e.principal_name}`},d[20]||(d[20]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,Ye),n("button",{onClick:o(t=>C(e),["stop"]),class:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[32px] min-w-[32px]","aria-label":`Log interaction for ${e.principal_name}`},d[21]||(d[21]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)]),8,qe),n("button",{onClick:o(t=>w(e),["stop"]),class:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[32px] min-w-[32px]","aria-label":`View details for ${e.principal_name}`},d[22]||(d[22]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,Ge)])])],40,he);var c}),128))])])]),n("div",Xe,[(s(!0),t(p,null,m(e.principals,e=>(s(),t("div",{key:e.principal_id,class:"bg-white border border-gray-200 rounded-lg p-4 cursor-pointer hover:shadow-md transition-shadow duration-200",onClick:t=>w(e),onKeydown:[r(t=>w(e),["enter"]),r(o(t=>w(e),["prevent"]),["space"])],tabindex:"0","aria-label":`View details for ${e.principal_name}`},[n("div",Je,[n("div",Qe,[n("div",et,[n("span",tt,l(v(e.principal_name)),1)]),n("div",st,[n("h3",rt,l(e.principal_name),1),n("p",ot,l(e.organization_type),1),e.organization_type?(s(),t("p",nt,l(e.organization_type),1)):a("",!0)])]),i(A,{status:"STALE"===e.activity_status?"LOW":e.activity_status,size:"sm"},null,8,["status"])]),n("div",at,[n("div",it,[i(T,{score:e.engagement_score||0,size:"sm",class:"mx-auto mb-1"},null,8,["score"]),d[23]||(d[23]=n("div",{class:"text-xs text-gray-500"},"Engagement",-1))]),n("div",lt,[n("div",ct,l(b(e.last_activity_date)),1),d[24]||(d[24]=n("div",{class:"text-xs text-gray-500"},"Last Activity",-1))])]),n("div",dt,[n("div",null,[n("div",ut,l(e.active_opportunities||0),1),d[25]||(d[25]=n("div",{class:"text-xs text-gray-500"},"Opportunities",-1))]),n("div",null,[n("div",pt,l(e.total_interactions||0),1),d[26]||(d[26]=n("div",{class:"text-xs text-gray-500"},"Interactions",-1))]),n("div",null,[n("div",mt,l(e.total_opportunities||0),1),d[27]||(d[27]=n("div",{class:"text-xs text-gray-500"},"Products",-1))])]),n("div",gt,[n("button",{onClick:o(t=>k(e),["stop"]),class:"inline-flex items-center justify-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[44px]"},d[28]||(d[28]=[n("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),c(" Opportunity ",-1)]),8,xt),n("button",{onClick:o(t=>C(e),["stop"]),class:"inline-flex items-center justify-center px-3 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[44px]"},d[29]||(d[29]=[n("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),c(" Interaction ",-1)]),8,ft)])],40,Ze))),128))]),e.loading?(s(),t("div",yt,d[30]||(d[30]=[n("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},null,-1),n("span",{class:"ml-2 text-gray-600"},"Loading...",-1)]))):a("",!0)]))}}),[["__scopeId","data-v-57b9e3e9"]]),bt={class:"principals-list-view max-w-full","data-testid":"principals-list-view"},ht={class:"flex flex-col space-y-4 mb-6","data-testid":"principals-header"},wt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},kt={class:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3"},Ct=["disabled","aria-label"],Mt={class:"w-full"},jt={class:"mb-8","data-testid":"kpi-dashboard-section"},At={class:"mb-6"},Tt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},_t={class:"space-y-4"},Lt={class:"w-full"},zt={class:"relative"},It={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3"},Bt={key:0,class:"flex flex-wrap items-center gap-2"},$t=["onClick"],Et={class:"space-y-6"},Ot={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8","data-testid":"loading-spinner"},St={key:1,class:"bg-white rounded-lg shadow-sm border border-red-200 p-6","data-testid":"error-message"},Vt={class:"flex items-start space-x-3"},Pt={class:"flex-1"},Ut={class:"mt-1 text-sm text-red-700"},Nt={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center"},Rt={class:"text-lg font-medium text-gray-900 mb-2"},Dt={class:"text-gray-500 mb-6"},Ht={class:"flex flex-col sm:flex-row justify-center gap-3"},Kt={key:3,"data-testid":"principals-grid-section"},Ft={class:"flex items-center justify-between mb-4"},Wt={class:"flex items-center space-x-2"},Yt={class:"text-sm text-gray-700"},qt={key:0,class:"text-sm text-gray-500"},Gt={class:"flex items-center space-x-2"},Xt=["aria-pressed"],Zt=["aria-pressed"],Jt={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Qt={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},es={key:2,class:"mt-6 flex flex-col sm:flex-row items-center justify-between space-y-3 sm:space-y-0"},ts={class:"text-sm text-gray-700"},ss={class:"flex items-center space-x-2"},rs=["disabled"],os={class:"text-sm text-gray-700"},ns=["disabled"],as=I(e({t:"PrincipalsListView",setup(e){const r=M(),o=j(),A=d("all"),T=d(""),I=d("grid"),B=d(1),$=d(12),E=d(!1),O=d(!1),S=d(!1),V=d(null),P=d(null),U=d([]),N=d([]),R=d(null),D=d(null),H=d({activityStatus:"",engagementLevel:"",organizationType:"",followUpStatus:""}),K=g(()=>!!(T.value||H.value.activityStatus||H.value.engagementLevel||H.value.organizationType||H.value.followUpStatus)),F=g(()=>{const e=[];return T.value&&e.push({key:"search",label:`Search: "${T.value}"`}),H.value.activityStatus&&e.push({key:"activityStatus",label:`Activity: ${H.value.activityStatus}`}),H.value.engagementLevel&&e.push({key:"engagementLevel",label:`Engagement: ${H.value.engagementLevel}`}),H.value.organizationType&&e.push({key:"organizationType",label:`Type: ${H.value.organizationType}`}),H.value.followUpStatus&&e.push({key:"followUpStatus",label:`Follow-up: ${H.value.followUpStatus}`}),e}),W=g(()=>{let e=[...U.value];if(T.value){const t=T.value.toLowerCase();e=e.filter(e=>e.principal_name?.toLowerCase().includes(t)||e.principal_name?.toLowerCase().includes(t))}return H.value.activityStatus&&(e=e.filter(e=>e.activity_status===H.value.activityStatus)),H.value.engagementLevel&&(e=e.filter(e=>{const t=e.engagement_score||0;switch(H.value.engagementLevel){case"high":return t>=80;case"medium":return t>=40&&t<80;case"low":return t<40;default:return!0}})),H.value.organizationType&&(e=e.filter(e=>e.organization_type===H.value.organizationType)),H.value.followUpStatus&&(e=e.filter(e=>{switch(H.value.followUpStatus){case"required":return(e.follow_ups_required||0)>0;case"scheduled":return null!=e.next_follow_up_date;case"overdue":return null!=e.next_follow_up_date&&new Date(e.next_follow_up_date)<new Date;default:return!0}})),e}),Y=g(()=>W.value.length),q=g(()=>U.value.length),G=g(()=>Math.ceil(Y.value/$.value)),X=g(()=>{const e=(B.value-1)*$.value,t=e+$.value;return W.value.slice(e,t)});let Z;const J=()=>{clearTimeout(Z),Z=setTimeout(()=>{B.value=1},300)},Q=e=>{A.value=e?.principal_id||"all"},ee=async()=>{await Promise.all([ue(),pe()])},te=()=>{},re=()=>{B.value=1},oe=()=>{T.value="",H.value={activityStatus:"",engagementLevel:"",organizationType:"",followUpStatus:""},A.value="all",re()},ne=e=>{r.push(`/principals/${e.principal_id}`)},ae=e=>{r.push(`/opportunities/new?principal=${e.principal_id}`)},ie=e=>{r.push(`/interactions/new?principal=${e.principal_id}`)},le=(e,t)=>{U.value.sort((s,r)=>{let o,n;switch(e){case"name":o=s.principal_name||"",n=r.principal_name||"";break;case"engagement":o=s.engagement_score||0,n=r.engagement_score||0;break;case"activity":o=s.last_activity_date||"",n=r.last_activity_date||"";break;case"opportunities":o=s.active_opportunities||0,n=r.active_opportunities||0;break;default:return 0}return"asc"===t?o<n?-1:o>n?1:0:o>n?-1:o<n?1:0})},ce=()=>{B.value>1&&B.value--},de=()=>{B.value<G.value&&B.value++},ue=async()=>{E.value=!0,V.value=null;try{const e=await _.getPrincipalActivitySummary();e.success?U.value=e.data||[]:V.value=e.error||"Failed to load principals data"}catch(e){V.value=e instanceof Error?e.message:"Unexpected error occurred"}finally{E.value=!1}},pe=async()=>{S.value=!0;try{const e=await _.getEngagementScoreBreakdown();e.success&&(R.value=e.data);const t=await _.getPrincipalStats();t.success&&(D.value=t.data);const s=await _.getPrincipalActivitySummary();s.success&&(N.value=s.data||[])}catch(e){}finally{S.value=!1}};return x(async()=>{await Promise.all([ue(),pe(),o.fetchPrincipalOptions()])}),f(()=>r.currentRoute.value.fullPath,e=>{"/principals"===e&&ee()}),f([T,H],()=>{B.value=1},{deep:!0}),(e,r)=>{const o=k("router-link");return s(),t("div",bt,[n("div",ht,[n("div",wt,[r[11]||(r[11]=n("div",{class:"mb-4 sm:mb-0"},[n("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-900","data-testid":"page-title"}," Principal Activity Management "),n("p",{class:"mt-1 text-sm text-gray-600"}," Comprehensive relationship insights and performance analytics ")],-1)),n("div",kt,[n("button",{onClick:ee,disabled:E.value,class:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 min-h-[44px]","aria-label":E.value?"Refreshing...":"Refresh data"},[(s(),t("svg",{class:u(["h-4 w-4 mr-2",{"animate-spin":E.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r[8]||(r[8]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2)),r[9]||(r[9]=c(" Refresh ",-1))],8,Ct),n("button",{onClick:te,class:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[44px]"},r[10]||(r[10]=[n("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),c(" Export ",-1)]))])]),n("div",Mt,[i(L,{modelValue:A.value,"onUpdate:modelValue":r[0]||(r[0]=e=>A.value=e),loading:O.value,error:P.value,"allow-all-principals":"",onChange:Q,class:"w-full"},null,8,["modelValue","loading","error"])])]),n("section",jt,[r[12]||(r[12]=n("div",{class:"mb-4"},[n("h2",{class:"text-lg font-semibold text-gray-900"},"Performance Overview"),n("p",{class:"text-sm text-gray-600"},"Key metrics and engagement insights")],-1)),i(z,{"activity-summary":N.value,"engagement-breakdown":R.value,stats:D.value,loading:S.value,"selected-principal-id":A.value,"data-testid":"kpi-cards"},null,8,["activity-summary","engagement-breakdown","stats","loading","selected-principal-id"])]),n("section",At,[n("div",Tt,[n("div",_t,[n("div",Lt,[r[14]||(r[14]=n("label",{for:"search",class:"sr-only"},"Search principals",-1)),n("div",zt,[r[13]||(r[13]=n("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[n("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),y(n("input",{id:"search","onUpdate:modelValue":r[1]||(r[1]=e=>T.value=e),type:"text",placeholder:"Search principals by name or organization...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[44px]",onInput:J},null,544),[[v,T.value]])])]),n("div",It,[y(n("select",{"onUpdate:modelValue":r[2]||(r[2]=e=>H.value.activityStatus=e),class:"block w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[44px]",onChange:re},r[15]||(r[15]=[h('<option value="" data-v-9d810779>All Activity Levels</option><option value="ACTIVE" data-v-9d810779>Active</option><option value="MODERATE" data-v-9d810779>Moderate</option><option value="LOW" data-v-9d810779>Low Activity</option><option value="NO_ACTIVITY" data-v-9d810779>No Activity</option>',5)]),544),[[b,H.value.activityStatus]]),y(n("select",{"onUpdate:modelValue":r[3]||(r[3]=e=>H.value.engagementLevel=e),class:"block w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[44px]",onChange:re},r[16]||(r[16]=[n("option",{value:""},"All Engagement Levels",-1),n("option",{value:"high"},"High (80-100)",-1),n("option",{value:"medium"},"Medium (40-79)",-1),n("option",{value:"low"},"Low (0-39)",-1)]),544),[[b,H.value.engagementLevel]]),y(n("select",{"onUpdate:modelValue":r[4]||(r[4]=e=>H.value.organizationType=e),class:"block w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[44px]",onChange:re},r[17]||(r[17]=[h('<option value="" data-v-9d810779>All Organization Types</option><option value="DISTRIBUTOR" data-v-9d810779>Distributor</option><option value="RETAILER" data-v-9d810779>Retailer</option><option value="MANUFACTURER" data-v-9d810779>Manufacturer</option><option value="CONSULTANT" data-v-9d810779>Consultant</option>',5)]),544),[[b,H.value.organizationType]]),y(n("select",{"onUpdate:modelValue":r[5]||(r[5]=e=>H.value.followUpStatus=e),class:"block w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[44px]",onChange:re},r[18]||(r[18]=[n("option",{value:""},"All Follow-up Status",-1),n("option",{value:"required"},"Requires Follow-up",-1),n("option",{value:"scheduled"},"Scheduled",-1),n("option",{value:"overdue"},"Overdue",-1)]),544),[[b,H.value.followUpStatus]])]),K.value?(s(),t("div",Bt,[r[20]||(r[20]=n("span",{class:"text-sm text-gray-600"},"Active filters:",-1)),(s(!0),t(p,null,m(F.value,e=>(s(),t("button",{key:e.key,onClick:t=>(e=>{switch(e){case"search":T.value="";break;case"activityStatus":H.value.activityStatus="";break;case"engagementLevel":H.value.engagementLevel="";break;case"organizationType":H.value.organizationType="";break;case"followUpStatus":H.value.followUpStatus=""}re()})(e.key),class:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500"},[c(l(e.label)+" ",1),r[19]||(r[19]=n("svg",{class:"ml-1 h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1))],8,$t))),128)),n("button",{onClick:oe,class:"text-sm text-gray-600 hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1"}," Clear all ")])):a("",!0)])])]),n("section",Et,[E.value&&0===U.value.length?(s(),t("div",Ot,r[21]||(r[21]=[n("div",{class:"flex flex-col items-center justify-center space-y-4"},[n("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n("p",{class:"text-center text-gray-500"},"Loading principal data...")],-1)]))):V.value?(s(),t("div",St,[n("div",Vt,[r[23]||(r[23]=n("svg",{class:"h-5 w-5 text-red-400 mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),n("div",Pt,[r[22]||(r[22]=n("h3",{class:"text-sm font-medium text-red-800"},"Error loading principal data",-1)),n("p",Ut,l(V.value),1),n("div",{class:"mt-4 flex flex-col sm:flex-row gap-3"},[n("button",{onClick:ee,class:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 min-h-[44px]","data-testid":"retry-button"}," Try Again "),n("button",{onClick:oe,class:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[44px]"}," Clear Filters ")])])])])):0!==U.value.length||E.value?(s(),t("div",Kt,[n("div",Ft,[n("div",Wt,[n("span",Yt,l(Y.value)+" principal"+l(1===Y.value?"":"s"),1),K.value?(s(),t("span",qt," (filtered from "+l(q.value)+") ",1)):a("",!0)]),n("div",Gt,[r[28]||(r[28]=n("label",{for:"view-toggle",class:"sr-only"},"Toggle view",-1)),n("button",{onClick:r[6]||(r[6]=e=>I.value="grid"),class:u(["p-2 rounded-md transition-colors","grid"===I.value?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"]),"aria-pressed":"grid"===I.value},r[26]||(r[26]=[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]),10,Xt),n("button",{onClick:r[7]||(r[7]=e=>I.value="list"),class:u(["p-2 rounded-md transition-colors","list"===I.value?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"]),"aria-pressed":"list"===I.value},r[27]||(r[27]=[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)]),10,Zt)])]),"grid"===I.value?(s(),t("div",Jt,[(s(!0),t(p,null,m(X.value,e=>(s(),C(se,{key:e.principal_id,principal:e,onClick:t=>ne(e),onCreateOpportunity:t=>ae(e),onLogInteraction:t=>ie(e),class:"cursor-pointer hover:shadow-md transition-shadow duration-200"},null,8,["principal","onClick","onCreateOpportunity","onLogInteraction"]))),128))])):(s(),t("div",Qt,[i(vt,{principals:X.value,loading:E.value,onPrincipalClick:ne,onCreateOpportunity:ae,onLogInteraction:ie,onSortChange:le},null,8,["principals","loading"])])),G.value>1?(s(),t("div",es,[n("div",ts," Showing "+l((B.value-1)*$.value+1)+" to "+l(Math.min(B.value*$.value,Y.value))+" of "+l(Y.value)+" principals ",1),n("div",ss,[n("button",{onClick:ce,disabled:1===B.value,class:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]"},r[29]||(r[29]=[n("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),c(" Previous ",-1)]),8,rs),n("span",os," Page "+l(B.value)+" of "+l(G.value),1),n("button",{onClick:de,disabled:B.value===G.value,class:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]"},r[30]||(r[30]=[c(" Next ",-1),n("svg",{class:"h-4 w-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,ns)])])):a("",!0)])):(s(),t("div",Nt,[r[25]||(r[25]=n("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),n("h3",Rt,l(K.value?"No principals match your search":"No principals found"),1),n("p",Dt,l(K.value?"Try adjusting your search terms or filters to find the principals you're looking for.":"Principals will appear here once they are created in the system."),1),n("div",Ht,[K.value?(s(),t("button",{key:0,onClick:oe,class:"inline-flex items-center justify-center px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[44px]"}," Clear All Filters ")):a("",!0),i(o,{to:"/organizations/new",class:"inline-flex items-center justify-center px-6 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-h-[44px]"},{default:w(()=>r[24]||(r[24]=[n("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),c(" Add New Organization ",-1)])),o:1,i:[24]})])]))])])}}}),[["__scopeId","data-v-9d810779"]]);export{as as default};
